<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" />
        <meta charset="utf-8" />
        <meta http-equiv="Cache-control" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>ACL Configuration</title>
        <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
        <!--style to display feedback button correctly in IE-->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- links to get the EDA styling to work -->
        <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
        <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
        <link href="../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png" />
        <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
        <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
        <script type="text/javascript" src="../Skins/Default/Scripts/TopicToolBar.js">
        </script>
    </head>
    <!-- Top Orange and Darkgrey header-->
    <!-- Div for EDA banner -->
    <div class="eda_banner">
        <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
    </div>
    <!-- end Div for EDA banner -->
    <div class="top-nav">
        <div class="main_list">
            <ul class="top-navlinks">
                <li><a href="https://solace.com/support/" target="_blank">Support</a>
                </li>
                <li><a href="https://solace.com/contact/" target="_blank">Contact Us</a>
                </li>
            </ul>
        </div>
        <div class="container-fluid">
            <div class="src-li">
                <div id="srchWrapTwo">
                    <form class="search" action="#">
                        <div class="search-bar search-bar-container needs-pie">
                            <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs" />
                            <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                                <div class="search-filter-content" id="sf-content">
                                    <ul>
                                        <li>
                                            <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="search-submit-wrapper" dir="ltr">
                                <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div><span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
            <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
        </div>
        <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
        <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
    </div>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../index.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                                        <div class="button-group-container-left">
                                            <button class="button needs-pie print-button" title="Print">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Print">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <div id="content">
                                        <div id="contentBody">
                                            <div class="row collapse">
                                                <div class="ContentRow" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                    <div>
                                                        <div class="nocontent" xmlns="">
                                                            <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                                            </div>
                                                        </div>
                                                        <div role="main" id="mc-main-content" xmlns="">
                                                            <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">ACL Configuration</h1>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Access Control Lists (ACLs) are used to manage whether clients may connect to Message VPNs, which topics clients are allowed to publish to, and which topics and share names clients are allowed to subscribe to in that Message VPN. Each of these access controls require a defined default action (allow or disallow connection, allow or disallow publishing to topics,  allow or disallow subscribing to topics, and allow or disallow subscribing to share names), and you can configure explicit exceptions to those default actions.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set up and use ACLs, you perform the following steps:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li><a href="#Create-ACL-Profile" class="MCXref xref">Creating ACL Profiles</a>
                                                                </li>
                                                                <li><a href="#Config-Client-Connect-Auth" class="MCXref xref">Configuring Client Connect Authorization</a>
                                                                </li>
                                                                <li><a href="#Config-Topics-May-Pub-To" class="MCXref xref">Configuring Topic Publish Permissions</a>
                                                                </li>
                                                                <li><a href="#Config-Topics-May-Sub-To" class="MCXref xref">Configuring Topic Subscribe Permissions</a>
                                                                </li>
                                                                <li><a href="#Configur" class="MCXref xref">Configuring Share Name Subscribe Permissions</a>
                                                                </li>
                                                                <li><a href="#Assign-ACLs-to-Usernames" class="MCXref xref">Assigning ACLs to Client Usernames</a>
                                                                </li>
                                                            </ul>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Create-ACL-Profile"></a>Creating ACL Profiles</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The first thing you need to do is create an ACL Profile.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To create a new ACL profile for a Message VPN, enter the following CONFIG command:       <pre class="Code" xml:space="preserve">solace(configure)# create acl-profile &lt;name&gt; message-vpn &lt;vpn-name&gt; [allow-client-connect] [allow-publish-topic] [allow-subscribe-topic] [disallow-subscribe-share-name]</pre></p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To edit the configuration parameters for an existing ACL profile on a Message VPN, enter the following CONFIG command:
<pre class="Code">solace(configure)# acl-profile &lt;name&gt; message-vpn &lt;vpn-name&gt;</pre></p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li><code>&lt;name&gt;</code> is the name of the ACL profile. The name can contain up to 32 alphanumeric characters (case-sensitive). The "_" character is also permitted. Names must be unique across all ACL profiles for a Message VPN, although the same name can be used in different Message VPNs.</li>
                                                                <li><code>&lt;vpn-name&gt;</code> is the name of the Message VPN that the ACL belongs to.</li>
                                                                <li><code>allow-client-connect</code> sets the default action to allow client connection attempts.</li>
                                                                <li><code>allow-publish-topic</code> sets the default action to allow the publishing of messages to topics.</li>
                                                                <li><code>allow-subscribe-topic</code> sets the default  action to allow clients to subscribe to topics.</li>
                                                                <li><code>disallow-subscribe-share-name</code>&#160;sets the default  action to disallow clients from subscribing to share names.</li>
                                                            </ul>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The <code>no</code> version of this command, <code>no acl-profile &lt;name&gt;</code>, deletes the ACL profile from the Message VPN.</p>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Config-Client-Connect-Auth"></a>Configuring Client Connect Authorization</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can use ACLs to control which clients may connect to a Message VPN.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set the default action for client connection attempts, enter the following CONFIG commands:
<pre class="Code">solace(configure/acl-profile)# client-connect<br />solace(configure/acl-profile/client-connect)# default-action {allow | disallow}</pre><p><u>Where:</u></p><ul><li><code>allow</code> sets the default action to allow client connection attempts.</li><li><code>disallow</code> sets the default action to disallow client connection attempts. This is the default value.</li></ul></p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set the exceptions to the default action for client connection attempts, enter the following CONFIG commands:
<pre class="Code">solace(configure/acl-profile)# client-connect<br />solace(configure/acl-profile/client-connect)# exception &lt;cidr-addr&gt;</pre><p><u>Where:</u></p><p><code>&lt;cidr-addr&gt;</code> is the IP address and network mask combination of the excepted client in Classless Inter-Domain Routing (CIDR) form: nnn.nnn.nnn.nnn/dd (where nnn is 0-255, dd is 1-32).</p><p>Changing the default client connect action, or removing clients from the exceptions list, does not immediately affect clients that already have an established connection to the Solace PubSub+ event broker. They remain connected.</p><p>An example of how to use these commands is shown in <a href="#Control-Which-Clients-Connect" class="MCXref xref">Controlling Which Clients Can Connect</a>.</p></p>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Config-Topics-May-Pub-To"></a>Configuring Topic Publish Permissions</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can use ACLs to control the topics to which clients are allowed to publish.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set whether the default action is to allow clients to publish to topics or not, enter the following CONFIG command:
<pre class="Code">solace(configure/acl-profile)# publish-topic
solace(configure/acl-profile/publish-topic)# default-action {allow | disallow}</pre><p><u>Where</u>:</p><ul><li><code>allow</code> sets the default action to allow the publishing of messages to topics.</li><li><code>disallow</code> sets the default action to disallow the publishing of messages to topics. This is the default value.</li></ul></p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">If you change the default action for an ACL profile, any existing topics listed as exceptions are maintained as exceptions, but their behavior becomes the opposite of what it was.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set exceptions to the default action for publishing topic access attempts, enter the following CONFIG command:
<pre class="Code">solace(configure/acl-profile)# publish-topic<br />solace(configure/acl-profile/publish-topic)# exceptions [smf | mqtt] list &lt;exception-list&gt;</pre><p><u>Where</u>:</p><ul><li><code>smf</code> indicates that the topic to be excepted uses Solace Messaging Format (SMF) topic syntax. By default, if neither <code>smf</code> or <code>mqtt</code> is explicitly entered, the topic will be an SMF topic exception. For information on topic syntax and considerations that should made for Solace PubSub+ to handle SMF and MQTT topics similarly, see <a href="../Messaging/Topic-Support-and-Syntax.htm" class="MCXref xref" data-mc-unresolved-link="import-link:a_topic_support_and_syntax_819845554_56063">Topic Support &amp; Syntax</a>.</li><li><code>mqtt</code> indicates that the topic to be excepted uses Message Queuing Telemetry Transport (MQTT) topic syntax.</li><li><code>&lt;exception-list&gt;</code> is a list of space-separated topics (in the form a/b/c) to be excepted from the default action. Each topic may be up to 250 characters. The listed topics should be constructed with the appropriate topic syntax (either SMF or MQTT topic syntax ); however, regardless of syntax, all exceptions apply to all clients,  independent of their wireline protocol, to which the ACL is assigned. Leading "!" characters (in the form !a/b/c), which are used to indicate subscription exceptions in queues, do not receive special handling and are treated as literal characters in ACL topic exception lists. For more information about subscription exceptions, see <a href="../Messaging/Guaranteed-Msg/System-Level-Subscription-Exception-Config.htm" class="MCXref xref">System-Level Subscription Exception Configuration</a>.</li></ul><p>The <code>no</code> version of this command, <code>no exceptions</code>, removes any given topic publish exceptions.</p><p>Published topics of the form <code>#P2P/v:*/&gt;</code>, which are used for clientsʼ Direct Request/Reply messaging, are exempt from publish-topic ACL checks.</p><p>An example of how to use these commands is shown in <a href="#Control-Which-Topics-Pub-Sub-To" class="MCXref xref">Controlling Which Topics a Client May Publish and Subscribe To</a>.</p><h3><a name="Sub-Variables"></a>Substitution Variables</h3><p>For Solace PubSub+ software event brokers version 8.2.0+ and Solace PubSub+ appliance versions 8.3.0+, the following substitution variables can be used in a topic level of an ACL topic exception: </p><ul><li><code>$client-id</code>—For this variable, the event broker will substitute the MQTT client-ID that the client provided when it established its session. <code>$client-id</code> only applies to MQTT sessions.</li><li><code>$client-username</code>—For this variable, the event broker will substitute the client username provided by the client or retrieved from the TLS client-certificate during client login.</li><li><code>$client-username-hash</code>—For this variable, the event broker will substitute the unique 8-byte long "client-username-hash" that the event broker generates for a client based on the client username the client provided or was retrieved from the TLS client-certificate during client login. This identifying client-username-hash is used in the #P2P topic (<code>#P2P/v:routerName/client-username-hash/clientname/&gt;</code>) that the event broker creates for the client so that it can use Direct Request/Reply messaging.</li></ul><p>For more information on how substitution values can be used in topic exceptions, see <a href="Granting-Clients-Access.htm#Using" class="MCXref xref">Using Substitution Variables in Topic Exceptions</a>.</p></p>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Pub-Queue"></a>Publishing to Queues</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To control publishing to queues, a topic pattern that represents specific queues may be listed. The topic pattern for a queue is <code>#P2P/QUE/&lt;queueName&gt;</code> and an example of how to use this to prevent publication to a queue is shown in <a href="#Control-Which-Queues-Pub-To" class="MCXref xref">Controlling Which Queues Clients May Publish To</a>.</p>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Config-Topics-May-Sub-To"></a>Configuring Topic Subscribe Permissions</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can use ACLs to control the topics to which clients are allowed to subscribe.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set whether the default action is to allow clients to subscribe to topics or not, enter the following CONFIG commands:
<pre class="Code">solace(configure/acl-profile)# subscribe-topic
solace(configure/acl-profile/subscribe-topic)# default-action {allow | disallow}</pre><p><u>Where</u>:</p><ul><li><code>allow</code> sets the default subscribe action to allow clients to subscribe to topics.<div class="Caution"><p>Using ACL profiles with a default subscribe action set to <code>allow</code> is not recommended when the goal is to restrict access to specific topics. This approach can result in unexpected behavior, particularly concerning wildcard handling (see <a href="Granting-Clients-Access.htm#Wildcard" class="MCXref xref">Wildcard Handling</a>). ACL profiles with a default subscribe action of <code>allow</code> are best suited for scenarios where there are no restrictions on the topics a client can subscribe to.</p></div></li><li><code>disallow</code> sets the default subscribe action to disallow clients from subscribing to topics. This is the default value.</li></ul><p>If you change the default action for an ACL profile, existing user-configured exceptions are maintained as exceptions, but their behavior becomes the opposite of what it was.</p><p class="Tip">If you want to ensure that snooping of #P2P topics that are used for Direct Request/Reply messaging cannot occur, you should set the subscribe-topic default-action to <code>disallow</code>. When set to <code>disallow</code>, clients will still be able to subscribe to their own #P2P topics because the event broker automatically adds an exception topic of the form <code>#P2P/v:routerName/$client-username-hash/&gt;</code>. If the subscribe-topic default-action is later changed to <code>allow</code>, this exception topic will be automatically removed. (Note that this auto-added topic is not visible through the Solace CLI.)</p></p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set any exceptions to the default action for topic subscriptions, enter the following CONFIG commands:
<pre class="Code">solace(configure/acl-profile)# subscribe-topic
solace(configure/acl-profile/subscribe-topic)# exceptions [smf | mqtt] list &lt;exception-list&gt;</pre><p><u>Where</u>:</p><ul><li><code>smf</code> indicates that the topic to be excepted is an SMF topic. If neither <code>smf</code> or <code>mqtt</code> is not explicitly entered, by default the topic will be an SMF topic exception. For information on topic syntax and considerations that should made for Solace PubSub+ to handle SMF and MQTT topics similarly, see <a href="../Messaging/Topic-Support-and-Syntax.htm" class="MCXref xref" data-mc-unresolved-link="import-link:a_topic_support_and_syntax_819845554_56063">Topic Support &amp; Syntax</a>.</li><li><code>mqtt</code> indicates that the topic to be excepted is an MQTT topic.</li><li><code>&lt;exception-list&gt;</code> is a list of space-separated topics (in the form <code>a/b/c</code>) to be excepted from the default action. Each topic may be up to 250 characters. The listed topics should be constructed with the appropriate topic syntax (either SMF or MQTT topic syntax); however, regardless of their syntax, all exceptions apply to all clients, independent of their wireline protocol, to which the ACL is assigned. Leading "!" characters (in the form <code>!a/b/c</code>), which are used to indicate subscription exceptions in queues, do not receive special handling and are treated as literal characters in ACL topic exception lists. For more information about subscription exceptions, see <a href="../Messaging/Guaranteed-Msg/System-Level-Subscription-Exception-Config.htm" class="MCXref xref">System-Level Subscription Exception Configuration</a>.</li></ul><p>The <code>no</code> version of this command, <code>no exceptions</code>, removes any given topic subscribe exceptions.</p><p>Subscriptions of the form <code>#P2P/v:*/&gt;</code> are subject to subscribe-topic ACL checks.</p><p>An example of how to use these commands is shown in <a href="#Control-Which-Topics-Pub-Sub-To" class="MCXref xref">Controlling Which Topics a Client May Publish and Subscribe To</a>.</p><h3><a name="Sub-Sub-Variables"></a>Substitution Variables</h3><p>For Solace PubSub+ software event brokers version 8.2.0+ and Solace PubSub+ appliance versions 8.3.0+, the following substitution variables can be used in a topic level of an ACL topic exception: </p><ul><li><code>$client-id</code>—For this variable, the event broker will substitute the MQTT client-ID that the client provided when it established its session. <code>$client-id</code> only applies to MQTT sessions.</li><li><code>$client-username</code>—For this variable, the event broker will substitute the client username provided by the client or retrieved from the TLS client-certificate during client login.</li><li><code>$client-username-hash</code>—For this variable, the event broker will substitute the unique 8-byte long "client-username-hash" that the event broker generates for a client based on the client username the client provided or was retrieved from the TLS client-certificate during client login. This identifying client-username-hash is used in the #P2P topic (<code>#P2P/v:routerName/client-username-hash/clientname/&gt;</code>) that the event broker creates for the client so that it can use Direct Request/Reply messaging.</li></ul><p>For more information on how substitution values can be used in topic exceptions, see <a href="Granting-Clients-Access.htm#Using" class="MCXref xref">Using Substitution Variables in Topic Exceptions</a>.</p></p>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Configur"></a>Configuring Share Name Subscribe Permissions</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can use ACLs to control the share names to which clients are allowed to subscribe. Share names in this case are the identifiers associated with shared subscriptions. For more information, refer to <a href="../Messaging/Direct-Msg/Direct-Messages.htm#Syntax" class="MCXref xref">Syntax of Shared Subscriptions</a>.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set whether the default action is to allow clients to subscribe to share names or not, enter the following CONFIG commands:
<pre class="Code">solace(configure/acl-profile)# subscribe-share-name
solace(configure/acl-profile/subscribe-share-name)# default-action {allow | disallow}</pre><p><u>Where</u>:</p><ul><li><code>allow</code> sets the default subscribe action to allow clients to subscribe to share names. This is the default value.</li><li><code>disallow</code> sets the default subscribe action to disallow clients from subscribing to share names. </li></ul><p>If you change the default action for an ACL profile, existing user-configured exceptions are maintained as exceptions, but their behavior becomes the opposite of what it was.</p><p>To set any exceptions to the default action for share name subscriptions, enter the following CONFIG commands:</p><pre class="Code">solace(configure/acl-profile)# subscribe-share-name
solace(configure/acl-profile/subscribe-share-name)# exceptions [smf | mqtt] list &lt;exception-list&gt;</pre><p><u>Where</u>:</p><ul><li><code>smf</code> indicates that the share name to be excepted is an SMF share name. If neither <code>smf</code> or <code>mqtt</code> is not explicitly entered, by default the share name will be an SMF share name exception.</li><li><code>mqtt</code> indicates that the share name to be excepted is an MQTT share name.</li><li><code>&lt;exception-list&gt;</code> is a list of space-separated share names  to be excepted from the default action. Each share name may be up to 250 characters. The listed share names should be constructed with the appropriate  syntax (either SMF or MQTT  syntax).</li></ul></p>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Assign-ACLs-to-Usernames"></a>Assigning ACLs to Client Usernames</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To assign an ACL profile to a client username account, enter the following CONFIG commands:</p><pre class="Code" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;
solace(configure/client-username)# acl-profile &lt;name&gt;</pre>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li><code>&lt;username&gt;</code> is the username of the client username account</li>
                                                                <li><code>&lt;vpn-name&gt;</code> is the name of the Message VPN the client username belongs to</li>
                                                                <li><code>&lt;name&gt;</code> is the name of the ACL profile</li>
                                                            </ul>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The <code>no</code> version of this command, <code>no acl-profile</code>, resets the assigned profile for the client username account back to the profile named <code>default</code>.</p>
                                                            <p class="Note" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">A client username must be shutdown before an ACL profile can be assigned to it.
        </p>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="ACL-Config-Exs"></a>ACL Configuration Examples</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">This section shows the basic procedural steps that are required configure ACLs on an event broker. The exact steps required will vary depending on your network conditions and preferred configuration.</p>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Control-Which-Clients-Connect"></a>Controlling Which Clients Can Connect</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following example configures a client-connect ACL profile that disallows clients on IP subnet 10.10.0.0/16 from connecting to the event broker, and allows clients from other IP subnets to connect.</p>
                                                            <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li value="1">Create an ACL profile:</li><pre class="Code">solace(configure)# create acl-profile analyst_group_d message-vpn blue<br />solace(configure/acl-profile)#</pre>
                                                                <li value="2">Set the default action for client connection access attempts:                
			<pre class="Code">solace(configure/acl-profile)# client-connect<br />solace(configure/acl-profile/client-connect)# default-action allow</pre></li>
                                                                <li value="3">Set exceptions to the default action for client connection access attempts:
                <pre class="Code">solace(configure/acl-profile/client-connect)# default-action exception 10.10.0.0/16</pre></li>
                                                                <li value="4">Assign the ACL profile to a given client username:
            <pre class="Code">solace(configure)# client-username joe message-vpn blue<br />solace(configure/client-username)# acl-profile analyst_group_d</pre></li>
                                                            </ol>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Control-Which-Topics-Pub-Sub-To"></a>Controlling Which Topics a Client May Publish and Subscribe To</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following example configures a topic-access ACL profile so that:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li>Clients cannot publish to the <code>animals/domestic/cats</code> topic (all other topics are allowed)</li>
                                                                <li>Clients cannot use a subscription to the <code>animals/domestic/dogs</code> topic (all other topics are allowed)</li>
                                                            </ul>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">It then assigns the configured ACL profile to a particular client username.</p>
                                                            <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li value="1">Set the default action for publishing topic attempts:</li><pre class="Code">solace(configure)# acl-profile analyst_group_d message-vpn blue<br />solace(configure/acl-profile)# publish-topic<br />solace(configure/acl-profile/publish-topic)# default-action allow</pre>
                                                                <li value="2">Set exceptions to the default action for publishing topic attempts:</li><pre class="Code">solace(configure/acl-profile/publish-topic)# exception animals/domestic/cats</pre>
                                                                <li value="3">Set the default action for topic subscription attempts:</li><pre class="Code">solace(configure/acl-profile)# subscribe-topic<br />solace(configure/acl-profile/subscribe-topic)# default-action allow</pre>
                                                                <li value="4">Set exceptions to the default action for topic subscription attempts:</li><pre class="Code">solace(configure/acl-profile/subscribe-topic)# exception animals/domestic/dogs</pre>
                                                                <li value="5">Verify that the ACL profile is correct:</li><pre class="Code">solace&gt; show acl-profile analyst_group_d message-vpn blue

                                                       Allowed/#Exceptions
ACL Profile              Message VPN             Conn    Pub     Sub     Share
------------------------ ----------------------- ------- ------- ------- -------
analyst_group_d          blue                    y/1     y/1     y/1     y/0</pre>
                                                                <li value="6">Assign the ACL profile to a client username:</li><pre class="Code">solace(configure)# client-username fred message-vpn blue<br />solace(configure/client-username)# acl-profile analyst_group_d</pre>
                                                            </ol>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Control-Which-Queues-Pub-To"></a>Controlling Which Queues Clients May Publish To</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following example configures an ACL profile so that clients cannot publish to the queue <code>myQueue</code> (all other topics are allowed). The ACL profile is then assigned to a particular client username.</p>
                                                            <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li value="1">Set the default action for publishing topic attempts:<pre class="Code">solace&gt; enable<br />solace# configure<br />solace(configure)# acl-profile queuePublishAcl message-vpn blue<br />solace(configure/acl-profile)# publish-topic<br />solace(configure/acl-profile/publish-topic)# default-action allow</pre></li>
                                                                <li value="2">Set exceptions to the default action for publishing topic attempts:<pre class="Code">solace(configure/acl-profile/publish-topic)# exception #P2P/QUE/myQueue</pre></li>
                                                                <li value="3">Verify that the ACL profile is correct:
<pre class="Code">solace(configure/acl-profile/publish-topic)# show acl-profile queuePublishAcl message-vpn blue

                                                       Allowed/#Exceptions
ACL Profile              Message VPN             Conn    Pub     Sub     Share
------------------------ ----------------------- ------- ------- ------- -------
queuePublishAcl          blue                    y/0     y/1     y/0     y/0</pre></li>
                                                                <li value="4">Assign the ACL profile to a client username:
<pre class="Code">solace(configure)# client-username fred message-vpn blue
solace(configure/client-username)# acl-profile queuePublishAcl</pre></li>
                                                            </ol>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="View-ACL-Profiles"></a>Viewing ACL Profiles</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To view the current ACL profile configurations, enter the following show command:</p><pre class="Code" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace&gt; show acl-profile &lt;name&gt; [message-vpn &lt;vpn-name&gt;] [{detail [[client-connect] [publish-topic] [subscribe-topic] [subscribe-share-name]]} | {users}]</pre>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li><code>&lt;name&gt;</code> is the name of the ACL profile. Entering the wildcard character * for the name displays all ACL profiles.</li>
                                                                <li><code>&lt;vpn-name&gt;</code> is the name of the Message VPN to which the ACL profile belongs to.</li>
                                                                <li><code>detail</code> specifies to show detailed ACL profile information.</li>
                                                                <li><code>client-connect</code> specifies to show ACL profile information relating only to client connection ACLs.</li>
                                                                <li><code>publish-topic</code> specifies to show ACL profile information relating only to topic publishing ACLs.</li>
                                                                <li><code>subscribe-topic</code> specifies to show ACL profile information relating only to topic subscription ACLs.</li>
                                                                <li><code>subscribe-share-name</code> specifies to show ACL profile information relating only to share subscription ACLs. </li>
                                                            </ul>
                                                            <div class="MCDropDown MCDropDown_Closed dropDown" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open" />Example:</a></span>
                                                                <div class="MCDropDownBody dropDownBody"><pre class="Code">solace&gt; show acl-profile *

                                                       Allowed/#Exceptions
ACL Profile              Message VPN             Conn    Pub     Sub     Share
------------------------ ----------------------- ------- ------- ------- -------
#acl-profile             default                 y/0     y/0     y/0     y/0
default                  default                 y/0     y/0     y/0     y/0</pre>
                                                                </div>
                                                            </div>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Viewing-ACL-Logs"></a>Viewing ACL Logs</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To view the ACL log for the last 1,000 most recent service denials for client connections, topic publishing topics, or topic subscriptions, enter the following show command:</p><pre class="Code" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace&gt; show log acl [client-connect | publish-topic | subscribe-topic] [client-username &lt;username&gt;] [message-vpn &lt;vpn-name&gt;] [wide]</pre>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li><code>client-connect</code> specifies to show service denial logs relating only to client connection ACLs</li>
                                                                <li><code>publish-topic</code> specifies to show service denial logs relating only to topic publishing ACLs</li>
                                                                <li><code>subscribe-topic</code> specifies to show service denial logs relating only to topic subscription ACLs</li>
                                                                <li><code>&lt;username&gt;</code> is the username of an existing client username account.</li>
                                                                <li><code>&lt;vpn-name&gt;</code> is the name of an existing Message VPN to which the client username belongs to </li>
                                                                <li><code>wide </code>specifies to show ACL log information in a wide screen computer display format (300+ character width)</li>
                                                            </ul>
                                                            <p class="Note" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Entering no command parameters displays service denial log information for all ACLs.</p>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Clearing-ACL-Logs"></a>Clearing ACL Logs</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To clear the ACL log either globally, or individually for client connections, topic publishing, or topic subscriptions, enter the following Privileged EXEC command:</p><pre class="Code" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace# clear log acl [client-connect | publish-topic | subscribe-topic]</pre>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li><code>client-connect</code> specifies to clear service denial logs relating only to client connection ACLs</li>
                                                                <li><code>publish-topic</code> specifies to clear service denial logs relating only to topic publishing ACLs</li>
                                                                <li><code>subscribe-topic</code> specifies to clear service denial logs relating only to topic subscription ACLs</li>
                                                            </ul>
                                                            <p class="Note" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Entering no command parameters clears service denial log information for all ACLs.</p>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="ACL-Topic-Match"></a>ACL Topic Matching Modes</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Solace PubSub+ uses a special, internal <code>#P2P/</code> prefix for some topic subscriptions. For example, a Solace messaging API automatically generates a unique topic subscription for each client, which enables messages to be sent directly to that client (for example, in request/reply scenarios). This client topic subscription is <code>#P2P/v:&lt;router-name&gt;/&lt;client-name&gt;/</code> or <code>#P2P/v:&lt;router-name&gt;/clientUsernameHash/&lt;client-name&gt;/</code>. Solace PubSub+ also uses the <code>#P2P/</code> prefix for non-durable topic endpoints and queues.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To ensure that these special topic subscriptions are always available, a Solace event broker exempts these special subscriptions when doing ACL enforcement. How this is done depends on the selected ACL topic matching mode. The following modes are available:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li><u>Enforce for Queues</u>: Publish or subscribe ACL rules that allow clients to publish or subscribe to any topics starting with #<code>P2P/v:*/</code> are exempt from ACL checking and are not permitted to be used as publish or subscribe exceptions. This is the default ACL topic matching rule introduced with software version 7.1. This mode is always used for Solace PubSub+ software event brokers.</li>
                                                                <li><u>Legacy</u>: Publish or subscribe ACL rules that allow client to publish or subscribe to any topics starting with <code>#P2P</code> are exempt from ACL checking and cannot be used as publish or subscribe exceptions. This ACL topic matching rule was used prior to software version 7.1.</li>
                                                            </ul>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Solace recommends that you use the Enforce for Queues ACL topic matching mode because it provides greater control over which topics clients may not publish or subscribe to. For example, temporary queues and topic endpoints are also automatically assigned topics that use a <code>#P2P/</code> prefix. However with the legacy ACL topic matching mode, ACL publish or subscribe rules could not be created to prevent clients from publishing or subscribing to those special topics.</p>
                                                            <p class="Note" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Solace PubSub+ software event brokers can only use the Enforce for Queues ACL topic matching mode.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">If you switch your event broker from Enforce for Queues ACL topic matching mode to the Legacy mode, some <code>#P2P</code> topics that previously bypassed ACL enforcement may be blocked. For these topics, you can add the appropriate topic exceptions to the ACL profile used by any affected clients (refer to <a href="#Switch-To-Enforce" class="MCXref xref">Switching to Enforce for Queues Topic Matching Mode</a>). However, if necessary, you can switch the base ACL topic matching mode to the less-restrictive Legacy ACL topic matching mode (refer to <a href="#Set-ACL-Topic-Match" class="MCXref xref">Setting an ACL Topic Matching Mode</a>).</p>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Switch-To-Enforce"></a>Switching to Enforce for Queues Topic Matching Mode</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When an appliance is switched from the Legacy topic matching mode to the more restrictive Enforce for Queues ACL topic matching mode, it is possible that some topics that previously bypassed ACL enforcement will be blocked if the clients are using publisher or subscriber ACLs. The type of clients that may be affected, and the ACL configuration changes that are required to restore normal operations, are listed below:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li><u>Client applications publishing to durable queues by name</u>
                                                                    <p>Client applications that are publishing to durable queues by name that use a client username with restrictive publisher ACLs may be blocked. If this occurs, configure the publisher ACLs for the client usernames they use to allow the following topic:<ul><li>for a particular queue: <code>#P2P/QUE/&lt;queue_name&gt;</code>, OR</li><li>for all queues: <code>#P2P/QUE/&gt;</code></li></ul></p>
                                                                </li>
                                                                <li><u>Clients using temporary queues or topics</u>
                                                                    <p>Clients may be blocked from using temporary queues or topics if they use publisher or subscriber ACLs. In this case, configure both publisher and subscriber ACLs to allow the following topics:<ul><li style="font-family: Courier;font-weight: normal;font-style: normal;letter-spacing: 0em;text-decoration: none;"><code>#P2P/QTMP/&gt;</code></li><li style="font-family: Courier;font-weight: normal;font-style: normal;letter-spacing: 0em;text-decoration: none;"><code>#P2P/TTMP/&gt;</code></li></ul></p>
                                                                </li>
                                                                <li><u>Client applications performing cache requests</u>
                                                                    <p>Client applications that making cache requests that use a client username with restrictive publisher ACLs may no longer be able to send cache requests to PubSub+ Cache. If this occurs, configure the publisher ACLs for the client usernames they use to allow the following topic:<ul><li style="font-family: Courier;font-weight: normal;font-style: normal;letter-spacing: 0em;text-decoration: none;"><code>#P2P/CACHEINST/&gt;</code></li></ul></p>
                                                                </li>
                                                                <li><u>PubSub+ Cache Instances operational state</u>
                                                                    <p>A PubSub+ Cache Instance uses <code>#P2P</code> topics to communicate with the event broker. However, if the PubSub+ Cache Instance uses a client username with restrictive subscriber or publisher ACLs, the PubSub+ Cache Instance may not be able to communicate with the event broker, and will remain in the Not Available operational state. In this case, ACLs should be configured to allow the following topics:<ul><li>publisher ACLs: <code>#P2P/*/#client/CACHEMGR</code></li><li>subscriber ACLs: <code>#P2P/CACHEINST/&gt;</code></li></ul></p>
                                                                </li>
                                                                <li><u>Clients sending SEMP requests over the message bus using a legacy format</u>
                                                                    <p>If client applications are sending SEMP requests over the message bus using the legacy format for show and clear commands, and the client has a restrictive publisher ACL, these requests may no longer be allowed. You should either reconfigure the client application to use the new format or configure their publisher ACLs to allow publishing to the following topic:<ul><li style="font-family: Courier;font-weight: normal;font-style: normal;letter-spacing: 0em;text-decoration: none;"><code>#P2P/*/#client/&gt;</code></li></ul></p>
                                                                    <p>For more information on legacy show and clear SEMP formats, refer to <a href="../Admin/SEMP/Using-Legacy-SEMP.htm" class="MCXref xref" data-mc-unresolved-link="import-link:using_semp_to_manage_and_monitor_routers_4217350357_38232">Legacy SEMP</a>.</p>
                                                                </li>
                                                                <li><u>Direct Messaging clients listening in on queues by name</u>
                                                                    <p>Clients with restrictive subscriber ACLs that want to "snoop" named queues may be blocked from subscribing. In this case, configure the subscriber ACLs to allow the following topic:<ul><li>for a particular queue: <code>#P2P/QUE/&lt;queue_name&gt;</code>, OR</li><li>for all queues: <code>#P2P/QUE/&gt;</code></li></ul></p>
                                                                </li>
                                                            </ul>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Set-ACL-Topic-Match"></a>Setting an ACL Topic Matching Mode</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure an ACL topic matching mode for an appliance, enter the following CONFIG commands:</p><pre class="Code" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure)# hardware topic-routing
solace(configure/hardware/topic-routing)# acl-topic-matching-mode {legacy | enforce-for-queues}</pre>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><code>legacy</code> specifies to ignore publish or subscribe ACL rules for topics starting with <code>#P2P/</code>. This ACL topic matching rule was used prior to software version 7.1.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><code>enforce-for-queues</code> specifies to ignore publish or subscribe ACL rules for topics starting with #<code>P2P/v:*/</code>. This is the default ACL topic matching rule introduced with software version 7.1.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The <code>no</code> version of this command, <code>no acl-topic-matching-mode</code>, resets the base ACL topic matching rule to the default value of enforce-for-queues.</p>
                                                            <p class="Note" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">This command is only available for Solace PubSub+ appliances. Solace PubSub+ software event brokers only use the Enforce for Queues ACL topic matching mode.
        </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="no-print">
                                            <div><a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                                            </div>
                                        </div>
                                        <footer class="my-4 pt-4 text-center no-print">
                                            <div class="footer-txt text-center no-print">
                                                <ul class="list-inline ">
                                                    <li class="list-inline-item text-muted"><a href="../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                                                    <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                                                    <li class="list-inline-item text-muted" style="font-size:13px;"> ©  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                                                </ul>
                                            </div>
                                            <div class="footer-icons">
                                                <ul class="list-inline">
                                                    <li class="list-inline-item"><a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon"><img src="../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon"><img src="../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon"><img src="../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon"><img src="../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon"><img src="../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon"><img src="../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="footer_link_menu">
                                                <ul class="link_list">
                                                    <li class="link_list_item"><a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </footer>
                                    </div>
                                    <!-- JIRA issue collector -->
                                    <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                                    <script src="../Resources/Scripts/thumbnail.js">
                                    </script>
                                    <!-- Script for Launching offsite links in new tab -->
                                    <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>