<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=Product-Names.cloud_product_titlecase%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Installing PubSub+&#xA0;Cloud in Amazon Elastic Kubernetes Service (EKS)</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" data-mc-stylesheet-type="table"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a xmlns="" name="aanchor316"/><MadCap:concept term="Cloud"/>Installing <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput"><span class="mc-variable Product-Names.cloud_product_titlecase variable">PubSub+&#xA0;Cloud</span></MadCap:conditionalText> in Amazon Elastic Kubernetes Service (EKS)</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Amazon Elastic Kubernetes Service (Amazon EKS) gives you (the customer) the flexibility to start, run, and scale Kubernetes applications in the AWS cloud or on-premises. Amazon EKS helps you provide highly-available and secure clusters and automates key tasks such as patching, node provisioning, and updates. For more information about EKS, see the
                <a href="https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html" target="_blank" class="link-offsite">Amazon EKS</a>&#xA0;documentation.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">There are a number of environment-specific steps that you must perform to install <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput"><span class="mc-variable Product-Names.cloud_product_long variable">PubSub+ Cloud</span></MadCap:conditionalText>. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">Before you
            perform the environment-specific steps described below, ensure that you review and fulfill the general requirements
listed in <a href="prerequisites-k8s.htm" class="MCXref xref">Common Kubernetes Prerequisites</a>.</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <p><span class="mc-variable Variables.CompanyName variable">Solace</span> does not support <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span> integration with service meshes. Service meshes include Istio, Cilium, Linkerd, Consul, and others. If deploying to a cluster with a service mesh, you must:</p>
                                <ul>
                                  <li>exclude the <code>target-namespace</code> used by <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span> services from the service mesh.</li>
                                  <li>set up connectivity to <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span> in the cluster using LoadBalancer or NodePort. See <a href="deployment-exposecluster-k8s.htm" target="_blank" class="MCXref xref">Exposing Event Broker Services to External Traffic</a> for more information.</li>
                                </ul>
                              </div>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Create  a Kubernetes cluster. For customer-owned deployments, you are  responsible for the set up of the Kubernetes cluster and the maintenance and operation of the cluster. The following information can help you to understand the requirements of that Kubernetes cluster that you create:<ul><li>The Kubernetes cluster must fulfill the <a href="#amazon-eks-prerequisites" class="MCXref xref">Amazon EKS&#xA0;Prerequisites</a></li><li>Review and choose from various <a href="#amazon-eks-considerations" class="link-internal">considerations to deploy your EKS&#xA0;cluster</a>. </li><li> One way to create and  understand the requirements for the Kubernetes&#xA0;EKS&#xA0;cluster is to use the  examples (Terraform  module and deployment scripts) available from  <span class="mc-variable Variables.CompanyName variable">Solace</span>.</li></ul></li>
                                <p class="Note"><span class="mc-variable Variables.CompanyName variable" data-mc-conditions="SAP.SapHideFromOutput">Solace</span> provide<MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput">s</MadCap:conditionalText> reference Terraform projects for deploying a Kubernetes cluster to AKS, EKS, and GKE. These Terraform projects have the recommended configuration settings, such as worker node sizes, resource configurations, taints, and labels optimized to install <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span>. <br/><br/>You can download the reference Terraform projects from <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput">our</MadCap:conditionalText> GitHub repository: <a href="https://github.com/SolaceLabs/customer-controlled-region-reference-architectures?tab=readme-ov-file" target="_blank" class="link-offsite">https://github.com/SolaceLabs/customer-controlled-region-reference-architectures</a><br/><br/>Beware that all sample scripts, Terraform modules, and examples are provided as-is. You can modify the files as required and are responsible for maintaining the modified files for your Kubernetes cluster.</p>
                              </ol>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="amazon-eks-prerequisites"/>Amazon EKS&#xA0;Prerequisites</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following are the technical prerequisites for an Amazon EKS&#xA0;deployment to deploy <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s:</p>
                              <dl xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <dt>VPC&#xA0;Security Group</dt>
                                <dd>Before you begin, you must <a href="https://console.solace.cloud/support" target="_blank" class="link-offsite"> open an AWS&#xA0;support ticket </a>and request an increase to the Rules per
                VPC&#xA0;Security Group to 200 for the region you intend to deploy your EKS. This increase is required for <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s to support the default protocols, which are as follows:</dd>
                                <ul>
                                  <li>SSH</li>
                                  <li>WEB-messaging</li>
                                  <li>SEMP </li>
                                  <li>AMQP TLS</li>
                                  <li>MQTT web tls</li>
                                  <li>MQTT TLS</li>
                                  <li>REST</li>
                                  <li>SMF/TLS</li>
                                  <li>Load Balancer</li>
                                </ul>
                              </dl>
                              <dl xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <dt>Permissions</dt>
                                <dd>An AWS account with the following permissions. These permissions are
            required only by the individual when deployment is done using a Terraform module:</dd>
                                <ul>
                                  <li>All the permissions that
                        are required to create and manage the EKS&#xA0;cluster (<code>eksClusterRole</code>).</li>
                                  <li>Permission to
                        create IAM&#xA0;roles and IAM&#xA0;policies in the EKS cluster. These permissions are required by the
                        Terraform module. The example module creates these IAM roles and policies that are used by the EKS
                        cluster, and the following permissions to create and manage resources in the EKS cluster:<dl><dt>IAM&#xA0;Role</dt><dd>Gives permissions to the following:<ul><li>EKS&#xA0;cluster control plane</li><li>EKS cluster worker nodes</li><li>EKS Load balancer controller</li><li>EKS auto-scaler</li></ul></dd><dt>IAM Policy</dt><dd>Creates a set of permissions that the is required by the following in the deployment:<ul><li>EKS load balancer controller (for more information, see the <a href="https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.2.0/docs/install/iam_policy.json" target="_blank" class="link-offsite">Amazon load balancer controller installation document</a>)</li><li>Auto-scaler (for more information about creating this policy, see <a href="https://docs.aws.amazon.com/eks/latest/userguide/cluster-autoscaler.html#ca-deploy" class="link-offsite" target="_blank">Cluster Autoscaler in the Amazon documentation</a>)</li></ul></dd><dt>All EC2 resources</dt><dd>The Kubernetes and Terraform modules require this permission to access  tags and the metadata of resources. 
                                      The autoscaler and Load Balancer provisioning look at what security group each instance has, and modifies the security groups to add rules for the load balancer services.
								   </dd><dt>VPC</dt><dd>The Terraform module requires this permission to create the VPC. The Kubernetes module
also requires this permission to scan VPC and subnets to retrieve networking parameters.</dd><dt>EBS</dt><dd>Permission is required for Kubernetes dynamic PVCS that require access to EBS in order to
dynamically create values and attach on the correct host. The host also requires EC2 access as described above.</dd><dt>Security Groups</dt><dd>The Kubernetes module requires this permission to create security groups. The load balancer services also requires rules added as well.</dd><dt>Routing tables</dt><dd>The Terraform module requires this permission  to create routing tables.</dd><dt>Internet Gateways</dt><dd>Terraform module requires this permission to create an Internet gateway.</dd><dt>Elastic IPs</dt><dd>The Terraform module requires this permission to attach Elastic IP addresses (EIPs) to the NAT gateway.</dd><dt>NAT Gateways</dt><dd>The Terraform module requires this permission to create the NAT gateway and attach EIPs to the NAT gateway.</dd><dt>OIDC Provider</dt><dd>The Terraform module requires permission to create an OIDC provider that will be used to authenticate Kubernetes modules against IAM&#xA0;roles. The Auto-scaler and AWS&#xA0;Load Balancer Controller are two of the Kubernetes modules that use OIDC&#xA0;to authenticate the IAM&#xA0;role.</dd></dl></li>
                                </ul>
                                <ul>
                                  <dt>Elastic  Load Balancers</dt>
                                  <dt>
                                    <dd> Permission is required for the Kubernetes module to create ELBs for the Load Balancer services. The Load Balancer services requires rules that are added in the Security Groups mentioned below.
Additional permissions required by the AWS Load Balancer Controller and must be updated to match those specified at <a href="https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.2.0/docs/install/iam_policy.json" target="_blank" class="link-offsite">https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.2.0/docs/install/iam_policy.json</a>.		                       </dd>
                                  </dt>
                                </ul>
                                <dt>Networking</dt>
                                <dd>You must create an Elastic IP&#xA0;address (EIP) for each NAT&#xA0;Gateway that you intend to use with the following considerations:<ul><li>The EIPs for the NAT&#xA0;gateways must be created upfront.</li><li><span class="mc-variable Variables.CompanyName variable">Solace</span><b>recommends  two EIPs</b> are created. A minimum of one EIP allocation ID is required. </li></ul></dd>
                              </dl>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="amazon-eks-considerations"/>Considerations for Deploying <span class="mc-variable Product-Names.cloud_product_titlecase variable">PubSub+&#xA0;Cloud</span> on an Amazon EKS Cluster</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You (the customer)&#xA0;should consider the following limitations and recommendations regarding your Amazon EKS cluster for a private data center deployment of <span class="mc-variable Product-Names.cloud_product_firstuse variable">PubSub+&#xA0;Cloud</span>:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>
                                  <p>A minimum size of <code>/24</code> is required for an EKS&#xA0;cluster that's dedicated to <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s. A larger size is required if the cluster contains other services. For more information, see <a href="#ip-range-vpc-size" class="MCXref xref">IP&#xA0;Range</a>.</p>
                                </li>
                                <li><span class="mc-variable Variables.CompanyName variable">Solace</span> recommends that you have   <b>two NAT&#xA0;Gateways and two EIPs for redundancy</b>. You can
                choose to use one NAT&#xA0;Gateway with one EIP with the consideration that all <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>                features [e.g., VPN&#xA0;bridges, Dynamic Message Routing (DMR), Disaster Recovery (DR), REST&#xA0;Destination Points (RDP)]&#xA0;that rely on external connections will fail to function if
                the zone of the NAT&#xA0;Gateways fails.</li>
                                <li><span class="mc-variable Variables.CompanyName variable">Solace</span> recommends that you  <b>have a least two Bastion hosts</b>, and that these hosts are spread out evenly over the three Availability zones. This recommendation allows you  to remotely access the deployment should a zone fail. It's important to note that remote access to your deployment if a zone fails is not a requirement; you can choose to use the minimum of one Bastion host instead.</li>
                              </ul>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="deployments-china"/>Considerations for Deployments in China Regions</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Additional considerations are required if the private region you deploy to is within China.</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>You must have a separate Amazon Web Services (China) Account, which is a set of credentials that are distinct and separate from the Amazon Web Services Global Accounts. To register an account, go to <a href="http://www.amazonaws.cn/" target="_blank" class="link-offsite">http://www.amazonaws.cn</a>.</li>
                                <li>
                                  <p><span class="mc-variable Product-Names.customer-controlled_region variable">Customer-Controlled Region</span>s in China require that <a href="https://developers.cloudflare.com/china-network/concepts/icp/" class="link-offsite">you provide a custom domain name registered in China</a> (for example, <code>*.mycompany.cn</code>) with certificates issued for that domain. Event broker services are accessed using the custom domain name rather than <code>*.messaging.solace.cloud</code>. For more information, see <a href="deployments-restricted-regions-china.htm" class="MCXref xref">Deployments in China</a>.</p>
                                </li>
                                <li>
                                  <p>Instead of the GCP&#xA0;registry, you must use the Azure China registry. The Azure China registry uses a different secret that's required when you later deploy the <span class="mc-variable Product-Names.cloud_agent_short variable">Mission Control Agent</span>. For example, run the following command where the <code>&lt;username&gt;</code> and <code>&lt;password&gt;</code> is provided by <span class="mc-variable Variables.CompanyName variable">Solace</span>.</p>
                                  <pre xml:space="preserve">kubectl create secret docker-registry cn-reg-secret --namespace kube-system \ <br/>--docker-server=solacecloud.azurecr.cn --docker-username=&lt;username&gt;  --docker-password=&lt;password&gt;</pre>
                                </li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">All other EKS&#xA0;clusters specifications are the same as described in <a href="#eks-cluster-specifications" class="MCXref xref">EKS&#xA0;Cluster Specifications</a>.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="eks-cluster-specifications"/>EKS&#xA0;Cluster Specifications</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Before you (the customer)&#xA0;install the <span class="mc-variable Product-Names.cloud_agent_short variable">Mission Control Agent</span>, you must configure the EKS&#xA0;cluster with the technical specifications listed in the following sections:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>
                                  <a href="#node-groups" class="MCXref xref">Node Groups </a>
                                </li>
                                <li>
                                  <a href="#eks-instance-type" class="MCXref xref">Instance Type Requirements</a>
                                </li>
                                <li>
                                  <a href="#bastion-host" class="MCXref xref">Bastion Host</a>
                                </li>
                                <li>
                                  <a href="#eks_storage_class" class="MCXref xref">Storage Class</a>
                                </li>
                                <li>
                                  <a href="#networking" class="MCXref xref">Networking</a>
                                </li>
                                <li>
                                  <a href="#nat" class="MCXref xref">NAT Gateway</a>
                                </li>
                                <li>
                                  <a href="#load-balancer" class="MCXref xref">Load Balancer</a>
                                </li>
                                <li>
                                  <a href="#ip-range-vpc-size" class="MCXref xref">IP&#xA0;Range</a>
                                </li>
                                <li>
                                  <a href="#Autoscaling" class="MCXref xref">Autoscaling</a>
                                </li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For more detailed information about using Amazon EKS, see the
            <a href="https://docs.aws.amazon.com/eks/latest/userguide/what-is-eks.html" target="_blank" class="link-offsite" style="font-style: italic;">User&#xA0;Guide</a>
            on the Amazon EKS&#xA0;documentation site.</p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="node-groups"/>Node Groups </h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The Kubernetes cluster autoscaler must use two node groups. The nodegroups can be configured to start from zero instances, which means that it has a full set of node groups for each scaling tier without requiring that instances run in each. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <div class="thumbnail-container">
                                  <a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/Cloud-Deployment-Guides/eks-arch-v2.png" data-mc-popup-alt="">
                                    <img class="MCPopupThumbnail img imgsolacethumbnail" data-mc-width="679" data-mc-height="342" src="../../Resources/Images/Cloud-Deployment-Guides/eks-arch-v2_thumb_500_0.png" alt="" tabindex=""/>
                                  </a>
                                </div>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The node groups must be configured to start at 0 . Hints should be provided to the autoscaler as to which <a href="k8s_labels_taints.htm#top" class="link-internal">labels and taints</a> are set on the worker nodes by using stags on the auto-scaling group (ASG). There is no mechanism available to tag the ASG when you create the node groups, but can be accomplished as described in <a href="https://github.com/aws/containers-roadmap/issues/724" target="_blank" class="link-offsite">Managed Nodes Scale to Zero</a> and <a href="https://github.com/kubernetes/autoscaler/issues/3802" target="_blank" class="link-offsite">Cluster Autoscaler does not start new nodes when Taints and NodeSelector are used in EKS</a>.</p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="eks-instance-type"/>Instance Type Requirements</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Because of the additional resources required to run Kubernetes, the instance types that are required for some of the scaling tiers are larger than their instance-based cousins. the following are the instance size type requirements for an EKS. For details about the core and RAM&#xA0;requirements for each scaling tier, see <a href="resource-requirements-k8s.htm" class="MCXref xref">Resource Requirements for Kubernetes  and Default Port Configuration</a>.</p>
                              <table xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <thead>
                                  <tr class="TableStyle-Table_Num-Head-Header1">
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Scaling Tier</th>
                                    <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Instance Type Required</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Monitor</td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1">T3.medium</td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput">Developer</MadCap:conditionalText>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1">R5.large</td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <span class="mc-variable Product-Names.class_250 variable">Enterprise 250</span>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1">R5.large</td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
                                      <span class="mc-variable Product-Names.class_1k variable">Enterprise 1K</span>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyD-Column1-Body1">R5.large</td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <span class="mc-variable Product-Names.class_5k variable">Enterprise 5K</span>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1">R5.xlarge</td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <span class="mc-variable Product-Names.class_10k variable">Enterprise 10K</span>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1">R5.xlarge</td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <span class="mc-variable Product-Names.class_50k variable">Enterprise 50K</span>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1">R5.2xlarge</td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <span class="mc-variable Product-Names.class_100k variable">Enterprise 100K</span>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyA-Column1-Body1"> R5.2xlarge</td>
                                  </tr>
                                </tbody>
                              </table>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="bastion-host"/>Bastion Host</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><span class="mc-variable Variables.CompanyName variable">Solace</span> recommends that you have at least two Bastion hosts, and that these hosts are spread out evenly over the three Availability zones. This allows you to remotely access your deployment should a zone fail; if remote access to your deployment if a zone fails is not a requirement, you can choose to use the minimum of one Bastion host instead to manage the EKS&#xA0;cluster. The Bastion host is deployed using a minimal VM that runs only an SSH server.</p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="eks_storage_class"/>Storage Class</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The EKS storage class (<code>type</code>) can use either GP2 or GP3. Consider the following when choosing which storage class to use:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>
                                  <p>With GP2, the performance improves as the size of the disk increases. In cases where the your disk size is greater than 1 TB, using GP2 is a better option than GP3.</p>
                                </li>
                                <li>
                                  <p>With GP3, the default performance is 3k IOPS regardless of disk size. GP3 is recommended for disk sizes that are less than 1TB. For cases where the disk size is greater than 1 TB,  GP2 is the better choice unless you configure the GP3 storage class with a provisioned IOPS that's higher than 3k. It's important to note that if you increase the IOPS on the storage class, then all <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s get the same IOPS. For example, if you increase to 6k IOPS, then all <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s get 6k IOPS disks and you may incur an extra 3k IOPs costs as a result of doing this.</p>
                                </li>
                              </ul>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">It's important remember that the disk size (the size of the EBS volume) is larger than the message spool size. <ul><li>For <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s 10.6.1 and earlier, the disk requirement is twice the Message Spool size specified when you create an <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>. For example, if you configure an <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>  to use a Message Spool of 500 GiB, you require a 1 TB disk size. </li><li>For <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s version 10.7.1 and later, the disk size requirement is 30% greater than the message spool size for the <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span> class. For example, the Enterprise 250 class has a message spool size of 50 GiB, requiring a 65 GiB disk size. </li></ul>You must consider the disk space overhead when planning your Kubernetes cluster. See <a href="resource-requirements-k8s.htm#persistent-disk-reqs" target="_blank" class="MCXref xref">Volume Size for High-Availability Event Broker Services</a> for a list of disk size requirements for all <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span> versions.</div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To deploy <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span>, you must configure the <code>StorageClass</code> in EKS to use the  <code>WaitForFirstConsumer</code> binding mode (<code>volumeBindingMode</code>). To support scale-up, the <code>StorageClass</code> must contain the <code>allowVolumeExpansion</code> property, and have it set to "<code>true</code>". You should always use XFS&#xA0; as the filesystem type (<code>fsType</code>).</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The properties of your<code> StorageClass</code> yaml should be similar to the following:
        </p>
                              <pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:space="preserve">apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
 annotations:
    storageclass.kubernetes.io/is-default-class: "true"
  name: gp2
  selfLink: /apis/storage.k8s.io/v1/storageclasses/gp2
parameters:
  encrypted: "true"
  fsType: xfs
  type: gp2
provisioner: kubernetes.io/aws-ebs
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
allowVolumeExpansion: true</pre>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="networking"/>Networking</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To spread an <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>, or rather the event brokers over the Availability Zones (AZ), an anti-pod affinity should be used. When the region has multiple availability zones, the <code>topologyKey</code> key should be set to <code>kubernetes.io/zone</code>, whereas when AZs not are available,  set it to  <code>topology.kubernetes.io/hostname</code>. </p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="nat"/>NAT Gateway</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You require one Elastic IP (EIP) for each NAT gateway for your cluster. <span class="mc-variable Variables.CompanyName variable">Solace</span> recommends that you have two Elastic IPs (and two NAT gateways) for a production system. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can have up to three EIPSs and NAT gateways, which allows you to have multi-AZ NAT redundancy . This requires that you have three EIPs. These NAT EIPs must be created upfront. If you use a Terafom module, ensure you use the EIPs.</p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="load-balancer"/>Load Balancer</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span> requires the deployment of the AWS Load Balancer Controller to create Network Load Balancers (NLB) to front <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s. You can find instructions for deploying the AWS Load Balancer Controlled at <a href="https://kubernetes-sigs.github.io/aws-load-balancer-controller" target="_blank" class="link-offsite">https://kubernetes-sigs.github.io/aws-load-balancer-controller</a></p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><span class="mc-variable Variables.CompanyName variable">Solace</span> configures the NLBs used in <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span> with IP targets and cross-zone enabled. This results in the fastest possible failover times.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><span class="mc-variable Variables.CompanyName variable">Solace</span> uses the following service annotations to configure the NLB:</p>
                              <pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: "true"
service.beta.kubernetes.io/aws-load-balancer-type: external
service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: ip
service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing # this one is removed for internal (private) services
service.beta.kubernetes.io/aws-load-balancer-target-group-attributes: preserve_client_ip.enabled=true
service.beta.kubernetes.io/aws-load-balancer-healthcheck-healthy-threshold: '2'
service.beta.kubernetes.io/aws-load-balancer-healthcheck-unhealthy-threshold: '2'
service.beta.kubernetes.io/aws-load-balancer-healthcheck-port: '5550'
service.beta.kubernetes.io/aws-load-balancer-healthcheck-protocol: http
service.beta.kubernetes.io/aws-load-balancer-healthcheck-path: /health-check/guaranteed-active
service.beta.kubernetes.io/aws-load-balancer-healthcheck-timeout: '6'
service.beta.kubernetes.io/aws-load-balancer-healthcheck-interval: '10'</pre>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">&#xA0;</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">If you configured your EKS&#xA0;cluster using <span class="mc-variable Variables.CompanyName variable">Solace</span>'s custom AWS&#xA0;Load Balancer configurations and require information about the custom AWS Load Blanacer see <a href="eks_custom_loadbalancer.htm" target="_blank" class="MCXref xref">Custom AWS&#xA0;Load Balancer for PubSub+ Cloud</a>.</p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="ip-range-vpc-size"/>IP&#xA0;Range</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">A minimum size of <code>/24</code> is required for an EKS&#xA0;cluster that's dedicated to <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s. A larger size is required if the cluster contains other services. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Amazon's VPC&#xA0;Container Network Interface (CNI) allocates IPs directly from the VPC&#x2019;s subnets. The number of IPs that are allocated is directly proportional to the number of worker nodes, which is also proportional to the number of <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The calculations below are based on custom settings for <code>WARM_IP_TARGET</code> and <code>WARM_ENI_TARGET</code>:</p>
                              <pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:space="preserve">kubectl set env ds aws-node -n kube-system WARM_IP_TARGET=1     
kubectl set env ds aws-node -n kube-system WARM_ENI_TARGET=0</pre>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Details about these settings are available in the <a href="https://github.com/aws/amazon-vpc-cni-k8s/blob/master/docs/eni-and-ip-target.md" target="_blank" class="link-offsite">Amazon Kubernetes VPC&#xA0;CNI&#xA0;documentation on GitHub</a>.</p>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="CIDR_calc"/>CIDR Calculator</h4>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can use the <span class="mc-variable Variables.CompanyName variable">Solace</span> provided  <a href="CIDR_calculator/cloud-CIDR-calculator.xlsx" target="_blank" class="link-offsite" data-mc-conditions="SAP.SapHideFromOutput">downloadable excel-based CIDR calculator</a> to calculate your CIDR requirements. </p>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Limitations</h4>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Currently, the limit for <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s in a cluster using the standard <code>aws-load-balancer-controller</code> is 11 due to security group rule limits. You can avoid this limitation by using a modified <code>aws-load-balancer-controller</code> provided by <span class="mc-variable Variables.CompanyName variable">Solace</span>. </p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Autoscaling"/>Autoscaling</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Your cluster requires autoscaling to provide the appropriate level of available resources for your <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s as their demands change. <span class="mc-variable Variables.CompanyName variable">Solace</span> recommends using the Kubernetes Cluster Autoscaler, which you can find in the Kuberenetes GitHub repository at: <a href="https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler" class="link-offsite" target="_blank">https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">See the <a href="https://docs.aws.amazon.com/eks/latest/userguide/autoscaling.html" class="link-offsite" style="font-style: italic;" target="_blank">Autoscaling</a> documentation on the Amazon EKS&#xA0;documentation site for information about implementing a Cluster Autoscaler.</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
