<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="Developing Applications|Solace Messaging API Developer Guide|Receiving Guaranteed Messages" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <meta charset="utf-8" />
        <meta http-equiv="Cache-control" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Acknowledging Messages Received by Clients</title>
        <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
        <!--style to display feedback button correctly in IE-->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- links to get the EDA styling to work -->
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
        <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
        <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" data-mc-stylesheet-type="table" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
        <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
        <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
    </head>
    <!-- Top Orange and Darkgrey header-->
    <!-- Div for EDA banner -->
    <div class="eda_banner">
        <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
    </div>
    <!-- end Div for EDA banner -->
    <div class="top-nav">
        <div class="main_list">
            <ul class="top-navlinks">
                <li><a href="https://solace.com/support/" target="_blank">Support</a>
                </li>
                <li><a href="https://solace.com/contact/" target="_blank">Contact Us</a>
                </li>
            </ul>
        </div>
        <div class="container-fluid">
            <div class="src-li">
                <div id="srchWrapTwo">
                    <form class="search" action="#">
                        <div class="search-bar search-bar-container needs-pie">
                            <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs" />
                            <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                                <div class="search-filter-content" id="sf-content">
                                    <ul>
                                        <li>
                                            <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="search-submit-wrapper" dir="ltr">
                                <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div><span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
            <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
        </div>
        <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
        <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
    </div>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../index.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                                        <div class="button-group-container-left">
                                            <button class="button needs-pie print-button" title="Print">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Print">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <div id="content">
                                        <div id="contentBody">
                                            <div class="row collapse">
                                                <div class="ContentRow" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                    <div>
                                                        <div class="nocontent" xmlns="">
                                                            <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                                            </div>
                                                        </div>
                                                        <div role="main" id="mc-main-content" xmlns="">
                                                            <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Acknowledging Messages Received by Clients</h1>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The messaging APIs provide acknowledgments to the <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> event broker for the guaranteed messages that clients receive through a Flow. The figure below shows the process of how the guaranteed messages that an application receives through a Flow are acknowledged. During this Flow, client applications can also send a negative acknowledgment (Nack) for malformed messages or messages that could not be processed.</p>
                                                            <p class="GraphicCaption" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Acknowledging Received Guaranteed Messages</p>
                                                            <p class="GraphicCaption" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <img src="Images/message_acknowledgement_sub.jpg" alt="" />
                                                            </p>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="API"></a>API Acknowledgments</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">A Guaranteed Message window size limits the number of messages that the API can receive before it must return an acknowledgment to the event broker to indicate that it received the messages in the window. After the API sends this acknowledgment, the Guaranteed Message window reopens so that further messages can be sent to the API.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">An application can adjust the windowed acknowledgments by changing the default acknowledgment timer and threshold parameters set through the Flow properties (refer to <a href="Creating-Flows.htm#Importan" class="MCXref xref">Important Flow (Message Consumer) Properties</a>). Changing these defaults is not usually required and will change the performance characteristics of a Flow.</p>
                                                            <h2 class="with-rule" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Applicat"></a>Application Acknowledgments</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">One of the two following application acknowledgment modes can be used for acknowledging a message:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li>Auto-acknowledgment</li>
                                                                <li>Client acknowledgment</li>
                                                            </ul>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The acknowledgment mode to use is set through one of the flow properties listed below. By default, the auto-acknowledgment mode is used.&#160;</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following table shows how to perform acknowledgment for the different APIs:</p>
                                                            <table style="mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <col class="TableStyle-Table_Num-Column-Column1" />
                                                                <col class="TableStyle-Table_Num-Column-Column1" />
                                                                <thead>
                                                                    <tr class="TableStyle-Table_Num-Head-Header1">
                                                                        <th class="TableStyle-Table_Num-HeadE-Column1-Header1"><span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span>&#160;Messaging API</th>
                                                                        <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Use</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/java/index.html" target="_blank" class="link-internal">JCSMP</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                                                            <p class="Tbl_BodyCode"><code>ConsumerFlowProperties.setAckMode(String ackMode)</code>
                                                                            </p>
                                                                            <p class="Tbl_Body">Possible values are:</p>
                                                                            <ul>
                                                                                <li>
                                                                                    <p class="Tbl_BodyCode"><code>JCSMPProperties.SUPPORTED_MESSAGE_ACK_AUTO</code>
                                                                                    </p>
                                                                                </li>
                                                                                <li>
                                                                                    <p class="Tbl_BodyCode"><code>JCSMPProperties.SUPPORTED_MESSAGE_ACK_CLIENT</code>
                                                                                    </p>
                                                                                </li>
                                                                            </ul>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/jrto/index.html" target="_blank" class="link-internal">Java RTO</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                                                            <p class="Tbl_BodyCode"><code>FlowHandle.PROPERTIES.ACKMODE</code>
                                                                            </p>
                                                                            <p class="Tbl_Body">Possible values in <code>SolEnum.AckMode</code> are:</p>
                                                                            <ul>
                                                                                <li>
                                                                                    <p class="Tbl_BodyCode"><code>AckMode.AUTO</code>
                                                                                    </p>
                                                                                </li>
                                                                                <li>
                                                                                    <p class="Tbl_BodyCode"><code>AckMode.CLIENT</code>
                                                                                    </p>
                                                                                </li>
                                                                            </ul>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/c/index.html" target="_blank" class="link-internal">C</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                                                            <p><code>SOLCLIENT_FLOW_PROP_ACKMODE</code>. The possible values are:&#160;</p>
                                                                            <ul>
                                                                                <li><code>SOLCLIENT_FLOW_PROP_ACKMODE_CLIENT</code>
                                                                                </li>
                                                                                <li><code>SOLCLIENT_FLOW_PROP_ACKMODE_AUTO</code> (Default)</li>
                                                                            </ul>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/net/index.html" target="_blank" class="link-internal">.NET</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyD-Column1-Body1">
                                                                            <p class="Tbl_BodyCode"><code>FlowProperties.AckMode</code>
                                                                            </p>
                                                                            <p class="Tbl_Body">Possible values are:</p>
                                                                            <ul>
                                                                                <li>
                                                                                    <p class="Tbl_BodyCode"><code>AutoAck</code>
                                                                                    </p>
                                                                                </li>
                                                                                <li>
                                                                                    <p class="Tbl_BodyCode"><code>ClientAck</code>
                                                                                    </p>
                                                                                </li>
                                                                            </ul>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/js/index.html" target="_blank" class="link-internal">JavaScript</a> and <a href="../../API-Developer-Online-Ref-Documentation/nodejs/index.html" target="_blank" class="link-internal">Node.js</a></p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
                                                                            <p class="Tbl_BodyCode"><code>solace.MessageConsumerProperties.acknowledgeMode</code>
                                                                            </p>
                                                                            <p class="Tbl_Body">Possible values are:</p>
                                                                            <ul>
                                                                                <li>
                                                                                    <p class="Tbl_BodyCode"><code>solace.MessageConsumerAcknowledgeMode.AUTO</code>
                                                                                    </p>
                                                                                </li>
                                                                                <li>
                                                                                    <p class="Tbl_BodyCode"><code>solace.MessageConsumerAcknowledgeMode.CLIENT</code>
                                                                                    </p>
                                                                                </li>
                                                                            </ul>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Auto-Acknowledgment Mode</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When the auto-acknowledgment mode is used, the API automatically generates application-level acknowledgments. </p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For JCSMP, acknowledgments are sent at different times depending on whether the message is received asynchronously or synchronously:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li>when received asynchronously, the acknowledgment  is sent after the message callback completes.</li>
                                                                <li>when received synchronously, the acknowledgment is sent after the message is removed from the API's internal queue during the <code>receive()</code> method. It's important to realize that the acknowledgment has been sent before control is returned to the application (that is after the <code>receive()</code> method completes).</li>
                                                            </ul>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="client-acks"></a>Client Acknowledgment Mode</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When the client acknowledgment mode is used the client must explicitly send an acknowledgment for the message ID of each message received. Optionally, you can use negative acknowledgments as well. For more information, see <a href="#nacks-support" class="MCXref xref">Negative Acknowledgments for Specific Messages</a>.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To explicitly send a client acknowledgment, call one of the methods or functions listed below.</p>
                                                            <p class="Note" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Avoid allowing the number of outstanding unacknowledged messages to become excessively large (for example, 10,000 or more) because the egress message rate from the event broker can start to decline. </p>
                                                            <table class="TableStyle-Table_Num" style="caption-side: top;width: 95%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" cellspacing="0" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <caption valign="top" style="padding-bottom: 3pt;">
                                                                    <p class="TblCaption">To send an Explicit Client Acknowledgment</p>
                                                                </caption>
                                                                <thead>
                                                                    <tr class="TableStyle-Table_Num-Head-Header1">
                                                                        <th class="TableStyle-Table_Num-HeadE-Column1-Header1"><span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span>&#160;Messaging API</th>
                                                                        <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Use</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/java/index.html" target="_blank" class="link-internal">JCSMP</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                                                            <p class="Tbl_BodyCode"><code>XMLMessage.ackMessage()</code>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/jrto/index.html" target="_blank" class="link-internal">Java RTO</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                                                            <p class="Tbl_BodyCode"><code>FlowHandle.ack(...)</code>
                                                                            </p>
                                                                            <p> See the<a href="../../API-Developer-Online-Ref-Documentation/jrto/index.html" target="_blank" class="link-internal"> <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> Messaging API&#160;for JRTO</a>&#160;for information </p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/c/index.html" target="_blank" class="link-internal">C</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                                                            <p class="Tbl_BodyCode"><code>solClient_flow_sendAck(...)</code>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/net/index.html" target="_blank" class="link-internal">.NET</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyD-Column1-Body1">
                                                                            <p class="Tbl_BodyCode"><code>IFlow.Ack(...)</code>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/js/index.html" target="_blank" class="link-internal">JavaScript</a> and <a href="../../API-Developer-Online-Ref-Documentation/nodejs/index.html" target="_blank" class="link-internal">Node.js</a></p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
                                                                            <p class="Tbl_BodyCode"><code>solace.Message.acknowledge()</code>
                                                                            </p>
                                                                            <p class="Note">Acknowledgment is called on the message object.</p>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When using the client acknowledgment mode with the C API, the maximum number of messages that the API can deliver to the application through the Flow without receiving client acknowledgments can be set through the <code>SOLCLIENT_FLOW_PROP_MAX_UNACKED_MESSAGES</code> Flow property. By default, this property has a value of -1, which specifies that the maximum number of unacknowledged messages that can be delivered is not restricted by the API. (To change the maximum number of unacknowledged messages that may be received through an existing Flow, call <code>solClient_flow_setMaxUnacked()</code>).</p>
                                                            <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="nacks-support"></a>Negative Acknowledgments for Specific Messages</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can use negative acknowledgments (Nacks) if you have configured your applications for client acknowledgments (see  <a href="#client-acks" class="MCXref xref">Client Acknowledgment Mode</a>). When you use Nacks, you can send a settlement outcome to let the event broker know the result from processing a guaranteed message that was received. Based on the settlement outcome, the event broker knows how to handle the message on its queue. You can use the following settlement outcomes:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li> ACCEPTED—This ACK&#160;notifies the event broker that your client application successfully processed the guaranteed message. When the event broker receives this outcome it removes the message from its queue.<ul><li>When you call a settlement function/methods with an outcome of ACCEPTED, it is the same as calling an ACK&#160;function/methods in <a href="#client-acks" class="MCXref xref">Client Acknowledgment Mode</a>.</li></ul></li>
                                                                <li>FAILED—This NACK&#160;notifies the event broker that your client application did not process the message. When the event broker receives this NACK&#160;it attempts to redeliver the message while adhering to delivery count limits. </li>
                                                                <li>REJECTED—This NACK&#160;notifies the event broker that your client application could process the message but it was not accepted (for example, failed validation). When the event broker receives this Nack it removes the message from its queue and then moves the message to the Dead Message Queue (DMQ) if it is configured.</li>
                                                            </ul>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Before you can use NACK&#160;s, you must add the FAILED, REJECTED,&#160;or both outcomes as NACK&#160;types when you create the Flow to prepare the Flow to work with negative acknowledgments. You do not need to add the ACCEPTED&#160;outcome because it is always available.  If you try to use an outcome that has not been added, you get an error of <code>Required Settlement Outcome Not Supported</code>. </p>
                                                            <div class="Note" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <ul>
                                                                    <li>Nacks  can be lost during transit (for example due to unexpected networking issues). Consider this fact as part of the logic for handling messages when you develop your application.</li>
                                                                    <li>Nacks are supported on event brokers 10.2.1 and later. If an event broker does not support  Nacks, an <code>InvalidOperationException</code> occurs during the Flow bind request when an outcome is specified.</li>
                                                                </ul>
                                                            </div>
                                                            <table style="mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <col class="TableStyle-Table_Num-Column-Column1" />
                                                                <col class="TableStyle-Table_Num-Column-Column1" />
                                                                <thead>
                                                                    <tr class="TableStyle-Table_Num-Head-Header1">
                                                                        <td class="TableStyle-Table_Num-HeadE-Column1-Header1"><span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span>&#160;Messaging API</td>
                                                                        <td class="TableStyle-Table_Num-HeadD-Column1-Header1">Calls</td>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/java/index.html" target="_blank" class="link-internal">JCSMP</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                                                            <p>Enable and prepare the Flow to use negative acknowledgments:</p>
                                                                            <p><code>ConsumerFlowProperties.addRequiredSettlementOutcomes(Outcome outcometoadd)</code>
                                                                            </p>
                                                                            <p>You need to add one or both of:</p>
                                                                            <p>
                                                                                <ul>
                                                                                    <li><code>Outcome.FAILED</code><![CDATA[
							]]></li>
                                                                                    <li><code>Outcome.REJECTED</code>
                                                                                    </li>
                                                                                </ul>
                                                                                <p><code>Outcome.ACCEPTED</code> is not required to be set and always supported.</p>
                                                                            </p>
                                                                            <p>You can ACK or NACK&#160;using:</p>
                                                                            <p><![CDATA[  ]]><code>XMLMessage.settle(settlement_outcome)</code> </p>
                                                                            <p>Possible values to use:</p>
                                                                            <p>
                                                                                <ul>
                                                                                    <li><code>Outcome.ACCEPTED</code><![CDATA[							]]></li>
                                                                                    <li><code>Outcome.FAILED</code><![CDATA[
							]]></li>
                                                                                    <li><code>Outcome.REJECTED</code>
                                                                                    </li>
                                                                                </ul>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/jrto/index.html" target="_blank" class="link-internal">Java RTO</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                                                            <p>To enable and prepare the Flow to use negative acknowledgments, set <code>REQUIRED_OUTCOME_FAILED</code> , <code>REQUIRED_OUTCOME_REJECTED</code> , or both to <code>ENABLE</code>:</p><pre xml:space="preserve">
int flowProps = 0;
String[] flowProperties = new String[10];
flowProperties[flowProps++] = FlowHandle.PROPERTIES.REQUIRED_OUTCOME_FAILED;
flowProperties[flowProps++] = SolEnum.BooleanValue.ENABLE;
flowProperties[flowProps++] = FlowHandle.PROPERTIES.REQUIRED_OUTCOME_REJECTED;
flowProperties[flowProps++] = SolEnum.BooleanValue.ENABLE;
</pre>
                                                                            <p>To acknowledge a message, you can send an ACK or NACK using:</p>
                                                                            <p><code>flowHandle.settle(msgId, messageOutcome);</code>
                                                                            </p>
                                                                            <p>Possible values to use:</p>
                                                                            <p>
                                                                                <ul>
                                                                                    <li><code>MessageOutcome.ACCEPTED</code><![CDATA[							]]></li>
                                                                                    <li><code>MessageOutcome.FAILED</code><![CDATA[
							]]></li>
                                                                                    <li><code>MessageOutcome.REJECTED</code>
                                                                                    </li>
                                                                                </ul>
                                                                            </p>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/c/index.html" target="_blank" class="link-internal">C</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                                                            <p>Enable and prepare the Flow to use negative acknowledgments:</p>
                                                                            <ul>
                                                                                <li><code>SOLCLIENT_FLOW_PROP_REQUIRED_OUTCOME_FAILED</code> </li>
                                                                                <li><code>SOLCLIENT_FLOW_PROP_REQUIRED_OUTCOME_REJECTED</code>
                                                                                </li>
                                                                                <li>To enable a Nack, set the property to <code>SOLCLIENT_PROP_ENABLE_VAL</code></li>
                                                                            </ul>
                                                                            <p>To acknowledge a message, you can send an ACK&#160;or NACK&#160;using:</p>
                                                                            <p><code>solClient_flow_settleMsg	(solClient_opaqueFlow_pt,solClient_msgId_t,solClient_msgOutcome_t)</code>
                                                                            </p>
                                                                            <p>For <code>solClient_msgOutcome_t</code>, you can use the following enumerated values:</p>
                                                                            <ul>
                                                                                <li><code>SOLCLIENT_OUTCOME_ACCEPTED</code>
                                                                                </li>
                                                                                <li><code>SOLCLIENT_OUTCOME_FAILED</code>
                                                                                </li>
                                                                                <li><code>SOLCLIENT_OUTCOME_REJECTED</code>
                                                                                </li>
                                                                            </ul>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/net/index.html" target="_blank" class="link-internal">.NET</a>
                                                                            </p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyD-Column1-Body1">
                                                                            <p>Enable and set the following properties to <code>true</code> in the <code>IFlow</code> interface to use negative acknowledgments:</p>
                                                                            <ul>
                                                                                <li><code>IFlow.RequiredOutcomeFailed = true</code><![CDATA[
   ]]></li>
                                                                                <li><code>IFlow.RequiredOutcomeRejected = true</code>
                                                                                </li>
                                                                            </ul>
                                                                            <p>You can send an ACK&#160;or NACK using:</p>
                                                                            <ul>
                                                                                <li><code>IFlow.Settle(long ADMessageId, MessageOutcome outcome)</code>
                                                                                </li>
                                                                            </ul>
                                                                            <p>For the <code>MessageOutcome</code>, you use one of the following values:</p>
                                                                            <ul>
                                                                                <li><code>MessageOutcome.Accepted</code>
                                                                                </li>
                                                                                <li><code>MessageOutcome.Rejected</code>
                                                                                </li>
                                                                                <li><code>MessageOutcome.Failed</code>
                                                                                </li>
                                                                            </ul>
                                                                        </td>
                                                                    </tr>
                                                                    <tr class="TableStyle-Table_Num-Body-Body1">
                                                                        <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                                                            <p class="Tbl_Body"><a href="../../API-Developer-Online-Ref-Documentation/js/index.html" target="_blank" class="link-internal">JavaScript</a> and <a href="../../API-Developer-Online-Ref-Documentation/nodejs/index.html" target="_blank" class="link-internal">Node.js</a></p>
                                                                        </td>
                                                                        <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
                                                                            <p>When you create a flow, enable and set the following properties on your message consumer to use negative acknowledgments:<br /><code>requiredSettlementOutcomes: [MessageOutcome.FAILED, MessageOutcome.REJECTED]</code></p>
                                                                            <p><code>MessageOutcome.ACCEPTED</code> is not required to be set with <code>requiredSettlementOutcomes</code> and is always supported.</p>
                                                                            <p>You can send an ACK&#160;or NACK using:</p>
                                                                            <p><code>Message.settle(messageOutcome)</code>
                                                                            </p>
                                                                            <p>For the <code>messageOutcome</code>, you use one of the following values:</p>
                                                                            <ul>
                                                                                <li><code>MessageOutcome.ACCEPTED</code>
                                                                                </li>
                                                                                <li><code>MessageOutcome.REJECTED</code>
                                                                                </li>
                                                                                <li><code>MessageOutcome.FAILED</code>
                                                                                </li>
                                                                            </ul>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="client-nacks-jrto"></a>Using Nacks with the Java RTO API</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following sample code shows how to send Nacks using the <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> Messaging API&#160;for Java RTO:</p><pre xml:space="preserve" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
// session must have SolEnum.CapabilityName.AD_APP_ACK_FAILED capability in order for negative MessageOutcomes to be supported
// MessageOutcome.ACCEPTED is always supported
 
FlowHandle flowHandle = Solclient.Allocator.newFlowHandle();
 
// Setting Flow Properties
int flowProps = 0;
String[] flowProperties = new String[10];
flowProperties[flowProps++] = FlowHandle.PROPERTIES.ACKMODE;
flowProperties[flowProps++] = SolEnum.AckMode.CLIENT;
flowProperties[flowProps++] = FlowHandle.PROPERTIES.REQUIRED_OUTCOME_FAILED;
flowProperties[flowProps++] = SolEnum.BooleanValue.ENABLE;
flowProperties[flowProps++] = FlowHandle.PROPERTIES.REQUIRED_OUTCOME_REJECTED;
flowProperties[flowProps++] = SolEnum.BooleanValue.ENABLE;
 
sessionHandle.createFlowForHandle(flowHandle, flowProperties, queue, null,
		     new MessageCallbackSample() {
			 @Override
			 public void onMessage(Handle handle) {
			     FlowHandle flowHandle = (FlowHandle) handle;
			     MessageHandle msgHandle = flowHandle.getRxMessage();
			     long msgId = msgHandle.getGuaranteedMessageId();
							
			     /* An example try-catch block for processing and settling a message. */	
			     try {
			         processMessage(msgHandle);
			         flowHandle.settle(msgId, MessageOutcome.ACCEPTED);
			     } catch (Exception e){
			         flowHandle.settle(msgId, MessageOutcome.FAILED);
			     }
			 }	
		      }, flowEventCallback);
</pre>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="client-nacks-jcsmp"></a>Using Nacks with the JCSMP API</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following sample code shows how to send Nacks using the <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> Messaging API&#160;for JCSMP:</p><pre xml:space="preserve" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">...
...
// A session has already been created with JCSMPProperties.SUPPORTED_MESSAGE_ACK_CLIENT
final ConsumerFlowProperties cfp = new ConsumerFlowProperties().setEndpoint(q);

// Add the settlement outcomes - Outcome.ACCEPTED does not need to be added because it is always included
// The consumer can add multiple outcomes, for example cfp.addRequiredSettlementOutcomes(Outcome.FAILED, Outcome.REJECTED);
cfp.addRequiredSettlementOutcomes(Outcome.FAILED);

final FlowReceiver flowReceiver= session.createFlow(null, cfp);
BytesXMLMessage msg = flowReceiver.receive(1000);
try {
    processMessage(msg);
    msg.settle(Outcome.ACCEPTED);// same as msg.ackMessage();  
    catch (Exception e){
        msg.settle(Outcome.FAILED); // Failed to process message, settle as FAILED
    }
}
...
...
</pre>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="client-acks-c-api"></a>Using Nacks with the C&#160;API</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For the <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> Messaging API for to use Nacks you must set <code>SOLCLIENT_FLOW_PROP_REQUIRED_OUTCOME_FAILED</code>, <code>SOLCLIENT_FLOW_PROP_REQUIRED_OUTCOME_REJECTED</code>, or both properties to <code>SOLCLIENT_PROP_ENABLE_VAL</code>. </p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following sample code shows how to send Nacks using a fictional <code>processMessage()</code> function to process the guaranteed message, which provides a status of processing so that you can&#160;send the settlement outcome using the <code>solClient_flow_settleMsg()</code> function:&#160;</p><pre xml:space="preserve" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">/* This code snippet presumes that you have a
   session and endpoint (queue)already */
/* Message Count for messages that were accepted by the client */
static int msgCount = 0;
static int msgCountSuccess = 0;
static int msgCountFailed = 0;
static int msgCountRejected = 0;

/* Callback to handle messages */
	
static solClient_rxMsgCallback_returnCode_t flowMessageReceiveCallback ( solClient_opaqueFlow_pt flow_p, 
                                                                         solClient_opaqueMsg_pt msg_p,
                                                                         void *user_p )
{
  solClient_msgId_t msgId;
  int status=0;
  /* Process the message. */
  printf ( "Received message:\n" );
  //Some function to process the message and return a status
  status = processMessage(msg_p);
  solClient_msg_getMsgId (msg_p, &amp;msgId); 
  msgCount ++
    
 /* If the status was good)
 if ( status  == 0 ) {
	printf ( "Message passed validation\n");
	solClient_flow_settleMsg(flow_p, msgId, SOLCLIENT_OUTCOME_ACCEPTED);
       msgCountSuccess++;
 }
 else if (status ==  1 ) {
	printf ( "Message failed validation\n");
	solClient_flow_settleMsg(flow_p, msgId, SOLCLIENT_OUTCOME_REJECTED);
       msgCountRejected++;
 }
 else {
    printf ( "Message failed to process message.\n");
    solClient_flow_settleMsg(flow_p, msgId, SOLCLIENT_OUTCOME_FAILED);
    msgCountFailed++;
 }
}			
...
...

int main (in argc, char *argv[])
{
   /* The code snippet presumes a session has been created */
   /* Configure the Flow function information */
   flowFuncInfo.rxMsgInfo.callback_p = flowMessageReceiveCallback;
   flowFuncInfo.eventInfo.callback_p = flowEventCallback;
   
   if (!solClient_session_isCapable(session_p, SOLCLIENT_SESSION_CAPABILITY_AD_APP_ACK_FAILED)) {
      exit(1);
    }
    /*&#160;We must add both these properties if want use FAIL&#160;and REJECT&#160;as outcomes
       which prepares the flow to use negative acknowledgment. */
    props[propIndex++] = SOLCLIENT_FLOW_PROP_ACKMODE;
    props[propIndex++] = SOLCLIENT_FLOW_PROP_ACKMODE_CLIENT;
    props[propIndex++] = SOLCLIENT_FLOW_PROP_REQUIRED_OUTCOME_FAILED;    
    props[propIndex++] = SOLCLIENT_PROP_ENABLE_VAL;
    props[propIndex++] = SOLCLIENT_FLOW_PROP_REQUIRED_OUTCOME_REJECTED;    
    props[propIndex++] = SOLCLIENT_PROP_ENABLE_VAL;
    props[propIndex++] = NULL;

    ...
    ...
     solClientRc = solClient_session_createFlow(props,
                                                session_p,
			                         &amp;flow_p,
			                         &amp;flowFuncInfo,
			                         sizeof(flowFuncInfo));


  /** Wait for messages **/
  printf ( "Waiting for messages......\n" );
  fflush ( stdout );
  while ( msgCount &lt; 1 ) {
     SLEEP ( 1 );
  }
...
...
}				
</pre>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="client-acks-dotnet-cscsmp"></a>Using Nacks with the .NET&#160;API</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For the <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> .NET&#160;(C#)&#160;API, you must set   <code>RequiredOutcomeFailed</code>, <code>RequiredOutcomeRejected</code>, or both properties to <code>true</code> to use Nacks. The following sample code shows how to send Nacks using a fictional <code>messageProcessingObject.process()</code>&#160;method, which  determines the settement outcome that is sent with the <code>IFlow.Settle()</code>&#160;method:</p><pre xml:space="preserve" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">// This code snippet presumes that you have a session and endpoint (queue)already
//&#160;Use object object instantiation to set the required properties to use Nacks.
FlowProperties flowProps = new FlowProperties()
{
   AckMode = MessageAckMode.ClientAck,
   RequiredOutcomeFailed = true,
   RequiredOutcomeRejected = true
};
 
IFlow flow = session.CreateFlow(flowProps, queue, null,
                        new EventHandler&lt;MessageEventArgs&gt; (delegate(object source, MessageEventArgs args){
                           // Got a message and do processing and based on result fictional messageProcessingObject
		            if (messageProcessingObject.process(args.Message) == 1)	{			
                               // Accept the message
                               flow.Settle(args.Message.ADMessageId, MessageOutcome.Accepted);
			    }
			    else if ((messageProcessingObject.process(args.Message) == 3) {
			        // Reject the message
                               flow.Settle(args.Message.ADMessageId, MessageOutcome.Rejected);
			    }
			    else {
			        // Failed to process the message
                               flow.Settle(args.Message.ADMessageId, MessageOutcome.Failed); 
				args.Message.Dispose();
                        }),
                        new EventHandler&lt;FlowEventArgs&gt; (delegate(object source, FlowEventArgs args) {
			    // Got an event
                         }));
...
...
}				
</pre>
                                                            <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="client-acks-js-nodejs"></a>Using Nacks with the Javascript API</h3>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following sample code shows how to send Nacks using the <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> Messaging API&#160;for Javascript:</p><pre xml:space="preserve" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
try {
  // Create a message consumer with support for NACKs
  const messageConsumer = session.createMessageConsumer({
     // solace.MessageConsumerProperties
     queueDescriptor: { name: 'QueueName', type: solace.QueueType.QUEUE, durable: true },
     acknowledgeMode: solace.MessageConsumerAcknowledgeMode.CLIENT, // Enabling Client ack
     // session is created with SUPPORTED_MESSAGE_ACK_CLIENT to support negative acknowledgment outcomes
     // MessageOutcome.ACCEPTED is not required to be set and always supported
     requiredSettlementOutcomes: [MessageOutcome.FAILED, MessageOutcome.REJECTED], // set the settlement outcome for the flow. Flow Type will be 0x03
  });
 
  // Define message consumer event listeners
  messageConsumer.on(solace.MessageConsumerEventName.UP, function () {
      // consumer is up
  });
 
  messageConsumer.on(solace.MessageConsumerEventName.CONNECT_FAILED_ERROR, function (error) {
      // Error: the message consumer could not bind to queue
  });
 
  messageConsumer.on(solace.MessageConsumerEventName.DOWN, function () {
      // The message consumer is down
  });
 
  messageConsumer.on(solace.MessageConsumerEventName.DOWN_ERROR, function (details) {
      console.log('Received "DOWN_ERROR" event - details: ' + details);
  });
 
  // Define message received event listener
  messageConsumer.on(solace.MessageConsumerEventName.MESSAGE, function (message) {
      console.log('Received message: "' + message.getBinaryAttachment() + '",' +
          ' details:\n' + message.dump());
       // use the new settle method to ACK/NACK the message from the router
       message.settle(solace.MessageOutcome.ACCEPTED);// same as message.acknowledge();
 
      // messages can also be settled with the FAILED and REJECTED outcomes on supported broker sessions
      // message.settle(solace.MessageOutcome.FAILED);// same as message.acknowledge();
      // message.settle(solace.MessageOutcome.REJECTED);// same as message.acknowledge();
  });
 
  // Connect the message consumer
  messageConsumer.connect();
} catch (error) {
    // error occurred while creating the message consumer
    console.log(error.toString());
}
</pre>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="no-print">
                                            <div><a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                                            </div>
                                        </div>
                                        <footer class="my-4 pt-4 text-center no-print">
                                            <div class="footer-txt text-center no-print">
                                                <ul class="list-inline ">
                                                    <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                                                    <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                                                    <li class="list-inline-item text-muted" style="font-size:13px;"> ©  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                                                </ul>
                                            </div>
                                            <div class="footer-icons">
                                                <ul class="list-inline">
                                                    <li class="list-inline-item"><a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="footer_link_menu">
                                                <ul class="link_list">
                                                    <li class="link_list_item"><a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </footer>
                                    </div>
                                    <!-- JIRA issue collector -->
                                    <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                                    <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                                    <!-- Script for Launching offsite links in new tab -->
                                    <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>