<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <meta charset="utf-8" />
        <meta http-equiv="Cache-control" content="no-cache" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Context Propagation for Distributed Tracing</title>
        <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
        <!--style to display feedback button correctly in IE-->
        <!-- Google Tag Manager -->
        <!-- End Google Tag Manager -->
        <!-- links to get the EDA styling to work -->
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True" />
        <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
        <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
        <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css" />
        <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
        <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png" />
        <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png" />
        <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png" />
        <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png" />
        <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
        <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
        <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
        <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
        <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
    </head>
    <!-- Top Orange and Darkgrey header-->
    <!-- Div for EDA banner -->
    <div class="eda_banner">
        <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
    </div>
    <!-- end Div for EDA banner -->
    <div class="top-nav">
        <div class="main_list">
            <ul class="top-navlinks">
                <li><a href="https://solace.com/support/" target="_blank">Support</a>
                </li>
                <li><a href="https://solace.com/contact/" target="_blank">Contact Us</a>
                </li>
            </ul>
        </div>
        <div class="container-fluid">
            <div class="src-li">
                <div id="srchWrapTwo">
                    <form class="search" action="#">
                        <div class="search-bar search-bar-container needs-pie">
                            <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs" />
                            <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                                <div class="search-filter-content" id="sf-content">
                                    <ul>
                                        <li>
                                            <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="search-submit-wrapper" dir="ltr">
                                <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div><span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
            <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
        </div>
        <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
        <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
    </div>
    <body>
        <div class="foundation-wrap off-canvas-wrapper">
            <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
                <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
                    <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
                </aside>
                <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
                    <div data-sticky-container="" class="title-bar-container">
                        <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true"><a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
                            <div class="middle title-bar-section outer-row clearfix">
                                <div class="menu-icon-container relative clearfix">
                                    <div class="central-account-wrapper">
                                        <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                            <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                                <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                            </div>
                                        </div>
                                    </div>
                                    <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas"><span></span>
                                    </button>
                                </div>
                            </div>
                            <div class="title-bar-layout outer-row">
                                <div class="logo-wrapper"><a class="logo" href="../../index.html" alt="Logo"></a>
                                </div>
                                <div class="navigation-wrapper nocontent">
                                    <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                                        <li class="placeholder" style="visibility:hidden"><a>placeholder</a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="central-account-wrapper">
                                    <div class="central-dropdown"><a class="central-account-drop"><span class="central-account-image"></span><span class="central-account-text">Account</span></a>
                                        <div class="central-dropdown-content"><a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                                            <hr class="central-separator" /><a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="nav-search-wrapper">
                                    <div class="nav-search row">
                                        <form class="search" action="#">
                                            <div class="search-bar search-bar-container needs-pie">
                                                <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs" />
                                                <div class="search-filter-wrapper"><span class="invisible-label" id="search-filters-label">Filter: </span>
                                                    <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                                                    <div class="search-filter-content" id="sf-content">
                                                        <ul>
                                                            <li>
                                                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001"><span id="filterSelectorLabel-00001">All Files</span>
                                                                </button>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="search-submit-wrapper" dir="ltr">
                                                    <div class="search-submit" title="Search" role="button" tabindex="0"><span class="invisible-label">Submit Search</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </nav>
                    </div>
                    <div class="main-section">
                        <div class="row outer-row sidenav-layout">
                            <nav class="sidenav-wrapper">
                                <div class="sidenav-container">
                                    <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                                </div>
                            </nav>
                            <div class="body-container">
                                <div data-mc-content-body="True">
                                    <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                                        <div class="button-group-container-left">
                                            <button class="button needs-pie print-button" title="Print">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Print">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                            <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                                                <div>
                                                    <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                                                        <div class="button-icon"> </div>
                                                    </div>
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                    <!-- Google Tag Manager (noscript) -->
                                    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"></iframe>
                                    </noscript>
                                    <!-- End Google Tag Manager (noscript) -->
                                    <div id="content">
                                        <div id="contentBody">
                                            <div class="row collapse">
                                                <div class="ContentRow" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                    <div>
                                                        <div class="nocontent" xmlns="">
                                                            <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True"><span class="MCBreadcrumbsPrefix"> </span>
                                                            </div>
                                                        </div>
                                                        <div role="main" id="mc-main-content" xmlns="">
                                                            <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="top"></a>Context Propagation for Distributed Tracing</h1>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">As discussed in the <a href="Distributed-Tracing-Overview.htm" class="link-internal">overview</a>, distributed tracing tracks an event  all the way from the publishing application, between event brokers, and to the receiving application. A distributed trace, or simply a <i>trace</i>, is a record of the path taken by an event message as it propagates through an event mesh. A trace is made up of the <i>spans</i> that are emitted at each point along the journey. An OpenTelemetry backend, such as Jaeger or DataDog, assembles these spans into a trace and provides a visual view of the entire lifespan of an event message.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"> Trace <i>context</i> is the metadata  that allows new spans to be created as children of another span in the same trace, or to link to other spans in the trace, regardless of where the other spans are generated. Context <i>propagation</i> is the mechanism by which that metadata is carried by event messages across service and process boundaries.</p>
                                                            <p data-mc-conditions="SAP.SapHideFromOutput" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Let's take a look at an example to see how context propagation works. The diagram below shows a simple architecture that includes one event broker and two clients (one that publishes messages, and one that consumes messages). Each process that handles the event message emits a span. These spans are consumed by a receiver, and then assembled together by an OpenTelemetry backend system to form a trace.</p>
                                                            <div class="thumbnail-container" data-mc-conditions="SAP.SapHideFromOutput" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/Distributed-Tracing/distributed-tracing-context-propagation.png" data-mc-popup-alt="Illustration depicting the concepts described in the surrounding text."><img class="MCPopupThumbnail img imgsolacethumbnail" data-mc-width="1176" data-mc-height="446" src="../../Resources/Images/Distributed-Tracing/distributed-tracing-context-propagation_thumb_500_0.png" alt="Illustration depicting the concepts described in the surrounding text." tabindex="" /></a>
                                                            </div>
                                                            <p data-mc-conditions="SAP.SapHideFromOutput" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Let's examine each step in this simplified example:</p>
                                                            <ol data-mc-conditions="SAP.SapHideFromOutput" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li value="1"><b>Service A</b> uses telemetry instrumentation to generate context information that can be added to messages.</li>
                                                                <li value="2"><b>Service A</b> prepares an event message using a <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> Messaging API, and injects trace context into that message using a <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> OpenTelemetry API Library. <b>Service A</b> might also separately generate OpenTelemetry spans with that same context using an OpenTelemetry API. </li>
                                                                <li value="3">The <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> Messaging API sends the message to the event broker.</li>
                                                                <li value="4">The <b>event broker</b> receives the message. If the broker has trace filter subscriptions that match the message's topic, it generates one or more spans.  The span(s) are added to one or more trace messages, and the <b>event broker</b> sends the trace message to the telemetry queue.</li>
                                                                <li value="5">If the trace message is successfully enqueued, the <b>event broker</b> updates the event message's trace context with the context of the span. This starts a send span, which is the trace context sent with the message to the next hop (which could be another event broker or a consuming application). In this example, the next hop is the consuming application, <b>Service B</b>.</li>
                                                                <li value="6"><b>Service B</b> consumes the event message via a <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> Messaging API, and extracts the trace context using a <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> OpenTelemetry API Library. It then uses this trace context to establish the parent span for the first span that is created upon receive.</li>
                                                                <li value="7">For send spans, the <b>event broker</b> records the time it sent the message to <b>Service B</b> as the start time for the send span. When the message is consumed by <b>Service B</b>, an acknowledgment is sent to the <b>event broker</b>. The <b>event broker</b> receives the acknowledgment, ends the send span, and records the outcome of the delivery attempt to <b>Service B</b>. </li>
                                                                <li value="8">At any time, the <b><span class="mc-variable Product-Names.opentelemetry_receiver_long variable">Solace Open Telemetry Receiver</span></b> can connect to the <b>event broker</b> to receive the <span class="mc-variable Variables.CompanyName variable">Solace</span> trace messages and convert them to standard OpenTelemetry spans. Other receiver modules receive the telemetry spans created by the producer and consumer applications. The <b>OpenTelemetry Collector</b> processes all the spans, which can then be correlated by a backend monitoring tool.</li>
                                                            </ol>
                                                            <p data-mc-conditions="SAP.SapHideFromOutput" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">At each hop in the event mesh, the event message is updated with the latest context information. This extends the overall trace as the event message moves through the mesh.</p>
                                                            <div class="Note" data-mc-conditions="SAP.SapHideFromOutput" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <p>Delivery of a send span is not guaranteed.</p>
                                                            </div>
                                                            <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="context-prop-in-event-broker"></a>Context Propagation in the Event Broker</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Two types of context can be propagated in event messages:</p>
                                                            <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li>Span context—Solace APIs and event brokers can interpret and modify trace context within a message as the message is transported. </li>
                                                                <li>Baggage (also known as correlation context)—Baggage is a set of key-value pairs that can be injected into and read from the context. Solace APIs and event brokers never modify baggage; they only read it and include it in trace messages.</li>
                                                            </ul>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Trace context and baggage are carried in the event message. If an event message is successfully traced (that is, it generates and enqueues a span), the event broker updates the event message's trace context with the context from the span. If, at any point after receiving an event message but before generating a span, the event broker encounters a condition where it cannot trace the event message (for example, the telemetry queue is full), the broker passes the trace context unchanged in the event message to the next hop in the event mesh.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To handle event messages and generate spans appropriately, the event broker does the following when it receives an event message:</p>
                                                            <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li value="1">Performs basic  checks (such as verifying that the message's receive flow is valid, the message is the next expected message on that flow, the message complies with any topic&#160;access controls). If any of these tests fail, the message is discarded without tracing.</li>
                                                                <li value="2">Determines whether the event message is to be traced. If the message is to be traced, it sets the <code>sampled</code> flag in the message's trace context. Otherwise, it leaves the <code>sampled</code> flag unchanged.</li>
                                                                <li value="3">Processes the event message.</li>
                                                                <li value="4">Uses the event message's trace context to create a child span.</li>
                                                                <li value="5">Updates the event message's trace context at the same time the event message and trace message are persisted. The event message's trace context isn't updated sooner so that, if the event broker encounters a condition where it cannot trace the event message (for example, the telemetry queue is full), it doesn't generate a trace message—it passes the received trace context unchanged in the event message to the next hop in the event mesh.</li>
                                                            </ol>
                                                            <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="context-prop-in-apis"></a>Context Propagation with <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> Messaging APIs</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Context propagation with <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> Messaging APIs is supported by the Solace<MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput"> PubSub+</MadCap:conditionalText> OpenTelemetry API Libraries. These libraries allow you to inject context into or extract context from <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> event messages.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You deploy the <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> OpenTelemetry API Libraries alongside the <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> Messaging API for the programming language you are using to develop your application. These libraries have dependencies on the OpenTelemetry API (which must also be deployed with your application).</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The Solace <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput"> PubSub+</MadCap:conditionalText> OpenTelemetry API Libraries support W3C propagators only.</p>
                                                            <p data-mc-conditions="SAP.SapHideFromOutput" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">See the following links for information about specific libraries, including where you can get them:</p>
                                                            <ul data-mc-conditions="SAP.SapHideFromOutput" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                                                <li>For <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> OpenTelemetry Integration for the <span class="mc-variable Variables.CompanyName variable">Solace</span> JMS API, see <a href="../../API/Solace-JMS-API/Context-Propagation-Distributed-Tracing.htm#Instrumenting-JMS-Distributed-Tracing" class="MCXref xref">Instrumenting JMS for Distributed Tracing</a>.</li>
                                                                <li>For <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> OpenTelemetry Integration for the <span class="mc-variable Variables.CompanyName variable">Solace</span> JCSMP API, see <a href="../../API/API-Developer-Guide/Context-Propagation-Distributed-Tracing.htm#Instrumenting-JCSMP-Distributed-Tracing" class="MCXref xref">Instrumenting JCSMP for Distributed Tracing</a>.</li>
                                                                <li>For <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> OpenTelemetry Integration for the <span class="mc-variable Variables.CompanyName variable">Solace</span> .NET API, see <a href="../../API/API-Developer-Guide/Context-Propagation-Distributed-Tracing.htm#Instrumenting-DOTNET-Distributed-Tracing" class="MCXref xref">Instrumenting .NET for Distributed Tracing</a>.</li>
                                                                <li>For <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> OpenTelemetry Integration for the <span class="mc-variable Variables.CompanyName variable">Solace</span> JavaScript and Node.js APIs, see <a href="../../API/API-Developer-Guide/Context-Propagation-Distributed-Tracing.htm#Instrumenting-JS-NODEJS-Distributed-Tracing" class="MCXref xref">Instrumenting JavaScript and Node.js for Distributed Tracing</a>.</li>
                                                                <li>For <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> OpenTelemetry Integration for the <span class="mc-variable Variables.CompanyName variable">Solace</span> Go API, see <a href="../../API/API-Developer-Guide-Go/Go-API-Distributed-Tracing.htm#Instrumenting-Go-Distributed-Tracing" class="MCXref xref">Instrumenting Go for Distributed Tracing</a>.</li>
                                                                <li>For <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> OpenTelemetry Integration for the <span class="mc-variable Variables.CompanyName variable">Solace</span> Python API, see <a href="../../API/API-Developer-Guide-Python/Python-API-Distributed-Tracing.htm#Instrumenting-Python-Distributed-Tracing" class="MCXref xref">Instrumenting Python for Distributed Tracing</a>.</li>
                                                            </ul>
                                                            <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="visualize-trace-backend"></a>Visualizing Trace Information in the Backend</h2>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Tracing helps you understand the path an event message takes as it travels through distributed systems. A trace is made of one or more spans, with the first span representing the root span. Every root span represents a request from start to finish. As a request moves through a distributed system, it usually generates multiple spans. If a new span is generated by a request it is considered a child span, and the span that generated it is its parent. Child spans provide additional context of the steps that occur during a request.</p>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">OpenTelemetry receivers collect different types of spans, including spans from the OpenTelemetry  APIs and the <span class="mc-variable Product-Names.pubsub_brand_only variable" data-mc-conditions="SAP.SapHideFromOutput">PubSub+</span> event broker. The OpenTelemetry Collector collects, processes and exports these spans to a backend, where they are assembled into waterfall visualizations of end-to-end traces. These visualizations show the relationship between a root span and its child spans, and can help you improve and debug your distributed applications. The diagram below shows how spans generated at different points in a distributed system are assembled into an end-to-end trace in an OpenTelemetry backend:</p>
                                                            <div class="thumbnail-container" xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/Distributed-Tracing/distributed-tracing-spans-trace.png" data-mc-popup-alt="Illustration depicting the concepts described in the surrounding text."><img class="MCPopupThumbnail img imgsolacethumbnail" data-mc-width="1398" data-mc-height="414" src="../../Resources/Images/Distributed-Tracing/distributed-tracing-spans-trace_thumb_500_0.png" alt="Illustration depicting the concepts described in the surrounding text." tabindex="" /></a>
                                                            </div>
                                                            <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For a detailed explanation of how spans are collected into a trace, see <a href="https://opentelemetry.io/docs/concepts/signals/traces/" class="link-offsite" target="_blank">OpenTelemetry Traces.</a></p> </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="no-print">
                                            <div><a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                                            </div>
                                        </div>
                                        <footer class="my-4 pt-4 text-center no-print">
                                            <div class="footer-txt text-center no-print">
                                                <ul class="list-inline ">
                                                    <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                                                    <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                                                    <li class="list-inline-item text-muted" style="font-size:13px;"> ©  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                                                </ul>
                                            </div>
                                            <div class="footer-icons">
                                                <ul class="list-inline">
                                                    <li class="list-inline-item"><a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                    <li class="list-inline-item"><a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon"><img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;" /></a>
                                                    </li>
                                                </ul>
                                            </div>
                                            <div class="footer_link_menu">
                                                <ul class="link_list">
                                                    <li class="link_list_item"><a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                                                    </li>
                                                    <li class="link_list_item"><a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                                                    </li>
                                                </ul>
                                            </div>
                                        </footer>
                                    </div>
                                    <!-- JIRA issue collector -->
                                    <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                                    <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                                    <!-- Script for Launching offsite links in new tab -->
                                    <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                                </div>
                            </div>
                        </div>
                    </div><a data-close="true"></a>
                </div>
            </div>
        </div>
    </body>
</html>