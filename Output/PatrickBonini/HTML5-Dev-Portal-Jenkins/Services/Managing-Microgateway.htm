<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Microgateway Configuration</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png"/>
    <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Microgateway Configuration</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">A Microgateway  allows a Solace PubSub+ event broker to act as an HTTP&#xA0;load balancer, or simple API&#xA0;gateway between a RESTful API&#xA0;Client and remote microservices. For more information, refer to <a href="Microgateways-Overview.htm" class="MCXref xref">Microgateways</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">This section describes the various limitations of Microgateways and provides a list of the configuration parameters that are required before an  event broker can act as a Microgateway.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">To propagate REST&#xA0;requests through the event broker it must first be configured for basic Guaranteed Messaging.  Refer to <a href="../Messaging/Guaranteed-Msg/Managing-Guaranteed-Messaging.htm" class="MCXref xref">Guaranteed Messaging Configuration</a> for more information. In addition, special consideration must be taken when configuring queues used in a Microgateway deployment. For more information refer to <a href="#Configure_Queues" class="MCXref xref">Configuring Queues for a Microgateway</a>.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Limitations"/>Limitations</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Microgateways have the following limitations:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li> The HTTP CONNECT and TRACE methods are not supported.</li>
                                <li>The event broker does not support the ability to change the original HTTP method when the REST&#xA0;delivery point (RDP) delivers a message to the REST consumer.</li>
                                <li>The event broker does not support the ability to change the query parameters of messages when the RDP delivers a message to the REST consumer.</li>
                                <li>The event broker does not support eavesdropping applications over HTTP. The only applications that can receive requests over HTTP are the remote microservices. If you add an eavesdropping HTTP&#xA0;application, responses from both the microservices and the eavesdropping application result in a race condition for the originating REST&#xA0;client.</li>
                                <li>Many functions of API gateways are not provided with the Microgateway feature including:<ul><li>Fan-out and response consolidation </li><li>Payload transformation</li><li>API lifecycle management</li><li>API version control</li></ul></li>
                              </ul>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Receive_Requests"/>Configuring to Receive REST&#xA0;Requests</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Follow the steps below to configure a Solace PubSub+ event broker to receive REST requests.</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Enable system level REST&#xA0;service for incoming REST&#xA0;connections (refer to <a href="Managing-Services.htm#REST-Service" class="MCXref xref">REST Service Management</a>).</li>
                                <li value="2">Configure incoming REST&#xA0;service for one or more Message VPNs (refer to <a href="Managing-REST-Service.htm#Config-In-REST-Connections" class="MCXref xref">Configuring Incoming Connections</a>).<ol style="list-style-type: lower-alpha;"><li value="1">Specify a dedicated listen port for the REST&#xA0;service (refer to <a href="Managing-REST-Service.htm#Set-Listen" class="MCXref xref">Setting Listen Ports</a>).</li><li value="2">Configure REST&#xA0;for either plain-text or SSL service (refer to <a href="Managing-REST-Service.htm#Enabling-Plain" class="MCXref xref">Enabling REST Plain Text Service</a> and <a href="Managing-REST-Service.htm#Enabling-SSL" class="MCXref xref">Enabling REST SSL Service</a>).</li></ol></li>
                                <li value="3">Enable gateway mode for the Message VPNs (refer to <a href="#Configure_VPN_Mode" class="MCXref xref">Configuring the REST Message VPN Mode</a>).</li>
                                <li value="4">Optionally, configure ACLs  to control the URIs that REST clients have access to, and the HTTP methods they are allowed to use (refer to <a href="../Security/Managing-Access-Control-Lists.htm" class="MCXref xref">ACL Configuration</a>).</li>
                              </ol>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Publish_Requests"/>Configuring to Publish REST&#xA0;Requests</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Follow the steps below to configure a Solace PubSub+ event broker to publish REST requests.</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Enable system-level REST service for outgoing REST&#xA0;connections (refer to <a href="Managing-Services.htm#Enable-Outgoing-REST" class="MCXref xref">Enabling Outgoing REST Connections</a>).</li>
                                <li value="2">Configure and enable a REST&#xA0;delivery point (RDP) within a REST-enable Message VPN (refer to <a href="Managing-RDPs.htm" class="MCXref xref">Managing REST Delivery Points</a>).<ol style="list-style-type: lower-alpha;"><li value="1">Configure at least one queue binding for the RDP (refer to <a href="Managing-RDPs.htm#managing_rest_messaging_1948951837_1016325" class="MCXref xref">Managing REST Delivery Points</a>).</li><li value="2">Optionally, configure how the event broker handles the authority value in outbound URIs (refer to <a href="Managing-RDPs.htm#Replacin" class="MCXref xref">Managing REST Delivery Points</a>).   </li></ol></li>
                                <li value="3">Configure and enable a REST&#xA0;consumer (refer to <a href="Managing-RDPs.htm#managing_rest_messaging_1948951837_1004015" class="MCXref xref">Managing REST Delivery Points</a>).<ol style="list-style-type: lower-alpha;"><li value="1">Configure connection parameters for the REST&#xA0;consumer (refer to <a href="Managing-RDPs.htm#managing_rest_messaging_1948951837_1004967" class="MCXref xref">Managing REST Delivery Points</a>).</li></ol></li>
                              </ol>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Configure_VPN_Mode"/>Configuring the REST Message VPN Mode</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">By default, REST-enabled VPNs  operate in messaging mode.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the REST&#xA0;Message VPN mode, enter the following CONFIG&#xA0;command:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-vpn/service/rest)# mode {gateway | messaging}</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><code>gateway</code> configures the Message VPN to act as a Microgateway through which REST&#xA0;messages are propagated.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><code>messaging</code> configures the Message VPN to act as an event broker on which REST&#xA0;messages are queued.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">The no version of the this command (<code>no mode</code>) returns the Message VPN to the default mode (messaging).</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Configure_Queues"/>Configuring Queues for a Microgateway</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Configuring a Message VPN to act as a Microgateway alters the way the event broker encodes incoming requests and responses for internal transportation. This change in processing requires careful consideration when creating queues for traffic management, or when adding eavesdropping applications to the deployment.</p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Configuring Queues for Traffic Management to Microservices</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Message VPNs configured to act as Microgateways encode the HTTP method (POST, GET, DELETE) and path  of incoming requests to Solace message topics for internal transportation. This enables the event broker to deliver each HTTP&#xA0;method to separate queues. You can use this functionality to configure traffic management to remote microservices.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To add a topic subscription to a queue used in a Microgateway deployment enter the following CONFIG&#xA0;command. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-spool/queue)# subscription topic &lt;HTTP method&gt;/&lt;target-path&gt;</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For example, to add a subscription for all POST requests with a specific path:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-spool/queue)# subscription topic POST/store/orders</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To add a subscription for all HTTP requests with a specific path:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-spool/queue)# subscription topic */store/account/orders</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To add subscriptions for individual HTTP&#xA0;methods  regardless of path:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-spool/queue)# subscription topic POST/&gt;<br/>solace(configure/message-spool/queue)# subscription topic GET/&gt;</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For an example describing how to configure queues for traffic management to microservices, refer to <a href="Microgateway-Traffic-Mgmt-Example.htm" class="MCXref xref">Traffic Management to Microservices Example</a>.</p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Configuring Queues for Eavesdropping Applications</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In order for the eavesdropping application to receive requests and responses propagated by the Microgateway, you must add the following  topic subscriptions to each corresponding queue:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>One or more subscriptions that match  existing subscriptions used to receive requests from REST&#xA0;clients. </li>
                                <li>One or more subscriptions that correspond with the reply-to topics generated by the event broker. These topics are generated according to the following format: <code>#P2P/&lt;virtual-router-name&gt;/_rest-&lt;tsid&gt;/&lt;request-method&gt;/&lt;request-path&gt;</code>.</li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For example, to add a topic subscription to a queue so that a corresponding eavesdropping application receives all responses from remote microservices:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-spool/queue)# subscription topic #P2P/v:solace/_rest-*/&gt;</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For an example describing how to configure queues for eavesdropping applications, refer to <a href="Microgateway-Eavesdropping-App-Example.htm" class="MCXref xref">Eavesdropping Application Example</a>.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Passing_OAuth_Tokens"/>Passing OAuth Tokens to REST Consumers</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In a REST/HTTP client connection, the event broker uses the <code>Authorization: basic &lt;b64_username_password&gt;</code> HTTP header field for its own authentication. In gateway mode, the broker passes any type of authorization header other than <code>basic</code> through to the REST consumer. You can use this mechanism to pass OAuth credentials through the broker to have the remote host handle the authorization.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To pass OAuth credentials through the broker, configure the REST clients to insert the OAuth token in a <code>bearer</code> type authorization header:</p>
                              <pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">Authorization: bearer &lt;oauth_bearer_access_token&gt;</pre>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">This header is passed through the broker and will be received unchanged by the remote server. Because the broker does not validate anything in the header, you must ensure that the OAuth token has not expired and will work as expected at the destination.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">OAuth tokens can be very long. PubSub+ event brokers don't impose any limit on the size of an HTTP header field, except that the HTTP header fields must all fit into the overall message size limitations (approximately 30MB for guaranteed messages in most cases). In addition, although HTTP allows header field values to be split across multiple lines, we recommend using one line per HTTP header field.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">In gateway mode, the PubSub+ event broker passes duplicate HTTP header fields through to the remote server. If a REST client sends multiple (non-basic) authorization headers, they are all passed unchanged through the event broker; the remote server is expected to handle these duplicate headers gracefully.</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
