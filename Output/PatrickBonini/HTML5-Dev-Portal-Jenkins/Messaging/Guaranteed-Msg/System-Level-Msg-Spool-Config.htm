<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>System-Level Message Spool Configuration</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">System-Level Message Spool Configuration</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">This section provides information on the system-level message spool parameters that you can configure for the <span class="mc-variable Variables.CompanyName variable">Solace</span>&#xA0;<span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> event broker. These parameters are critical to the operation of Guaranteed Messaging. This section also provides information on how to enable or disable message spooling for an event broker.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In addition to configuring the message spool parameters when using Guaranteed Messaging, it is important to consider the maximum number of messages that the event broker can store in the message spool. You can increase the number of queue messages supported by the event broker using the <code>max-queue-messages</code> system scaling parameter. For more information, see <a href="../../Software-Broker/System-Scaling-Parameters.htm#max-queue-messages" class="MCXref xref">Maximum Number of Queue Messages</a>.</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <p class="Tbl_Body">Config-Sync will not automatically synchronize the hardware properties. Therefore, if the event broker is being used in a high-availability (HA) pair or in a replicated site, you must manually configure the hardware message-spool properties on each mate event broker or replicated Message VPN.</p>
                                <p> To determine whether an object or property is synchronized, look up the command used to configure the object or property in the <a href="../../Admin/Solace-CLI/Command-Line-Reference.htm" class="MCXref xref">CLI Command Reference</a>, or, in the Solace CLI, end the command with "?". The Help will list whether the object/property is synchronized.</p>
                              </div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">When high-availability (HA) redundant event brokers are used,  enable Config-Sync for each event broker in the redundant pair. Enabling Config-Sync can reduce possible configuration and input errors and increase the speed at which Guaranteed Messaging information is handled if a redundancy switchover occurs. For more, see <a href="../../Features/Config-Sync/Config-Sync-Overview.htm" class="MCXref xref" data-mc-unresolved-link="import-link:redundancy_and_fault_tolerance_506099482_55200">Config-Sync</a>.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-Ext-Disks"/>Configuring External Disk Arrays</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When using Guaranteed Messaging for either a standalone appliance or a redundant pair of appliances, an external disk storage array can be used for spooling messages.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the Worldwide Name (WWN) used when accessing a LUN on an external disk storage array, enter the following  CONFIG commands:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace# configure<br/>solace(configure)# hardware message-spool<br/>solace(configure/hardware/message-spool)# disk-array wwn &lt;wwn&gt;</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><code>wwn &lt;wwn&gt;</code> is the Worldwide Name. If in Network Address Authority (NAA) format, it is a unique 8-byte or 16-byte number represented as a string of hex characters separated by colons starting with 1, 2, 5, or 6 (for example: <code>50:00:2a:c0:00:f1:33:74</code> or <code>60:06:01:60:bf:51:12:00:9a:fb:40:97:83:3f:dc:11</code>). If not in NAA format, it can be any string without colons. The default is Null.</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <ul>
                                  <li>Before configuring the WWN for an external disk storage array through the <code>disk-array</code> Message Spool CONFIG command, you must first (in the order given): <ul><li>delete all the messages spooled on the appliance for clients using the <code>delete-messages</code> Message Spool Admin EXEC command </li><li>enter the <code>shutdown</code> Message Spool CONFIG command to stop message spooling on the appliance (if started)</li><li>disable the internal disk drive on the appliance for message spooling through the <code>no internal-disk</code> Message Spool CONFIG command</li></ul></li>
                                  <li>The no version of this command (<code>no disk-array</code>) resets the WWN to its default value of Null.</li>
                                  <li>For information on how to configure the partitions and file system on the event broker once there is access to the LUN on the external disk storage array, see <a href="Configuring-External-Disk-Arrays.htm" class="MCXref xref">Configuring an External Disk Array for Guaranteed Messaging</a>.</li>
                                </ul>
                              </div>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Caution">
                                <p class="Tbl_Body">The file system of an external disk storage array can be corrupted if two or more non-redundant event brokers assert ownership for the same external disk storage array and successfully modify the same file system.</p>
                                <p>To avoid this, the mounting of the external disk storage array is stopped if a disk ownership conflict is detected, and declares the disk storage array unusable by the display of "Disk Contents Invalid" in the detailed status and usage item summary screen output by the <code>show message-spool detail</code> User EXEC command.</p>
                                <p>The system administrator can then make one of the event brokers take ownership of the conflicted disk storage array by using the <code>assert-disk-ownership</code> Message Spool Admin EXEC command.</p>
                              </div>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Msg-Spool-Thresh"/>Configuring Event Thresholds for the System Message Spool </h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the thresholds that control when system-level message spool events are generated for the event broker, enter the following CONFIG commands:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace# configure<br/>solace(configure)# hardware message-spool<br/>solace(configure/hardware/message-spool)# event</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">From this level of the CLI, you can now configure the thresholds at which the broker generates system-level events pertaining to the message spool.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">For information on the available system-level message-spool events and how to set the thresholds for them, see <a href="../../Monitoring/Configuring-System-Event-Thresholds.htm#Msg-Spool" class="MCXref xref">Configuring System Message Spool Event Thresholds</a>.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-Max-Spool"/>Configuring Max Spool Usage</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the maximum amount of disk space that can be used to spool messages, enter the following CONFIG commands:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace# configure<br/>solace(configure)# hardware message-spool<br/>solace(configure/hardware/message-spool)# max-spool-usage &lt;size&gt;</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><code>&lt;size&gt;</code> is an integer that specifies the maximum amount of message spool disk space (in MB) the broker as a whole can use. The valid range is from 0 (in which case spooling is effectively disabled) to the maximum amount of message spool disk space supported for the entire system. For details about the default values for this setting, see <a href="Message-Spooling.htm#max-spool-usage" class="MCXref xref">Maximum Spool Usage</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no max-spool-usage</code>, resets the size of the Local Spool Quota for the event broker back to the default value.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">When using an external disk storage array for Guaranteed Messaging with a redundant appliance pair, two partitions need to be created on the array&#x2014;one partition for each appliance. The partition sizes required depend on the maximum size configured for the message spool disk space using this command. A general rule of thumb is to create two partitions that are 1.1 times the maximum size configured for the message spool disk space. For example, if  you configure the maximum spool usage for appliances to be 600,000 MB using this command (that is, 600 GB), then Solace recommends you create two partitions on the array sized 600 x 1.1. This equals 660 GB for each partition, for a total of 1,320 GB Logical Unit Number (LUN). For further information, see <a href="../../Features/HA-Redundancy/Appliance-Redundancy-and-Fault-Tolerance.htm#redundancy_and_fault_tolerance_344917737_295043" class="MCXref xref">SAN Behavior for Guaranteed Messaging Through Active/Standby Redundancy</a>. For information on how to configure the partitions and file system on the Solace PubSub+ appliance once there is access to the LUN on the external disk storage array, see <a href="Configuring-External-Disk-Arrays.htm" class="MCXref xref">Configuring an External Disk Array for Guaranteed Messaging</a>.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-Max-Cache"/>Configuring Max Cache Usage</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When an event broker is processing Guaranteed messages, its Guaranteed Message Cache can use some of the data buffer resources that are also used for its NAB egress queues (see <a href="../Managing-Event-Delivery-Resources.htm" class="MCXref xref">Message Delivery Resources</a>).</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the maximum percentage of the NAB data buffer resources that the Guaranteed Message Cache can use, enter the following CONFIG commands:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace# configure<br/>solace(configure)# hardware message-spool<br/>solace(configure/hardware/message-spool)# max-cache-usage &lt;percent-usage&gt;</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><u>Where</u>:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><code>&lt;percent-usage&gt;</code> is the maximum amount of the NAB data buffers (as a percentage) that the Guaranteed Message Cache is allowed to use. The valid values are 0 (disables the Guaranteed Message Cache feature), or 1 through 50. The default is 10.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no max-cache-usage</code>, resets the maximum percentage of the NAB data buffers that the Guaranteed message cache can use back to the default value.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">When the Guaranteed Message Cache's utilization reaches the maximum limit, the Guaranteed Message Cache is not used to process subsequent Guaranteed messages.
        </p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-Active-Active-Role"/>Configuring the Active/Active HA&#xA0;Role for Guaranteed Messaging</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">If the HA configuration is set to active/active, you must configure the HA role an appliance will take for Guaranteed Messaging.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">If the HA&#xA0;configuration is not set to active/active (in other words if the active/standby role is set to something other than <code>none</code>), this setting is ignored by the appliance and has no impact on the Guaranteed Messaging configuration.  For more information about  the active/standby role, refer to <a href="../../Features/HA-Redundancy/Configuring-Appliance-Redundancy-Parameters.htm#Assignin" class="MCXref xref">Configuring Redundancy Parameters</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the HA role an appliance will take for Guaranteed Messaging if the HA configuration is set to active/active, enter the following CONFIG&#xA0;commands:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace# configure<br/>solace(configure)# hardware message-spool<br/>solace(configure/hardware/message-spool)# virtual-router-when-active-active {primary | backup}</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <u>Where:</u>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><code>primary</code> sets the HA role   to primary. In other words, this enables the message spool for the primary virtual router. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><code>backup</code> sets the HA role   to backup. In other words, this enables the message spool for the backup virtual router.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no virtual-router-when-active-active</code>, resets the HA role back to the default value (primary). </p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Enable-Disk"/>Enabling the Internal Disk for Message Spooling</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">By default, the internal physical disk drive of a appliance is disabled for message spooling with Guaranteed Messaging, and a customer-supplied external disk storage array must be used for message spooling with Guaranteed Messaging.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">Solace recommends using a customer-supplied external disk storage array to support Guaranteed Messaging. Using the internal appliance disk drive for message spooling is not recommended. For more information, <a href="../../get-support.htm" class="link-internal">contact Solace</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To enable an appliance's internal disk drive for message spooling, enter the following CONFIG commands:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace# configure<br/>solace(configure)# hardware message-spool<br/>solace(configure/hardware/message-spool)# internal-disk</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no internal-disk</code>, disables the internal disk drive for message spooling.</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <ul>
                                  <li>Before changing between internal and external disks through the <code>internal-disk</code> Message Spool CONFIG command, you must first do the following (in the order given): <ol><li value="1">Reset the message spool. See <a href="Sys-Level-Msg-Spool-Admin-Tasks.htm#Resettin" class="MCXref xref">Resetting the Guaranteed Message Spool</a> for instructions.</li><li value="2">Stop message spooling on the event broker (if started) using the <code>shutdown</code> Message Spool CONFIG command.</li></ol></li>
                                  <li>The internal disk drive cannot be enabled for message spooling through the <code>internal-disk</code> Message Spool CONFIG command if event broker redundancy is enabled. In this case, you must first stop the event broker redundancy facility on the event broker (if running) through the <code>shutdown</code> Redundancy CONFIG command:</li>
                                  <p class="Code">solace(configure)# redundancy<br/>solace(configure/redundancy)# shutdown</p>
                                </ul>
                              </div>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Enable-Guaranteed"/>Enabling Guaranteed Message Spooling</h2>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Caution">
                                <ul>
                                  <li>Always perform message spool state changes within a maintenance window to prevent service interruption.<br/></li>
                                  <li>Always disconnect all client connections before changing the message spool state on an event broker. To disconnect a client connection, either close the client Session through the Solace messaging API, or terminate the client application.<br/></li>
                                  <li>After message spool state changes are completed on the event broker, clients may reconnect to it.</li>
                                  <li>When setting up a network of event brokers for Guaranteed Messaging service, always perform the message spool state changes before configuring neighbor links between the event brokers. Otherwise, they may not advertise their Guaranteed Messaging capabilities correctly to each other.</li>
                                </ul>
                              </div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">By default, Guaranteed Message spooling is not enabled for Solace PubSub+ appliances, but it is enabled for Solace PubSub+ software event brokers.</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>To start Guaranteed Message spooling, enter the CONFIG commands:
                <p class="Code">solace# configure<br/>solace(configure)# hardware message-spool<br/>solace(configure/hardware/message-spool)# no shutdown</p></li>
                                <li>To stop Guaranteed Message spooling on the event broker, enter the following CONFIG command:
                <p class="Code">solace(configure/hardware/message-spool)# shutdown</p></li>
                              </ul>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <ul>
                                  <li>The <code>no shutdown primary</code> Message Spool CONFIG command is not allowed if:<ul><li>The <code>no shutdown backup</code> Message Spool CONFIG command has been entered beforehand. In this case, you must enter the <code>shutdown</code> Message Spool CONFIG command first to disable the backup event broker configuration. </li><li>There are already messages spooled for the backup event broker (that is, backup VRID). In this case, you must first delete all spooled messages for all clients using the <code>delete-messages</code> Message Spool Admin EXEC command.</li><li>An appliance's internal disk is disabled for message spooling, and the worldwide name (WWN) used when accessing a LUN on an external disk storage array has not been configured beforehand through the <code>disk-array</code> Message Spool CONFIG command. In this case, you must first configure the WWN for the external disk storage array.</li></ul></li>
                                  <li>The <code>no shutdown backup</code> Message Spool CONFIG command is not allowed if:<ul><li>The <code>no shutdown primary</code> Message Spool CONFIG command has been entered beforehand. In this case, you must enter the <code>shutdown</code> Message Spool CONFIG command first to disable the primary event broker configuration. </li><li>There are already messages spooled for the primary event broker (that is, primary VRID). In this case, you must first delete all spooled messages for all clients using the <code>delete-messages</code> Message Spool Admin EXEC command.</li><li>The event broker's internal disk drive is enabled for message spooling through the <code>internal-disk</code> Message Spool CONFIG command. In this case, you must first enter the <code>no internal-disk</code> Message Spool CONFIG command to disable the internal disk drive for message spooling.</li><li>The event broker's internal disk drive is disabled for message spooling through the <code>no internal-disk</code> Message Spool CONFIG command, and the worldwide name (WWN) used when accessing a LUN on an external disk storage array has not been configured beforehand through the <code>disk-array</code> Message Spool CONFIG command. In this case, you must first configure the WWN for the external disk storage array.</li></ul></li>
                                  <li>Running the <code>no shutdown primary</code> or <code>no shutdown backup</code> Message Spool CONFIG commands automatically clear all current statistics for spooled messages.</li>
                                </ul>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
