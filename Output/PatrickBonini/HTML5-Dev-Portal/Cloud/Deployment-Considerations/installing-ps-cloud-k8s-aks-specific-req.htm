<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=Product-Names.cloud_product_titlecase%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Installing PubSub+&#xA0;Cloud in Azure Kubernetes Service (AKS)</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" data-mc-stylesheet-type="table"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a xmlns="" name="aanchor220"/><MadCap:concept term="Cloud"/>Installing <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput"><span class="mc-variable Product-Names.cloud_product_titlecase variable">PubSub+&#xA0;Cloud</span></MadCap:conditionalText> in Azure Kubernetes Service (AKS)</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Azure Kubernetes Service (AKS) simplifies deploying a managed Kubernetes cluster in Azure by offloading the operational overhead to Azure. As a hosted Kubernetes service, Azure handles critical tasks, like health monitoring and maintenance. For more information about AKS, see the
                <a href="https://docs.microsoft.com/en-us/azure/aks/" class="link-offsite">Azure Kubernetes Service</a>&#xA0;documentation.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">There are a number of environment-specific steps that you must perform to install <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput"><span class="mc-variable Product-Names.cloud_product_long variable">PubSub+ Cloud</span></MadCap:conditionalText>. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">Before you
            perform the environment-specific steps described below, ensure that you review and fulfill the general requirements
listed in <a href="prerequisites-k8s.htm" class="MCXref xref">Common Kubernetes Prerequisites</a>.</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <p><span class="mc-variable Variables.CompanyName variable">Solace</span> does not support <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span> integration with service meshes. Service meshes include Istio, Cilium, Linkerd, Consul, and others. If deploying to a cluster with a service mesh, you must:</p>
                                <ul>
                                  <li>exclude the <code>target-namespace</code> used by <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span> services from the service mesh.</li>
                                  <li>set up connectivity to <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span> in the cluster using LoadBalancer or NodePort. See <a href="deployment-exposecluster-k8s.htm" target="_blank" class="MCXref xref">Exposing Event Broker Services to External Traffic</a> for more information.</li>
                                </ul>
                              </div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note"><span class="mc-variable Variables.CompanyName variable" data-mc-conditions="SAP.SapHideFromOutput">Solace</span> provide<MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput">s</MadCap:conditionalText> reference Terraform projects for deploying a Kubernetes cluster to AKS, EKS, and GKE. These Terraform projects have the recommended configuration settings, such as worker node sizes, resource configurations, taints, and labels optimized to install <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span>. <br/><br/>You can download the reference Terraform projects from <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput">our</MadCap:conditionalText> GitHub repository: <a href="https://github.com/SolaceLabs/customer-controlled-region-reference-architectures?tab=readme-ov-file" target="_blank" class="link-offsite">https://github.com/SolaceLabs/customer-controlled-region-reference-architectures</a><br/><br/>Beware that all sample scripts, Terraform modules, and examples are provided as-is. You can modify the files as required and are responsible for maintaining the modified files for your Kubernetes cluster.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="aks-prerequsites"/>AKS Cluster Prerequisites</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following are the technical prerequisites for an AKS cluster deployment to deploy <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s:</p>
                              <dl xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <dt>Worker Nodes</dt>
                                <dd>Worker nodes that you use for <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span> components must use ephemeral disks for the OS.  <span class="mc-variable Variables.CompanyName variable">Solace</span>  recommends that you (the customer) use ephemeral disks  because Azure's premium managed disks don't provide the performance required for Kubernetes unless high-cost disks are utilized. When you use  ephemeral disks for the OS, this permits the virtual machines to utilize a storage solution that is performant and cost-effective. Since worker nodes don't persist critical information on the disk that is used by the OS, there's no requirement to use non-ephemeral disks.</dd>
                                <dt>Permissions</dt>
                                <dd>The following permissions are required by the you to deploy the Terraform module:<ul><li>All the permissions that are required to create and manage the AKS cluster. These permissions can be delegated by the Terraform module you use.</li><li>Permission to create Service Principals and assign the <b>Contributor</b> role over the whole resource group and the <b>Network Contributor</b> over the private subnets. 
                   <p>These permissions are given to the AKS cluster to create load balancers and configure them. In addition, these permissions allow the CNI to interact with subnets and route tables.</p></li><li>The AKS-managed service (called AzureContainerService) is assigned a permission. Specifically, the AzureContainerService AD Application will get the Network Contributor role assigned to it over the entire resources group.  The Terraform module requires this permission to read the NAT gateways configuration when it creates a cluster, and to configure networking as required by Azure-CNI.</li><li>An Azure account. Permissions to create and manage the following resources are required for the Terraform module you create:
                         <dl><dt>All Virtual Machine resources</dt><dd>The Terraform modules access to the VM resources to create the service principal, AD application and the AKS cluster. Note that the in the available example, the AKS cluster is created using the <code>data center-name</code> value from the <code>vars.tf</code> file using the convention <code>&lt;data center-name&gt;-aks</code>.</dd><dt>VNet</dt><dd>The Terraform module requires this permission to configure the Virtual Network (VNet).</dd><dt>Standard Load Balancers</dt><dd> The Terraform module requires this permission to create and configure the load balancers.</dd><dt>Premium LRS-managed Disks</dt><dd> The Terraform module requires this permission to access LRS disks.</dd><dt>Subnets</dt><dd> The Terraform module requires this permission to set up the subnets.</dd><dt>Security Groups</dt><dd> The Terraform module requires this permission to set up the necessary security groups.</dd><dt>Routing Tables</dt><dd> The Terraform module requires this permission to create the appropriate gateways.</dd><dt>Public IPs</dt><dd>The Terraform module requires this permission to attach elastic IP addresses (EIPs) to the NAT gateway.</dd></dl></li></ul></dd>
                              </dl>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="considerations-aks"/>AKS Cluster Specifications</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Before you (the customer)&#xA0;install the <span class="mc-variable Product-Names.cloud_agent_short variable">Mission Control Agent</span>, you must configure the AKS&#xA0;cluster with the technical specifications listed in the sections that follow. </p>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="aks-node-pool"/>Node Pool Requirements</h4>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For high-availability <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s, the cluster requires 12 node pools for <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s. These must be split into four sets of three node pools. Each node pool must be locked to a single availability zone. Locking a node pool to an availability zone allows the cluster autoscaler to function properly. <span class="mc-variable Variables.CompanyName variable">Solace</span> uses pod anti-affinity against the node pools' zone label to ensure that each pod in a high-availability <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span> is in a separate availability zone. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For high-availability <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s, the default (system) node pool spans all three availability zones. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The node pools must also meet the following requirements:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>
                                  <p>Configure the node pool settings where the OS&#xA0;disk type must be ephemeral and the OS&#xA0;disk size  must be 48.</p>
                                </li>
                                <li>AKS Worker nodes for monitoring must be a minimum of Standard_DS2s_v3. The following table shows the minimal Worker Node size required based on the largest plan that's supported for your deployment.
                <p><table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0"><col class="TableStyle-Table_Num-Column-Column1"/><col class="TableStyle-Table_Num-Column-Column1"/><col class="TableStyle-Table_Num-Column-Column1"/><thead><tr class="TableStyle-Table_Num-Head-Header1"><th class="TableStyle-Table_Num-HeadE-Column1-Header1">Node Pool Type</th><th class="TableStyle-Table_Num-HeadE-Column1-Header1">Recommended Minimum VM&#xA0;Size</th><th class="TableStyle-Table_Num-HeadD-Column1-Header1">Number of Worker nodes Required</th></tr></thead><tbody><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1">Monitoring</td><td class="TableStyle-Table_Num-BodyH-Column1-Body1">Standard_D2s_v3</td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">One for each service (the sum of all services of all types)</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1">Up to <span class="mc-variable Product-Names.class_1k variable">Enterprise 1K</span> (Kilo)</td><td class="TableStyle-Table_Num-BodyH-Column1-Body1">    Standard_E2s_v3</td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">Two for each  <span class="mc-variable Product-Names.class_1k variable">Enterprise 1K</span> service</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1">Up to <span class="mc-variable Product-Names.class_10k variable">Enterprise 10K</span> (Giga)</td><td class="TableStyle-Table_Num-BodyH-Column1-Body1">Standard_E4s_v3</td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">Two for each  <span class="mc-variable Product-Names.class_10k variable">Enterprise 10K</span> service</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyB-Column1-Body1">Up to <span class="mc-variable Product-Names.class_100k variable">Enterprise 100K</span> &#xA0;(Tera 100k)</td><td class="TableStyle-Table_Num-BodyB-Column1-Body1">Standard_E8s_v3</td><td class="TableStyle-Table_Num-BodyA-Column1-Body1">Two  for each <span class="mc-variable Product-Names.class_100k variable">Enterprise 100K</span> service</td></tr></tbody></table></p></li>
                                <li>
                                  <p>For deployments to <span class="mc-variable Product-Names.customer-controlled_region variable">Customer-Controlled Region</span>s, these are the virtual machine requirements: </p>
                                  <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
                                    <col class="TableStyle-Table_Num-Column-Column1"/>
                                    <col class="TableStyle-Table_Num-Column-Column1"/>
                                    <col class="TableStyle-Table_Num-Column-Column1"/>
                                    <col class="TableStyle-Table_Num-Column-Column1"/>
                                    <col class="TableStyle-Table_Num-Column-Column1"/>
                                    <col class="TableStyle-Table_Num-Column-Column1"/>
                                    <thead>
                                      <tr class="TableStyle-Table_Num-Head-Header1">
                                        <th class="TableStyle-Table_Num-HeadE-Column1-Header1" rowspan="3">Plans</th>
                                        <th class="TableStyle-Table_Num-HeadE-Column1-Header1" rowspan="3">Possible Virtual Machine Types</th>
                                        <th class="TableStyle-Table_Num-HeadD-Column1-Header1" colspan="4">Resources</th>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Head-Header1">
                                        <th class="TableStyle-Table_Num-HeadE-Column1-Header1" colspan="2">CPU</th>
                                        <th class="TableStyle-Table_Num-HeadD-Column1-Header1" colspan="2">Memory</th>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Head-Header1">
                                        <th class="TableStyle-Table_Num-HeadE-Column1-Header1">VM Cores (mCore)</th>
                                        <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Allocatable Cores (mCore)</th>
                                        <th class="TableStyle-Table_Num-HeadE-Column1-Header1">VM&#xA0;Memory (GiB)</th>
                                        <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Allocatable Memory (GiB)</th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1" rowspan="3">Monitoring Nodes</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Standard_D2s_V3</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">2000</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">1900</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">8</td>
                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">5</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">E2as_V4</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">2000</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">1900</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">16</td>
                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">12.3</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">E2s_V3</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">2000</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">1900</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">16</td>
                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">12.3</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1" rowspan="3">
                                          <p>
                                            <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput">Developer</MadCap:conditionalText>
                                          </p>
                                          <p><span class="mc-variable Product-Names.class_250 variable">Enterprise 250</span> (Nano)</p>
                                          <p><span class="mc-variable Product-Names.class_1k variable">Enterprise 1K</span> (Kilo)</p>
                                        </td>
                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">E2as_v4</td>
                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">2,000</td>
                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">1900</td>
                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">16</td>
                                        <td class="TableStyle-Table_Num-BodyD-Column1-Body1">12.3</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">E2s_v3</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">2,000</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">1900</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">16</td>
                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">12.3</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Standard_D4s_v3</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">4,000</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">3,860</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">16</td>
                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">12.3</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1" rowspan="3">
                                          <p><span class="mc-variable Product-Names.class_5k variable">Enterprise 5K</span> (Mega)</p>
                                          <p><span class="mc-variable Product-Names.class_10k variable">Enterprise 10K</span>&#xA0;(Giga)</p>
                                        </td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">E4as_v4</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">4,000</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">3,860</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">32</td>
                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">27</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">E4s_v3</td>
                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">4,000</td>
                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">3,860</td>
                                        <td class="TableStyle-Table_Num-BodyE-Column1-Body1">32</td>
                                        <td class="TableStyle-Table_Num-BodyD-Column1-Body1">27</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Standard_D8s_v3</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">8,000</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">7,820</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">32</td>
                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">27</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1" rowspan="3">
                                          <p><span class="mc-variable Product-Names.class_50k variable">Enterprise 50K</span> (Tera 50k)</p>
                                          <p><span class="mc-variable Product-Names.class_100k variable">Enterprise 100K</span>&#xA0;(Tera 100k)</p>
                                        </td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">E8as_v4</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">8,000</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">7,820</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">64</td>
                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">56.6</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">E8s_v3</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">8,000</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">7,820</td>
                                        <td class="TableStyle-Table_Num-BodyH-Column1-Body1">64</td>
                                        <td class="TableStyle-Table_Num-BodyG-Column1-Body1">56.6</td>
                                      </tr>
                                      <tr class="TableStyle-Table_Num-Body-Body1">
                                        <td class="TableStyle-Table_Num-BodyB-Column1-Body1">Standard_D16s_v3</td>
                                        <td class="TableStyle-Table_Num-BodyB-Column1-Body1">16,000</td>
                                        <td class="TableStyle-Table_Num-BodyB-Column1-Body1">15,740</td>
                                        <td class="TableStyle-Table_Num-BodyB-Column1-Body1">64</td>
                                        <td class="TableStyle-Table_Num-BodyA-Column1-Body1">56.6</td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </li>
                              </ul>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="aks-storage-class"/>Storage Class</h4>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For AKS, an autoscaler is included and the deployment script creates a storage class named <code>managed-premium-zoned</code>. The storage class works with <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span> to provide the following:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>Local Redundant Storage (LRS) redundancy. <span class="mc-variable Variables.CompanyName variable">Solace</span> requires an LRS disk because other types of redundancy are too slow. The <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span> Enterprise plans use high-availability services that replicate data across two LRS disks.</li>
                                <li><span class="mc-variable Variables.CompanyName variable">Solace</span>   requires block device-based storage as regular filesystem-based storage won't work with the <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>. As such, <span class="mc-variable Variables.CompanyName variable">Solace</span> requires <b>managed</b> volumes instead of <b>azurefile</b> volumes.</li>
                                <li>The <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s are designed to use the XFS file system. The <code>fsType</code> setting must be set to <code>xfs</code> to ensure the <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s meet their required performance levels.</li>
                                <li>To support scale-up, the <code>StorageClass</code> must contain the <code>allowVolumeExpansion</code> property, and have it set to "<code>true</code>".</li>
                                <li>To deploy <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span>, a custom <code>StorageClass</code> in AKS is required so that the Persistent Volume Claims (PVC) process creates the volume in the same AZ where the pods are scheduled. &#xA0;This storage class  uses Managed Premium LRS disks, and has the <code>WaitForFirstConsumer</code> binding mode, which instructs PVC to wait for a pod to be scheduled before deciding which zones the disks are in.<p>This storage class should have properties similar to the following example:
                    </p><pre xml:space="preserve">
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  labels:
    addonmanager.kubernetes.io/mode: EnsureExists
    kubernetes.io/cluster-service: "true"  
  name: managed-premium-zoned
parameters:
  cachingmode: ReadOnly
  kind: Managed
  storageaccounttype: Premium_LRS
  fsType: xfs
  zoned: "true"
provisioner: disk.csi.azure.com
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
allowVolumeExpansion: true</pre></li>
                              </ul>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="aks-bastion-host"/>Bastion Host</h4>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>
                                  <p><span class="mc-variable Variables.CompanyName variable">Solace</span> recommends that you have <b>two Bastion hosts</b> and you disperse them over the three availability zones. This allows remote access to your deployment should a zone fail. If remote access to your deployment during a zone failure is not a requirement, you can choose to use the minimum of one Bastion host instead. The Bastion host is deployed using a minimal VM that runs only an SSH server.</p>
                                </li>
                                <li>
                                  <p>To determine the size of the subnet, you must know the number of  <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s that you plan to run on the AKS cluster. Knowing the number of pods and services helps you to determine how big the subnet must be. Refer to the subnet <a href="https://docs.microsoft.com/en-us/azure/aks/" class="link-offsite" target="_blank">Azure documentation</a> for details.</p>
                                </li>
                              </ul>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="aks-load-balancer"/>Load Balancer</h4>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When using AKS, <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s are exposed through a single public network load balancer. The source IP address for outgoing connections to internet hosts are static IP address.  The static IP address that is used as a  front-end public IP is associated with the AKS public Standard Load Balancer.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You must use a Standard Load Balancer SKU instead of a Basic load balancer SKU. The Standard Load Balancer is required to act as a NAT solution and avoids the requirement to segregate the AKS cluster into zonal stacks and the requirement for a separate NAT. The Standard Load Balancer also allows you to  deploy the AKS cluster to a single, private subnet using a single route table, and simplifies the deployment and planning of CIDRs when using VNet peering technologies, such as <a href="https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/hybrid-networking/hub-spoke" target="_blank" class="link-offsite">Hub-spoke network topology in Azure</a>.</p>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="aks-networking"/>Networking</h4>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>
                                  <p>To spread an <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>, or rather the <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s over three different Availability Zones (AZ), an anti-pod affinity can be used. For regions that support Availability Zones (AZ), set the <code>topologyKey </code>to <code>topology.kubernetes.io/zone</code>; otherwize for AKS clusters that do not have AZ, set it to <code>kubernetes.io/hostname</code>.</p>
                                </li>
                                <li>
                                  <p>Configure the IP&#xA0;addresses for the pods to be by AKS&#xA0;Kubernetes rather than VNet. Use <code>kubenet</code> (assigned by the cluster) for Kubernetes or <code>azure</code> (assigned from the subnet). When you select <code>azure</code>, each worker node is pre-allocated 30 IP addresses from the VNet. Using <code>kubenet</code> does not assign pre-allocated IP addresses.</p>
                                </li>
                                <li>
                                  <p>Determine the number of outgoing SNAT (outgoing) ports for each VM in the cluster. The number you choose determines the number of worker nodes available; this must be between 0 and 64000. Choosing a lower number gives you more worker nodes, but fewer send connections per node. For more information about SNAT ports, see <a href="https://docs.microsoft.com/en-us/azure/load-balancer/outbound-rules#scenarios-with-outbound-rules" target="_blank" class="link-offsite">Outbound Rules Azure Load Balancer</a> and <a href="https://docs.microsoft.com/en-us/azure/load-balancer/outbound-rules#scenarios-with-outbound-rules" target="_blank" class="link-offsite">Scenarios with outbound rules</a> on the Microsoft website.</p>
                                </li>
                                <li>The requirements are one pod per <span class="mc-variable Product-Names.class_100 variable">Developer</span> service and three pods for other <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s. The  subnets need to be big enough to contain all the IP addresses used for the pods. For more information, see <a href="https://docs.microsoft.com/en-us/azure/aks/configure-azure-cni" target="_parent" class="link-offsite">Configure Azure CNI networking in Azure Kubernetes Service (AKS)</a> on the Microsoft website. 
                </li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For information about using Azure Kubernetes Service, see the <a href="https://docs.microsoft.com/en-us/azure/aks/" class="link-offsite" target="_blank">Azure documentation site</a>.</p>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="aks-ip-range"/>IP Range</h4>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">There are two networking options in Azure: Kubenet and Azure CNI. For <span class="mc-variable Product-Names.customer-controlled_region variable">Customer-Controlled Region</span>s, <span class="mc-variable Variables.CompanyName variable">Solace</span> recommends using Kubenet. Kubenet offers the most efficient CIDR requirements for the VNet containing the cluster. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">CIDR requirements for <span class="mc-variable Product-Names.dedicated_region variable">Dedicated Region</span>s depend on your need to access <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s privately through peering. If this is necessary, <span class="mc-variable Variables.CompanyName variable">Solace</span> requires a CIDR that is compatible with your network plan. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You should carefully consider future expansion requirements when estimating the CIDR size required for your AKS cluster. Once deployed, you cannot change the CIDR and expanding the size of your VNet is not simple.  For more information, see <a href="#considerations-aks" class="MCXref xref">AKS Cluster Specifications</a>. <a name="CIDR_calc"/>You can also use the <span class="mc-variable Variables.CompanyName variable">Solace</span> provided <MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput"><a href="CIDR_calculator/cloud-CIDR-calculator.xlsx" target="_blank" class="link-offsite">downloadable excel-based CIDR calculator</a></MadCap:conditionalText> to help calculate your CIDR requirements. </p>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="deployments-restricted-az"/>Deployments in Regions With No Availability Zones</h4>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Some regions do not have availability zones (AZs). You can deploy to these regions, but the IaaS has a reduced fault tolerance without AZs.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"> To deploy to regions that don't have AZs available, in the anti-pod affinity, the <code>topologyKey</code> key should be set to <code>kubernetes.io/hostname</code>, whereas when AZs are available, it is set to  <code>topology.kubernetes.io/zone</code>.</p>
                              <h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="Autoscaling"/>Autoscaling</h4>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Your cluster requires autoscaling to provide the appropriate level of available resources for your <span class="mc-variable Product-Names.broker_cloud_short variable">event broker service</span>s as their demands change. <span class="mc-variable Variables.CompanyName variable">Solace</span> recommends using the Kubernetes Cluster Autoscaler, which you can find in the Kuberenetes GitHub repository at: <a href="https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler" class="link-offsite" target="_blank">https://github.com/kubernetes/autoscaler/tree/master/cluster-autoscaler</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">See the <a href="https://docs.microsoft.com/en-us/azure/aks/cluster-autoscaler" class="link-offsite" style="font-style: italic;" target="_blank">Automatically scale a cluster to meet application demands on Azure Kubernetes Service (AKS)</a> documentation on the Microsft Azure Kubernetes Service (AKS) documentation site for information about implementing a Cluster Autoscaler.</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.18.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 18, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
