<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Traffic Management to Microservices Example</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link rel="apple-touch-icon" sizes="180x180" href="../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../Skins/Favicons/favicon-16x16.png"/>
    <script src="../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Traffic Management to Microservices Example</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The following sections provide an example of how to use a Microgateway to configure basic traffic management to microservices with the Solace CLI. In the example, two queues are created and bound to a REST&#xA0;delivery point (RDP) to provide prioritized processing of POST&#xA0;requests to a single remote microservice instance. </p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>
                                  <a href="#Enable_Mode" class="MCXref xref">Step 1: Enable REST Gateway Mode </a>
                                </li>
                                <li>
                                  <a href="#Create_Queues" class="MCXref xref">Step 2: Create the Appropriate Queues</a>
                                </li>
                                <li>
                                  <a href="#Configure_TTL" class="MCXref xref">Step 3: Configure the Queues to Respect TTLs</a>
                                </li>
                                <li>
                                  <a href="#Add_Sub" class="MCXref xref">Step 4: Add Topic Subscriptions to  Each Queue</a>
                                </li>
                                <li>
                                  <a href="#Enable_Queues" class="MCXref xref">Step 5: Enable the Queues</a>
                                </li>
                                <li>
                                  <a href="#Create_RDP" class="MCXref xref">Step 6: Create REST Delivery Points</a>
                                </li>
                                <li>
                                  <a href="#Create_Queue_Bindings" class="MCXref xref">Step 7: Create Queue Bindings</a>
                                </li>
                                <li>
                                  <a href="#Create_Consumers" class="MCXref xref">Step 8: Create REST Consumers</a>
                                </li>
                                <li>
                                  <a href="#Specify_Destination" class="MCXref xref">Step 9: Specify Remote Microservice Destinations</a>
                                </li>
                                <li>
                                  <a href="#Enable_Consumers" class="MCXref xref">Step 10: Enable REST Consumers</a>
                                </li>
                                <li>
                                  <a href="#Enable_RDP" class="MCXref xref">Step 11: Enable REST Delivery Points</a>
                                </li>
                                <li>
                                  <a href="#Verify" class="MCXref xref">Step 12: Verify All Connections are Up</a>
                                </li>
                              </ul>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Assumpti"/>Before you begin</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The example provided in the following sections assumes that the following parameters are already configured on the Solace PubSub+ event broker:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>System level parameters for incoming and outgoing REST&#xA0;connections.</li>
                                <li>The incoming REST&#xA0;service for the Message VPN, including the dedicated REST&#xA0;listen port and encryption method.</li>
                              </ul>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Enable_Mode"/>Step 1: Enable REST Gateway Mode </h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Before the event broker can act as a Microgateway, you must enable gateway mode on the Message VPN you want to use for the service. In this example, an existing Message VPN is used to enable the Microgateway deployment. Omitted from the example are the steps required to set up authentication or use ACLs to control client access to specific URIs and HTTP methods. For more information, refer to  <a href="../Security/Configuring-Client-Authentication.htm" class="MCXref xref">Configuring Client Authentication</a> and <a href="../Security/Managing-Access-Control-Lists.htm" class="MCXref xref">ACL Configuration</a>  . </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../Resources/Images/Microgateway-Tasks/microgateway-enable1_750x316.png" style="width: 750;height: 316;" alt=""/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure)# message-vpn microgateway<br/>solace(configure/message-vpn)# service rest<br/>solace(configure/message-vpn/service/rest)# mode gateway<br/>solace(configure/message-vpn/service/rest)# exit<br/>solace(configure/message-vpn/service)# exit<br/>solace(configure/message-vpn)# exit</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Create_Queues"/>Step 2: Create the Appropriate Queues</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Once gateway mode is enabled on a Message VPN, the event broker encodes the HTTP method and path of incoming requests into a message topic for internal transportation. This process enables the event broker to deliver requests to specific queues. You can use this functionality to load balance requests by method or path, set up prioritized processing, and add eavesdropping applications to the service.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this example, two queues (Queue A&#xA0;and Queue B) are created to enable prioritized processing of POST requests.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../Resources/Images/Microgateway-Tasks/microgateway-queues1_750x309.png" style="width: 750;height: 309;" alt=""/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure)# message-spool message-vpn microgateway<br/>solace(configure/message-spool)# create queue A<br/>solace(configure/message-spool/queue)# exit<br/>solace(configure/message-spool)# create queue B</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Configure_TTL"/>Step 3: Configure the Queues to Respect TTLs</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To prevent   wasted message exchanges and stop stale messages from persisting on each queue, Solace recommends that you configure queues used in Microgateway deployments to respect messages Time-to-Live (TTL) expiration values.</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Tip">When you configure queues for eavesdropping applications, be sure to ignore this configuration so that all messages  persist and are available for collection.</div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this example, both queues are configured to respect TTLs. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-spool/queue)# respect-ttl<br/>solace(configure/message-spool/queue)# exit<br/>solace(configure/message-spool)# queue A<br/>solace(configure/message-spool/queue)# respect-ttl</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Add_Sub"/>Step 4: Add Topic Subscriptions to  Each Queue</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Topic subscriptions provide the necessary information for queues to receive incoming requests from REST&#xA0;clients. You can use topic subscriptions to route requests to specific queues for prioritized processing, or to route requests from associated queues to specific microservice instances. In addition, if you want to add eavesdropping applications to the service, you can add a matching topic subscription for the eavesdropping application (refer to <a href="Microgateway-Eavesdropping-App-Example.htm" class="MCXref xref">Eavesdropping Application Example</a>).</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this example, topic subscriptions are added to each queue in the service for prioritized processing of POST&#xA0;requests. On Queue A, a subscription is added to attract all POST&#xA0;requests. On Queue B, subscriptions are added to attract all other request methods. Although each queue is serviced equally, adding a separate dedicated queue for POST&#xA0;requests ensures these requests receive faster treatment, especially during periods of overload.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../Resources/Images/Microgateway-Tasks/microgateway-subscriptions1_750x311.png" style="width: 750;height: 311;" alt=""/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-spool/queue)# subscription topic POST/&gt;<br/>solace(configure/message-spool/queue)# exit<br/>solace(configure/message-spool)# queue B<br/>solace(configure/message-spool/queue)# subscription topic GET/&gt;<br/>solace(configure/message-spool/queue)# subscription topic DELETE/&gt;<br/>solace(configure/message-spool/queue)# subscription topic PATCH/&gt;<br/>solace(configure/message-spool/queue)# subscription topic HEAD/&gt;<br/>solace(configure/message-spool/queue)# subscription topic OPTIONS/&gt;<br/>solace(configure/message-spool/queue)# subscription topic PUT/&gt;</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Enable_Queues"/>Step 5: Enable the Queues</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Before any of the queues in the service can process requests, you must enable them. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-spool/queue)# no shutdown<br/>solace(configure/message-spool/queue)# exit<br/>solace(configure/message-spool)# queue A<br/>solace(configure/message-spool/queue)# no shutdown<br/>solace(configure/message-spool/queue)# exit<br/>        solace(configure/message-spool)# exit</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Create_RDP"/>Step 6: Create REST Delivery Points</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">RDPs facilitate message delivery to REST&#xA0;consumers. For more information about this process, refer to <a href="../API/REST/REST-Consumers.htm#_Toc433874658" class="MCXref xref">Solace PubSub+ Event Broker Configuration Objects</a>. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this example, a single RDP is created to provide connectivity to a corresponding REST&#xA0;consumer. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../Resources/Images/Microgateway-Tasks/microgateway-rdp1_750x312.png" style="width: 750;height: 312;" alt=""/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure)# message-vpn microgateway<br/>solace(configure/message-vpn)# rest<br/>solace(configure/message-vpn/rest)# create rest-delivery-point RDP</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Create_Queue_Bindings"/>Step 7: Create Queue Bindings</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Each RDP&#xA0;must be bound to one or more queues to enable requests to flow from REST&#xA0;clients to remote microservices. When you create queue bindings for Microgateway deployments, you can optionally configure how the event broker handles the authority value in outbound URIs. For more information refer to <a href="Managing-RDPs.htm#Replacin" class="MCXref xref">Managing REST Delivery Points</a></p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this example, each queue is bound to a single RDP. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../Resources/Images/Microgateway-Tasks/microgateway-queue-binding1_750x306.png" style="width: 750;height: 306;" alt=""/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(.../message-vpn/rest/rest-delivery-point)# create queue-binding A<br/>solace(...est/rest-delivery-point/queue-binding)# exit<br/>solace(.../message-vpn/rest/rest-delivery-point)# create queue-binding B<br/>solace(...est/rest-delivery-point/queue-binding)# exit</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Create_Consumers"/>Step 8: Create REST Consumers</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">REST&#xA0;consumers provide connectivity between RDPs and remote microservices. More specifically, you must configure at least one REST&#xA0;consumer for each DNS name that you want to receive requests. For more information, refer to <a href="../API/REST/REST-Consumers.htm#_Toc433874661" class="MCXref xref">REST Consumer</a>. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">RDPs can contain multiple REST&#xA0;consumers, however, in this example the RDP contains a single REST&#xA0;consumer for final delivery to one microservice instance.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../Resources/Images/Microgateway-Tasks/microgateway-rc1_750x301.png" style="width: 750;height: 301;" alt=""/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(.../message-vpn/rest/rest-delivery-point)# create rest-consumer RC</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Specify_Destination"/>Step 9: Specify Remote Microservice Destinations</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To ensure delivery of requests to the appropriate remote microservice, you must configure the hostname and optionally the port of each destination.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this example, a single microservice instance is configured as a remote destination for incoming requests.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../Resources/Images/Microgateway-Tasks/microgateway-service-provider1_750x303.png" style="width: 750;height: 303;" alt=""/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(...est/rest-delivery-point/rest-consumer)# remote<br/>solace(...t-delivery-point/rest-consumer/remote)# host www.mystore.com/storefront/<br/>solace(...t-delivery-point/rest-consumer/remote)# port 8080<br/>solace(...t-delivery-point/rest-consumer/remote)# exit</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Enable_Consumers"/>Step 10: Enable REST Consumers</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Before each REST consumer can process requests, you must enable it. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(...est/rest-delivery-point/rest-consumer)# no shutdown<br/>solace(...est/rest-delivery-point/rest-consumer)# exit</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Enable_RDP"/>Step 11: Enable REST Delivery Points</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Before each RDP can process requests, you must enable it.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(.../message-vpn/rest/rest-delivery-point)# no shutdown</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Verify"/>Step 12: Verify All Connections are Up</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">After all components in the service are configured and enabled, you can issue the following show commands to verify that each component is operational and ready to process requests (both the <code>Admin State</code> and <code>Operational State</code> flag is <code>Up</code>).</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Be aware that all components in the service do not receive an <code>Operational State</code> of <code>Up</code>, until connectivity is established to the corresponding remote destinations. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(.../message-vpn/rest/rest-delivery-point/)# show message-vpn &lt;message-vpn&gt; rest rest-delivery-point &lt;rdp-name&gt;</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="MCDropDown MCDropDown_Closed dropDown">
                                <span class="MCDropDownHead dropDownHead">
                                  <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>Example</a>
                                </span>
                                <div class="MCDropDownBody dropDownBody">
                                  <pre xml:space="preserve" class="Code">Total REST Delivery Points (up):                       1
Total REST Delivery Points (configured):               1
Total REST Consumers (up):                             1
Total REST Consumers (configured):                     1
Total REST Consumer Outgoing Connections (up):         3
Total REST Consumer Outgoing Connections (configured): 3
Total Queue Bindings (up):                             1
Total Queue Bindings (configured):                     1

Flags Legend:
A - Admin State (U=Up, D=Down)
O - Oper State (U=Up, D=Down)

                                                  REST
                                                 Consumer
                                                 Outgoing     Queue       Conns
                                        Status    Conns      Bindings    Blocked
RDP Name             Message VPN         A O    (up/conf)    (up/conf)     (%)
-------------------- ------------------ ------ ----------- ------------- -------
RDP                  microgateway        U U   3 / 3       1 / 1              0</pre>
                                </div>
                              </div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(.../message-vpn/rest/rest-delivery-point/)# show message-vpn &lt;message-vpn&gt; rest rest-consumer &lt;rest-consumer-name&gt;</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="MCDropDown MCDropDown_Closed dropDown">
                                <span class="MCDropDownHead dropDownHead">
                                  <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>Example</a>
                                </span>
                                <div class="MCDropDownBody dropDownBody">
                                  <pre class="Code" xml:space="preserve">Total REST Consumer Outgoing Connections (up):         3
Total REST Consumer Outgoing Connections (configured): 3

Flags Legend:
A - Admin State (U=Up, D=Down)
O - Oper State (U=Up, D=Down)

                                                                  REST Consumer
REST                                                       Status  Connections
Consumer             RDP Name           Message VPN        A O      (up/conf)
-------------------- ------------------ ------------------ ------ -------------
RC                   RDP                microgateway       U U    3 / 3
</pre>
                                </div>
                              </div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace(configure/message-vpn/rest/rest-delivery-point/)# show message-vpn &lt;message-vpn&gt; rest rest-delivery-point &lt;rdp-name&gt; queue-binding *</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="MCDropDown MCDropDown_Closed dropDown">
                                <span class="MCDropDownHead dropDownHead">
                                  <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>Example</a>
                                </span>
                                <div class="MCDropDownBody dropDownBody">
                                  <pre class="Code" xml:space="preserve">REST Delivery Point:                                RDP
  Message VPN:                                      microgateway
  Admin State:                                      Up
  Operational State:                                Up
  Last Failure Reason:                              No REST Consumers Up
  Last Failure Time:                                Feb 27 2018 17:18:17 UTC
  Client Profile:                                   default
  Client Name:                                      #rdp/RDP
  REST Consumers (up):                              1
  REST Consumers (configured):                      1
  REST Consumers Outgoing Connections (up):         3
  REST Consumers Outgoing Connections (configured): 3
  Queue Bindings (up):                              1
  Queue Bindings (configured):                      1
  Blocked Connections %:                            0

  Queue Name               Status     Uptime
  ------------------------ ------ --------------
  A                        Up     0d 0h 6m 30s
</pre>
                                </div>
                              </div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">&#xA0;</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
