<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Step 6: Explore Consumer Scaling Patterns</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" data-mc-stylesheet-type="table"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a xmlns="" name="aanchor366"/><MadCap:concept term="Cloud;Software"/>Step 6: Explore Consumer Scaling Patterns</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You've now completed <a href="request-reply-pattern.htm" class="MCXref xref">Step 5: Try a Request-Reply Message Exchange Pattern</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In step 6, you'll expand your understanding by setting up three common messaging patterns used for consumer scaling.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"> As you've learned in the previous steps, <span class="mc-variable Variables.CompanyName variable">Solace</span> topics give you the flexibility to implement different message exchange patterns, such as publish-subscribe and request-reply, while also allowing each consumer to subscribe to the topics that give them exactly the events they want to receive. In this step, we'll learn how <span class="mc-variable Variables.CompanyName variable">Solace</span> allows you to further decouple your consumers from your producers by enabling consumer applications to scale in various ways, depending on their individual requirements. For more information about consumer patterns and consumer scalability patterns, see the <span class="mc-variable Variables.CompanyName variable">Solace</span> <a href="#https://solace.com/event-driven-architecture-patterns/#consumption" target="_blank" class="link-offsite">Ultimate Guide to Event-Driven Architecture Patterns</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this step, we'll focus on three patterns that show consumer scalability options and use the <span class="mc-variable Product-Names.try-me-cli variable">Solace Try-Me CLI</span> tool to demonstrate each of these patterns:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>Competing consumers</li>
                                <li>High availability</li>
                                <li>Partitioning</li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The most common way to implement these patterns is using Guaranteed message delivery with a queue. When using queues to implement these scaling patterns,  producers still publish events to topics, and consumers bind to queues that are configured to meet their specific scaling requirements. The queues subscibe  to the topics that the consumers want to receive events for.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Competing Consumers</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Competing consumers is a scalability pattern in event-driven architecture that involves distributing the workload of processing events among multiple instances of the same application to improve throughput and reduce processing time.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../../Resources/Images/Getting-Started/competing-consumers.png" alt="Diagram illustrating the concepts described in the surrounding text."/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this mode, the queue has a non-exclusive access type, which facilitates the delivery of messages to all bound consumer flows in a round-robin fashion. This pattern is commonly used when message order is not important and you need to scale consumers to keep up with the message throughput.</p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Set Up Competing Consumers</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this exercise, we'll set up three competing consumer applications to share the message processing load. After you complete these steps, you'll have a consumer scaling pattern like the following animation:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../../Resources/Images/Animated/competing-consumer.gif" alt="Animation showing scaling using competing consumers."/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set up competing consumer instances, perform these steps:</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Open a command-line  terminal window and create a non-exclusive queue with a topic subscription for <code>coffeeshop/&gt;</code>.  Enter the following command:</li>
                                <pre>stm manage queue --create NonExclusiveQ --access-type NON-EXCLUSIVE --add-subscriptions "coffeeshop/&gt;"</pre>
                                <p>You should see the following result:</p>
                                <pre>&#x2139;  info      info: loading 'queue' command from configuration 'stm-cli-config.json'
&#x2714;  success   success: queue 'NonExclusiveQ' created successfully
&#x2714;  success   success: subscription to topic 'coffeeshop/&gt;' added successfully
&#x2714;  success   success: 1 subscription(s) found on queue NonExclusiveQ -coffeeshop/&gt;
&#x2714;  success   success: exiting...</pre>
                                <li value="2">Open three additional command-line  terminal windows and in each one, start a receiver with the following command: </li>
                                <pre>stm receive --queue NonExclusiveQ</pre>
                                <li value="3">In another command-line  terminal window, start a sender that publishes 100 events with an interval of 1 second between each publish using the following command:
</li>
                                <pre xml:space="preserve">stm send --count 100 --topic 'coffeeshop/order/new/v1'</pre>
                                <p>You should see the messages being received by your 3 receivers in a round-robin, competing consumers fashion. Using a non-exclusive queue allows you to implement the competing consumers pattern and load balance events across different instances of your consumer.</p>
                                <li value="4">
                                  <p>You can verify the behavior in <span class="mc-variable Product-Names.pubsubmanager_long variable">PubSub+ Broker Manager</span> by going to your queue and viewing the <b>Consumers</b> tab. If all of your receivers were bound to the queue before you began sending messages, you&#x2019;ll see the messages evenly distributed across the receivers.</p>
                                  <p>
                                    <div class="thumbnail-container">
                                      <a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/Getting-Started/coffee-shop-competing.png" data-mc-popup-alt="Screenshot showing the consumers described in the preceding text.">
                                        <img class="MCPopupThumbnail img imgsolacethumbnail" data-mc-width="1112" data-mc-height="264" src="../../Resources/Images/Getting-Started/coffee-shop-competing_thumb_500_0.png" alt="Screenshot showing the consumers described in the preceding text." tabindex=""/>
                                      </a>
                                    </div>
                                  </p>
                                </li>
                              </ol>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">High Availability</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When you implement a high availability (HA) consumer scaling pattern, you have multiple instances of the same consumer application available to process events. One instance of the consumer  is chosen to be active and receives all events, while the other instances are on standby. If the active instance crashes or goes down, the broker automatically elects another instance to activate and starts sending all events to the new consumer. This pattern ensures that event processing continues as long as you have one instance connected and processing. This pattern is also sometimes referred to as Primary / Secondary or Primary / Secondary / Tertiary depending on how many levels of redundancy are required.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../../Resources/Images/Getting-Started/high-availabilty.png" alt="Diagram illustrating the concepts described in the surrounding text."/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To implement this pattern, the queue has the exclusive access type. This access type allows multiple consumers to connect, but the event broker delivers events to only one of them. If the active consumer disconnects, the next consumer to receive events is randomly selected from the waiting pool of consumers. This pattern is commonly used when all messages in a queue must be processed in order.</p>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Set Up Consumers for High Availability</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In this exercise we'll set up three  consumer applications for HA. Two of the consumers are in standby mode and don't receive messages unless the active consumer application becomes unavailable. After you complete these steps you'll have a consumer scaling pattern like the following animation:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <img src="../../Resources/Images/Animated/ha-consumer.gif" alt="Animation showing high availablity consumers."/>
                              </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set up consumer instances for high availability, perform these steps:</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Open a command-line  terminal window and create an exclusive queue with a topic subscription for <code>coffeeshop/&gt;</code>.  Enter the following command:</li>
                                <pre>stm manage queue --create ExclusiveQ --access-type EXCLUSIVE --add-subscriptions "coffeeshop/&gt;"</pre>
                                <p>You should see the following result:</p>
                                <pre>&#x2139;  info      info: loading 'queue' command from configuration 'stm-cli-config.json'
&#x2714;  success   success: queue 'ExclusiveQ' created successfully
&#x2714;  success   success: subscription to topic 'coffeeshop/&gt;' added successfully
&#x2714;  success   success: 1 subscription(s) found on queue ExclusiveQ -coffeeshop/&gt;
&#x2714;  success   success: exiting...</pre>
                                <li value="2">Open three additional command-line  terminal windows, and in each one start a receiver with the following command: </li>
                                <pre xml:space="preserve">stm receive --queue ExclusiveQ</pre>
                                <li value="3">In another command-line  terminal window, start a sender that publishes 100 events with an interval of 1 second between each publish using the following command: </li>
                                <pre>stm send --count 100 --topic 'coffeeshop/order/new/v1'</pre>
                                <p>You should see the messages all being received by the first receiver that you started because you are using an exclusive queue.</p>
                                <li value="4">
                                  <p>You can verify the behavior in <span class="mc-variable Product-Names.pubsubmanager_long variable">PubSub+ Broker Manager</span> by going to your queue and looking at the <b>Consumers</b> tab .You should see that one of the three consumers received all the messages.</p>
                                  <p>
                                    <div class="thumbnail-container">
                                      <a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/Getting-Started/coffee-shop-ha.png" data-mc-popup-alt="Screenshot showing the consumers described in the preceding text.">
                                        <img class="MCPopupThumbnail img imgsolacethumbnail" data-mc-width="1112" data-mc-height="264" src="../../Resources/Images/Getting-Started/coffee-shop-ha_thumb_500_0.png" alt="Screenshot showing the consumers described in the preceding text." tabindex=""/>
                                      </a>
                                    </div>
                                  </p>
                                </li>
                                <li value="5">If the currently active consumer disconnects from the queue, one of the remaining two consumers starts receiving events. If you want to see the change in action,  restart the publisher and, while the publish is in progress, stop the currently active consumer by pressing Control+C (on Windows and Linux) or Command+C (on Mac). You can see that one pf the standby consumers starts receiving messages.
            </li>
                              </ol>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Partitioning</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Partitioning is a design pattern in event-driven architecture that helps to improve scalability while also maintaining message order where it&#x2019;s required. You effectively split up a stream of events into partitions, which can then be processed in parallel. Order is maintained by partition instead of across the entire event stream. This pattern is common when you need to scale your consumers, but you also care about message order.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span>, this pattern is implemented using partitioned queues. Partitioned queues are a type of non-exclusive queue that delivers to many consumers at once to enable scaling. Partitioned queues use a partition key to split ingress events into partitions. All events within a partition are always delivered to the same consumer, thus enabling scalability while maintaining the message order. For more information, see <a href="../../Messaging/Guaranteed-Msg/Queues.htm#partitioned-queues" target="_blank" class="MCXref xref">Partitioned Queues</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can also watch our <span class="mc-variable Variables.CompanyName variable">Solace</span> Developer Advocate demonstrate partitioned queues.</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="vid-wrapper">
                                <div class="vid-container">
                                  <iframe width="560" height="315" src="https://www.youtube.com/embed/CZC1wfHyABM?si=_O1KZoRMdn1Jvj01 modestbranding=1&amp;showinfo=0&amp;rel=0&amp;cc_lang_pref=en&amp;cc_load_policy=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"/>
                                </div>
                                <div>Solace Partitioned Queues in Action!</div>
                              </div>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Set Up a Partitioned Queue</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For this exercise, we'll set up  partition keys and create a partitioned queue. You can set partition keys using the <span class="mc-variable Product-Names.try-me-cli variable">Solace Try-Me CLI</span> using these parameters:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li> Use <code>--partition-key &lt;KEY&gt;</code> to set keys based on the message publish time.</li>
                                <li>Use<code> --partition-keys &lt;KEY...&gt;</code> to specify a list of partition keys.</li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set up a partitioned queue for the coffee shop, perform these steps:</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Open a command-line  terminal window and create an non-exclusive queue with five partitions.  Enter the following command:</li>
                                <pre xml:space="preserve">stm manage queue --create PartitionedQ --access-type NON-EXCLUSIVE --add-subscriptions "coffeeshop/&gt;" --partition-count 5</pre>
                                <p>You should see the following result:</p>
                                <pre>&#x2139;  info      info: loading 'queue' command from configuration 'stm-cli-config.json'
&#x2714;  success   success: queue 'PartitionedQ' created successfully
&#x2714;  success   success: subscription to topic 'coffeeshop/&gt;' added successfully
&#x2714;  success   success: 1 subscription(s) found on queue PartitionedQ -coffeeshop/&gt;
&#x2714;  success   success: exiting...</pre>
                                <li value="2">Open three additional command-line  terminal windows and in each one, start a receiver with the following command: </li>
                                <pre xml:space="preserve">stm receive --queue PartitionedQ --output-mode props </pre>
                                <li value="3">Open an additional command-line  terminal window and start a sender that publishes 100 events with an interval of 1 second between each publish and passes a list of partition keys using the <code>--partition-keys</code> parameter.</li>
                                <pre>stm send --partition-keys ESPRESSO DOPPIO AMERICANO LATTE CORTADO CAPPUCCINO MACCHIATO FLATWHITE BLACKEYE --count 100 --interval 1000 --topic 'coffeeshop/order/new/v1'</pre>
                                <p>You should now see the messages being received by your three receivers. Notice that messages with the same partition key, such as ESPRESSO, are always delivered to the same consumer. The partition key appears as the JMSXGroupId user-attribute, which is displayed in the <span class="mc-variable Product-Names.try-me-cli variable">Solace Try-Me CLI</span> tool when you use <code>--output-mode props</code>. </p>
                                <li value="4">
                                  <p>You can verify the behavior in <span class="mc-variable Product-Names.pubsubmanager_long variable">PubSub+ Broker Manager</span> by going to your queue and looking at the <b>Consumers</b> tab .You should see that one of the three consumers received all the messages.</p>
                                  <p>
                                    <div class="thumbnail-container">
                                      <a class="MCPopupThumbnailLink MCPopupThumbnailPopup" href="../../Resources/Images/Getting-Started/coffee-shop-partition.png" data-mc-popup-alt="Screenshot showing the consumers described in the preceding text.">
                                        <img class="MCPopupThumbnail img imgsolacethumbnail" data-mc-width="1112" data-mc-height="274" src="../../Resources/Images/Getting-Started/coffee-shop-partition_thumb_500_0.png" alt="Screenshot showing the consumers described in the preceding text." tabindex=""/>
                                      </a>
                                    </div>
                                  </p>
                                </li>
                              </ol>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule">Tutorial Steps</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You've completed the sixth step in the tutorial. Click <a href="../Next-steps.htm" class="MCXref xref">Next Steps</a> for suggestions to continue your Solace journey.</p>
                              <table xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');border-left-style: solid;border-left-width: 1px;border-left-color: #e1e1e1;border-right-style: solid;border-right-width: 1px;border-right-color: #e1e1e1;border-top-style: solid;border-top-width: 1px;border-top-color: #e1e1e1;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #e1e1e1;margin-left: 0;margin-right: auto;" class="TableStyle-Table_Num" cellspacing="0">
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <thead>
                                  <tr class="TableStyle-Table_Num-Head-Header1">
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Step</th>
                                    <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Description</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="text-align: center;">
                                        <img src="../../Resources/Images/Cloud/reusable-icons/num1.png" alt="Step 1"/>
                                      </p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="font-weight: bold;">Set up Your First Event Broker - Complete</p>
                                    </td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="text-align: center;">
                                        <img src="../../Resources/Images/Cloud/reusable-icons/num2.png" alt="Step 2"/>
                                      </p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="font-weight: bold;">Solace EDA Basics - Complete</p>
                                    </td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="text-align: center;">
                                        <img src="../../Resources/Images/Cloud/reusable-icons/num3.png" alt="Step 3"/>
                                      </p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="font-weight: bold;">Set up the  <span class="mc-variable Product-Names.try-me-cli variable">Solace Try-Me CLI</span> Tool - Complete</p>
                                    </td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyE-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="text-align: center;">
                                        <img src="../../Resources/Images/Cloud/reusable-icons/num4.png" alt="Step 4"/>
                                      </p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyD-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="font-weight: bold;">Try a Publish-Subscribe Message Exchange Pattern - Complete</p>
                                    </td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="text-align: center;">
                                        <img src="../../Resources/Images/Cloud/reusable-icons/num5.png" alt="Step 5"/>
                                      </p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1" style="background-color: #F7F8F9;">
                                      <p style="font-weight: bold;">Try a Request-Reply Message Exchange Pattern - Complete</p>
                                    </td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <p style="text-align: center;">
                                        <img src="../../Resources/Images/Cloud/reusable-icons/num6.png" alt="Step 6"/>
                                      </p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                      <p style="font-weight: bold;">Try Consumer Scaling Patterns - Complete</p>
                                    </td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p style="text-align: center;">
                                        <img src="../../Resources/Images/Cloud/reusable-icons/complete.png" alt=""/>
                                      </p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
                                      <p style="font-weight: bold;">
                                        <a href="../Next-steps.htm" class="link-internal">Next Steps</a>
                                      </p>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can return to the main <a href="../Getting-Started-Try-Broker.htm" class="link-internal">Tutorial page</a> at any time.</p>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
