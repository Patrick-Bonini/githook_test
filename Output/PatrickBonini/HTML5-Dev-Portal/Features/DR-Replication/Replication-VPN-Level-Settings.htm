<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|Configuring Replication" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Configuring VPN-Level Replication Settings</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content"><h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Configuring VPN-Level Replication Settings</h1><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">By default, the use of the replication facility is not enabled for a Message VPN. To use the replication facility, replication must be enabled for the Message VPNs at both sites.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When you are using redundant event brokers at a site, configure the replication settings for one Message VPN, and then they will be automatically propagated to its mate. (Replication bridge configuration settings are an exception&#x2014;they are not automatically propagated between replication sites.)</p><h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Ack-Prop"/>Configuring ACK Propagation Intervals</h2><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">After a client consumes a message from a durable endpoint, an acknowledgment (that is, an &#x2018;ACK&#x2019;) is generated so that the message is removed from the message spool. (An ACK is also generated if a message is deleted from the message spool.)</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">By default, for a Message VPN with an active replication state, after clients consume a set number of messages from its endpoints, an ACK message is propagated to its mate Message VPN with a standby replication state. When this ACK message is received by the corresponding durable endpoints on the mate replication Message VPN, those endpoints can then also consume those same messages that were replicated to it.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">If the messages interval is not reached, a one-second periodic timer ensures that acks are propagated in a timely manner. This ACK propagation interval only affects the bandwidth utilization on the replication bridge and likely will not need to be adjusted.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set an interval for propagating ACK messages, enter the following CONFIG commands:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure)# message-vpn &lt;vpn-name&gt;
solace(configure/message-vpn)# replication
solace(configure/message-vpn/replication)# ack-propagation
solace(...ssage-vpn/replication/ack-propagation)# interval messages [messages]</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>messages</code> is the number of consumed messages that must be acknowledged before an ACK message is propagated to the same Message VPN with a replication standby state on the mate site. The default value is 20.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no messages</code>, resets the <code>ack-propagation</code> interval back to the default value.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">By default, endpoints in an active Replicated Message VPN propagate consumer acks to the standby Replicated Message VPN; however, ACK propagation can be enabled/disabled on a per-endpoint basis (for queues, see <a href="../../Messaging/Guaranteed-Msg/Configuring-Queues.htm#Enabling" class="MCXref xref">Enabling / Disabling Propagating Consumer Acks to Replicated VPNs</a>; for topic endpoints, see <a href="../../Messaging/Guaranteed-Msg/Configuring-DTEs.htm#Enabling4" class="MCXref xref">Enabling/Disabling Propagating Consumer Acks to Replicated VPNs</a>).</p><h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-Rep-Bridges"/>Configuring Replication Bridges</h2><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">A replication bridge is used to connect a Message VPN with an active replication state and a Message VPN of the same name with a standby replication state at the mate site. When replication is enabled for a Message VPN, a replication bridge named <code>#MSGVPN_REPLICATION_BRIDGE</code> is automatically created.</p><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note"><p>Config-Sync will not automatically synchronize this object or property. Therefore, if the event broker is being used in a high-availability (HA) redundant configuration or in a replicated site, you must manually configure this object/property on each mate event broker or replicated Message VPN.</p><p>To determine whether an object/property is synchronized by Config-Sync, look up the command used to configure the object/property in the <a href="../../Admin/Solace-CLI/Command-Line-Reference.htm" class="MCXref xref">CLI Command Reference</a> or type the command in the <span class="mc-variable Product-Names.solace_cli variable">Solace CLI</span>, ending the command with "<code>?</code>". The Help lists whether the object/property is synchronized.</p></div><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">Any uni-directional client profiles that are used for the replication bridges are excepted&#x2014;these are synchronized between the replication mates.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can perform the following configurations for the replication bridge for the given Message VPN:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><a class="Heading_And_Page MCXref xref xrefHeading_And_Page" href="#configuring_data_center_replication_2112153501_450465">Configuring Authentication Schemes</a></li><li><a class="Heading_And_Page MCXref xref xrefHeading_And_Page" href="#configuring_data_center_replication_2112153501_359444">Enabling the Use of Compressed Data</a></li><li><a class="Heading_And_Page MCXref xref xrefHeading_And_Page" href="#configuring_data_center_replication_2112153501_359459">Configuring Message Spool Window Sizes</a></li><li><a class="Heading_And_Page MCXref xref xrefHeading_And_Page" href="#configuring_data_center_replication_2112153501_359477">Configuring Retry Delays</a></li><li><a class="Heading_And_Page MCXref xref xrefHeading_And_Page" href="#configuring_data_center_replication_2112153501_452698">Enabling TLS/SSL Encryption for Bridge Connections</a></li><li><a class="Heading_And_Page MCXref xref xrefHeading_And_Page" href="#configuring_data_center_replication_2112153501_421197">Setting Client Profiles for Uni-Directional Bridges</a></li></ul><h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_450465"/>Configuring Authentication Schemes</h3><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Authentication can be set up on a replication bridge to provide a secure connection between replication sites. Basic and client certificate authentication modes are available. Where Basic uses  basic username and password authentication for replication bridge connections, and Client Certificate uses client certificate authentication for replication bridge connections.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">In an authentication scenario, the replication-standby Message VPN acts as the client and the replication-active Message VPN acts as the authenticating server.</p><h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_451328"/>Configuring a Client Username for Basic Authentication</h4><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set a client username to use for basic replication bridge authentication, enter the following CONFIG commands:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication)# bridge
solace(configure/message-vpn/replication/bridge)# authentication basic
solace(...plication/bridge/authentication/basic)# client-username &lt;name&gt; [password &lt;password&gt;]</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>&lt;name&gt;</code> is the client username for the bridge to use to log in to the replication standby Message VPN. The username may contain up to 189 characters.</li><li><code>&lt;password&gt;</code> is an optional password that will be also required for authentication if set. The password may contain up to 128 characters.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no client username</code>, removes the client username and any password associated with it.</p><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note"><ul><li>A client username can only be configured for the replication bridge when the replication bridge is shutdown.</li><li>A client username used to establish a replication bridge connection must be given permission to create bridge connections (see <a href="../../Security/Configuring-Client-Profiles.htm#allow-bridge-connections" class="MCXref xref">Allowing Bridge Connections</a>).</li></ul></div><h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_452192"/>Configuring a Certificate File for Client Certificate Authentication</h4><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set the certificate file to use for client certificate replication bridge authentication, enter the following CONFIG commands:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication)# bridge
solace(configure/message-vpn/replication/bridge)# authentication client-certificate
solace(...dge/authentication/client-certificate)# certificate-file &lt;filename&gt;</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>&lt;filename&gt;</code> is the file name of the certificate to use for authentication. The certificate must be located in the <code>/usr/sw/jail/certs</code> directory of the event broker and have an extension of <code>.pem</code>. Once a certificate is configured, a copy of it is saved internally. The file in the <code>certs</code> directory is no longer required.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no certificate file</code>, disassociates the certificate file from the current replication bridge.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For authentication to succeed, the common name provided in the certificate file must exist as a client username on the remote Message VPN. The client username must be enabled, and the client profile that is used by that client username must have <code>allow-bridge-connections</code> enabled. The provided client certificate must also be enabled on the remote Message VPN and adhere to the specified client certificate authentication settings on the remote Message VPN.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The certificate file can only be configured while the replication bridge is shutdown.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">If no client certificate file is configured for the replication bridge, the bridge will present the event broker&#x2019;s server certificate for authentication.
        </p><h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_359444"/>Enabling the Use of Compressed Data</h3><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Compression can be enabled for a replication bridge&#x2019;s data connections to make better use of available WAN bandwidth. The default setting is no compression.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To enable compression, enter the following CONFIG command:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication/bridge)# compressed-data</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The <code>no</code> version of this command, <code>no compressed-data</code>, disables the use of compression.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">Before configuring compression for a replication bridge while a Message VPN is in the standby state, replication on the Message VPN must be disabled (see <a href="#Enable-Replication" class="MCXref xref">Enabling Replication</a>).
        </p><h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_359459"/>Configuring Message Spool Window Sizes</h3><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Caution"><p class="Tbl_Body">The default value for a replication bridge's message spool window size is expected to work well in most typical deployments. Configuring an excessively large message spool window size can negatively impact network performance. Before changing this parameter, <a href="../../get-support.htm" class="link-internal">contact Solace</a> for assistance in choosing the appropriate value for your network conditions.</p></div><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The message spool window size dictates how many outstanding configuration messages may be sent over a replication bridge before the Message VPN with an active replication state must receive an acknowledgment.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the message spool window size, enter the following CONFIG commands:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication/bridge)# message-spool
solace(...-vpn/replication/bridge/message-spool)# window-size &lt;number&gt;</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>&lt;number&gt;</code> is an integer from 1 to 65536 that sets how many messages can be in the window. The default is 255.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no message-spool window-size</code>, resets the message spool window size value back to the default value.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">Before configuring the message spool window size, the replication bridge connection must be disabled by shutting down the replication feature for the Message VPN (see <a href="#Enable-Replication" class="MCXref xref">Enabling Replication</a>).</p><h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_359477"/>Configuring Retry Delays</h3><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the number of seconds that must pass before retrying a connection to the replication mate over the replication bridge, enter the following CONFIG commands:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication/bridge)# retry-delay &lt;seconds&gt;</pre><u xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where</u>:<ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>&lt;seconds&gt;</code> is an integer from 1 to 255 that specifies the number of seconds to wait before retrying a connection to the replication mate. The default is 3.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no retry-delay</code>, resets the number of seconds to wait back to the default value.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">Before configuring a retry-delay value, the replication bridge connection must be disabled by shutting down the replication feature for the Message VPN (see <a href="#Enable-Replication" class="MCXref xref">Enabling Replication</a>).
        </p><h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_452698"/>Enabling TLS/SSL Encryption for Bridge Connections</h3><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">TLS/SSL encryption can be enabled on replication bridges.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To enable, enter the following CONFIG command:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication/bridge)# ssl</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To disable, enter the following CONFIG command:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication/bridge)# no ssl</pre><h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_421197"/>Setting Client Profiles for Uni-Directional Bridges</h3><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">By default, when the bridge connection from the Message VPN with an active replication state is established to the Message VPN of the same name with a standby replication state at the mate site, the TCP parameters from a non&#x2011;editable, default client profile, <code>#client-profile</code>, are used (this default client profile has a TCP max window size of 2 MB). However, if the TCP parameters used by the <code>#client&#x2011;profile</code> client profile are not suitable for your network, you can use those from another client profile on the Message VPN with an active replication state. </p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To specify a client profile that will provide the TCP parameters to use for the uni&#x2011;directional bridge link, enter the following CONFIG commands:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication/bridge)# unidirectional
solace(...vpn/replication/bridge/unidirectional)# client&#x2011;profile &lt;name&gt;</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>&lt;name&gt;</code> is the name of a client profile that exists on the Message VPN with an active replication state. A client profile name can contain up to 32 alphanumeric characters (case&#x2011;sensitive).</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no client-profile</code>, removes the current client profile assignment, and reassigns the default client profile, <code>#client-profile</code>.</p><h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-Rep-Queues"/>Configuring Replication Queues</h2><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When replication is enabled for a Message VPN, a replication queue (named <code>#MSGVPN_REPLICATION_DATA_QUEUE</code>) is automatically created. Messages are spooled here before they are replicated on the replication mate.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can set the following replication queue configuration parameters:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><a class="Heading_And_Page MCXref xref xrefHeading_And_Page" href="#configuring_data_center_replication_2112153501_359504">Max Spool Usage</a></li><li><a class="Heading_And_Page MCXref xref xrefHeading_And_Page" href="#configuring_data_center_replication_2112153501_359511">Reject Message To Sender on Discard</a></li></ul><h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_359504"/>Max Spool Usage</h3><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the maximum message spool disk space that can be used for the replication queue for the Message VPN, enter the following CONFIG commands:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication/queue)#
solace(configure/message-vpn/replication/queue)# max-spool-usage &lt;size&gt;</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>&lt;size&gt;</code> is an integer value specifying the maximum amount of message spool disk space permitted for the replication queue in MB.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no max-spool-usage</code>, resets the permitted message spool usage quota available for use by the queue back to the default value.</p><h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_359511"/>Reject Message To Sender on Discard</h3><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The reject-msg-to-sender-on-discard option sets whether the replication queue will provide a client with a negative acknowledgment (that is, a &#x201C;nack&#x201D;) when published Guaranteed messages are not enqueued and are discarded. When using replicated transactions, the client will also get a negative acknowledgment if the transaction cannot be put on the replication queue. By default, the reject-msg-to-sender-on-discard option is enabled.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The reject-msg-to-sender-on-discard option can be configured on a Message VPN for a replication queue. Normally, this value should not be disabled, because disabling it will allow Guaranteed messages or transactions that cannot be replicated to be accepted. However, if the replication queue is full because of a long term failure of the standby site, this option can be disabled so that non-replicated service can be provided. </p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure how the replication queue should behave when Guaranteed messages and transactions are not enqueued and are discarded, enter the following CONFIG commands:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication/queue)#
solace(configure/message-vpn/replication/queue)# reject-msg-to-sender-on-discard</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>reject-msg-to-sender-on-discard</code> enables the reject-msg-to-sender-on-discard option for the queue so that session events (that is, nacks) are sent to the publishing clients whenever messages or transactions are not enqueued and are discarded. These messages are not allowed to be enqueued on any other endpoints.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no reject-msg-to-sender-on-discard</code>, disables the reject-msg-to-sender-on-discard option for the queue so that no session events are returned to the publishing client whenever messages or transactions are not enqueued on the replication queue and are discarded.</p><h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-Reject"/>Configuring to Reject Messages When Sync Ineligible</h2><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">If a Message VPN with an active replication state is using synchronous replication when propagating replicated messages and transactions to its mate Message VPN with a standby replication state, and the replication bridge is very slow or goes down, the Message VPN can either switch to an asynchronous replication mode (this is the default action), or the synchronous replication mode can be maintained and error indications (that is, nacks) are sent back to clients publishing to replicated messages and transactions when they cannot be propagated to the standby Message VPN.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the given Message VPN so that its synchronous replication mode should be maintained and nacks should be sent back to the publishing clients, enter the following CONFIG command on one event broker at the active site:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication)# reject-msg-when-sync-ineligible</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no reject-msg-when-sync-ineligible</code>, configures the given Message VPN to switch to asynchronous replication when there are problems with the replication bridge. This is the default behavior.</p><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note"><ul><li>When configured to reject messages when sync ineligible and the replication service is degraded (that is, the Message VPN is sync ineligible), then new synchronous XA transactions will fail to start.</li><li>These commands may be executed when clients are connected and publishing messages and whether replication is enabled or not.</li></ul></div><h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-Rep-Topics"/>Configuring Replicated Topic Subscriptions</h2><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure a topic pattern to use for replicating messages to the corresponding Message VPN on the mate site, enter the following CONFIG command on one event broker at the active site:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication)# create replicated-topic &lt;topic-pattern&gt;</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>topic pattern</code> is the topic pattern to use for replicating messages to the corresponding Message VPN on the replication mate. Typically, a topic pattern is a topic subscription. In this case, only messages whose topics match the configured replicated topic subscription are copied to the corresponding Message VPN on the mate replication site. To enable the replication of messages delivered to queues, the topic pattern may also represent a queue. For example, a topic pattern for a queue could be &#x201C;<code>#P2P/QUE/&lt;queueName&gt;</code>&#x201D;.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">You can also specify a topic subscription exception by adding a leading "!" character to the topic subscription. In this case, messages whose topics match the configured topic subscription exception are not copied to the corresponding Message VPN on the replication site. For example, if you add a topic subscription "animals/f*" and a topic subscription exception "!animals/fox",  messages published to "animals/frog" are copied to the replication site; however, messages published to "animals/fox" are not.  For more information about subscription exceptions, see <a href="../../Messaging/Guaranteed-Msg/System-Level-Subscription-Exception-Config.htm" class="MCXref xref">System-Level Subscription Exception Configuration</a>.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no replicated-topic</code>, removes the specified replicated topic pattern.</p><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note"><ul><li>The topic pattern can include the * and &gt; wildcard characters.</li><li>Since Direct messages that match a replicated topic will be promoted to Guaranteed messages, it's recommended to avoid the use of wildcards that can match Direct messages to prevent unnecessary message promotion.</li><li>Messages that match the replicated-topic are replicated either synchronously or asynchronously, according to the configured replication mode (see <a class="Heading MCXref xref xrefHeading" href="#configuring_data_center_replication_2112153501_359532">Replication Mode</a> below). The replication mode is specified on a per-replicated topic-basis.</li><li>When using local and XA transactions, published messages in the transaction must match the topic pattern to be replicated. If a transaction contains some messages that match a replicated topic and some that do not, only those matching messages are propagated to the replication mate as part of the transaction.</li></ul></div><h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="configuring_data_center_replication_2112153501_359532"/>Replication Mode</h3><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set the replication mode for a replicated topic subscription, enter the following CONFIG commands:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication)# create replicated-topic &lt;topic-pattern&gt;
solace(...sage-vpn/replication/replicated-topic)# replication-mode {sync | async}</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>sync</code> is a synchronous replication mode. When the synchronous replication mode is used, a message with a topic that matches a replicated topic subscription is not acknowledged by the event broker until the message is replicated to the mate replication site. After the message is spooled locally, message replication and publisher acknowledgment are serialized.</li><li><code>async</code> is an asynchronous replication mode. When the asynchronous replication mode is used, a message with a topic that matches a replicated topic subscription is not acknowledged by the event broker until the message is spooled locally. After the message is spooled, message replication and publisher acknowledgment occur asynchronously. Async is the default replication mode.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command, <code>no replication-mode</code>, sets the replication mode to the default value.</p><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note"><ul><li>When using transactions, the replication mode of the replicated topic subscription is ignored. The replication mode of transactions is determined by the Message VPN setting. See <a href="#configuring_data_center_replication_2112153501_359532" class="MCXref xref">Replication Mode</a> for more information.</li><li>Topic subscription exceptions apply only to subscriptions using the same replication mode. For example, if you configure an asynchronous topic subscription "animals/f*" and a synchronous topic subscription exception "!animals/fox" messages published to "animals/fox" are received on the mate replication site. </li></ul></div><h4 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Displaying Replicated Topic Subscriptions</h4><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To show the configured replicated topic subscriptions for the entire system, or on a per&#x2011;Message VPN-basis, enter the following User EXEC command:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace&gt; show replicated-topic &lt;topic&gt; [message-vpn &lt;vpn-name&gt;] [replication-mode {sync | async}] [count &lt;num-elements&gt;]</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>&lt;topic&gt;</code> is a string representation of the replicated topic pattern (that is, either a topic subscription or a queue name). The topic pattern can include CLI wildcard constructs such as * and &gt;.</li><li><code>message-vpn &lt;vpn-name&gt;</code> is a Message VPN name. The Message VPN name can contain from 1 to 32 characters and may contain wildcards * or ?.</li><li><code>replication-mode</code> filters the replicated topic subscriptions based on replication mode.</li><li><code>sync</code> asks to list only topic subscriptions that are configured to use a synchronous replication mode.</li><li><code>async</code> asks to list only topic subscriptions that are configured to use an asynchronous replication mode.</li><li><code>count</code> specifies the number of display elements to show. &lt;num-elements&gt; is the integer specifying the number of elements. Valid values are 1 through 4294967295.</li></ul><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>Example:</a></span><div class="MCDropDownBody dropDownBody"><pre class="Code">solace&gt; show replicated-topic * message-vpn vpn-1 replication-mode async 

Message VPN: vpn-1
Replication
Topic                                                                     Mode
------------------------------------------------------------------------------
t-1-1-1                                                                  async
t-1-1-2                                                                  async
t-1-1-3                                                                  async</pre></div></div><h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-Transaction-Rep"/>Configuring Transaction Replication Mode</h2><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The transaction replication mode controls whether transactions are replicated synchronously or asynchronously. Synchronous transactions wait for the transaction to complete on the standby site, while asynchronous transactions only wait of the transaction to be stored on the replication queue of the active site. Asynchronous transactions provide better performance, but they allow for message duplication in some failover scenarios. It is also possible to lose messages or transactions in replication queue in the event of non-recoverable failure of the active site.</p><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the transaction replication mode of the Message VPN, enter the following CONFIG command in the Solace CLI:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication)# transaction-replication-mode {async| sync}</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>async</code> sets the transaction replication mode of the Message VPN to asynchronous (the default state).</li><li><code>sync</code> sets the transaction replication mode of the Message VPN to synchronous.</li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The no version of this command sets the mode to async.</p><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note"><ul><li>Changes to this setting do not affect in-progress transaction. Those transaction will complete using their previous replication mode. Newly started transaction will use the new setting.</li><li>The replication mode of the replicated topic used to match the messages is ignored when using transactions. For example, messages published to an asynchronous topic inside a synchronous transaction use synchronous handling.</li></ul></div><h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Config-VPN-Rep-States"/>Configuring VPN Replication States</h2><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure the replication state of the Message VPN, enter the following CONFIG command:</p><pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">solace(configure/message-vpn/replication)# state {standby|active}</pre><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Where:</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li><code>standby</code> sets the replication state of the Message VPN to standby (the default state).</li><li><code>active</code> sets the replication state of the Message VPN to active.</li></ul><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note"><ul><li>When this command is executed while replication is shutdown, it sets the replication state that is to be used when replication is enabled. When this command is executed while replication is enabled, it changes the replication state on the fly.</li><li>When the replication state transitions from active to standby, all clients except <code>#MSGVPN_REPLICATION_BRIDGE</code> and those with allow-clients-when-standby set in their client profile are disconnected from the event broker. After the clients are disconnected, those clients are not  allowed to reconnect while the VPN remains in standby state.</li><li>When the replication state transitions from active to standby, all Active and Idle XA transactions are canceled since they have not reached a state where they need to be persisted. An application server transaction manager will properly recover these transactions.</li></ul></div><h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Enable-Replication"/>Enabling Replication</h2><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">By default, replication is disabled on a Message VPN.</p><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li>Before enabling the replication facility for the Message VPN, ensure that the replication state of the Message VPN (see <a href="Monitoring-Replication.htm" class="MCXref xref">Monitoring Replication</a>) and the replication bridge and the replication queue are appropriately configured (see <a href="#Config-Rep-Bridges" class="MCXref xref">Configuring Replication Bridges</a> and <a href="#Config-Rep-Queues" class="MCXref xref">Configuring Replication Queues</a>).</li><li>Replication for the Message VPN cannot be enabled if:<ul><li>Guaranteed Messaging and message spooling on the event broker is disabled. (See <a href="../../Messaging/Guaranteed-Msg/System-Level-Msg-Spool-Config.htm#Enable-Guaranteed" class="MCXref xref">Enabling Guaranteed Message Spooling</a>.)</li><li>The replication bridge client username is not configured. (See <a href="#Config-Rep-Bridges" class="MCXref xref">Configuring Replication Bridges</a>.)</li><li>The replication mate&#x2019;s virtual-router-name is not configured. (See <a href="Replication-Sys-Level-Settings.htm#Config-Replication-Mates" class="MCXref xref">Configuring Replication Mates</a>.)</li></ul></li></ul><div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note"><p>Config-Sync will not automatically synchronize this object or property. Therefore, if the event broker is being used in a high-availability (HA) redundant configuration or in a replicated site, you must manually configure this object/property on each mate event broker or replicated Message VPN.</p><p>To determine whether an object/property is synchronized by Config-Sync, look up the command used to configure the object/property in the <a href="../../Admin/Solace-CLI/Command-Line-Reference.htm" class="MCXref xref">CLI Command Reference</a> or type the command in the <span class="mc-variable Product-Names.solace_cli variable">Solace CLI</span>, ending the command with "<code>?</code>". The Help lists whether the object/property is synchronized.</p></div><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li>To enable the replication feature for the Message VPN, enter the following CONFIG command:
                <pre>solace(configure/message-vpn/replication)# no shutdown [force-use-existing-queue | force-recreate-queue]</pre><p>Where:</p><ul><li><code>force&#x2011;use&#x2011;existing&#x2011;queue</code> preserves any messages on a pre-existing replication queue, and the existing replication queue is reused. Before using this option ensure that the messages are not old or otherwise unsuitable to be propagated; this option can only be specified when there is a pre-existing replication queue.</li><li><code>force-recreate-queue</code> causes any messages on a pre-existing replication queue to be discarded and then the replication queue is recreated. Note that this option can only be specified when there is a preexisting replication queue.</li></ul><p class="Note">Typically the <code>no shutdown</code> command can be used without any further arguments&#x2014;it enables the replication facility for the Message VPN and creates a new bridge and replication queue objects. However, if you encounter a situation where, even though replication was disabled, a previous replication queue still exists, you can use the force options with the command to handle the preexisting replication queue and any messages spooled to it.</p></li></ul><ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><li>To disable replication for a Message VPN enter the following CONFIG command for the given Message VPN:
                <pre>solace(configure/message-vpn/replication)# shutdown</pre></li></ul><p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">Disabling replication for a Message VPN deletes its associated replication bridge and replication queue objects, which can also delete any enqueued messages. Therefore, it is recommended that you ensure that there are no messages enqueued on a replication Queue before shutting down replication.</p></div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
