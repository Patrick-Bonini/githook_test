<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="PubSub+ Appliance|Upgrade Procedures" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Redundant Appliances</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link href="../../Resources/Stylesheets/Tabbed_Content.css" rel="stylesheet"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a xmlns="" name="aanchor19"/><MadCap:concept term="Appliance"/>Redundant Appliances</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Use these procedures to upgrade redundant appliances to SolOS-TR&#xA0;<span class="mc-variable Manifest-Products-Routers.SolOS_TR variable">10.8.1</span>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">These upgrade procedures only apply to the latest version of the Solace PubSub+ appliance. Refer to the version-specific documentation to upgrade to versions before SolOS-TR&#xA0;<span class="mc-variable Manifest-Products-Routers.SolOS_TR variable">10.8.1</span>.</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="nav tabs">
                                <li>
                                  <a class="tab" href="#With">With Guaranteed Messaging</a>
                                </li>
                                <li>
                                  <a class="tab" href="#Without">Without Guaranteed Messaging</a>
                                </li>
                              </ul>
                              <!-- <ul>
            <li>
                <p>
                    <MadCap:xref href="#With">With Guaranteed Messaging</MadCap:xref>
                </p>
            </li>
            <li>
                <p>
                    <MadCap:xref href="#Without">Without Guaranteed Messaging</MadCap:xref>
                </p>
            </li>
        </ul> -->
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" id="With">
                                <h2 class="with-rule">With Guaranteed Messaging</h2>
                                <p>To upgrade SolOS software  to SolOS-TR&#xA0;<span class="mc-variable Manifest-Products-Routers.SolOS_TR variable">10.8.1</span> without a prolonged service outage on a redundant appliance pair that uses guaranteed messaging, follow the procedure in this section.</p>
                                <ul>
                                  <li>
                                    <a href="#Before" class="MCXref xref">Before you begin</a>
                                  </li>
                                  <li>
                                    <a href="#Procedur" class="MCXref xref">Procedure</a>
                                  </li>
                                </ul>
                                <p>In the example <code>solace-primary</code> is the primary appliance, and <code>solace-backup</code> is the backup.</p>
                                <h3><a name="Before"/>Before you begin</h3>
                                <p>Perform the following steps to ensure the redundant pair is in the correct state before upgrading.</p>
                                <ol>
                                  <li value="1">
                                    <p>Review the appliance upgrade notices.</p>
                                    <p>
                                      <div class="MCDropDown MCDropDown_Closed dropDown">
                                        <span class="MCDropDownHead dropDownHead">
                                          <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>
                                Appliance Upgrade Notices
                            </a>
                                        </span>
                                        <div class="MCDropDownBody dropDownBody">
                                          <div class="Note">
                                            <p>Before upgrading to version 10.2.0 or later, ensure there are no queue, client-profile, or acl-profile objects configured whose name begins with #telemetry-. As a general rule, no objects should be configured that start with # since Solace uses such object names for internal use.</p>
                                          </div>
                                          <div class="Note">
                                            <p>The following upgrade paths are not supported:</p>
                                            <ul>
                                              <li>Direct upgrades from SolOS 9.8.1 or earlier to SolOS 10.8.0 or later.</li>
                                              <li>Direct upgrades from SolOS 9.9.0 or earlier to SolOS 10.8.1 or later.</li>
                                            </ul>
                                            <p>For unsupported upgrade paths, you must follow the upgrade procedure to the last SolOS-TR version that is part of a supported upgrade path from the source version, before following the upgrade procedure to the destination version.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Upgrades to or from SolOS Early Availability (EA) loads are not supported. All configuration and spooled messages may be lost during the upgrade.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Faulty or noisy serial connections can result in the appliance not booting correctly following an upgrade or restart. Ensure either serial connections are fully functional, or disconnect all serial cables from the Solace appliance prior to upgrading.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Solace recommends upgrading SolAdmin and SolGeneos to the most recent versions before upgrading the appliance to a new major or minor version.</p>
                                          </div>
                                          <div class="Note">
                                            <p>On upgrade, some appliances that have ADB version ADB-04210M-01 will require additional message-spool disk space to support the higher scaling capabilities of this software release. This additional disk space persists and will reduce the amount of disk space available for spooling messages.</p>
                                            <ul>
                                              <li>3560 appliances with ADB version ADB-04210M-01 will have 10 GB of additional space consumed on each disk partition (primary and backup).</li>
                                              <li>The 3260 versions CHS-3260AC-01, -02, and -03 with ADB version ADB-04210M-01 require 1 GB of additional space for each partition.</li>
                                              <li>The 3260 version CHS-3260AC-04 requires 3 GB of additional space for each partition.</li>
                                            </ul>
                                          </div>
                                          <div class="Note">
                                            <p>In mixed release replication configurations between this SolOS version and older SolOS versions, config-sync may not work correctly. Running mixed release replication configurations with older SolOS versions is not recommended for extended periods of time. Once the releases are the same, the config-sync issues will clear, so upgrading both replications to the same version should be done as soon as possible. For additional information, <a href="../../get-support.htm" class="link-internal">contact Solace</a>.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Upgrades that require changing the underlying version of SolBase will not preserve files in the root partition of the appliance&#x2019;s internal file system.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Configuration changes should not be made while performing any in-service upgrade.  This includes avoiding the use of administrative config-sync commands.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Before upgrading standalone appliances that use the Replication feature, follow the <a href="../../Features/DR-Replication/Perf-Con-Fail-Over.htm" class="MCXref xref">Performing a Controlled Failover</a> procedure to fail over to Message VPNs at the alternate replication site.</p>
                                          </div>
                                          <div class="Note">
                                            <p>If the message-spool is enabled as backup but no mate-router-name is configured, the event broker will fail to boot following the upgrade. Prior to upgrading, ensure that either a mate-router-name is configured or the message-spool is not enabled as backup.</p>
                                          </div>
                                          <div class="Note">
                                            <p>The screen output examples shown in this section reflect the software release to which you are upgrading. In the steps that occur before the upgrade, the screen outputs may be formatted differently, or contain slightly different information, depending on the software release from which you are upgrading.</p>
                                          </div>
                                          <div class="Note">
                                            <p>For appliances in Active/Standby redundancy mode, prior to upgrading to version 10.0.1 or later, ensure that the <code>active-standby-role</code> is set to either <code>primary</code> or <code>backup</code>. If the redundancy role is <code>none</code> on either appliance, the upgrade will fail. For appliances in Active/Active redundancy mode, this setting is expected to be set to <code>none</code>. See <a href="../../Features/HA-Redundancy/Configuring-Appliance-Redundancy-Parameters.htm#Assignin" class="MCXref xref">Configuring Redundancy Parameters</a> for instructions.</p>
                                          </div>
                                        </div>
                                      </div>
                                    </p>
                                  </li>
                                  <li value="2">
                                    <p>Ensure that the internal disks are in a redundant state on both the primary and backup appliances.</p>
                                    <pre class="Code">solace-primary&gt; <b>show disk</b> 
Reload required:               No

Attribute                                 Disk 1                        Disk 2
------------------ ----------------------------- -----------------------------
Device Model                         ST3250820NS                   ST3250820NS
Capacity (MB)                             238475                        238475
Admin State                              enabled                       enabled
Operational State                             up                            up

RAID in fully redundant state: Yes

solace-backup&gt; <b>show disk</b> 
Reload required:               No

Attribute                                 Disk 1                        Disk 2
------------------ ----------------------------- -----------------------------
Device Model                         ST3250820NS                   ST3250820NS
Capacity (MB)                             238475                        238475
Admin State                              enabled                       enabled
Operational State                             up                            up

RAID in fully redundant state: Yes
</pre>
                                    <div class="Caution">
                                      <p>If the displayed output shows the RAID disk 1 and disk 2 drives to be in a non-redundant state (see example below), <a href="../../get-support.htm" class="link-internal">contact Solace</a> and stop this software upgrade procedure immediately to prevent software corruption on the appliance.</p>
                                      <p>Some appliances contain slots for disk 3 and disk 4, however, these slots are not presently used, and the redundancy state for disk 3 and disk 4 should be ignored.</p>
                                      <div class="MCDropDown MCDropDown_Closed dropDown">
                                        <span class="MCDropDownHead dropDownHead">
                                          <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>
                                Example
                            </a>
                                        </span>
                                        <div class="MCDropDownBody dropDownBody">
                                          <pre class="Code">solace-primary&gt; <b>show disk</b> 
Reload required:               No

Attribute                                 Disk 1                        Disk 2
------------------ ----------------------------- -----------------------------
Device Model                         ST3250820NS                   ST3250820NS
Capacity (MB)                             238475                        238475
Admin State                              enabled                       enabled
Operational State                         failed                            up

RAID in fully redundant state: No

-or-

solace-backup&gt; <b>show disk</b> 
Reload required:               No

Attribute                                 Disk 1                        Disk 2
------------------ ----------------------------- -----------------------------
Device Model                         ST3250820NS                   ST3250820NS
Capacity (MB)                             238475                        238475
Admin State                              enabled                       enabled
Operational State                         failed                            up

RAID in fully redundant state: No
</pre>
                                        </div>
                                      </div>
                                    </div>
                                  </li>
                                  <li value="3">
                                    <p>Copy the latest SolOS software from an external file server (using either SFTP or SCP) to the <code>/loads</code> subdirectory on both appliances.</p>
                                    <pre class="Code">solace-primary# <b>copy sftp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b>
solace-primary# <b>copy scp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b>

solace-backup# <b>copy sftp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b>
solace-backup# <b>copy scp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b></pre>
                                    <p><u>Where</u>:</p>
                                    <p><code>&lt;username&gt;</code>, <code>&lt;ip-addr&gt;</code>, and <code>&lt;remote-pathname&gt;</code> correspond to the access information of where the new SolOS software is located.</p>
                                  </li>
                                  <li value="4">
                                    <p>Copy the correct SolBase software for the latest SolOS version software (the correct SolBase software is packaged with each SolOS&#xA0;version)  from an external file server (using either SFTP or SCP) to the <code>/loads</code> subdirectory on both appliances.</p>
                                  </li>
                                  <li value="5">
                                    <p>Ensure that the primary appliance is in the correct redundancy state.</p>
                                    <p>If using Active/Active redundancy mode, the output from <code>show redundancy</code> on the primary appliance should look like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-primary# <b>show redundancy</b>
    
Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-backup
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Local Active            Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      50                      197                   
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Backup                
VRRP Priority                  250                     100                   
Message Spool Status           AD-Active               AD-Disabled           
Priority Reported By Mate      Standby                 Active
</pre>
                                    <p>If using Active/Standby redundancy mode, the output from <code>show redundancy</code> on the primary appliance should look like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-primary# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Standby
Mate Router Name         : solace-backup
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Local Active            Shutdown           
Routing Interface              1/6/lag1:1                          
VRRP VRID                      50                                         
Routing Interface Status       Up                                          
VRRP Status                    Master                                  
VRRP Priority                  250                                        
Message Spool Status           AD-Active                          
Priority Reported By Mate      Standby                    
</pre>
                                    <div class="Note">
                                      <ul>
                                        <li>If the Message Spool Status of the Primary Virtual Router is not AD-Active, loss of spooled messages may occur during the upgrade.</li>
                                        <li>The Auto Revert value is a configurable option and may be set to <code>Yes</code>, depending on the redundant system configuration. Solace recommends a setting of <code>No</code> for this option, but either is valid.</li>
                                      </ul>
                                    </div>
                                  </li>
                                  <li value="6">
                                    <p>Ensure that the backup appliance is in the correct redundancy state.</p>
                                    <p>If using Active/Active redundancy mode, the output from <code>show redundancy</code> on the backup appliance should look like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-backup# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-primary
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Local Active            Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      197                     50                    
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Backup                
VRRP Priority                  250                     100                   
Message Spool Status           AD-Disabled             AD-Standby            
Priority Reported By Mate      Standby                 Active
</pre>
                                    <p>If using Active/Standby redundancy mode, the output from <code>show redundancy</code> on the backup appliance should look like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code">solace-backup# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Standby
Mate Router Name         : solace-primary
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Shutdown                Mate Active           
Routing Interface                                      1/6/lag1:2            
VRRP VRID                                              50                    
Routing Interface Status                               Up                    
VRRP Status                                            Backup                
VRRP Priority                                          100                   
Message Spool Status                                   AD-Standby            
Priority Reported By Mate                              Active
</pre>
                                    <p class="Note">The <code>Auto Revert</code> value is a configurable option and may be set to <code>Yes</code>, depending on the redundant system configuration. Solace recommends a setting of <code>No</code> for this option, but either is valid.</p>
                                  </li>
                                  <li value="7">
                                    <p>With the exception of the <code>Auto Revert</code> value, if the redundancy state of either the primary or backup appliance does not correspond to the examples above, do NOT upgrade the appliances. Instead, <a href="../../get-support.htm" class="link-internal">contact Solace</a> for further instructions.</p>
                                  </li>
                                  <li value="8">
                                    <p>If using config-sync, confirm that it is operationally up on both primary and backup appliances, which means all configuration is synchronized.</p>
                                    <pre class="Code">solace-primary&gt; <b>show config-sync</b>

Admin Status                      : Enabled
Oper Status                       : Up 


solace-backup&gt; <b>show config-sync</b>

Admin Status                      : Enabled
Oper Status                       : Up
</pre>
                                    <p>If the operational status of config-sync is not <code>Up</code>, you should resolve this before proceeding. Otherwise you may lose configuration during the upgrade.</p>
                                  </li>
                                </ol>
                                <div class="Note">
                                  <p>Before upgrading the appliance, SolAdmin  may also need to be upgraded. In addition, after the upgrade, SolGeneos Agent may also need to be upgraded. See <a href="" class="MCXref xref" xrefformat="{para}">
                                Appliance Upgrade Notices
                            </a> for more information.</p>
                                </div>
                                <h3><a name="Procedur"/>Procedure</h3>
                                <ol>
                                  <li value="1">
                                    <p>Follow all steps in <a href="#Before" class="MCXref xref">Before you begin</a>. Do not proceed if you cannot confirm that the system is in the correct state.</p>
                                  </li>
                                  <li value="2">
                                    <p>Make a copy of the current SolOS configuration in the <code>/configs</code> subdirectory on both appliances:</p>
                                    <pre class="Code">solace-primary&gt; <b>enable</b>
solace-primary# <b>copy current-config /configs/&lt;old_version&gt;_preUpgradeCfg</b>

solace-backup&gt; <b>enable</b>
solace-backup# <b>copy current-config /configs/&lt;old_version&gt;_preUpgradeCfg</b></pre>
                                    <p><u>Where</u>:</p>
                                    <p><code>&lt;old_version&gt;</code> is the version number of current SolOS software as seen in the output of the <b>show version</b> command.</p>
                                  </li>
                                  <li value="3">
                                    <p>On the backup appliance, release activity to the primary appliance:</p>
                                    <pre class="Code">solace-backup# <b>configure</b>
solace-backup(configure)# <b>redundancy</b>
solace-backup(configure/redundancy)# <b>release-activity</b>
solace-backup(configure/redundancy)# <b>end</b></pre>
                                  </li>
                                  <li value="4">
                                    <p>On the primary appliance, confirm the redundancy status.</p>
                                    <p>If using Active/Active redundancy mode, the Activity Status for both virtual routers should be <code>Local Active</code>:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-primary# <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Down
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-backup
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Local Active            Local Active          
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      50                      197                   
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Master                
VRRP Priority                  250                     250                   
Message Spool Status           AD-Active               AD-Disabled           
Priority Reported By Mate      Release                 Release
</pre>
                                    <p>If using the Active/Standby redundancy mode, the Activity Status for the primary virtual router should be <code>Local Active</code>:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-primary# <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Down
Auto Revert              : No
Redundancy Mode          : Active/Standby
Mate Router Name         : solace-backup
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Local Active            
Routing Interface              1/6/lag1:1              
VRRP VRID                      50                      
Routing Interface Status       Up                      
VRRP Status                    Master                  
VRRP Priority                  250                     
Message Spool Status           AD-Active               
Priority Reported By Mate      Release
</pre>
                                    <p class="Note">If the redundancy status on the primary appliance is not correct, do NOT proceed with the upgrade.  Instead, <a href="../../get-support.htm" class="link-internal">contact Solace</a> Technical Support for further instructions.</p>
                                  </li>
                                  <li value="5">
                                    <p>If you are using MQTT&#xA0;retained messages in your deployment, verify that your retain cache instances are synchronized. For more information, refer to <a href="../../Services/Managing-MQTT-Retained-Messages.htm#Verify_Caches_Sync" class="MCXref xref" data-mc-conditions="Default.NotForPDF">Verifying Retain Cache Redundancy</a>.</p>
                                  </li>
                                  <li value="6">
                                    <p>Upgrade the backup appliance:</p>
                                    <pre class="Code" xml:space="preserve">solace-backup# <b>boot &lt;new_version&gt;</b></pre>
                                    <p><u>Where</u>:</p>
                                    <p><code>&lt;new_version&gt;</code> is the version number of new SolOS software that was previously copied to the appliance.</p>
                                  </li>
                                  <li value="7">
                                    <p>Respond to prompts and then wait for the backup appliance to restart using the new SolOS software. This may take several minutes. You will be disconnected from the CLI and have to reconnect to the appliance.</p>
                                  </li>
                                  <li value="8">
                                    <p>Once reconnected to the backup appliance, confirm that the appliance has started using the new software version:</p>
                                    <pre class="Code">solace-backup&gt; <b>enable</b>
solace-backup# <b>show version</b></pre>
                                  </li>
                                  <li value="9">
                                    <p>Allow activity back to the backup appliance:</p>
                                    <pre class="Code">solace-backup# <b>configure</b>
solace-backup(configure)# <b>redundancy</b>
solace-backup(configure/redundancy)# <b>no release-activity</b>
solace-backup(configure/redundancy)# <b>end</b></pre>
                                  </li>
                                  <li value="10">
                                    <p>On the backup appliance, confirm the redundancy status.</p>
                                    <p>If using Active/Active redundancy mode, the output from <b>show redundancy</b> on the backup appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code">solace-backup# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-primary
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Mate Active             Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      197                     50                    
Routing Interface Status       Up                      Up                    
VRRP Status                    Backup                  Backup                
VRRP Priority                  100                     100                   
Message Spool Status           AD-Disabled             AD-Standby            
Priority Reported By Mate      Active                  Active 
</pre>
                                    <p>If using Active/Standby redundancy mode, the output from <b>show redundancy</b> on the backup appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code">solace-backup# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Standby
Mate Router Name         : solace-primary
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Shutdown                Mate Active           
Routing Interface                                      1/6/lag1:2            
VRRP VRID                                              50                    
Routing Interface Status                               Up                    
VRRP Status                                            Backup                
VRRP Priority                                          100                   
Message Spool Status                                   AD-Standby            
Priority Reported By Mate                              Active
</pre>
                                    <p>It may take several minutes for the backup redundancy status to transition to <code>Up</code> state as the backup router synchronises its states from the primary appliance.</p>
                                    <p class="Note">If the redundancy status on the backup appliance is not correct, do NOT proceed with the upgrade.  Instead, <a href="../../get-support.htm" class="link-internal">contact Solace</a> Technical Support for further instructions.</p>
                                  </li>
                                  <li value="11">
                                    <p>Release activity on the primary appliance to the backup appliance:</p>
                                    <pre class="Code">solace-primary# <b>configure</b>
solace-primary(configure)# <b>redundancy</b>
solace-primary(configure/redundancy)# <b>release-activity</b>
solace-primary(configure/redundancy)# <b>end</b></pre>
                                  </li>
                                  <li value="12">
                                    <p>On the backup appliance, confirm the redundancy status.</p>
                                    <p>If using Active/Active redundancy mode, the output from <code>show redundancy</code> on the backup appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-backup# show redundancy

Configuration Status     : Enabled
Redundancy Status        : Down
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-primary
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Local Active            Local Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      197                     50                    
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Master                
VRRP Priority                  250                     240                   
Message Spool Status           AD-Disabled             AD-Active            
Priority Reported By Mate      Release                 Release
</pre>
                                    <p>If using Active/Standby redundancy mode, the output from <code>show redundancy</code> on the backup appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-backup# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Down
Auto Revert              : No
Redundancy Mode          : Active/Standby
Mate Router Name         : solace-primary
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Shutdown                Local Active           
Routing Interface                                      1/6/lag1:2            
VRRP VRID                                              50                    
Routing Interface Status                               Up                    
VRRP Status                                            Master                
VRRP Priority                                          240                   
Message Spool Status                                   AD-Active            
Priority Reported By Mate                              Release 
</pre>
                                    <p class="Note">If the redundancy status on the backup appliance is not correct, do NOT proceed with the upgrade.  Instead, <a href="../../get-support.htm" class="link-internal">contact Solace</a> Technical Support for further instructions.</p>
                                  </li>
                                  <li value="13">
                                    <p>If you are using MQTT&#xA0;retained messages in your deployment, verify that your retain cache instances are synchronized. For more information, refer to <a href="../../Services/Managing-MQTT-Retained-Messages.htm#Verify_Caches_Sync" class="MCXref xref" data-mc-conditions="Default.NotForPDF">Verifying Retain Cache Redundancy</a>.</p>
                                  </li>
                                  <li value="14">
                                    <p>Upgrade the primary appliance:</p>
                                    <pre class="Code">solace-primary# <b>boot &lt;new version&gt;</b></pre>
                                    <p><u>Where</u>:</p>
                                    <p><code>&lt;new_version&gt;</code> is the version number of the new SolOS software that was previously copied to the appliance.</p>
                                  </li>
                                  <li value="15">
                                    <p>Respond to prompts and then wait for the primary appliance to restart using the new SolOS software. This may take several minutes. You will be disconnected from the CLI and have to reconnect to the appliance.</p>
                                  </li>
                                  <li value="16">
                                    <p>Once reconnected to the primary appliance, confirm that the appliance has started using the new software version:</p>
                                    <pre class="Code">solace-primary&gt; <b>enable</b>
solace-primary# <b>show version</b></pre>
                                  </li>
                                  <li value="17">
                                    <p>Allow activity on the primary:</p>
                                    <pre class="Code">solace-primary# <b>configure</b>
solace-primary(configure)# <b>redundancy</b>
solace-primary(configure/redundancy)# <b>no release-activity</b>
solace-primary(configure/redundancy)# <b>end</b></pre>
                                  </li>
                                  <li value="18">
                                    <p>On the primary appliance, confirm the redundancy status.</p>
                                    <p>If using Active/Active redundancy mode, the output from <code>show redundancy</code> on the primary appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code">solace-primary# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-backup
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Mate Active             Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      50                      197                    
Routing Interface Status       Up                      Up                    
VRRP Status                    Backup                  Backup                
VRRP Priority                  150                     100                   
Message Spool Status           AD-Standby              AD-Disabled
Priority Reported By Mate      Active                  Active
</pre>
                                    <p>If using Active/Standby redundancy mode, the output from <code>show redundancy</code> on the primary appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code">solace-primary# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Standby
Mate Router Name         : solace-backup
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Mate Active             Shutdown           
Routing Interface              1/6/lag1:2            
VRRP VRID                      50                    
Routing Interface Status       Up                    
VRRP Status                    Backup                
VRRP Priority                  150                   
Message Spool Status           AD-Standby            
Priority Reported By Mate      Active
</pre>
                                    <p>It may take several minutes for the primary redundancy status to transition to <code>Up</code> state as the backup router synchronises its states from the primary appliance.</p>
                                  </li>
                                  <li value="19">
                                    <p>If auto-revert is not configured, revert activity to the primary appliance from the backup appliance:</p>
                                    <pre class="Code">solace-backup# <b>admin</b>
solace-backup(admin)# <b>redundancy revert-activity</b>
solace-backup(admin)# <b>end</b></pre>
                                  </li>
                                  <li value="20">
                                    <p>Ensure that the primary appliance is in the correct redundancy state.</p>
                                    <p>If using Active/Active redundancy mode, the output from <code>show redundancy</code> on the primary appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-primary# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-backup
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Local Active            Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      50                      197                   
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Backup                
VRRP Priority                  250                     100                   
Message Spool Status           AD-Active               AD-Disabled           
Priority Reported By Mate      Standby                 Active
</pre>
                                    <p>If using Active/Standby redundancy mode, the output from <code>show redundancy</code> on the primary appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-primary# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Standby
Mate Router Name         : solace-backup
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Local Active            Shutdown           
Routing Interface              1/6/lag1:1                          
VRRP VRID                      50                                         
Routing Interface Status       Up                                          
VRRP Status                    Master                                  
VRRP Priority                  250                                        
Message Spool Status           AD-Active                          
Priority Reported By Mate      Standby
</pre>
                                    <p class="Note">The <b>Auto Revert</b> value is a configurable option and may be set to <code>Yes</code>, depending on the redundant system configuration.</p>
                                  </li>
                                  <li value="21">
                                    <p>Ensure that the backup appliance is in the correct redundancy state.</p>
                                    <p>If using Active/Active redundancy mode, the output from show redundancy on the backup appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-backup# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-primary
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Local Active            Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      197                     50                    
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Backup                
VRRP Priority                  250                     100                   
Message Spool Status           AD-Disabled             AD-Standby            
Priority Reported By Mate      Standby                 Active 
</pre>
                                    <p>If using Active/Standby redundancy mode, the output from show redundancy on the backup appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code">solace-backup# <b>show redundancy</b>

Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Standby
Mate Router Name         : solace-primary
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual Router  Backup Virtual Router 
                               ----------------------  ----------------------
Activity Status                Shutdown                Mate Active           
Routing Interface                                      1/6/lag1:2            
VRRP VRID                                              50                    
Routing Interface Status                               Up                    
VRRP Status                                            Backup                
VRRP Priority                                          100                   
Message Spool Status                                   AD-Standby            
Priority Reported By Mate                              Active
</pre>
                                    <p class="Note">The <b>Auto Revert</b> value is a configurable option and may be set to <code>Yes</code>, depending on the redundant system configuration.</p>
                                  </li>
                                </ol>
                                <p>You have completed this procedure.</p>
                              </div>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" id="Without">
                                <h2 class="with-rule">Without Guaranteed Messaging</h2>
                                <p>To upgrade the SolOS software to SolOS-TR&#xA0;<span class="mc-variable Manifest-Products-Routers.SolOS_TR variable">10.8.1</span> without a prolonged service outage on a redundant appliance pair that doesn't use guaranteed messaging , follow this procedure.</p>
                                <ul>
                                  <li>
                                    <p>
                                      <a href="#Before2" class="MCXref xref">Before you begin</a>
                                    </p>
                                  </li>
                                  <li>
                                    <p>
                                      <a href="#Procedur2" class="MCXref xref">Procedure</a>
                                    </p>
                                  </li>
                                </ul>
                                <p>In the example <code>solace-primary</code> is the primary appliance, and <code>solace-backup</code> is the backup.</p>
                                <h3><a name="Before2"/>Before you begin</h3>
                                <p>Perform the following steps to ensure the redundant pair is in the correct state before upgrading.</p>
                                <ol>
                                  <li value="1">
                                    <p>Review the appliance upgrade notices.</p>
                                    <p>
                                      <div class="MCDropDown MCDropDown_Closed dropDown">
                                        <span class="MCDropDownHead dropDownHead">
                                          <a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>
                                Appliance Upgrade Notices
                            </a>
                                        </span>
                                        <div class="MCDropDownBody dropDownBody">
                                          <div class="Note">
                                            <p>Before upgrading to version 10.2.0 or later, ensure there are no queue, client-profile, or acl-profile objects configured whose name begins with #telemetry-. As a general rule, no objects should be configured that start with # since Solace uses such object names for internal use.</p>
                                          </div>
                                          <div class="Note">
                                            <p>The following upgrade paths are not supported:</p>
                                            <ul>
                                              <li>Direct upgrades from SolOS 9.8.1 or earlier to SolOS 10.8.0 or later.</li>
                                              <li>Direct upgrades from SolOS 9.9.0 or earlier to SolOS 10.8.1 or later.</li>
                                            </ul>
                                            <p>For unsupported upgrade paths, you must follow the upgrade procedure to the last SolOS-TR version that is part of a supported upgrade path from the source version, before following the upgrade procedure to the destination version.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Upgrades to or from SolOS Early Availability (EA) loads are not supported. All configuration and spooled messages may be lost during the upgrade.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Faulty or noisy serial connections can result in the appliance not booting correctly following an upgrade or restart. Ensure either serial connections are fully functional, or disconnect all serial cables from the Solace appliance prior to upgrading.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Solace recommends upgrading SolAdmin and SolGeneos to the most recent versions before upgrading the appliance to a new major or minor version.</p>
                                          </div>
                                          <div class="Note">
                                            <p>On upgrade, some appliances that have ADB version ADB-04210M-01 will require additional message-spool disk space to support the higher scaling capabilities of this software release. This additional disk space persists and will reduce the amount of disk space available for spooling messages.</p>
                                            <ul>
                                              <li>3560 appliances with ADB version ADB-04210M-01 will have 10 GB of additional space consumed on each disk partition (primary and backup).</li>
                                              <li>The 3260 versions CHS-3260AC-01, -02, and -03 with ADB version ADB-04210M-01 require 1 GB of additional space for each partition.</li>
                                              <li>The 3260 version CHS-3260AC-04 requires 3 GB of additional space for each partition.</li>
                                            </ul>
                                          </div>
                                          <div class="Note">
                                            <p>In mixed release replication configurations between this SolOS version and older SolOS versions, config-sync may not work correctly. Running mixed release replication configurations with older SolOS versions is not recommended for extended periods of time. Once the releases are the same, the config-sync issues will clear, so upgrading both replications to the same version should be done as soon as possible. For additional information, <a href="../../get-support.htm" class="link-internal">contact Solace</a>.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Upgrades that require changing the underlying version of SolBase will not preserve files in the root partition of the appliance&#x2019;s internal file system.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Configuration changes should not be made while performing any in-service upgrade.  This includes avoiding the use of administrative config-sync commands.</p>
                                          </div>
                                          <div class="Note">
                                            <p>Before upgrading standalone appliances that use the Replication feature, follow the <a href="../../Features/DR-Replication/Perf-Con-Fail-Over.htm" class="MCXref xref">Performing a Controlled Failover</a> procedure to fail over to Message VPNs at the alternate replication site.</p>
                                          </div>
                                          <div class="Note">
                                            <p>If the message-spool is enabled as backup but no mate-router-name is configured, the event broker will fail to boot following the upgrade. Prior to upgrading, ensure that either a mate-router-name is configured or the message-spool is not enabled as backup.</p>
                                          </div>
                                          <div class="Note">
                                            <p>The screen output examples shown in this section reflect the software release to which you are upgrading. In the steps that occur before the upgrade, the screen outputs may be formatted differently, or contain slightly different information, depending on the software release from which you are upgrading.</p>
                                          </div>
                                        </div>
                                      </div>
                                    </p>
                                  </li>
                                  <li value="2">
                                    <p>Ensure that the internal disks are in a redundant state on both the primary and backup appliances.</p>
                                    <pre class="Code">solace-primary&gt; <b>show disk</b> 
Reload required:               No

Attribute                                 Disk 1                        Disk 2
------------------ ----------------------------- -----------------------------
Device Model                         ST3250820NS                   ST3250820NS
Capacity (MB)                             238475                        238475
Admin State                              enabled                       enabled
Operational State                             up                            up

RAID in fully redundant state: Yes

solace-backup&gt; <b>show disk</b> 
Reload required:               No

Attribute                                 Disk 1                        Disk 2
------------------ ----------------------------- -----------------------------
Device Model                         ST3250820NS                   ST3250820NS
Capacity (MB)                             238475                        238475
Admin State                              enabled                       enabled
Operational State                             up                            up

RAID in fully redundant state: Yes</pre>
                                    <div class="Caution">
                                      <p>If the displayed output shows the RAID disk 1 and disk 2 drives to be in a non-redundant state (see example below), <a href="../../get-support.htm" class="link-internal">contact Solace</a> Technical Support and stop this software upgrade procedure immediately to prevent software corruption on the appliance. </p>
                                      <p>Some appliances contain slots for disk 3 and disk 4, however, these slots are not presently used, and the redundancy state for disk 3 and disk 4 should be ignored.</p>
                                      <pre class="Code">solace-primary&gt; <b>show disk</b> 
Reload required:               No

Attribute                                 Disk 1                        Disk 2
------------------ ----------------------------- -----------------------------
Device Model                         ST3250820NS                   ST3250820NS
Capacity (MB)                             238475                        238475
Admin State                              enabled                       enabled
Operational State                         failed                            up

RAID in fully redundant state: No

OR

solace-backup&gt; show disk 
Reload required:               No

Attribute                                 Disk 1                        Disk 2
------------------ ----------------------------- -----------------------------
Device Model                         ST3250820NS                   ST3250820NS
Capacity (MB)                             238475                        238475
Admin State                              enabled                       enabled
Operational State                         failed                            up

RAID in fully redundant state: No    </pre>
                                    </div>
                                  </li>
                                  <li value="3">
                                    <p>Copy the latest SolOS software from an external file server (using either SFTP or SCP) to the <code>/loads</code> subdirectory on both appliances.</p>
                                    <pre class="Code">solace-primary# <b>copy sftp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b>
solace-primary# <b>copy scp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b>

solace-backup# <b>copy sftp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b>
solace-backup# <b>copy scp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b></pre>
                                    <p><u>Where</u>:</p>
                                    <p><code>&lt;username&gt;</code>, <code>&lt;ip-addr&gt;</code>, and <code>&lt;remote-pathname&gt;</code> correspond to the access information of where the new SolOS software is located.</p>
                                  </li>
                                  <li value="4">
                                    <p>Copy the correct SolBase software for the latest SolOS version (the correct SolBase software is packaged with each SolOS&#xA0;version) from an external file server (using either SFTP or SCP) to the <code>/loads</code> subdirectory on both appliances.</p>
                                    <pre class="Code">solace-primary# <b>copy sftp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b>
solace-primary# <b>copy scp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b>

solace-backup# <b>copy sftp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b>
solace-backup# <b>copy scp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt; /loads</b></pre>
                                    <p><u>Where</u>:</p>
                                    <p><code>&lt;username&gt;</code>, <code>&lt;ip-addr&gt;</code>, and <code>&lt;remote-pathname&gt;</code> correspond to the access information of where the new SolBase software is located.</p>
                                  </li>
                                  <li value="5">
                                    <p>Ensure that the primary appliance is in the correct redundancy state. The output from <code>show redundancy</code> on the primary appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-primary# <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-backup
ADB Link To Mate         : Down
ADB Hello To Mate        : Down

Primary Virtual Router  Backup Virtual Router 
----------------------  ----------------------
Activity Status                Local Active            Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      50                      197                   
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Backup                
VRRP Priority                  250                     100                   
Message Spool Status           AD-Disabled             AD-Disabled           
Priority Reported By Mate      None                    Active    </pre>
                                    <p class="Note">The <b>Auto Revert</b> value is a configurable option and may be set to <code>Yes</code>, 
                depending on the redundant system configuration. Solace recommends a setting of <code>No</code> for this option, but either is valid.</p>
                                    <p>Ensure that the backup appliance is in the correct redundancy state. The output from <code>show redundancy</code> on the backup appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-backup# <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-primary
ADB Link To Mate         : Down
ADB Hello To Mate        : Down

Primary Virtual Router  Backup Virtual Router 
----------------------  ----------------------
Activity Status                Local Active            Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      197                     50                    
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Backup                
VRRP Priority                  250                     100                   
Message Spool Status           AD-Disabled             AD-Disabled           
Priority Reported By Mate      None                    Active      </pre>
                                    <p class="Note">The <code>Auto Revert</code> value is a configurable option and may be set to <code>Yes</code>, 
                depending on the redundant system configuration. Solace recommends a setting of <code>No</code> for this option, but either is valid.</p>
                                  </li>
                                  <li value="6">
                                    <p>With the exception of the <code>Auto Revert</code> value, if the redundancy state of either the primary or backup appliance does not correspond to the examples above, do NOT upgrade the appliances. Instead, <a href="../../get-support.htm" class="link-internal">contact Solace</a> Technical Support for further instructions.</p>
                                  </li>
                                </ol>
                                <div class="Note">
                                  <p>Before upgrading the appliance, SolAdmin and SolGeneos Agent may also need to be upgraded. See <a href="" class="MCXref xref" xrefformat="{para}">
                                Appliance Upgrade Notices
                            </a>  for more information.</p>
                                </div>
                                <h3><a name="Procedur2"/>Procedure</h3>
                                <ol>
                                  <li value="1">Follow all steps in <a href="#Before" class="MCXref xref">Before you begin</a>. Do not proceed if you cannot confirm that the system is in the correct state.</li>
                                  <li value="2">
                                    <p>Make a copy of the current SolOS configuration in the <code>/configs</code> subdirectory on both appliances:</p>
                                    <pre class="Code">solace-primary&gt; <b>enable</b>
solace-primary# <b>copy current-config /configs/&lt;old_version&gt;_preUpgradeCfg</b>

solace-backup&gt; <b>enable</b>
solace-backup# <b>copy current-config /configs/&lt;old_version&gt;_preUpgradeCfg</b></pre>
                                    <p><u>Where</u>:</p>
                                    <p><code>&lt;old_version&gt;</code> is the version number of current SolOS software as seen in the output of the <b>show version</b> command.</p>
                                  </li>
                                  <li value="3">
                                    <p>Ensure both appliances have auto-revert set to not enabled:</p>
                                    <pre class="Code">solace-primary# <b>configure</b>
solace-primary(configure)# <b>redundancy</b>
solace-primary(configure/redundancy)# <b>no auto-revert</b>
solace-primary(configure/redundancy)# <b>end</b>

solace-backup# <b>configure</b>
solace-backup(configure)# <b>redundancy</b>
solace-backup(configure/redundancy)# <b>no auto-revert</b>
solace-backup(configure/redundancy)# <b>end</b></pre>
                                  </li>
                                  <li value="4">
                                    <p>On the primary appliance, release activity to the backup appliance:</p>
                                    <pre class="Code">solace-primary# <b>configure</b>
solace-primary(configure)# <b>redundancy</b>
solace-primary(configure/redundancy)# <b>release-activity</b>
solace-primary(configure/redundancy)# <b>end</b></pre>
                                  </li>
                                  <li value="5">
                                    <p>On the primary appliance, confirm that the backup appliance has taken activity. The Activity Status for both virtual routers should be <code>Mate Active</code>:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code">solace-primary# <b>show redundancy</b> 
Configuration Status     : Enabled-Released
Redundancy Status        : Down
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-backup
ADB Link To Mate         : Down
ADB Hello To Mate        : Down

Primary Virtual Router  Backup Virtual Router 
----------------------  ----------------------
Activity Status                Mate Active             Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      50                      197                   
Routing Interface Status       Up                      Up                    
VRRP Status                    Backup                  Backup                
VRRP Priority                  0                       0                     
Message Spool Status           AD-Disabled             AD-Disabled           
Priority Reported By Mate      Active                  Active    </pre>
                                    <p class="Note">If the backup appliance has not taken activity, do NOT proceed with the upgrade. Instead, <a href="../../get-support.htm" class="link-internal">contact Solace</a> Technical Support for further instructions.</p>
                                  </li>
                                  <li value="6">
                                    <p>If you are using MQTT&#xA0;retained messages in your deployment, verify that your retain cache instances are synchronized. For more information, refer to <a href="../../Services/Managing-MQTT-Retained-Messages.htm#Verify_Caches_Sync" class="MCXref xref" data-mc-conditions="Default.NotForPDF">Verifying Retain Cache Redundancy</a>.</p>
                                  </li>
                                  <li value="7">
                                    <p>Shut down the Msg-Backbone service on the primary appliance:</p>
                                    <pre class="Code">solace-primary# <b>configure</b>
solace-primary(configure)# <b>service msg-backbone</b>
solace-primary(configure/service/msg-backbone)# <b>shutdown</b>
All SMF, WEB, and REST clients will be disconnected.
Do you want to continue (y/n)? <b>y</b>
solace-primary(configure/service/msg-backbone)# <b>end</b></pre>
                                  </li>
                                  <li value="8">
                                    <p>Upgrade the primary appliance:</p>
                                    <pre class="Code">solace-primary# <b>boot &lt;new_version&gt;</b></pre>
                                    <p><u>Where</u>:</p>
                                    <p><code>&lt;new_version&gt;</code> is the version number of the new SolOS software that was previously copied to the appliance.</p>
                                  </li>
                                  <li value="9">
                                    <p>Respond to prompts and then wait for the primary appliance to restart using the new SolOS software. This may take several minutes. You will be disconnected from the CLI and have to reconnect to the appliance.</p>
                                  </li>
                                  <li value="10">
                                    <p>Once reconnected, confirm that the appliance has started using the new software version:</p>
                                    <pre class="Code">solace-primary&gt; <b>enable</b>
solace-primary# <b>show version</b></pre>
                                  </li>
                                  <li value="11">
                                    <p>Start the Msg-Backbone service that was shut down on the primary appliance:</p>
                                    <p class="Code">solace-primary#<b>configure</b><br/>solace-primary(configure)# <b>service msg-backbone</b><br/>solace-primary(configure/service/msg-backbone)# <b>no shutdown</b><br/>solace-primary(configure/service/msg-backbone)# <b>end</b></p>
                                  </li>
                                  <li value="12">
                                    <p>Revert activity back to the primary appliance from the backup appliance.</p>
                                    <p>Enter the <b>no release-activity</b>   command on the primary appliance to allow activity to return back to it:</p>
                                    <pre class="Code">solace-primary# <b>configure</b>
solace-primary(configure)# <b>redundancy</b>
solace-primary(configure/redundancy)# <b>no release-activity</b>
solace-primary(configure/redundancy)# <b>end</b></pre>
                                    <p>Enter the <b>redundancy revert-activity</b> Admin command on the backup appliance to administratively force it to give up service:</p>
                                    <pre class="Code">solace-backup# <b>admin</b>
solace-backup(admin)# <b>redundancy revert-activity</b>
solace-backup(admin)# <b>end</b></pre>
                                  </li>
                                  <li value="13">
                                    <p>On the backup appliance, release activity to the primary appliance:</p>
                                    <pre class="Code">solace-backup# <b>configure</b>
solace-backup(configure)# <b>redundancy</b>
solace-backup(configure/redundancy)# <b>release-activity</b>
solace-backup(configure/redundancy)# <b>end</b></pre>
                                  </li>
                                  <li value="14">
                                    <p>Confirm on the primary appliance that it has taken activity for both virtual routers. The Activity Status for both virtual routers should be <code>Local Active</code>:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-primary# <b>show redundancy</b>
Configuration Status     : Enabled
Redundancy Status        : Down
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-backup
ADB Link To Mate         : Down
ADB Hello To Mate        : Down

Primary Virtual Router  Backup Virtual Router 
----------------------  ----------------------
Activity Status                Local Active            Local Active          
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      50                      197                   
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Master                
VRRP Priority                  250                     250                   
Message Spool Status           AD-Disabled             AD-Disabled           
Priority Reported By Mate      None                    None                           </pre>
                                    <p class="Note">If the primary appliance is not active for both virtual routers, do NOT proceed with the upgrade. Instead, contact Systems technical support for further instructions.</p>
                                  </li>
                                  <li value="15">
                                    <p>If you are using MQTT&#xA0;retained messages in your deployment, verify that your retain cache instances are synchronized. For more information, refer to <a href="../../Services/Managing-MQTT-Retained-Messages.htm#Verify_Caches_Sync" class="MCXref xref" data-mc-conditions="Default.NotForPDF">Verifying Retain Cache Redundancy</a>.</p>
                                  </li>
                                  <li value="16">
                                    <p>Shut down the Msg-Backbone service on the backup appliance:</p>
                                    <pre class="Code">solace-backup# <b>configure</b>
solace-backup(configure)# <b>service msg-backbone</b>
solace-backup(configure/service/msg-backbone)# <b>shutdown</b>
All SMF, WEB, and REST clients will be disconnected.
Do you want to continue (y/n)? <b>y</b>
solace-backup(configure/service/msg-backbone)# <b>end</b></pre>
                                  </li>
                                  <li value="17">
                                    <p>Upgrade the backup appliance:</p>
                                    <pre class="Code">solace-backup# <b>boot &lt;new version&gt;</b></pre>
                                    <p><u>Where</u>:</p>
                                    <p><code>&lt;new_version&gt;</code> is the version number of new SolOS software that was previously copied to the appliance.</p>
                                  </li>
                                  <li value="18">
                                    <p>Respond to prompts and then wait for the backup appliance to restart using the new SolOS software. This may take several minutes. You will be disconnected from the CLI and have to reconnect to the appliance.</p>
                                  </li>
                                  <li value="19">
                                    <p>Once reconnected to the backup appliance, confirm that the appliance has started using the new software version:</p>
                                    <pre class="Code">solace-backup&gt; <b>enable</b>
solace-backup# <b>show version</b></pre>
                                  </li>
                                  <li value="20">
                                    <p>Start the Msg-Backbone service that was shut down on the backup appliance:</p>
                                    <pre class="Code">solace-backup# <b>configure</b>
solace-backup(configure)# <b>service msg-backbone</b>
solace-backup(configure/service/msg-backbone)# <b>no shutdown</b>
solace-backup(configure/service/msg-backbone)# <b>end</b></pre>
                                  </li>
                                  <li value="21">
                                    <p>Enter the <b>no release-activity</b>  command on the backup appliance to allow activity to return back to it:</p>
                                    <pre class="Code">solace-backup# <b>configure</b>
solace-backup(configure)# <b>redundancy</b>
solace-backup(configure/redundancy)# <b>no release-activity</b>
solace-backup(configure/redundancy)# <b>end</b></pre>
                                  </li>
                                  <li value="22">
                                    <p>Enter the <b>redundancy revert-activity</b> Admin command on the primary appliance to administratively force it to give up service:</p>
                                    <pre class="Code">solace-primary# <b>admin</b>
solace-primary(admin)# <b>redundancy revert-activity</b>
solace-primary(admin)# <b>end</b></pre>
                                  </li>
                                  <li value="23">
                                    <p>On the primary appliance, confirm that the primary appliance is active for the primary virtual router and the backup appliance is active for the backup virtual router. The Activity Status line should read <code>Local Active</code> for the primary virtual router and <code>Mate Active</code> for the backup virtual router:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-primary# <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-backup
ADB Link To Mate         : Down
ADB Hello To Mate        : Down

Primary Virtual Router  Backup Virtual Router 
----------------------  ----------------------
Activity Status                Local Active            Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      50                      197                   
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Backup                
VRRP Priority                  250                     100                   
Message Spool Status           AD-Disabled             AD-Disabled           
Priority Reported By Mate      None                    Active    </pre>
                                    <p class="Note">If the activity status is not correct, do NOT proceed with the upgrade.
                Instead, <a href="../../get-support.htm" class="link-internal">contact Solace</a> for further instructions.</p>
                                  </li>
                                  <li value="24">
                                    <p>If the redundancy auto-revert setting was set to not enabled in step 3, enable it on both appliances:</p>
                                    <p class="Note">Solace recommends running redundancy with auto-revert not enabled.</p>
                                    <pre class="Code">solace-primary# <b>configure</b>
solace-primary(configure)# <b>redundancy</b>
solace-primary(configure/redundancy)# <b>auto-revert</b>
solace-primary(configure/redundancy)# <b>end</b>

solace-backup# <b>configure</b>
solace-backup(configure)# <b>redundancy</b>
solace-backup(configure/redundancy)# <b>auto-revert</b>
solace-backup(configure/redundancy)# <b>end</b></pre>
                                  </li>
                                  <li value="25">
                                    <p>Ensure that the backup appliance is in the correct redundancy state.</p>
                                    <p>The output from <b>show redundancy</b> on the backup appliance looks like this:</p>
                                    <p><u>Example</u> (Output may vary by appliance version):</p>
                                    <pre class="Code" xml:space="preserve">solace-backup# <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Up
Auto Revert              : No
Redundancy Mode          : Active/Active
Mate Router Name         : solace-primary
ADB Link To Mate         : Down
ADB Hello To Mate        : Down

Primary Virtual Router  Backup Virtual Router 
----------------------  ----------------------
Activity Status                Local Active            Mate Active           
Routing Interface              1/6/lag1:1              1/6/lag1:2            
VRRP VRID                      197                     50                    
Routing Interface Status       Up                      Up                    
VRRP Status                    Master                  Backup                
VRRP Priority                  250                     100                   
Message Spool Status           AD-Disabled             AD-Disabled           
Priority Reported By Mate      None                    Active  
</pre>
                                    <p class="Note">The <code>Auto Revert </code>value is a configurable option and may be set to <code>Yes</code>, depending on the redundant system configuration.</p>
                                  </li>
                                </ol>
                                <p>You have completed this procedure.</p>
                              </div>
                              <script xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" type="text/javascript" src="../../Resources/Scripts/Tabbed_Content.js">
                                                            </script>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.18.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 18, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
