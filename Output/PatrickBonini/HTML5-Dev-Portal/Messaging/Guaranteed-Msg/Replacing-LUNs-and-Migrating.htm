<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Replacing a LUN and Migrating the Disk Spool Files for a Redundant Appliance Pair</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Replacing a LUN and Migrating the Disk Spool Files for a Redundant Appliance Pair</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">The procedures discussed in this section are applicable only to PubSub+ appliances.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">This section describes how to replace a logical unit number&#xA0;(LUN) for a redundant <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> <span class="mc-variable Product-Names.broker_appliance_short variable">appliance</span> pair, and then migrate the disk spool files from the old LUN to the new LUN without losing spooled Guaranteed messages. Replacing a LUN is often done to provide a larger LUN to so that the message-spool size can be increased.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">If you require further assistance, or have any questions regarding this procedure, <a href="../../get-support.htm" class="link-internal">contact Solace</a>. </p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="procedure1"/>Procedure</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">This procedure is for a&#xA0;redundant appliance pair. If you want to migrate the LUN&#xA0;for standalone appliance, see  <a href="Replacing-LUNs-and-Migrating-Standalone.htm" class="MCXref xref">Replacing a LUN and Migrating the Disk Spool Files for a Standalone Appliance</a>.</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Caution">
                                <ul>
                                  <li>This procedure disables service on both appliances in the redundant pair.</li>
                                  <li>To prevent any loss of configuration, do not make any additional unrelated configuration changes to either of the appliances in the redundant pair while performing this procedure.</li>
                                </ul>
                              </div>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <ul>
                                  <li>We recommend that the new LUN be the same size or larger than the old LUN. If the new LUN is smaller, ensure that there is sufficient space available for all files to be copied from the old LUN&#x2014;the files must be copied successfully for this procedure to succeed.</li>
                                  <li>To replace a LUN, first ensure that the current system still works with the old LUN, then check to see if the new LUN is provisioned. Both LUNs must be present in the system before migrating the disk spool files to the new LUN. For details, refer to <a href="Configuring-External-Disk-Arrays.htm" class="MCXref xref">Configuring an External Disk Array for Guaranteed Messaging</a>.</li>
                                  <li>The GDisk utility is used to create and modify partitions on a LUN. New partitions  use an <code>ext4</code> filesystem.</li>
                                  <li>
                                    <p>Operations listed below that state that they can only be performed by root can also be performed by a Sysadmin User:</p>
                                    <ul>
                                      <li>
                                        <p>To elevate to root, enter:<br/><code>[support@solace-primary ~]$ su -<br/>Password:</code></p>
                                      </li>
                                      <li>
                                        <p>To elevate to a sysadmin username <code>myAdmin</code>, enter:<br/><code>[support@solace-primary ~]$ su - myAdmin<br/>Password:</code></p>
                                      </li>
                                    </ul>
                                  </li>
                                </ul>
                              </div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To replace a LUN for a redundant appliance pair and migrate the disk spool files, perform the following steps:</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Ensure that both the primary and backup appliances are in the correct state:<ol style="list-style-type: lower-alpha;"><li value="1">On the primary appliance, run the <code>show message-spool detail</code> command and verify the following:
<ul><li> Config Status is <code>Enabled (Primary)</code>. </li><li> Operational status is <code>AD-Active</code>.</li><li>Valid keys are shown for both primary and backup disks. The particular key values and the relationship between them are not important, as long as valid values are shown for both primary and backup keys.</li></ul><p>For example:</p><pre class="Code" xml:space="preserve">solace-primary&gt; show message-spool detail
Config Status:                                    Enabled (Primary)
 
. . .

Operational Status:                               AD-Active

. . . 
                            
Disk Contents:                 Ready
  Disk Key (Primary):            192.168.164.180:8,3
  Disk Key (Backup):             192.168.164.180:7,3
</pre><div class="Note"><p>If the primary appliance does not show a status of <code>AD-Active</code> OR&#xA0;does not show valid keys for both disks, follow the steps below. Be aware this will cause a service disruption as activity fails over to the backup, and again as activity is reverted to the primary.</p><ol style="list-style-type: lower-roman;"><li style="color: #1565c0;" value="1">On the primary appliance, run the <code>release-activity</code> Redundancy CONFIG command to fail over to the backup appliance. See <a href="../../Features/HA-Redundancy/Maintaining-Event-Broker-Redundancy-All-Broker.htm#Releasing-Activity" class="MCXref xref">Releasing Event Broker Activity</a> for instructions.</li><li style="color: #1565c0;" value="2">On the primary appliance, run the <code>no release-activity</code> Redundancy CONFIG to resume service. See <a href="../../Features/HA-Redundancy/Maintaining-Event-Broker-Redundancy-All-Broker.htm#Releasing-Activity" class="MCXref xref">Releasing Event Broker Activity</a> for instructions.</li><li style="color: #1565c0;" value="3">On the backup appliance, run the  <code>redundancy revert-activity</code> Admin EXEC command to release activity. See <a href="../../Features/HA-Redundancy/Maintaining-Event-Broker-Redundancy-All-Broker.htm#Give-Up-Activity" class="MCXref xref">Forcing Backups to Give Up Activity to Primaries</a> for instructions.</li><li style="color: #1565c0;" value="4">Restart this procedure at Step 1 to ensure that the primary appliance is now in the correct state.</li></ol></div></li><li value="2">On the backup appliance, run the <code>show message-spool</code> command and verify the following:<ul><li>Config Status is <code>Enabled (Backup)</code>.</li><li>Operational Status is <code>AD-Standby</code>.</li></ul><p>For example:</p><pre class="Code">solace-backup&gt; show message-spool
Config Status:                                    Enabled (Backup)
 
. . .

Operational Status:                               AD-Standby</pre></li></ol></li>
                                <li value="2">Identify the WWN (World Wide Name) of the old LUN.
            <p>Enter the following command on the primary appliance.</p><pre class="Code">solace-primary&gt; show message-spool
Config Status:                                    Enabled (Primary)
Maximum Spool Usage:                              10000 MB
Spool While Charging:                             No
Spool Without Flash Card:                         No
Using Internal Disk:                              No
Disk Array WWN:                                   <span style="color: #ff0000;">60:06:01:60:4d:30:1c:00:8e:29:1b:b6:a6:d6:e8:11</span>

. . .</pre><p class="Note">The examples in this procedure use <code>60:06:01:60:4d:30:1c:00:8e:29:1b:b6:a6:d6:e8:11</code> as the WWN of the old LUN.</p></li>
                                <li value="3">To detect the new LUN on the primary appliance, perform the following steps:</li>
                                <ol style="list-style-type: lower-alpha;">
                                  <li value="1">Enter the following command to elevate to the support user, and then enter the support user's password when prompted.
                <pre class="Code">solace-primary# shell redundantLunMigration
login: support
Password:</pre></li>
                                  <li value="2">Enter the following command to elevate to the root user or a sysadmin user, and then enter the password for that user when prompted:

<pre class="Code">[support@solace-primary ~]$ su -
Password:</pre></li>
                                  <li value="3">Check that the current LUN is visible.
                    <pre class="Code" xml:space="preserve">[root@solace-primary ~]# multipath -ll
3600601604d301c008e291bb6a6d6e811 dm-0 DGC     ,RAID 0 size=300G features='2 queue_if_no_path

. . .

[root@solace-primary ~]#</pre></li>
                                  <li value="4">Rescan the SCSI bus to add the new LUN.
<pre class="Code" xml:space="preserve">
[root@solace-primary ~]# rescan-scsi-bus.sh --nosync -f -r -m
[root@solace-primary ~]# rescan-scsi-bus.sh -a</pre></li>
                                  <li value="5"> If the previous step failed, enter these commands: 
					<pre class="Code" xml:space="preserve">
[root@solace-primary ~]# rescan-scsi-bus.sh -i -a
[root@solace-primary ~]# rescan-scsi-bus.sh --nosync -f -r -m
[root@solace-primary ~]# rescan-scsi-bus.sh -a</pre></li>
                                  <li value="6">Check that the new LUN has been added.
<pre class="Code" xml:space="preserve">[root@solace-primary ~]# multipath -ll
3600601604d301c008e291bb6a6d6e811 dm-0 DGC     ,RAID 0 size=300G features='2 queue_if_no_path

. . .

360014057d24f4b77681435faf684d587 dm-3 LIO-ORG ,sdc1-4 size=800G features='1 queue_if_no_path' hwhandler='0' wp=rw

. . .

[root@solace-primary ~]#</pre><p class="Note">The examples in this procedure use <code>60:01:40:57:d2:4f:4b:77:68:14:35:fa:f6:84:d5:87</code> as the WWN of the new LUN.</p><p class="Note">If the new LUN doesn't appear, confirm that the SAN is properly configured and the HBA port is registered for the new LUN, then re-run both the <code>rescan-scsi-bus.sh --nosync -f -r -m</code> and <code>rescan-scsi-bus.sh -a</code> scripts. If the new LUN doesn't appear, you must reboot the appliance.</p></li>
                                  <li value="7">Return to the CLI:<pre class="Code">[root@solace-primary ~]# exit
[support@solace-primary ~]$ exit</pre></li>
                                </ol>
                                <li value="4">To detect the new LUN on the backup appliance, perform the following steps: </li>
                                <ol style="list-style-type: lower-alpha;">
                                  <li value="1">Enter the following command to elevate to the support user, and then enter the support user's password when prompted.
<pre class="Code">solace-backup# shell redundantLunMigration
login: support
Password:</pre></li>
                                  <li value="2">Enter the following command to elevate to the root user or a sysadmin user, and then enter the password for that user when prompted:

<pre class="Code" xml:space="preserve">[support@solace-backup ~]$ su -
Password:</pre></li>
                                  <li value="3">Check that the current LUN is visible.
<pre class="Code" xml:space="preserve">[root@solace-backup ~]# multipath -ll
3600601604d301c008e291bb6a6d6e811 dm-0 DGC     ,RAID 0 size=300G features='2 queue_if_no_path

. . .

[root@solace-backup ~]#</pre></li>
                                  <li value="4">Rescan the SCSI bus to add the new LUN.
<pre class="Code" xml:space="preserve">[root@solace-backup ~]# rescan-scsi-bus.sh --nosync -f -r -m
[root@solace-backup ~]# rescan-scsi-bus.sh -a</pre></li>
                                  <li value="5"> If the previous step failed, enter these commands: 
					<pre class="Code" xml:space="preserve">
[root@solace-primary ~]# rescan-scsi-bus.sh -i -a
[root@solace-primary ~]# rescan-scsi-bus.sh --nosync -f -r -m
[root@solace-primary ~]# rescan-scsi-bus.sh -a</pre></li>
                                  <li value="6">Check that the new LUN has been added.
<pre class="Code" xml:space="preserve">[root@solace-backup ~]# sudo multipath -ll
3600601604d301c008e291bb6a6d6e811 dm-0 DGC     ,RAID 0 size=300G features='2 queue_if_no_path

. . .

360014057d24f4b77681435faf684d587 dm-3 LIO-ORG ,sdc1-4 size=800G features='1 queue_if_no_path' hwhandler='0' wp=rw

. . .

[root@solace-backup ~]#</pre><p class="Note">If the new LUN doesn't appear, confirm that the SAN is properly configured and the HBA port is registered for the new LUN, then re-run both the <code>rescan-scsi-bus.sh --nosync -f -r -m</code> and <code>rescan-scsi-bus.sh -a</code> scripts.  If the new LUN doesn't appear, you must reboot the appliance.</p></li>
                                  <li value="7">Return to the CLI:<pre class="Code" xml:space="preserve">[root@solace-backup ~]# exit
[support@solace-backup ~]$ exit</pre></li>
                                </ol>
                                <li value="5"><a name="create-partitions"/>Partition and create the filesystem on the new LUN. For more information, see <a href="Configuring-External-Disk-Arrays.htm" class="MCXref xref">Configuring an External Disk Array for Guaranteed Messaging</a>.</li>
                                <li value="6"><a name="find-wwn"/>On both the primary and backup appliances, run the following command to confirm that the new external disk LUN is available and referred to by the correct WWN (obtain the WWN of the new LUN from your storage administrator):
<pre class="Code">solace-primary&gt; show hardware details</pre><pre class="Code">solace-backup&gt; show hardware details</pre><p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>Example:</a></span><div class="MCDropDownBody dropDownBody"><pre class="Code" xml:space="preserve">solace-primary&gt; show hardware details
            
. . .

  Slot 1/4: Host Bus Adapter Blade
  Product #:                HBA-0204FC-02-A
  Serial #:                 RFC0609G02361
  Model Name:               QLE2462
  Model Description:        PCI-Express Dual Channel 4Gb Fibre Channel HBA
  Driver Version:           8.04.00.03-k
            
. . .
            
  Attached devices
  LUN 0
    State:          Ready
    Size:           300G
    WWN  :          60:06:01:60:4d:30:1c:00:8e:29:1b:b6:a6:d6:e8:11
  LUN 1
    State:          Ready
    Size:           800G
   <span style="color: #ff0000;"> WWN  :          60:01:40:57:d2:4f:4b:77:68:14:35:fa:f6:84:d5:87</span></pre></div></div></p><p class="Note">Don't proceed further until the new LUN is visible. </p></li>
                                <li value="7">If the Config-Sync feature is in use, enter the following command on both the primary and backup appliances to confirm that Config-Sync is operationally up:  
<pre class="Code">solace-primary&gt; show config-sync
Admin Status:                                    Enabled
Oper Status:                                     Up</pre><pre class="Code">solace-backup&gt; show config-sync
Admin Status:                                    Enabled
Oper Status:                                     Up</pre><p class="Caution">To prevent loss of configuration, do not proceed further if Config-Sync is operationally down.</p></li>
                                <li value="8">To stop providing service to applications, enter the following commands on the backup appliance:
<pre class="Code">solace-backup&gt; enable
solace-backup# configure
solace-backup(configure)# service msg-backbone shutdown
All clients will be disconnected.
Do you want to continue (y/n)? y</pre></li>
                                <li value="9">Repeat the previous step on the primary appliance:
<pre class="Code">solace-primary&gt; enable
solace-primary# configure
solace-primary(configure)# service msg-backbone shutdown
All clients will be disconnected.
Do you want to continue (y/n)? y</pre></li>
                                <li value="10">On the primary appliance, run the <code>show message-spool detail</code> command to confirm that:
            <ul><li>the appliance is still active, up, and synchronized (indicated by the Operational, Datapath, and Synchronization statuses)</li><li>the appliance has successfully cleaned up all flows  (indicated by zeroes in the <code>Currently Used</code> column)</li></ul><p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>Example <code>show message-spool details</code> Output:</a></span><div class="MCDropDownBody dropDownBody"><pre class="Code" xml:space="preserve">solace-primary(configure/service/msg-backbone)# show message-spool detail

Config Status:                            Enabled (Primary)

. . .

Operational Status:                       <span style="color: #ff0000;">AD-Active</span>
Datapath Status:                          <span style="color: #ff0000;">Up</span>
Synchronization Status:                   <span style="color: #ff0000;">Synced</span>

. . .
                                       Currently Used   Max Allowed
                                       --------------   -----------
. . .

            Total Ingress Flows:                    <span style="color: #ff0000;">0</span>       1000000
             Total Egress Flows:                    <span style="color: #ff0000;">0</span>        100000
            Active Egress Flows:                    <span style="color: #ff0000;">0</span>
          Inactive Egress Flows:                    <span style="color: #ff0000;">0</span>
           Browser Egress Flows:                    <span style="color: #ff0000;">0</span>

. . .</pre></div></div></p></li>
                                <li value="11">Ensure that message-spool defragmentation is not active.
            <p>Enter the following command on both the primary and backup appliances.</p><pre class="Code">solace-primary&gt; show message-spool

. . .
            
Defragmentation Status:                   Idle

. . .</pre><pre class="Code">solace-backup&gt; show message-spool

. . .

Defragmentation Status:                   Idle

. . .</pre><p class="Note">If the message spool defragmentation status is not <code>Idle</code> for both the primary and backup appliances, wait for the defragmentation process to complete before proceeding.</p></li>
                                <li value="12">
               To stop Guaranteed Messaging, enter the following commands on the primary appliance:
<pre class="Code">solace-primary(configure)# hardware message-spool shutdown
All message spooling will be stopped.
Do you want to continue (y/n)? y
solace-primary(configure)# end</pre></li>
                                <li value="13">
               Repeat the previous step on the backup appliance:
                <pre class="Code">solace-backup(configure)# hardware message-spool shutdown
All message spooling will be stopped.
Do you want to continue (y/n)? y
solace-backup(configure)# end</pre></li>
                                <li value="14">On the primary appliance, perform the following steps to migrate the LUN&#xA0;data: <p class="Caution">If you do not perform this step, you must reset the message spool on the primary appliance after you <a href="#step-edit-max-spool-usage" class="link-internal">edit the maximum spool usage</a> later in this procedure. Resetting the message spool causes all guaranteed messaging data to be lost.</p><ol style="list-style-type: lower-alpha;"><li value="1">Enter the following command to elevate to the support user, and then enter the support user's password when prompted:            
<pre class="Code">solace-primary# shell redundantLunMigration
login: support
Password:</pre></li><li value="2">Enter the following command to elevate to the root user or a sysadmin user, and then enter the password for that user when prompted:

<pre class="Code">[support@solace-primary ~]$ su -
Password:</pre></li><li value="3">Migrate the AD keys within p1 and p2 of the old LUN to the new LUN, using the <code>adkey-tool</code> script.<p>These partitions are located in <code>/dev/mapper/</code> and are named <code>&lt;wwn&gt;&lt;p#&gt;</code>.</p><pre class="Code" xml:space="preserve">[root@solace-primary ~]# adkey-tool migrate --src-device /dev/mapper/&lt;old LUN wwn&gt;p1 --dest-device /dev/mapper/&lt;new LUN wwn&gt;p1
[root@solace-primary ~]# adkey-tool migrate --src-device /dev/mapper/&lt;old LUN wwn&gt;p2 --dest-device /dev/mapper/&lt;new LUN wwn&gt;p2</pre><p>For example:</p><pre class="Code" xml:space="preserve">[root@solace-primary ~]# adkey-tool migrate --src-device /dev/mapper/3600601604d301c008e291bb6a6d6e811p1 --dest-device /dev/mapper/360014057d24f4b77681435faf684d587p1
[root@solace-primary ~]# adkey-tool migrate --src-device /dev/mapper/3600601604d301c008e291bb6a6d6e811p2 --dest-device /dev/mapper/360014057d24f4b77681435faf684d587p2</pre><div class="Note"><p>The LUN's WWN might be prefixed by a <code>3</code> in <code>/dev/mapper</code>.</p><p>For example, from earlier in this procedure, the <a href="#find-wwn">WWN of the new LUN</a> is <code>60:01:40:57:d2:4f:4b:77:68:14:35:fa:f6:84:d5:87</code>.
This WWN appears as <code>/dev/mapper/360014057d24f4b77681435faf684d587p1</code> and <code>/dev/mapper/360014057d24f4b77681435faf684d587p2</code> in the example above.</p></div></li><li value="4">Create the following temporary directories:<pre class="Code">[root@solace-primary ~]# mkdir -p /tmp/old_lun_p1
[root@solace-primary ~]# mkdir -p /tmp/old_lun_p2
[root@solace-primary ~]# mkdir -p /tmp/new_lun_p1
[root@solace-primary ~]# mkdir -p /tmp/new_lun_p2</pre></li><li value="5">Mount the partition one (<code>p1</code>) and partition two (<code>p2</code>) of both the old and new LUNs.<pre class="Code">[root@solace-primary ~]# mount /dev/mapper/<b>&lt;old LUN wwn&gt;</b>p1 /tmp/old_lun_p1
[root@solace-primary ~]# mount /dev/mapper/<b>&lt;old LUN wwn&gt;</b>p2 /tmp/old_lun_p2
[root@solace-primary ~]# mount /dev/mapper/<b>&lt;new LUN wwn&gt;</b>p1 /tmp/new_lun_p1
[root@solace-primary ~]# mount /dev/mapper/<b>&lt;new LUN wwn&gt;</b>p2 /tmp/new_lun_p2</pre><p>For example:
</p><pre class="Code">[root@solace-primary ~]# mount /dev/mapper/<b>3600601604d301c008e291bb6a6d6e811p1</b> /tmp/old_lun_p1
[root@solace-primary ~]# mount /dev/mapper/<b>3600601604d301c008e291bb6a6d6e811p2</b> /tmp/old_lun_p2
[root@solace-primary ~]# mount /dev/mapper/<b>360014057d24f4b77681435faf684d587p1</b> /tmp/new_lun_p1
[root@solace-primary ~]# mount /dev/mapper/<b>360014057d24f4b77681435faf684d587p2</b> /tmp/new_lun_p2
</pre></li><li value="6">Copy all directories and files within <code>p1</code> and <code>p2</code> of the old LUN to the new LUN:<pre class="Code">[root@solace-primary ~]# cp -a /tmp/old_lun_p1/* /tmp/new_lun_p1/
[root@solace-primary ~]# cp -a /tmp/old_lun_p2/* /tmp/new_lun_p2/</pre></li><li value="7">Unmount <code>p1</code> and <code>p2</code> of both the old and new LUNs:<pre class="Code">[root@solace-primary ~]# umount /tmp/old_lun_p1
[root@solace-primary ~]# umount /tmp/old_lun_p2
[root@solace-primary ~]# umount /tmp/new_lun_p1
[root@solace-primary ~]# umount /tmp/new_lun_p2</pre></li><li value="8">Return to the CLI:<pre class="Code">[root@solace-primary ~]# exit
[support@solace-primary ~]$ exit</pre></li></ol></li>
                                <li value="15">
                Enter the following commands on the primary appliance and then on the backup appliance to configure the message spool to use the new external disk LUN:            
<pre class="Code">solace-primary# configure
solace-primary(configure)# hardware message-spool disk-array wwn <b>&lt;new LUN wwn&gt;</b></pre><pre class="Code">solace-backup# configure
solace-backup(configure)# hardware message-spool disk-array wwn <b>&lt;new LUN wwn&gt;</b></pre><p>Where <code>&lt;new LUN wwn&gt;</code> is the WWN of the new LUN, as shown <a href="#find-wwn">earlier in this procedure.</a></p><p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>Example: Configure the Message Spool on the Primary Appliance</a></span><div class="MCDropDownBody dropDownBody"><pre class="Code">solace-primary# configure
solace-primary(configure)# hardware message-spool disk-array wwn 60:01:40:57:d2:4f:4b:77:68:14:35:fa:f6:84:d5:87
WARNING: To avoid the loss of messages it is important that the proper disk migration procedure is followed. Please consult the Feature Provisioning Guide for details.
Do you want to continue (y/n)? y
</pre></div></div></p><p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>Example: Configure the Message Spool on the Backup Appliance</a></span><div class="MCDropDownBody dropDownBody"><pre class="Code">solace-backup# configure
solace-backup(configure)# hardware message-spool disk-array wwn 60:01:40:57:d2:4f:4b:77:68:14:35:fa:f6:84:d5:87
WARNING: To avoid the loss of messages it is important that the proper disk migration procedure is followed. Please consult the Feature Provisioning Guide for details.
Do you want to continue (y/n)? y
</pre></div></div></p></li>
                                <li value="16">To start Guaranteed Messaging and message spooling, enter the following command on the primary appliance, and then on the backup appliance: 
<pre class="Code">solace-primary(configure)# no hardware message-spool shutdown primary</pre><pre class="Code">solace-backup(configure)# no hardware message-spool shutdown backup</pre></li>
                                <li value="17">To start providing service to applications, enter the following commands on the primary appliance, and then on the backup appliance:
<pre class="Code">solace-primary(configure)# no service msg-backbone shutdown</pre><pre class="Code">solace-backup(configure)# no service msg-backbone shutdown</pre></li>
                                <li value="18">If the Config-Sync feature is in use, enter the following command on both the primary and backup appliances to confirm that Config-Sync is operationally up:  
<pre class="Code">solace-primary&gt; show config-sync
Admin Status:                                    Enabled
Oper Status:                                     Up</pre><pre class="Code">solace-backup&gt; show config-sync
Admin Status:                                    Enabled
Oper Status:                                     Up</pre><p class="Caution">If Config-Sync does not come up, either there were configuration changes performed beyond what is described in this procedure, or one or more steps did not complete as expected. To prevent the configuration from diverging further, immediately investigate and resolve this issue.</p></li>
                                <li value="19"><a name="step-edit-max-spool-usage"/><b>Optional</b>: To edit the maximum spool usage for the new LUN, enter the following command, first on the primary appliance and then on the backup appliance:            
<pre class="Code">solace-primary(configure)# hardware message-spool max-spool-usage &lt;size&gt;</pre><pre class="Code">solace-backup(configure)# hardware message-spool max-spool-usage &lt;size&gt;</pre><p>Where <code>&lt;size&gt;</code> is the maximum spool usage in megabytes.</p><div class="Note"><ul><li>See <a href="System-Level-Msg-Spool-Config.htm#Config-Max-Spool" class="MCXref xref">Configuring Max Spool Usage</a> to set the maximum spool usage.</li><li>If you used the defaults while <a href="#create-partitions" class="link-internal">creating the partitions and filesystems</a> earlier in this procedure, the LUN will be split into two equal sized partitions. Each partition should be <span class="mc-variable Broker-Limitations.redundant-pair-partition-size variable">1.1 times the max-spool usage</span>.</li></ul></div></li>
                                <li value="20">At this point, the LUN migration has succeeded. After the storage administrator has deprovisioned the original LUN, the <code>show hardware details</code> command shows that the old LUN has a state of <code>Down</code>.<p><div class="MCDropDown MCDropDown_Closed dropDown"><span class="MCDropDownHead dropDownHead"><a href="#" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage" aria-expanded="false"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="11" width="16" alt="Closed" data-mc-alt2="Open"/>Example <code>show hardware details</code> Output:</a></span><div class="MCDropDownBody dropDownBody"><pre class="Code">solace-primary&gt; show hardware details

. . .

  Slot 1/4: Host Bus Adapter Blade
  Product #:                HBA-0204FC-02-A
  Serial #:                 RC0609G02361
  Model Name:               QLE2462
  Model Description:        PCI-Express Dual Channel 4Gb Fibre Channel HBA
  Driver Version:           8.04.00.03-k

. . .

  Attached devices
  LUN 0
    State:          <span style="color: #ff0000;">Down</span>
    Size:           300G
    WWN  :          60:06:01:60:4d:30:1c:00:8e:29:1b:b6:a6:d6:e8:11
  LUN 1
    State:          Ready
    Size:           800G
    WWN  :          60:01:40:57:d2:4f:4b:77:68:14:35:fa:f6:84:d5:87
</pre></div></div></p><p>Also, the kernel log of the appliances might contain entries reflecting that the old LUN is no longer visible.</p><p><MadCap:dropDownHead><MadCap:dropDownHotspot>Example Log Entries:</MadCap:dropDownHotspot></MadCap:dropDownHead><MadCap:dropDownBody><pre class="Code">2016-03-01T02:43:04+0000 &lt;daemon.notice&gt; solace-primary multipathd: 3600601604d301c008e291bb6a6d6e811: sdd - emc_clariion_checker: Logical Unit is unbound or LUNZ
2016-03-01T02:43:04+0000 &lt;daemon.notice&gt; solace-primary multipathd: 3600601604d301c008e291bb6a6d6e811: sdf - emc_clariion_checker: Logical Unit is unbound or LUNZ
</pre></MadCap:dropDownBody></p><p>There is no operational impact from these log entries and the <code>Down</code> state of the attached device.</p></li>
                                <li value="21">Remove the original LUN from the primary appliance.
            <ol style="list-style-type: lower-alpha;"><li value="1">Enter the following command to elevate to the support user, and then enter the support user&#x2019;s password when prompted.
<pre class="Code">solace-primary# shell redundantLunMigration
login: support
Password:</pre></li><li value="2">Enter the following command to elevate to the root user or a sysadmin user, and then enter the password for that user when prompted:
<pre class="Code">[support@solace-primary ~]$ su -
Password:</pre></li><li value="3">Check that both the original and new LUNs are visible.
            
                <pre class="Code" xml:space="preserve">[root@solace-primary ~]# multipath -ll
3600601604d301c008e291bb6a6d6e811 dm-0 DGC     ,RAID 0 size=300G features='1 retain_attached_hw_handler' hwhandler='1

. . .

360014057d24f4b77681435faf684d587 dm-3 LIO-ORG ,sdc1-4 size=800G features='1 queue_if_no_path' hwhandler='0' wp=rw

. . .</pre></li><li value="4">Rescan the SCSI bus to remove the original LUN.<pre class="Code" xml:space="preserve">[root@solace-primary ~]# rescan-scsi-bus.sh -r</pre></li><li value="5">Check that the original LUN is removed.
                <pre class="Code" xml:space="preserve">[root@solace-primary ~]# multipath -ll
360014057d24f4b77681435faf684d587 dm-3 LIO-ORG ,sdc1-4 size=800G features='1 queue_if_no_path' hwhandler='0' wp=rw</pre></li><li value="6">Return to the CLI:<pre class="Code">[root@solace-primary ~]# exit
[support@solace-primary ~]$ exit</pre></li></ol></li>
                                <li value="22">Remove the original LUN from the backup appliance.
                <ol style="list-style-type: lower-alpha;"><li value="1">Enter the following command to elevate to the support user, and then enter the support user's password when prompted.
<pre class="Code">solace-backup# shell redundantLunMigration
login: support
Password:</pre></li><li value="2">Enter the following command to elevate to the root user or a sysadmin user, and then enter the password for that user when prompted:
<pre class="Code" xml:space="preserve">[support@solace-backup ~]$ su -
Password:</pre></li><li value="3">Check that both the original and new LUNs are visible.
            
                <pre class="Code" xml:space="preserve">[root@solace-backup ~]# multipath -ll
3600601604d301c008e291bb6a6d6e811 dm-0 DGC     ,RAID 0 size=300G features='1 retain_attached_hw_handler' hwhandler='1

. . .

360014057d24f4b77681435faf684d587 dm-3 LIO-ORG ,sdc1-4 size=800G features='1 queue_if_no_path' hwhandler='0' wp=rw

. . .</pre></li><li value="4">Rescan the SCSI bus to remove the original LUN.
          <pre class="Code" xml:space="preserve">[root@solace-backup ~]# rescan-scsi-bus.sh -r</pre></li><li value="5">Check that the original LUN is removed.
          <pre class="Code" xml:space="preserve">[root@solace-backup ~]# multipath -ll
360014057d24f4b77681435faf684d587 dm-3 LIO-ORG ,sdc1-4 size=800G features='1 queue_if_no_path' hwhandler='0' wp=rw</pre></li><li value="6">Return to the CLI:<pre class="Code" xml:space="preserve">[root@solace-backup ~]# exit
[support@solace-backup ~]$ exit</pre></li></ol></li>
                              </ol>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
