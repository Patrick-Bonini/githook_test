<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Message Spooling</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" data-mc-stylesheet-type="table"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a xmlns="" name="aanchor55"/><MadCap:concept term="Cloud;Appliance;Software"/>Message Spooling</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When an  event broker  receives a Guaranteed message, it processes the message to determine if there are any registered topic subscriptions or queues that match the topic the message was published to. If there is a topic subscription match or a matching queue on the event broker, the message and all the matches are spooled, and then the event broker acknowledges receipt of the message. After acknowledging the message, the event broker attempts to deliver it to all the matching clients and event brokers. As each client and event broker acknowledges receipt of the message, the associated match is deleted from the match list of the message. Once there are no matches left associated with a message, the message itself is deleted from the spool. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">If one or more of the clients are offline or have fallen behind, the message is held in persistent storage until it can be delivered. If there are too many messages to hold in memory, messages are written to the disk in large blocks. This means only messages for slow or offline clients need to be written to the disk, and they can be written in an efficient manner. If all of the clients acknowledge the message quickly enough, the message doesn't need to be written to disk.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">A message may not be spooled because of resource or operating limitations. The event broker performs a variety of checks before a message is spooled. These include:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>Would spooling the message exceed the event broker-wide message spool quota?</li>
                                <li>Would spooling the message exceed the Message VPN&#x2019;s message spool quota?</li>
                                <li>Would spooling the message exceed the endpoint&#x2019;s message spool quota?</li>
                                <li>Would spooling the message&#xA0;exceed the endpoint&#x2019;s maximum permitted message size?</li>
                                <li>Would the message exceed the endpoint&#x2019;s maximum message size?</li>
                                <li>Is the destination endpoint shutdown?</li>
                                <li>If the message is a low-priority message, would spooling the message exceed the endpoint&#x2019;s reject low&#x2011;priority message limit?</li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Depending on the reason for why the message was not spooled to the endpoint, either no acknowledgment is returned to the publisher, or a negative acknowledgment (that is, a &#x2018;nack&#x2019;) is returned, and it's up to the publisher to handle these possibilities. A statistic is then incremented on the event broker.</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <ul>
                                  <li>If a subscription is deleted when a message is spooled for that subscription, the message will still be delivered.</li>
                                  <li>If an endpoint is deleted (for example, through the <span class="mc-variable Product-Names.solace_cli variable">Solace CLI</span>) while a message is spooled to that endpoint, the message will not be delivered.</li>
                                </ul>
                              </div>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="spool_files"/>Message Spool Files</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><MadCap:conditionalText data-mc-conditions="SnippetConditions.snpt-bm-core">Event brokers</MadCap:conditionalText> spool <a href="../../Get-Started/message-delivery-modes.htm#Persiste" target="_blank" class="link-internal">Guaranteed messages</a> using spool files. Message spools store the spool files, and the message spool size you choose should support the number of messages the spool may need to store.  If the <MadCap:conditionalText data-mc-conditions="SnippetConditions.snpt-bm-core">event broker</MadCap:conditionalText>&#x2019;s spool files are all in use, it can't receive any more messages until some spooled messages are acknowledged, which could free some space in the message spool. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">If an <MadCap:conditionalText data-mc-conditions="SnippetConditions.snpt-bm-core">event broker</MadCap:conditionalText> reaches its maximum spool file usage, it returns negative acknowledgments (NACKs) to all publishing clients. You can configure thresholds to generate events when the message spool usage gets too high.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" data-mc-conditions="SAP.SapHideFromOutput"> For more information, see <a href="../../Cloud/Configure-Message-Spools.htm" class="MCXref xref">Configuring Message Spool Sizes</a> for <span class="mc-variable Product-Names.cloud_product_short variable">PubSub+ Cloud</span> and <a href="../../Monitoring/Configuring-System-Event-Thresholds.htm#spool-file-thresholds" class="MCXref xref" data-mc-unresolved-link="import-link:managing_guaranteed_messaging_3523843102_60980">Spool Files Thresholds</a> for <span class="mc-variable Product-Names.broker_sw_short variable">software event broker</span>s and <span class="mc-variable Product-Names.broker_appliance_short variable">appliance</span>s.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="windowed_acks"/>Windowed Acknowledgment</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">A windowed acknowledgment mechanism is used at the transport level between the event broker and individual clients publishing and receiving Guaranteed messages.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">A windowed acknowledgment prevents the round-trip acknowledgment time from becoming the limiting factor for message throughput. It does this by allowing a configurable number of messages to be in transit between an event broker and a publishing or subscribing client before an acknowledgment is required. The window size can be configured through a Solace messaging API flow property. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><span class="mc-variable Variables.CompanyName variable">Solace</span> APIs also batch acknowledgments from the application to the event broker. The figure below shows a client application sending multiple acknowledgments for Guaranteed messages, which the API consolidates into a single acknowledgment on the wire that is returned to the event broker. The size of the batch is configured through an API flow property.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">With any windowed acknowledgment scheme there is the possibility of failure in the time between a message being received by the client, and the time at which the event broker receives the acknowledgment. A failure at this time requires all non-acknowledged messages in transit to be sent again. Thus, the number of messages redelivered increases and is directly proportional to the combination of window size and acknowledgment threshold.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="GraphicCaption" data-mc-conditions="SAP.SapHideFromOutput">Cumulative ACK and Acknowledgment Thresholds</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="text-align: left;" data-mc-conditions="SAP.SapHideFromOutput">
                                <img src="../../Resources/Images/Guaranteed-Msg/window_ack.png" style="margin-left: 5.99976px;margin-top: 5.99976px;margin-right: 5.999752px;margin-bottom: 6.000484px;" alt=""/>
                              </p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="de_but_unacked"/>Delivered-But-Unacknowledged Messages</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">There is a hard limit for the number of Guaranteed messages that can be delivered through a consumer flow to a bound client without that client returning an acknowledgment for those messages. On reaching this limit<MadCap:conditionalText data-mc-conditions="SAP.SAPTempHide"> (plus one window size of messages)</MadCap:conditionalText>, the event broker stops delivering messages to the client until the client acknowledges messages that have already been delivered.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note" data-mc-conditions="SAP.SAPTempHide">You can configure the maximum number of delivered&#x2011;but&#x2011;unacknowledged messages limit for a queue or topic endpoint provisioned on a Message VPN (refer to <a href="VPN-Level-Msg-Spool-Config.htm" class="MCXref xref" data-mc-unresolved-link="import-link:managing_guaranteed_messaging_3523843102_21102">Message VPN-Level Guaranteed Messaging Configuration</a>).</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">An event broker has a system-level limit for the maximum number delivered&#x2011;but&#x2011;unacknowledged messages for all clients at a given time. On reaching this maximum, no more messages are delivered to clients until some clients return acknowledgments back to the event broker, or they are disconnected. The maximum number delivered&#x2011;but&#x2011;unacknowledged messages supported is dependent on the event broker version. </p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">By default, an event is generated when the number of outstanding messages that have not been acknowledged by their receiving clients reaches 80 percent of the system maximum (the set value), and this is followed by a further event the number of client-unacknowledged messages returns below 60 percent of the system maximum (the clear value).<MadCap:conditionalText data-mc-conditions="SAP.SapHideFromOutput"> The thresholds for when these events are generated are configurable (refer to <a href="../../Monitoring/Configuring-System-Event-Thresholds.htm#montoring_and_management_1462237600_255180" class="MCXref xref" data-mc-unresolved-link="import-link:configuring_event_output_and_thresholds_3101754740_73930">Delivered Unacked Thresholds</a>).</MadCap:conditionalText></p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="Message_Expiry"/>Message Expiry</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To set a limit on the amount of time that published messages have to be consumed and acknowledged, you can assign Time&#x2011;to-Live (TTL) expiry values to them.</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>If your application is using the <span class="mc-variable Variables.CompanyName variable">Solace</span> messaging APIs or REST service to publish Guaranteed messages, you can set a Time&#x2011;to-Live (TTL) expiry value on each published Guaranteed message to indicate how long the message should be considered valid. A publisher TTL expiration starts when a message is published and counts down as the message passes through the network.</li>
                                <li>You can  configure a Max Time to Live (TTL) value for a durable endpoint so that received messages are provided with expiration value to limit how long they can remain on that durable endpoint when a Max TTL is used. The Max TTL only applies when a message is on the endpoint.</li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"> When TTL values are applied to messages in either or both of these ways, messages that are not consumed and acknowledged before their expiration times are reached are discarded or moved to a Dead Message Queue (DMQ) . If a message has both a publisher-assigned TTL and an endpoint-assigned Max TTL, the event broker will use the minimum of the two TTL values when the message is on the endpoint.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">If a Message VPN bridge is used so that published messages that match topic subscriptions can be delivered from a remote Message VPN on one event broker to a local Message VPN on another event broker, the amount of time the message spends on each event broker is counted. That is, the amount of time a message spends on the remote event broker is counted, and its remaining time to live is updated when it is sent to the local Message VPN. For example,  with a publisher-provided TTL of eight seconds, if a message spends two seconds on the first event broker, before it reaches the local Message VPN on the second event broker, it will have a TTL of six seconds.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Using TTLs to expire messages that have not been processed quickly can help prevent stale messages from being delivered to consumers. However, it should be noted that monitoring and processing messages using TTLs can affect the system-level limits for Guaranteed message delivery<MadCap:conditionalText data-mc-conditions="SAP.SAPTempHide"> (for more information, see <a href="G-Msg-Queueing-Limits.htm" class="MCXref xref">Guaranteed Message Queuing Limits</a>)</MadCap:conditionalText>.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule" data-mc-conditions="SAP.SapHideFromOutput"><a name="max-spool-usage"/>Maximum Spool Usage</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" data-mc-conditions="SAP.SapHideFromOutput">You can set a maximum value for the amount of spool disk space (<code>max-spool-usage</code>) that can be consumed by various objects on the event broker. The following tables list the default settings for this value and for the corresponding event thresholds.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="font-weight: bold;" data-mc-conditions="SAP.SapHideFromOutput">System-Level Settings</p>
                              <table xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0" data-mc-conditions="SAP.SapHideFromOutput">
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <thead>
                                  <tr class="TableStyle-Table_Num-Head-Header1">
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1" style="vertical-align: middle;padding-left: 4pt;padding-right: 6pt;padding-top: 6pt;padding-bottom: 6pt;border-right-style: solid;border-right-width: 2px;border-right-color: #e1e1e1;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #e1e1e1;">Broker Type</th>
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Max Spool Usage (MB)</th>
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Set Threshold (%)</th>
                                    <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Clear Threshold (%)</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <p>Software Event Broker </p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <p>Default: 1,500</p>
                                      <p>Maximum: 6,000,000</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <p>80</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                      <p>60</p>
                                    </td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <p>Appliance (3230/3530)</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <p>Default: 60,000</p>
                                      <p>Maximum: 800,000</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
                                      <p>80</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
                                      <p>60</p>
                                    </td>
                                  </tr>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>Appliance (3260/3560)</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>Default: 60,000</p>
                                      <p>Maximum: 6,000,000</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>80</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
                                      <p>60</p>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="font-weight: bold;" data-mc-conditions="SAP.SapHideFromOutput">Message VPN Settings</p>
                              <table xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0" data-mc-conditions="SAP.SapHideFromOutput">
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <thead>
                                  <tr class="TableStyle-Table_Num-Head-Header1">
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1" style="vertical-align: middle;padding-left: 4pt;padding-right: 6pt;padding-top: 6pt;padding-bottom: 6pt;border-right-style: solid;border-right-width: 2px;border-right-color: #e1e1e1;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #e1e1e1;">Broker Type</th>
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Max Spool Usage (MB)</th>
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Set Threshold (%)</th>
                                    <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Clear Threshold (%)</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>All </p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>Default: 0</p>
                                      <p>Maximum:&#xA0;Same as the maximum for the System-level setting for <code>max-spool-usage</code></p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>80</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
                                      <p>60</p>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="font-weight: bold;" data-mc-conditions="SAP.SapHideFromOutput">Settings for Queues / Queue Templates / Topic Endpoints / Topic Endpoint Templates / Client-Provisioned Endpoints</p>
                              <table xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0" data-mc-conditions="SAP.SapHideFromOutput">
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <col class="TableStyle-Table_Num-Column-Column1"/>
                                <thead>
                                  <tr class="TableStyle-Table_Num-Head-Header1">
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1" style="vertical-align: middle;padding-left: 4pt;padding-right: 6pt;padding-top: 6pt;padding-bottom: 6pt;border-right-style: solid;border-right-width: 2px;border-right-color: #e1e1e1;border-bottom-style: solid;border-bottom-width: 1px;border-bottom-color: #e1e1e1;">Broker Type</th>
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Max Spool Usage (MB)</th>
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Set Threshold (%)</th>
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Clear Threshold (%)</th>
                                    <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Set Threshold (MB)</th>
                                    <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Clear Threshold (MB)</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <tr class="TableStyle-Table_Num-Body-Body1">
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>All</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>Default: 5000</p>
                                      <p>Maximum: Same as the maximum for the System-level setting for <code>max-spool-usage</code></p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>25</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>18</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
                                      <p>1250</p>
                                    </td>
                                    <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
                                      <p>900</p>
                                    </td>
                                  </tr>
                                </tbody>
                              </table>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" data-mc-conditions="SAP.SapHideFromOutput">See the following links for information on setting <code>max-spool-usage</code> values:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" data-mc-conditions="SAP.SapHideFromOutput">
                                <li>
                                  <a href="System-Level-Msg-Spool-Config.htm#Config-Max-Spool" class="link-internal">at the system level</a>
                                </li>
                                <li>
                                  <a href="Configuring-Queues.htm#Configur16" class="link-internal">for queues</a>
                                </li>
                                <li>
                                  <a href="Configuring-Endpoint-Templates.htm#max-spool-usage-queue-template" class="link-internal">for queue templates</a>
                                </li>
                                <li>
                                  <a href="Configuring-DTEs.htm#max-spool-usage" class="link-internal">for topic endpoints</a>
                                </li>
                                <li>
                                  <a href="Configuring-Endpoint-Templates.htm#max-spool-usage-topic-endpoint-template" class="link-internal">for topic endpoint templates</a>
                                </li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" data-mc-conditions="SAP.SapHideFromOutput">See the following links for information on setting the event thresholds for message spool usage:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" data-mc-conditions="SAP.SapHideFromOutput">
                                <li>
                                  <a href="../../Monitoring/Configuring-System-Event-Thresholds.htm#spool-usage-thresholds" class="link-internal">at the system level</a>
                                </li>
                                <li>
                                  <a href="../../Monitoring/Configuring-VPN-M-Spool-Event-Thresholds.htm#queue-spool-usage-threshold" class="link-internal">for queues</a>
                                </li>
                                <li>
                                  <a href="../../Monitoring/Configuring-VPN-M-Spool-Event-Thresholds.htm#queue-template-spool-usage-threshold" class="link-internal">for queue templates</a>
                                </li>
                                <li>
                                  <a href="../../Monitoring/Configuring-VPN-M-Spool-Event-Thresholds.htm#topic-endpoint-spool-usage-threshold" class="link-internal">for topic endpoints</a>
                                </li>
                                <li>
                                  <a href="../../Monitoring/Configuring-VPN-M-Spool-Event-Thresholds.htm#topic-endpoint-template-spool-usage-threshold" class="link-internal">for topic endpoint templates</a>
                                </li>
                                <li>
                                  <a href="../../Monitoring/Configuring-Client-Event-Thresholds.htm#montoring_and_management_1462237600_255777" class="link-internal">for client-provisioned endpoints</a>
                                </li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
