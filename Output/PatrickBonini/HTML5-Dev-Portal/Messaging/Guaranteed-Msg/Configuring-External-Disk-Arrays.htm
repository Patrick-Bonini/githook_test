<?xml version="1.0"?>
<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" class="_Skins_HTML5___Side_Navigation" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-has-content-body="True" data-mc-toc-path="[%=System.LinkedTitle%]|[%=System.LinkedTitle%]" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic;Default" data-mc-preload-images="false" data-mc-in-preview-mode="false">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="msapplication-config" content="../../Skins/Favicons/browserconfig.xml"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <meta charset="utf-8"/>
    <meta http-equiv="Cache-control" content="no-cache"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title>Configuring an External Disk Array for Guaranteed Messaging</title>
    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" /> -->
    <!--style to display feedback button correctly in IE-->
    <!-- Google Tag Manager -->
    <!-- End Google Tag Manager -->
    <!-- links to get the EDA styling to work -->
    <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Default/Stylesheets/Components/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/foundation.6.2.3.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Styles.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Tablet.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Mobile.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Skins/Fluid/Stylesheets/Print.css" rel="stylesheet" type="text/css" data-mc-generated="True"/>
    <link href="../../Resources/Stylesheets/MainStyles.min.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <style>@media screen and (min-width: 0\0)
{
	.feedback-button
	{
		margin-right: -40px;
		top: 50%;
		border-radius: 9px 9px 0px 0px;
	}

	#canvas
	{
		position: relative;
	}
}

@media print
{
	#plugin
	{
		overflow: visible !important;
	}
}

</style>
    <link href="../../Resources/Stylesheets/eda_styles.css" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,300" rel="stylesheet" type="text/css"/>
    <style>/*&lt;meta /&gt;*/

.button.print-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.previous-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.button.next-topic-button
{
	-pie-background: linear-gradient(#ffffff, transparent);
}

.needs-pie
{
	behavior: url('../../Resources/Scripts/PIE-no-motw.htc');
}

</style>
    <link rel="apple-touch-icon" sizes="180x180" href="../../Skins/Favicons/apple-touch-icon.png"/>
    <link rel="shortcut icon" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="96x96" href="../../Skins/Favicons/favicon-96x96.png"/>
    <link rel="icon" sizes="32x32" href="../../Skins/Favicons/favicon-32x32.png"/>
    <link rel="icon" sizes="16x16" href="../../Skins/Favicons/favicon-16x16.png"/>
    <script src="../../Resources/Scripts/jquery.min.js" type="text/javascript">
        </script>
    <script src="../../Resources/Scripts/purify.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/require.config.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/foundation.6.2.3_custom.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/plugins.min.js" type="text/javascript" defer="defer">
        </script>
    <script src="../../Resources/Scripts/MadCapAll.js" type="text/javascript" defer="defer">
        </script>
    <script src="https://cmp.osano.com/AzZrhlTmT5f216Foa/84ba7dc4-a4e5-4b02-b120-977eb6f052d4/osano.js">
        </script>
    <script type="text/javascript">/*<![CDATA[*/(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
			new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
			j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
			'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
			})(window,document,'script','dataLayer','GTM-KLSDFH');
		/*]]>*/</script>
    <script type="text/javascript" src="../../Skins/Default/Scripts/TopicToolBar.js">
        </script>
  </head>
  <!-- Top Orange and Darkgrey header-->
  <!-- Div for EDA banner -->
  <div class="eda_banner">
    <p>Register Now for EDA Summit 2024 - Virtual Event <a href="https://edasummit.com/" target="_blank">Register for Free</a></p>
  </div>
  <!-- end Div for EDA banner -->
  <div class="top-nav">
    <div class="main_list">
      <ul class="top-navlinks">
        <li>
          <a href="https://solace.com/support/" target="_blank">Support</a>
        </li>
        <li>
          <a href="https://solace.com/contact/" target="_blank">Contact Us</a>
        </li>
      </ul>
    </div>
    <div class="container-fluid">
      <div class="src-li">
        <div id="srchWrapTwo">
          <form class="search" action="#">
            <div class="search-bar search-bar-container needs-pie">
              <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
              <div class="search-filter-wrapper">
                <span class="invisible-label" id="search-filters-label">Filter: </span>
                <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                </div>
                <div class="search-filter-content" id="sf-content">
                  <ul>
                    <li>
                      <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                        <span id="filterSelectorLabel-00001">All Files</span>
                      </button>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="search-submit-wrapper" dir="ltr">
                <div class="search-submit" title="Search" role="button" tabindex="0">
                  <span class="invisible-label">Submit Search</span>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
      <span class="tool-tip" tooltip-position="left" tooltip="To search for CLI commands, events, or APIs, navigate to the related sections.">i</span>
      <!-- Sept. 28, 2022 - This is being moved to under div class= top-nav
			<div class="main_list">
				<ul class="top-navlinks">
					<li><a href="https://solace.com/support/" target="_blank">Support</a></li>
					<li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li>
				</ul>
			</div> -->
    </div>
    <!-- Sept. 27, 2022 - The commented out content below used to provide the products, company, etc., links in the top header, next to the search field. -->
    <!-- <div class="main_list"><ul class="top-navlinks"><li><a href="https://solace.com/products/" target="_blank">Products</a></li><li><a href="https://solace.com/company/" target="_blank">Company</a></li><li><a href="https://www.solace.dev/" target="_blank">Developers</a></li><li><a href="https://solace.com/support/" target="_blank">Support</a></li><li><a href="https://solace.com/contact/" target="_blank">Contact Us</a></li></ul></div> -->
  </div>
  <body>
    <div class="foundation-wrap off-canvas-wrapper">
      <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">
        <aside class="off-canvas position-right" role="navigation" id="offCanvas" data-off-canvas="" data-position="right" data-mc-ignore="true">
          <ul class="off-canvas-accordion vertical menu off-canvas-list" data-accordion-menu="" data-mc-back-link="Back" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="True" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True">
                    </ul>
        </aside>
        <div class="off-canvas-content inner-wrap" data-off-canvas-content="">
          <div data-sticky-container="" class="title-bar-container">
            <nav class="title-bar tab-bar sticky" role="banner" data-sticky="" data-options="marginTop:0" style="width:100%" data-sticky-on="only screen and (max-width: 1000px)" data-mc-ignore="true">
              <a class="skip-to-content fluid-skip showOnFocus" href="#">Skip To Main Content</a>
              <div class="middle title-bar-section outer-row clearfix">
                <div class="menu-icon-container relative clearfix">
                  <div class="central-account-wrapper">
                    <div class="central-dropdown">
                      <a class="central-account-drop">
                        <span class="central-account-image"/>
                        <span class="central-account-text">Account</span>
                      </a>
                      <div class="central-dropdown-content">
                        <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                        <hr class="central-separator"/>
                        <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                      </div>
                    </div>
                  </div>
                  <button class="menu-icon" aria-label="Show Navigation Panel" data-toggle="offCanvas">
                    <span/>
                  </button>
                </div>
              </div>
              <div class="title-bar-layout outer-row">
                <div class="logo-wrapper">
                  <a class="logo" href="../../index.html" alt="Logo"/>
                </div>
                <div class="navigation-wrapper nocontent">
                  <ul class="navigation clearfix" role="navigation" data-mc-css-tree-node-has-children="has-children" data-mc-css-sub-menu="sub-menu" data-mc-expand-event="mouseenter" data-mc-top-nav-menu="True" data-mc-max-depth="3" data-mc-include-icon="False" data-mc-include-indicator="False" data-mc-include-children="True" data-mc-include-siblings="True" data-mc-include-parent="True" data-mc-toc="True">
                    <li class="placeholder" style="visibility:hidden">
                      <a>placeholder</a>
                    </li>
                  </ul>
                </div>
                <div class="central-account-wrapper">
                  <div class="central-dropdown">
                    <a class="central-account-drop">
                      <span class="central-account-image"/>
                      <span class="central-account-text">Account</span>
                    </a>
                    <div class="central-dropdown-content">
                      <a class="MCCentralLink central-dropdown-content-settings">Settings</a>
                      <hr class="central-separator"/>
                      <a class="MCCentralLink central-dropdown-content-logout">Logout</a>
                    </div>
                  </div>
                </div>
                <div class="nav-search-wrapper">
                  <div class="nav-search row">
                    <form class="search" action="#">
                      <div class="search-bar search-bar-container needs-pie">
                        <input class="search-field needs-pie" type="search" aria-label="Search Field" placeholder="Search the docs"/>
                        <div class="search-filter-wrapper">
                          <span class="invisible-label" id="search-filters-label">Filter: </span>
                          <div class="search-filter" aria-haspopup="true" aria-controls="sf-content" aria-expanded="false" aria-label="Search Filter" title="All Files" role="button" tabindex="0">
                                                    </div>
                          <div class="search-filter-content" id="sf-content">
                            <ul>
                              <li>
                                <button class="mc-dropdown-item" aria-labelledby="search-filters-label filterSelectorLabel-00001">
                                  <span id="filterSelectorLabel-00001">All Files</span>
                                </button>
                              </li>
                            </ul>
                          </div>
                        </div>
                        <div class="search-submit-wrapper" dir="ltr">
                          <div class="search-submit" title="Search" role="button" tabindex="0">
                            <span class="invisible-label">Submit Search</span>
                          </div>
                        </div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          <div class="main-section">
            <div class="row outer-row sidenav-layout">
              <nav class="sidenav-wrapper">
                <div class="sidenav-container">
                  <ul class="off-canvas-accordion vertical menu sidenav" data-accordion-menu="" data-mc-css-tree-node-expanded="is-accordion-submenu-parent" data-mc-css-tree-node-collapsed="is-accordion-submenu-parent" data-mc-css-sub-menu="vertical menu accordion-menu is-accordion-submenu nested" data-mc-include-indicator="False" data-mc-include-icon="False" data-mc-include-parent-link="False" data-mc-include-back="False" data-mc-defer-expand-event="True" data-mc-expand-event="click.zf.accordionMenu" data-mc-toc="True" data-mc-side-nav-menu="True">
                                    </ul>
                </div>
              </nav>
              <div class="body-container">
                <div data-mc-content-body="True">
                  <div class="buttons popup-container clearfix topicToolbarProxy _Skins_TopicToolBar mc-component nocontent" style="mc-topic-toolbar-items: PreviousTopic Print NextTopic;">
                    <div class="button-group-container-left">
                      <button class="button needs-pie print-button" title="Print">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Print">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie previous-topic-button" title="Navigate previous topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate previous">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                      <button class="button needs-pie next-topic-button" title="Navigate next topic" disabled="true">
                        <div>
                          <div role="img" class="button-icon-wrapper" aria-label="Navigate next">
                            <div class="button-icon"> </div>
                          </div>
                        </div>
                      </button>
                    </div>
                  </div>
                  <!-- Google Tag Manager (noscript) -->
                  <noscript>
                    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KLSDFH" height="0" width="0" style="display:none;visibility:hidden"/>
                  </noscript>
                  <!-- End Google Tag Manager (noscript) -->
                  <div id="content">
                    <div id="contentBody">
                      <div class="row collapse">
                        <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="ContentRow">
                          <div>
                            <div xmlns="" class="nocontent">
                              <div class="MCBreadcrumbsBox_MCBreadcrumbsSelf_0 breadcrumbs" role="navigation" aria-label="Breadcrumbs" data-mc-breadcrumbs-divider=" / " data-mc-breadcrumbs-count="4" data-mc-toc="True">
                                <span class="MCBreadcrumbsPrefix"> </span>
                              </div>
                            </div>
                            <div xmlns="" role="main" id="mc-main-content">
                              <h1 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Configuring an External Disk Array for Guaranteed Messaging</h1>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">This section describes how to configure a customer-provided external disk storage array for use with either a standalone Solace PubSub+ appliance using Guaranteed Messaging or a high-availability (HA) redundant Solace <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> appliance pair using Guaranteed Messaging. For information on how to configure external block devices for use with Solace PubSub+ software event brokers, refer to <a href="../../Software-Broker/Configuring-Storage.htm" class="MCXref xref">Managing Software Event Broker Storage</a>.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">A customer supplied external disk storage array is required to use Guaranteed Messaging with standalone or redundant pairs of Solace PubSub+ appliances. An appliance must also have a physical ADB and a physical HBA installed.</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>
                                  <a href="#managing_guaranteed_messaging_1810020758_618949" class="MCXref xref">Array Requirements</a>
                                </li>
                                <li>
                                  <a href="#managing_guaranteed_messaging_1810020758_631824" class="MCXref xref">Step 1: Register the  Appliance HBA with the External Array</a>
                                </li>
                                <li>
                                  <a href="#managing_guaranteed_messaging_1810020758_631806" class="MCXref xref">Step 2: Provision a File System on the LUN</a>
                                </li>
                                <li>
                                  <a href="#managing_guaranteed_messaging_1810020758_464417" class="MCXref xref">Step 3: Configure the  Message Spool to Use the External Disk</a>
                                </li>
                                <li>
                                  <a href="#managing_guaranteed_messaging_1810020758_464478" class="MCXref xref">Step 4: Verify the Guaranteed Message Spool Configuration</a>
                                </li>
                              </ul>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <ul>
                                  <li>The configuration and provisioning of the external disk storage array itself is beyond the scope of this document as it depends on the disk manufacturer chosen for use. Therefore, proper configuration of an external disk storage array is the responsibility of the customer and is not described in this section. If required, <a href="../../get-support.htm" class="link-internal">contact Solace</a> for assistance.</li>
                                  <li>If you are using Guaranteed Messaging with an HA pair of redundant Solace PubSub+ appliances, the configuration procedures in <a href="../../Features/HA-Redundancy/Managing-Appliance-Redundancy.htm" class="MCXref xref">HA Configuration for Appliances</a> must be successfully completed first before performing the procedures in this section.</li>
                                </ul>
                              </div>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="managing_guaranteed_messaging_1810020758_618949"/>Array Requirements</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The appliance HBA must be connected to the external disk storage array. Each HBA should have a fibre channel link path to two disk array controllers.
        <p class="Note">The two optical fiber channel ports on the HBA allow for redundant fibre channel cable links to the external disk storage array through standard multi&#x2011;mode optical fiber cable equipped with LC-type optical connectors.</p></p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">When using a pair of PubSub+ appliances using Active/Standby redundancy, the ADB links must be directly connected together.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For an external disk storage array to be used with an ADB and its associated HBA, the external disk storage array must have:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>RAID 1+0, four disks minimum.</li>
                                <li>Up to a 15 tebibyte (TiB) LUN.</li>
                                <li>Access allowed to HBA ports. When using HA redundancy, provide access to the ports of both HBAs on the redundant appliance pair.</li>
                                <li>Fiber channel connectivity.</li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a href="../../get-support.htm" class="link-internal">Contact Solace</a> for:</p>
                              <ul xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li>Acquiring root access to the Solace PubSub+ appliances</li>
                                <li>Information on use of other disk storage array models or products with the ADB and HBA</li>
                              </ul>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">As of Solace PubSub+ appliance release 8.2.0, operations below that state they can only be performed by root, can now also be performed by a Sysadmin User. For information on configuring Sysadmin Users, refer to <a href="../../Admin/Configuring-Multiple-Shell-Users.htm" class="MCXref xref">Configuring Multiple Linux Shell Users</a>.</p>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="managing_guaranteed_messaging_1810020758_631824"/>Step 1: Register the  Appliance HBA with the External Array</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">The WWNs of the HBA used by a Solace PubSub+ appliance can found on the Packing List provided upon delivery of the appliance. They can also be provided by <a href="../../get-support.htm" class="link-internal">Solace</a>  upon request.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">You can use the <code>show hardware detail</code> User EXEC CLI command to display the HBA port and node names for an appliance. For example:</p>
                              <pre xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Code">solace&gt; show hardware detail

. . .    

Slot 1/3: Host Bus Adapter Blade    
  Product #: HBA-0204FC-02-A    
  Serial #: M54687    
  Model Name: QLE2462    
  Model Description: PCI-Express to 4Gb FC, Dual Channel    
  Driver Version: 8.01.07-k1    
            
  Fibre-Channel 1    
    State: Link Up - F_Port (fabric via point-to-point)    
    Speed: 2 Gbit    
    Port Id: 0x031f00    
 <b>Port Name: 0x210000e08b931f25 </b>    
    Port Type: NPort (fabric via point-to-point)    
 <b>Node Name: 0x200000e08b931f25</b></pre>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="managing_guaranteed_messaging_1810020758_631806"/>Step 2: Provision a File System on the LUN</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure a file system, it is recommended that you run the Solace-provided script, <code>provision-lun-for-ad</code>, to automatically configure and provision the LUN on a standalone appliance. If you are using a pair of HA redundant appliances, only run the script on one of the appliances&#x2014;the Config-Sync facility will apply the configured file system to its mate appliance. (Refer to <a href="#managing_guaranteed_messaging_1810020758_728379" class="MCXref xref">Provisioning a File System on the LUN with the Automated Script</a>.)</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">Alternatively, if the script fails to successfully provision a file system, you can use the GDisk utility to manually configure and provision the partitions on the LUN. (Refer to <a href="#managing_guaranteed_messaging_1810020758_730622" class="MCXref xref">Provisioning a File System on the LUN with GDisk</a>.)</p>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <ul>
                                  <li>Both the procedure to configure a file system with the Solace-provided script and the procedure to configure a file system through the GDisk utility are only to be used for a LUN that does not have any existing, provisioned partitions.</li>
                                  <li>Solace PubSub+ appliances running software version 7.1 or greater support both ext3 and ext4 file systems. However, any new partitions that are created should use an ext4 file system.</li>
                                </ul>
                              </div>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="managing_guaranteed_messaging_1810020758_728379"/>Provisioning a File System on the LUN with the Automated Script</h3>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Enter the <code>show hardware detail</code> User EXEC CLI command on the appliance to confirm the new external disk LUN is available according to the new WWN.
            <p><u>Example</u>:</p><pre class="Code">solace&gt; show hardware detail

. . .

Slot 1/2: Host Bus Adapter Blade
  Product #: HBA-0204FC-01-A
  Serial #: H64544
  Model Name: QLA2462
  Model Description: PCI-X 2.0 to 4Gb FC, Dual Channel
  Driver Version: 8.01.07-k1
  
. . .

  Attached devices
     LUN 0
        State:          Ready
        Size:           80G
        WWN:            60:06:01:60:e8:60:1c:00:c6:3e:7b:a8:ad:53:e3:11
     LUN 1
        State:          Ready
        Size:           800G
        WWN:            60:06:01:60:e8:60:1c:00:2c:42:35:c1:ad:53:e3:11</pre></li>
                                <li value="2"> If there are changes to an existing LUN configuration, or the addition of a new LUN, it can be registered on a <span class="mc-variable Product-Names.pubsub_brand_only variable">PubSub+</span> appliance by executing (in this order):<ul><li>The <code>rescan-scsi-bus.sh --nosynch -f -r -m</code> script</li><li>The <code>rescan-scsi-bus.sh -a</code> script </li><li>The <code>rescan-scsi-bus.sh -i</code> if the previous two scripts fail (the <code>-i</code> option causes the link to all external disks to go down, and will affect <span class="mc-variable Product-Names.pubsub_cache variable">PubSub+ Cache</span> if it is running on this node)</li></ul><p>&#xA0;</p><p>If the new LUN doesn't appear: </p><ul><li>You can confirm that the SAN is properly configured</li><li>You can confirm that the HBA port is registered for the new LUN,</li><li>Re-issue <code>rescan-scsi-bus.sh --nosync -a</code>, <code>rescan-scsi-bus.sh --nosync -f -r -m</code>, and <code>rescan-scsi-bus.sh -a</code> scripts. </li><li>If the new LUN still doesn't appear, then a reload is required.</li></ul><div class="Caution"><p>Restarting a Solace PubSub+appliance will cause a disruption to service.</p></div></li>
                                <li value="3">Run the Solace-provided script.<p>If you do not have root access, with the "support" user account, you can use "sudo" from the Linux shell to configure and provision the LUN with the Solace&#x2011;provided <code>provision-lun-for-ad</code> script.</p><p><u>Example</u>:</p><pre class="Code">[support@solace ~]# sudo provision-lun-for-ad --lun=3600140590e5103e56f3436d97032e61e
Script  : /usr/sw/loads/soltr_7.1.0.1523/supported/provision-lun-for-ad
User    : root@solace  Jan 20 15 15:21:06
Logfile : /usr/sw/jail/diags/support.provision-lun-for-ad.2015-01-20,15.21.06
 
List of visible LUNs:
36001405f6bd73860d76412eab3a4a006
3600140590e5103e56f3436d97032e61e
 
mke4fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10491008 inodes, 1953234688 blocks
97661734 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=0
59608 block groups
32768 blocks per group, 32768 fragments per group
176 inodes per group
Superblock backups stored on blocks: 
          32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
          4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, 
          102400000, 214990848, 512000000, 550731776, 644972544, 1934917632
 
Writing inode tables: done
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done
 
This filesystem will be automatically checked every 28 mounts or 180 days, whichever comes first. Use tune4fs -c or -i to override.
mke4fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10491008 inodes, 1953234683 blocks
97661734 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=0
59608 block groups
32768 blocks per group, 32768 fragments per group
176 inodes per group
Superblock backups stored on blocks: 
         32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
         4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968,
         102400000, 214990848, 512000000, 550731776, 644972544, 1934917632
 
Writing inode tables: done
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done
 
This filesystem will be automatically checked every 20 mounts or 180 days, whichever comes first. Use tune4fs -c or -i to override.
LUN 3600140590e5103e56f3436d97032e61e has been provisioned for Assured Delivery.</pre><p class="Note">The <code>--lun</code> flag takes in the WWN of the LUN you are provisioning.</p></li>
                                <li value="4">If you are using a redundant pair of Solace PubSub+ appliances, restart the appliance on which the step 3 was <u>not</u> performed.</li>
                              </ol>
                              <h3 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><a name="managing_guaranteed_messaging_1810020758_730622"/>Provisioning a File System on the LUN with GDisk</h3>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To configure and provision the LUN using the GDisk utility, root access to the Solace PubSub+ appliance is required.</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To manually configure and provision a file system on a LUN, perform the following steps on a standalone appliance, or on one appliance in an HA redundant pair:</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Calculate 2048 sector partition boundaries. </li>
                                <p>To calculate sector boundaries for the two partitions, first determine how many sectors are on the disk. Use the <code>gdisk</code> command on the <code>/dev/mapper</code> entry for the LUN to determine the number of sectors. Use the "p" command to print the details.</p>
                                <p> In the example below, the <code>3600140590e5103e56f3436d97032e61e</code> is referring to the WWN of the LUN.</p>
                                <p><u>Example</u>:</p>
                                <pre class="Code">[root@solace mapper]# gdisk /dev/mapper/3600140590e5103e56f3436d97032e61e
GPT fdisk (gdisk) version 0.8.9
 
Partition table scan:
  MBR: protective
  BSD: not present
  APM: not present
  GPT: present
 
Found valid GPT with protective MBR; using GPT.
 
Command (? for help): p
Disk 3600140590e5103e56f3436d97032e61e: 31251759104 sectors, 14.6 TiB
Logical sector size: 512 bytes
Disk identifier (GUID): D96B0E77-9E54-41D2-88F3-7A8C89A7DDB6
Partition table holds up to 128 entries
First usable sector is 34, last usable sector is 31251759070
Partitions will be aligned on 2048-sector boundaries
Total free space is 31251759037 sectors (14.6 TiB)
 
. . .</pre>
                                <p>Once you have determined how many sectors are on the disk (the LUN in the above example has 31251759037 sectors), you can then determine the size of each partition as a multiple of 2048 sectors:</p>
                                <table style="border-collapse: separate;border-left-style: solid;border-left-width: 0px;border-left-color: #000000;border-right-style: solid;border-right-width: 0px;border-right-color: #000000;border-top-style: solid;border-top-width: 0px;border-top-color: #000000;border-bottom-style: solid;border-bottom-width: 0px;border-bottom-color: #000000;margin-left: 0;margin-right: auto;">
                                  <col/>
                                  <col/>
                                  <tbody>
                                    <tr>
                                      <td style="font-size: 0.92rem;">total sectors minus 2048</td>
                                      <td style="font-size: 0.92rem;"> 31251759037 &#x2013; 2048 = 31251756989</td>
                                    </tr>
                                    <tr>
                                      <td style="font-size: 0.92rem;">divide by 2</td>
                                      <td style="font-size: 0.92rem;"> 31251756989 / 2 = 15625878494.5</td>
                                    </tr>
                                    <tr>
                                      <td style="font-size: 0.92rem;">round down to nearest integer</td>
                                      <td style="font-size: 0.92rem;">15625878494</td>
                                    </tr>
                                    <tr>
                                      <td style="font-size: 0.92rem;">divide by 2048 </td>
                                      <td style="font-size: 0.92rem;">15625878494 / 2048 = 7629823.4833</td>
                                    </tr>
                                    <tr>
                                      <td style="font-size: 0.92rem;">round down to nearest integer</td>
                                      <td style="font-size: 0.92rem;"> 7629823</td>
                                    </tr>
                                    <tr>
                                      <td style="font-size: 0.92rem;">multiply by 2048</td>
                                      <td style="font-size: 0.92rem;"> 7629823 * 2048 = 15625877504</td>
                                    </tr>
                                  </tbody>
                                </table>
                                <p>When you know the size of each partition in the sectors (15625877504) and that the first sector of the first partition is always 2048, you can then determine the start and end sectors for each partition:</p>
                                <table style="border-collapse: separate;margin-left: 0;margin-right: auto;">
                                  <col/>
                                  <col/>
                                  <tbody>
                                    <tr>
                                      <td colspan="2" style="font-size: 0.92rem;">1st start sector:  2048</td>
                                    </tr>
                                    <tr>
                                      <td colspan="2" style="font-size: 0.92rem;">1st end sector:   partition size + 2047 = 15625879551</td>
                                    </tr>
                                    <tr>
                                      <td colspan="2" style="font-size: 0.92rem;">2nd start sector: 15625879551 + 1 = 15625879552</td>
                                    </tr>
                                    <tr>
                                      <td colspan="2" style="font-size: 0.92rem;">2nd end sector:  15625879551 + 15625877504 = 31251757055</td>
                                    </tr>
                                  </tbody>
                                </table>
                                <p>Using the above numbers, you can then create partitions using the GDisk utility. </p>
                                <li value="2">On the active and ready disk array, run the GDisk utility to create two partitions aligned to a 2048-sector partition boundary on the device.</li>
                                <ul>
                                  <li>For a standalone appliance, the second partition that is created can be smaller (as small as 100MB). </li>
                                  <li>For a redundant pair of appliances, two equally sized partitions are required. The partitions can be up to 7.5 TiB each (for a total of 15 TiB). However, the partition sizes required depend on the maximum disk space configured for the message spool using the <code>max-spool-usage</code> Message Spool VPN CONFIG command. When using a redundant pair of appliances, each partition should be <span class="mc-variable Broker-Limitations.redundant-pair-partition-size variable">1.1 times the max-spool usage</span> .</li>
                                </ul>
                                <ol style="list-style-type: lower-alpha;">
                                  <li value="1">Enter the following at the prompt: </li>
                                  <pre class="Code">gdisk /dev/mapper/&lt;device&gt;</pre>
                                  <p>Example:</p>
                                  <pre class="Code">[root@solace ~]# gdisk /dev/mapper/3600140590e5103e56f3436d97032e61e</pre>
                                  <li value="2">To create new partition tables, enter the "n" command, and then "1" for first partition. </li>
                                  <li value="3">To align the partition tables on 2048 sector boundaries, do the following:</li>
                                  <ul>
                                    <li>For the first partition, enter "2048" at the "First sector..." prompt, then at the "Last sector..." prompt, enter the value you calculated in step 1 for the end of the first sector.</li>
                                    <li>For the second partition, enter the value you calculated in step 1 for the start of the sector for that partition, then at the "Last sector..." prompt, enter the value you calculated in step 1 for the end of the sector for the second partition.</li>
                                  </ul>
                                  <li value="4">Enter the "w" command to save the resulting partition table.</li>
                                </ol>
                                <p>In the example below, two equal-sized partitions are created for a redundant pair of appliances:</p>
                                <pre class="Code">[root@solace mapper]# gdisk /dev/mapper/3600140590e5103e56f3436d97032e61e
GPT fdisk (gdisk) version 0.8.9
 
Partition table scan:
  MBR: protective
  BSD: not present
  APM: not present
  GPT: present
 
Found valid GPT with protective MBR; using GPT.
 
Command (? for help): p
Disk 3600140590e5103e56f3436d97032e61e: 31251759104 sectors, 14.6 TiB
Logical sector size: 512 bytes
Disk identifier (GUID): D96B0E77-9E54-41D2-88F3-7A8C89A7DDB6
Partition table holds up to 128 entries
First usable sector is 34, last usable sector is 31251759070
Partitions will be aligned on 2048-sector boundaries
Total free space is 31251759037 sectors (14.6 TiB)
 
Number  Start (sector)  End (sector)  Size  Code  Name
 
Command (? for help): n
Partition number (1-128, default 1): 1
First sector (34-31251759070, default = 2048) or {+-}size{KMGTP}: 2048
Last sector (2048-31251759070, default = 31251759070) or {+-}size{KMGTP}: 15625879551
Current type is 'Linux filesystem'
Hex code or GUID (L to show codes, Enter = 8300): 8300
Changed type of partition to 'Linux filesystem'
 
Command (? for help): n
Partition number (2-128, default 2): 2
First sector (34-31251759070, default = 15625879552) or {+-}size{KMGTP}: 15625879552
Last sector (15625879552-31251759070, default = 31251759070) or {+-}size{KMGTP}: 31251757055
Current type is 'Linux filesystem'
Hex code or GUID (L to show codes, Enter = 8300): 8300
Changed type of partition to 'Linux filesystem'
 
Command (? for help): p
Disk 3600140590e5103e56f3436d97032e61e: 31251759104 sectors, 14.6 TiB
Logical sector size: 512 bytes
Disk identifier (GUID): D96B0E77-9E54-41D2-88F3-7A8C89A7DDB6
Partition table holds up to 128 entries
First usable sector is 34, last usable sector is 31251759070
Partitions will be aligned on 2048-sector boundaries
Total free space is 4028 sectors (2.0 MiB)
 
Number   Start (sector)     End (sector)     Size    Code  Name
     1             2048      15625879551  7.3 TiB    8300  Linux filesystem
     2      15625879552      31251757055  7.3 TiB    8300  Linux filesystem
 
Command (? for help): w
 
Final checks complete. About to write GPT data. THIS WILL OVERWRITE EXISTING
PARTITIONS!!
 
Do you want to proceed? (Y/N): y
OK; writing new GUID partition table (GPT) to 3600140590e5103e56f3436d97032e61e.
Warning: The kernel is still using the old partition table.
The new table will be used at the next reboot.
The operation has completed successfully.</pre>
                                <li value="3">After the partitions are created, add them to the device mapping. To do this, determine device mapping for the external disk:</li>
                                <pre class="Code">[root@solace ~]# ls -l /dev/mapper
total 0
brw      1 root root 252,   0 Jan 20 14:07 3600140590e5103e56f3436d97032e61e
crw-rw   1 root root  10, 236 Jan 20 06:05 control</pre>
                                <li value="4">Reread the partition table and create device maps for the newly created partitions:</li>
                                <pre class="Code">[[root@solace ~]# kpartx -a -p p /dev/mapper/3600140590e5103e56f3436d97032e61e</pre>
                                <p>The two partitions are listed in <code>/dev/mapper</code> as <code>p1</code> and <code>p2</code>:</p>
                                <pre class="Code">[[root@solace ~]# ls -l /dev/mapper/
total 0
brw-------  1 root root 252,   0 Jan 20 14:07 3600140590e5103e56f3436d97032e61e
brw-------  1 root root 252,   1 Jan 20 11:05 3600140590e5103e56f3436d97032e61ep1
brw-------  1 root root 252,   2 Jan 20 11:05 3600140590e5103e56f3436d97032e61ep2
crw-rw----  1 root root  10, 236 Jan 20 06:05 control</pre>
                                <li value="5">Create an ext4 file system on each partition using the <code>mkfs.ext4</code> command with each partition in the <code>/dev/mapper</code> listing:</li>
                                <p class="Note">If the disk is greater than 200 GB, you should use the -N 10000000 option to limit the number of inodes and speed up formatting.</p>
                                <pre class="Code">[[root@solace ~]# mkfs.ext4 -N 10000000 /dev/mapper/3600140590e5103e56f3436d97032e61ep1
mke4fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10491008 inodes, 1953234688 blocks
97661734 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=0
59608 block groups
32768 blocks per group, 32768 fragments per group
176 inodes per group
Superblock backups stored on blocks: 
    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
    4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, 
    102400000, 214990848, 512000000, 550731776, 644972544, 1934917632
 
Writing inode tables: done                            
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done
 
This filesystem will be automatically checked every 28 mounts or
180 days, whichever comes first. Use tune4fs -c or -i to override.
</pre>
                                <pre class="Code">[root@solace ~]# mkfs.ext4 -N 10000000 /dev/mapper/3600140590e5103e56f3436d97032e61ep2
mke4fs 1.41.12 (17-May-2010)
Filesystem label=
OS type: Linux
Block size=4096 (log=2)
Fragment size=4096 (log=2)
Stride=0 blocks, Stripe width=0 blocks
10491008 inodes, 1953234688 blocks
97661734 blocks (5.00%) reserved for the super user
First data block=0
Maximum filesystem blocks=0
59608 block groups
32768 blocks per group, 32768 fragments per group
176 inodes per group
Superblock backups stored on blocks: 
    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
    4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, 
    102400000, 214990848, 512000000, 550731776, 644972544, 1934917632
 
Writing inode tables: done                            
Creating journal (32768 blocks): done
Writing superblocks and filesystem accounting information: done
 
This filesystem will be automatically checked every 35 mounts or 180 days, whichever comes first. Use tune4fs -c or -i to override.</pre>
                                <li value="6">If you are using a redundant pair of appliances, restart the appliance on which the above procedures were <span style="text-decoration: underline;">not</span> made.</li>
                              </ol>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="managing_guaranteed_messaging_1810020758_464417"/>Step 3: Configure the  Message Spool to Use the External Disk</h2>
                              <div xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">
                                <p>Config-Sync will not automatically synchronize this object or property. Therefore, if the event broker is being used in a high-availability (HA) redundant configuration or in a replicated site, you must manually configure this object/property on each mate event broker or replicated Message VPN.</p>
                                <p>To determine whether an object/property is synchronized by Config-Sync, look up the command used to configure the object/property in the <a href="../../Admin/Solace-CLI/Command-Line-Reference.htm" class="MCXref xref">CLI Command Reference</a> or type the command in the <span class="mc-variable Product-Names.solace_cli variable">Solace CLI</span>, ending the command with "<code>?</code>". The Help lists whether the object/property is synchronized.</p>
                              </div>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To enable Guaranteed message spooling using the external disk storage array for a standalone appliance, or the primary appliance in a redundant pair, perform the following steps:</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Enter the  User EXEC CLI command to display which external disks are available:</li>
                                <pre class="Code">solace1&gt; show hardware detail
			
. . .
				
Slot 1/2: Host Bus Adapter Blade
  Product #: HBA-0204FC-01-A
  Serial #: H64544
  Model Name: QLA2462
  Model Description: PCI-X 2.0 to 4Gb FC, Dual Channel
  Driver Version: 8.01.07-k1
				
. . .
				
  Attached devices
   LUN 0
      State: Ready
      Size: 80 GB 
      <b>WWN</b>: 60:06:01:60:e8:60:1c:00:ec:7b:6d:3f:5c:db:de:11</pre>
                                <li value="2">Configure the Guaranteed message spool to use the external disk, according to its WWN:</li>
                                <pre class="Code">solace1(configure/hardware/message-spool)# disk-array wwn &lt;wwn #&gt;</pre>
                                <p><u>Where</u>:</p>
                                <p><code>&lt;wwn #&gt;</code> is the WWN displayed by the<code> show hardware detail</code> command output above. </p>
                                <li value="3">Enable the Guaranteed message spool on the primary appliance:</li>
                                <pre class="Code">solace1(configure/hardware/message-spool)# no shutdown primary</pre>
                              </ol>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">To enable Guaranteed message spooling using the external disk storage array for the backup appliance in a redundant pair, perform the following steps:</p>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="Note">For information on configuring redundant appliances, refer to <a href="../../Features/HA-Redundancy/Managing-Appliance-Redundancy.htm" class="MCXref xref">HA Configuration for Appliances</a>.</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Enter the following CLI command to display which external disks are available:
<pre class="Code">solace2&gt; show hardware detail

. . .

Slot 1/2: Host Bus Adapter Blade
  Product #: HBA-0204FC-01-A
  Serial #: H64544
  Model Name: QLA2462
  Model Description: PCI-X 2.0 to 4Gb FC, Dual Channel
  Driver Version: 8.01.07-k1
  
  . . .
  
  Attached devices
  LUN 0
  State: Ready
  Size: 80 GB 
  <b>WWN</b>: 60:06:01:60:e8:60:1c:00:ec:7b:6d:3f:5c:db:de:11</pre></li>
                                <li value="2">Configure the Guaranteed message spool to use the external disk, according to its WWN:
            <pre class="Code">solace2(configure)# hardware message-spool<br/>solace2(configure/hardware/message-spool)# disk-array wwn &lt;wwn #&gt;</pre><p><u>Where</u>:</p><p><code>&lt;wwn #&gt;</code> is the WWN displayed by the<b> show hardware detail</b> command output above.</p></li>
                                <li value="3">Enable the Guaranteed message spool on the backup appliance:
            <pre class="Code">solace2(configure/hardware/message-spool)# no shutdown backup</pre></li>
                              </ol>
                              <h2 xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule"><a name="managing_guaranteed_messaging_1810020758_464478"/>Step 4: Verify the Guaranteed Message Spool Configuration</h2>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For a standalone appliance, perform the following steps:</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Enter the <code>show message-spool</code> User EXEC CLI command to verify the message spool is correctly configured. The appliance should show a configuration status of "Enabled (Primary)", an operational status of "AD-Active", and a datapath status of "Up". </li>
                                <p><u>Example</u>:</p>
                                <pre class="Code">solace1&gt; show message-spool
  <span style="color: #ff0000;">
Config Status:                            Enabled (Primary)</span>
            
Maximum Spool Usage:                      60000 MB
Spool While Charging:                     No
Spool Without Flash Card:                 No
Using Internal Disk:                      No
Disk Array WWN:             60:06:01:60:e8:60:1c:00:ec:7b:6d:3f:5c:db:de:11
 <span style="color: #ff0000;">
Operational Status:                       AD-Active
Datapath Status:                          Up</span>
            
. . .
				
                                          ADB       Disk      Total
Current Persistent Store Usage (MB)    0.0000     0.0000     0.0000
Number of Messages Currently Spooled        0          0          0</pre>
                                <li value="2">If either output does not show the proper status, enter the <code>show message-spool detail</code> User EXEC CLI command to view system details as an aid in troubleshooting.</li>
                              </ol>
                              <p xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">For a pair of redundant appliances, perform the following steps:</p>
                              <ol xmlns="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
                                <li value="1">Enter the <code>show message-spool</code> User EXEC CLI command on the primary appliance to verify its message spool is correctly configured. It should show a configuration status of "Enabled (Primary)", an operational status of "AD&#x2011;Active", and a datapath status of "Up". </li>
                                <p><u>Example</u>:</p>
                                <pre class="Code">solace1&gt; show message-spool
  <span style="color: #ff0000;">
Config Status:                            Enabled (Primary)</span>
            
Maximum Spool Usage:                      60000 MB
Spool While Charging:                     No
Spool Without Flash Card:                 No
Using Internal Disk:                      No
Disk Array WWN: 60:06:01:60:e8:60:1c:00:ec:7b:6d:3f:5c:db:de:11
  <span style="color: #ff0000;">
Operational Status:                       AD-Active
Datapath Status:                          Up</span>
            
. . .
				
                                          ADB       Disk      Total
Current Persistent Store Usage (MB)    0.0000     0.0000     0.0000
Number of Messages Currently Spooled        0          0          0</pre>
                                <li value="2">Enter the <b>show message-spool</b> User EXEC CLI command on the backup appliance to verify its message spool is correctly configured. It should show a configuration status of "Enabled (Backup)", an operational status of "AD&#x2011;Standby", and a datapath status of "Down". </li>
                                <p><u>Example</u>:</p>
                                <pre class="Code">solace2&gt; show message-spool
  <span style="color: #ff0000;">
Config Status:                            Enabled (Backup)</span>
            
Maximum Spool Usage:                      60000 MB
Spool While Charging:                     No
Spool Without Flash Card:                 No
Using Internal Disk:                      No
Disk Array WWN: 60:06:01:60:e8:60:1c:00:ec:7b:6d:3f:5c:db:de:11
  <span style="color: #ff0000;">
Operational Status:                       AD-Standby
Datapath Status:                          Down</span>
            
. . .

                                          ADB    Disk   Total
Current Persistent Store Usage (MB)    0.0000  0.0000  0.0000
Number of Messages Currently Spooled        0       0       0</pre>
                                <li value="3">If either the primary or backup appliance do not show the proper status, enter the <code>show message-spool detail</code> User EXEC CLI command to view system details as an aid in troubleshooting.</li>
                                <li value="4">Once the message spools on the primary and backup appliance show the proper status, enter the <code>release-activity</code> Redundancy CONFIG CLI command on the primary appliance to surrender activity to the backup appliance and verify the backup appliance can take activity.</li>
                                <li value="5">Once it is confirmed that the backup appliance has taken activity, enter the <code>no release-activity</code> Redundancy CONFIG CLI command on the primary appliance to enable it to take activity again.</li>
                                <li value="6">If auto-revert is disabled, enter the <code>revert-activity</code> Redundancy ADMIN CLI command on the backup appliance to revert activity back to the primary appliance.</li>
                              </ol>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="no-print">
                      <div>
                        <a href="#" id="docsFeedbackTrigger" class="docs-issue-collector">Provide feedback</a>
                      </div>
                    </div>
                    <footer class="my-4 pt-4 text-center no-print">
                      <div class="footer-txt text-center no-print">
                        <ul class="list-inline ">
                          <li class="list-inline-item text-muted"><a href="../../Resources/Documentation-Set.htm" class="doc-set-footer-link MCXref xref xrefdoc-set-footer-link">Documentation Coverage</a>: <span class="mc-variable Variables.DocumentSetNumber variable">2024.09.16.0001</span></li>
                          <li class="list-inline-item text-muted">Last Updated: <span class="mc-variable Variables.MonthDayYear variable">September 16, 2024</span></li>
                          <li class="list-inline-item text-muted" style="font-size:13px;"> &#xA9;  <span class="mc-variable Variables.CompanyNameLegal variable">Solace Corporation</span></li>
                        </ul>
                      </div>
                      <div class="footer-icons">
                        <ul class="list-inline">
                          <li class="list-inline-item">
                            <a href="https://facebook.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/facebook_22x21.png" class="Hyperlinked" alt="Facebook" title="Solace Facebook Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.linkedin.com/company/20219" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/LinkedIn_22x21.png" class="Hyperlinked" alt="LinkedIn" title="Solace LinkedIn Page" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://twitter.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/Twitter_22x21.png" class="Hyperlinked" alt="Twitter" title="Solace Twitter Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.youtube.com/user/SolaceSystems" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/youtube_22x21.png" class="Hyperlinked" alt="YouTube" title="Solace YouTube Channel" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://www.instagram.com/solacedotcom/" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/instagram_22x21.png" class="Hyperlinked" alt="Instagram" title="Solace Instagram Feed" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                          <li class="list-inline-item">
                            <a href="https://medium.com/solacedotcom" target="_blank" class="social-media-icon">
                              <img src="../../Resources/Images/Social-Media/medium_22x21.png" class="Hyperlinked" alt="Medium" title="Solace Medium Blog" style="width: 22;height: 21;"/>
                            </a>
                          </li>
                        </ul>
                      </div>
                      <div class="footer_link_menu">
                        <ul class="link_list">
                          <li class="link_list_item">
                            <a href="https://solace.com/products/" target="_blank" class="footer-link">Products</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/company/" target="_blank" class="footer-link">Company</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://www.solace.dev/" target="_blank" class="footer-link">Developers</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/support/" target="_blank" class="footer-link">Support</a>
                          </li>
                          <li class="link_list_item">
                            <a href="https://solace.com/contact/" target="_blank" class="footer-link">Contact Us</a>
                          </li>
                        </ul>
                      </div>
                    </footer>
                  </div>
                  <!-- JIRA issue collector -->
                  <script>/*<![CDATA[*/// Requires jQuery!
jQuery.ajax({
    url: "https://sol-jira.atlassian.net/s/d41d8cd98f00b204e9800998ecf8427e-T/o2joag/b/24/e73395c53c3b10fde2303f4bf74ffbf6/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?locale=en-US&collectorId=076e0808",
    type: "get",
    cache: true,
    dataType: "script"
});
window.ATL_JQ_PAGE_PROPS = {
"triggerFunction": function(showCollectorDialog) {
//Requires that jQuery is available!
$("#docsFeedbackTrigger").click(function(e) {
e.preventDefault();
showCollectorDialog();
});
},
fieldValues: {
recordWebInfo: '1', // field Name
recordWebInfoConsent: ['1'] // field Id
}
};
/*]]>*/</script>
                  <script src="../../Resources/Scripts/thumbnail.js">
                                    </script>
                  <!-- Script for Launching offsite links in new tab -->
                  <script type="text/javascript">/*<![CDATA[*/$("a[href^='http']").attr("target","_blank");/*]]>*/</script>
                </div>
              </div>
            </div>
          </div>
          <a data-close="true"/>
        </div>
      </div>
    </div>
  </body>
</html>
