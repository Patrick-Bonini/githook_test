<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Monitoring TLS/SSL Configuration and Connections</h1>
    <p>There are a number of show commands that you can use to validate and monitor TLS/SSL configuration and connections on <MadCap:variable name="Variables.CompanyName"/> <MadCap:variable name="Product-Names.pubsub_brand_only"/> event brokers:</p>
    <ul>
      <li>
        <MadCap:xref href="#managing_tls_ssl_service_1762742558_293198">Show SSL Certificate Files</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#managing_tls_ssl_service_1762742558_309412">Show SSL Server Certificate</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#managing_tls_ssl_service_1762742558_369444">Show SSL Supported Cipher Suites</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#managing_tls_ssl_service_1762742558_369489">Show SSL Cipher Suite List</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#managing_tls_ssl_service_1762742558_309725">Show Stats SSL</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Show">Show Allowed TLS Versions</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Show2">Show TLS Session Timeout</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Show3">Show Allow SSL Downgrade Status</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="managing_tls_ssl_service_1762742558_293198"/>Show SSL Certificate Files</h2>
    <p>To view the certificate files that have been loaded to the <code>/usr/sw/jail/certs</code> directory in the event broker file system, and whether these files contain a private key and/or a certificate so that they can be installed as the event broker’s server certificate, enter the following command:</p>
    <p class="Code">solace&gt; show ssl certificate-files [filename &lt;filename&gt;] [detail]</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;filename&gt;</code> is the name of a certificate file in the <code>/usr/sw/jail/certs</code> directory. The wildcards “<code>*</code>” or “<code>?</code>” may be used.</p>
    <p><code>detail</code> specifies that detailed output be shown. In addition to the certificate file name and whether it contains a private key and/or a certificate, the detail output also displays the contents of each certificate file.</p>
    <p class="Note">The <code>detail</code> version of this command is not fully supported with SEMP over the message bus.</p>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <p class="Code">solace&gt; show ssl certificate-files<br/>Flags Legend:<br/>C: Certificate (Y=yes, N=no)<br/>K: Private Key (Y=yes, N=no)<br/>                                                 Contents<br/>Filename                                              C K<br/>------------------------------------------------ --------<br/>mycert.pem                                            Y Y<br/>depth3server-rsa.pem                                  Y Y<br/>depth4server-rsa.pem                                  Y Y<br/>expired_selfSigned.pem                                Y Y<br/>expired-rsa.pem                                       Y Y<br/>future-rsa.pem                                        Y Y<br/>noRootInChainDepth3server-rsa.pem                     Y Y<br/>noRootInChainDepth4server-rsa.pem                     Y Y<br/>selfSigned.pem                                        Y Y<br/>server1-rsa.pem                                       Y Y<br/>signedByExpiredLevel2Ca-rsa.pem                       Y Y<br/>signedByExpiredRootCa-rsa.pem                         Y Y<br/>untrusted-rsa.pem                                     Y Y</p>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <h2 class="with-rule"><a name="managing_tls_ssl_service_1762742558_309412"/>Show SSL Server Certificate</h2>
    <p>To view the filename of the TLS/SSL server certificate used by the event broker and when that server certificate was configured, enter the following command:</p>
    <p class="Code">solace&gt; show ssl server-certificate [detail]</p>
    <p>
      <u>Where:</u>
    </p>
    <p><code>detail</code> specifies to also display the contents of each certificate file.</p>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <p class="Code" xml:space="preserve">solace&gt; show ssl server-certificate<br/>Filename:             cert.pem<br/>Configured at:        Jun 7 2024 19:12:31 UTC</p>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <h2 class="with-rule"><a name="managing_tls_ssl_service_1762742558_369444"/>Show SSL Supported Cipher Suites</h2>
    <p>To view all cipher or cipher suites the event broker supports, enter the following command:</p>
    <p class="Code">solace&gt; show ssl supported-cipher-suites [{management | msg-backbone | ssh}]</p>
    <p><u>Where</u>:</p>
    <p><code>management</code> specifies to view the full list of cipher suites  the event broker supports for management connections.</p>
    <p><code>msg-backbone</code> specifies to view the full list of cipher suites  the event broker supports for message backbone connections.</p>
    <p><code>ssh</code> specifies to view the full list of  ciphers  the event broker supports for SSH connections.</p>
    <p class="Note">If you do not specify a keyword, the event broker displays the full list of supported cipher suites for all inbound and outbound connections.</p>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <p class="Code">solace&gt; show ssl supported-cipher-suites<br/><br/>ECDHE-RSA-AES256-GCM-SHA384<br/>ECDHE-RSA-AES256-SHA384<br/>ECDHE-RSA-AES256-SHA<br/>AES256-GCM-SHA384<br/>AES256-SHA256<br/>AES256-SHA<br/>ECDHE-RSA-AES128-GCM-SHA256<br/>ECDHE-RSA-AES128-SHA256<br/>ECDHE-RSA-AES128-SHA<br/>AES128-GCM-SHA256<br/>AES128-SHA256<br/>AES128-SHA</p>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <h2 class="with-rule"><a name="managing_tls_ssl_service_1762742558_369489"/>Show SSL Cipher Suite List</h2>
    <p>To view the current cipher or cipher suite list that is used for management, message backbone, or SSH connections, or the default cipher suite list for all inbound and outbound connection types, enter the following command:</p>
    <p class="Code">solace&gt; show ssl cipher-suite-list {default | management [default]| msg-backbone [default]| ssh [default]}</p>
    <p><u>Where</u>:</p>
    <p><code>default</code> specifies to view the default cipher suite list the event broker supports for all inbound and outbound connections.</p>
    <p><code>management</code> specifies to view the current cipher suite list the event broker uses for management connections.</p>
    <p><code>management default</code> specifies to view the default cipher suite list the event broker uses for management connections.</p>
    <p><code>msg-backbone</code> specifies to view the current cipher suite list the event broker uses for message backbone connections.</p>
    <p><code>msg-backbone default</code> specifies to view the default cipher suite list the event broker uses for message backbone connections.</p>
    <p><code>ssh</code> specifies to view the current cipher list the event broker uses for SSH connections.</p>
    <p><code>ssh default</code> specifies to view the default cipher list the event broker uses for SSH connections.</p>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <p class="Code">solace&gt; show ssl cipher-suite-list default<br/><br/>ECDHE-RSA-AES256-GCM-SHA384<br/>ECDHE-RSA-AES128-GCM-SHA256<br/></p>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <h2 class="with-rule"><a name="managing_tls_ssl_service_1762742558_309725"/>Show Stats SSL</h2>
    <p>To view the current running system-level TLS/SSL service statistics for the event broker, enter the following command:</p>
    <p class="Code">solace&gt; show stats ssl</p>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <p class="Code">solace&gt; show stats ssl<br/><br/>Active Client Connections:                  25<br/>  Incoming Connections:                     12<br/>    Service Web Transport                    0<br/>    Service SMF:                            11<br/>    Service REST:                            0<br/>    Service MQTT:                            0<br/>  Outgoing Connections:                     13<br/>    Service SMF:                             6<br/>    Service REST:                            7<br/>Active TCP Connections:                      0<br/>Too Many Connections:                        0<br/><br/>Incoming:<br/>  Connections Accepted:                  12125<br/>  Connections Rejected:                      2<br/>    Peer certificate verification failed:    0<br/>    Unsupported Cipher Suite:                0<br/>    SSL not operational:                     2<br/>    Other failure:                           0<br/><br/>Outgoing:<br/>  Connections Established:                  13<br/>  Connections Failed:                        1<br/>    Peer certificate verification failed:    0<br/>    Other failure:                           0</p>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <div class="Note">
      <ul>
        <li>To clear the current TLS/SSL statistics, enter the <code>clear stats ssl</code> Privileged EXEC command. When this command is entered, all of the TLS/SSL statistic counters are reset to 0, and TLS/SSL statistics begin to be recorded again from this point.</li>
        <li>To view descriptions of the output fields for the <code>show stats ssl</code> User EXEC command, enter <code>show stats ssl ?</code></li>
      </ul>
    </div>
    <h2 class="with-rule"><a name="show-tls-versions"/>Show Allowed TLS Versions</h2>
    <p>To view the currently allowed TLS versions, enter the following command:</p>
    <p class="Code">solace&gt; show ssl allow-tls-version</p>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <p class="Code">solace&gt; show ssl allow-tls-version<br/>Allowed TLS versions: 1.0. 1.1, 1.2</p>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <h2 class="with-rule"><a name="show-tls-session-to"/>Show TLS Session Timeout</h2>
    <p>To view the current TLS session timeout value, enter the following command:</p>
    <p class="Code">solace&gt; show ssl tls-session-timeout</p>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <p class="Code">solace&gt; show ssl tls-session-timeout<br/>Tls Session Timeout (secs): 10000</p>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <h2 class="with-rule"><a name="show-downgrade-status"/>Show Allow SSL Downgrade Status</h2>
    <p>To show whether SSL/SSL Downgrades are allowed on a given Message VPN, enter the following command:</p>
    <p class="Code">solace&gt;show message-vpn &lt;message-vpn&gt;</p>
    <p><u>Where</u>:</p>
    <p><span style="font-family: 'Courier New';">&lt;message-vpn&gt;</span> is the name of the Message VPN to view</p>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <p class="Code">solace&gt; show message-vpn default<br/>Message VPN:                          default<br/>Configuration Status:                 Enabled<br/>Local Status:                         Up<br/>Distributed Cache Management:         Enabled<br/>SSL to plain text downgrade allowed:  No<br/>Total Local Unique Subscriptions:     6<br/>Total Remote Unique Subscriptions:    0<br/>Total Unique Subscriptions:           6<br/>Maximum Subscriptions:                5000000<br/>Export Subscriptions:                 No (100% complete)<br/>Active Incoming Connections:          1<br/>   Service SMF:                       1<br/>   Service Web-Transport:             0<br/>   Service REST:                      0<br/>   Service MQTT:                      0<br/>Active Outgoing Connections:<br/>   Service REST:                      0<br/>   Max Incoming Connections:          1000<br/>   Service SMF:                       1000<br/>   Service Web-Transport:             1000<br/>   Service REST:                      1000<br/>   Service MQTT:                      1000<br/></p>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
  </body>
</html>
