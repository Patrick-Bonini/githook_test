<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Configuring CRIME Exploit Protection</h1>
    <p>CRIME (<a href="https://nvd.nist.gov/vuln/detail/CVE-2012-4929" target="_blank" class="link-offsite">Compression Ratio Info-Leak Made Easy</a>) is a security exploit that can be used to guess the content of messages that are being compressed and sent over a TLS connection. On such connections, the event broker protects against CRIME attacks by resetting the compression engine on a per-message basis. </p>
    <p>CRIME protection is enabled by default on a system-wide basis, but it's possible to disable it if necessary.</p>
    <p>Most connections on the event broker have TLS compression disabled and therefore aren't vulnerable to the CRIME exploit. For these connections, this switch is not needed and has no effect.</p>
    <h2 class="with-rule"><a name="How"/>How to determine if CRIME protection is enabled or disabled</h2>
    <p>You can use the following <code>show</code> command to display whether CRIME protection is enabled or disabled:</p>
    <pre>solace(configure)# show ssl crime-exploit-protection</pre>
    <p>You'll see an output that looks something like this example, where CRIME protection is shown to be enabled:</p>
    <pre>CRIME Exploit Protection : Yes</pre>
    <h2 class="with-rule"><a name="Consider"/>Questions to consider before disabling CRIME protection</h2>
    <p>Having CRIME protection enabled can have a significant impact on performance, especially at smaller message sizes, so it's possible to disable it if necessary. </p>
    <p>However, before disabling you should consider these 3 yes-or-no questions regarding the capabilities of a potential attacker:</p>
    <p>
      <u>Is the chance low that ...</u>
    </p>
    <ol>
      <li>... an attacker could connect to the event broker as a client? That is, is it of low probability that the connection isn't blocked by a connect-ACL.</li>
      <p>Refer to <MadCap:xref href="Managing-Access-Control-Lists.htm#Config-Client-Connect-Auth">Configuring Client Connect Authorization</MadCap:xref> for instructions on how to use ACLs to control which clients can connect.</p>
      <li>... an attacker has authentication credentials to log into the event broker as a client?</li>
      <p>Refer to <MadCap:xref href="Configuring-Client-Authentication.htm">Client Authentication Management</MadCap:xref> for instructions on selecting and using client authentication schemes that specify what credentials that a connecting client can provide to an event broker for authentication.</p>
      <li>... an attacker is allowed to publish messages on topics clients under attack are subscribed to? In other words, is it of low probability that an attacker has a publisher-ACL that allows publishing to applicable topics?</li>
      <p>Refer to <MadCap:xref href="Managing-Access-Control-Lists.htm#Config-Topics-May-Pub-To">Configuring Topic Publish Permissions</MadCap:xref> for instructions on how to use ACLs to control the topics to which clients are allowed to publish.</p>
    </ol>
    <p>If you've answered "yes, the chances are low" to at least one of the above questions, you can go ahead and disable CRIME protection using the following command:</p>
    <pre>solace(configure)# no ssl crime-exploit-protection</pre>
    <h2 class="with-rule"><a name="Performa"/>Performance improvements when disabling CRIME protection</h2>
    <p>Disabling CRIME protection improves message throughput for subscribers that use both SSL and compression. </p>
    <h4>What are the likely improvements to throughput?</h4>
    <p>Gains will be highest for Direct messaging subscribers, who may see up to a 500% improvement in throughput. Guaranteed messaging subscribers could see up to a 150% improvement. As a consequence, there will also be corresponding  improvements in Message VPN Bridge throughput. </p>
    <h4>Improvements to throughput drop as message size increases</h4>
    <p>For Direct subscribers, as message size approaches 10240 bytes, performance improvements drop to zero. For Guaranteed message subscribers, the zero improvement mark is passed as message size approaches 1024 bytes.</p>
    <h2 class="with-rule"><a name="Re-enabl"/>Re-enabling CRIME protection</h2>
    <p>As noted in the introduction, CRIME protection is enabled by default on a system-wide basis, but if you've disabled it, you can re-enable it using the following command:</p>
    <pre>solace(configure)# ssl crime-exploit-protection</pre>
    <h2 class="with-rule"><a name="Using"/>Using a configuration key to enable or disable CRIME protection</h2>
    <p>If you're using a software event broker you can specify the state of CRIME protection when the event broker is created by using the <code>tls/crimeexploitprotection/enable</code> configuration key. For more information about this and the other configuration keys refer to <MadCap:xref href="../Software-Broker/Container-Tasks/Config-SW-Broker-Container-Cfg-Keys.htm#Config-Key-Table">List of Configuration Keys</MadCap:xref>.</p>
  </body>
</html>
