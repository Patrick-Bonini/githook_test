<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <meta name="description" content="When high-availability (HA) redundant event brokers are used, and an event broker failover occurs, the amount of time required to reconnect clients significantly increases..."/>
    <meta name="keywords" content="failovers, high-availability, HA"/>
    <meta name="author" content="Solace Corporation"/>
    <title>Re-establishing Secure Connections After MessageBroker Failovers</title>
  </head>
  <body>
    <h1>Re-establishing Secure Connections After Failovers</h1>
    <p>When high-availability (HA) redundant event brokers are used, and an event broker failover occurs, the amount of time required to reconnect clients significantly increases when a large public key size and/or a cipher suite using ECDHE (for example, ECDHE-RSA-AES256-SHA) is used for key establishment.</p>
    <p>Therefore, if a large public key size and/or a cipher suite using ECDHE for key establishment is used, it might not be possible to reconnect a large number of clients to the redundant event broker within the default amount of reconnect time specified by the Solace messaging APIs (30 seconds).</p>
    <p>If you have a large number of client connections that must be automatically reestablished after an event broker failover, the following steps should be considered:</p>
    <ul>
      <li>use a cipher suite that uses a simpler algorithm, such as RSA, for key establishment</li>
      <li>increase the client reconnect values. For example, see <MadCap:xref MadCap:unresolvedLink="import-link:creating_client_sessions_1483641185_69981" href="../API/API-Developer-Guide/Configuring-Connection-T.htm">Configuring Connection Time-Outs and Retries</MadCap:xref> for Solace messaging APIs and <MadCap:xref MadCap:unresolvedLink="import-link:establishing_connections_2505829065_65295" href="../API/Solace-JMS-API/Managing-Sessions.htm#establishing_connections_577400906_329588"> Configuring Connection Time-Outs and Retries</MadCap:xref> for the Solace JMS API.</li>
      <li>limit the number of permitted client connections to the event broker. The maximum number of client connections is set per-Message VPN. See <MadCap:xref href="../Features/VPN/Configuring-VPNs.htm#Max-Connections">Configuring Maximum Connections</MadCap:xref>.</li>
    </ul>
    <p class="Note">Temporary endpoints are maintained for a maximum of 60 seconds if the client that created those endpoints disconnects for a reason other than an event broker failover or reboot. If those clients do not reconnect within this time, the temporary endpoints are removed. If the client disconnect is caused by an event broker failover or reboot, the temporary endpoints are maintained for a maximum of 180 seconds.</p>
  </body>
</html>
