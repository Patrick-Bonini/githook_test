<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <meta name="description" content="Learn to perform a range of configuration tasks for Client Usernames."/>
    <meta name="keywords" content="client username"/>
    <meta name="author" content="Solace Corporation"/>
    <title>Configuring Client Usernames</title>
  </head>
  <body>
    <h1>Client Username Configuration</h1>
    <p>A client is only authorized to connect to a Message VPN that is associated with a client username that that client has been assigned. When a client username is created in a Message VPN, itʼs associated with that particular Message VPN.</p>
    <p>Client access to the resources and messaging capabilities on an event broker is facilitated through the client username accounts that are provisioned on the event broker. When clients are authenticated, they are provided with the predefined configurations that are associated with those client usernames.</p>
    <p>To create a client username account, enter the following command:</p>
    <p class="Code">solace(configure)# create client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;</p>
    <p>To edit an existing client username account, enter the following command:</p>
    <p class="Code">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;username&gt;</code> is the username of the client username account. If the client username account does not already exist, it is created. </p>
    <p>The username must be unique among all created client usernames within its local Message VPN. A username can contain up to 189 printable ASCII characters (that is, characters in the range 0x20 – 0x7e) are permitted. Usernames are case-sensitive. Note that the characters “?” and “*” are not permitted, because they are used in some Solace CLI commands (for example, <code>show</code> commands).</p>
    <p><code>&lt;vpn-name&gt;</code> is the name of an existing Message VPN that the client username is in.</p>
    <p>The no version of this command, <code>no client-username</code>, deletes a client username account.</p>
    <p>You can perform the following configuration tasks for a given client username:</p>
    <ul>
      <li>
        <MadCap:xref href="#Assigning-ACL-Profiles">Assigning ACL Profiles</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Assigning-Client-Profiles">Assigning Client Profiles</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Configuring-Sub-Managers">Configuring Subscription Managers</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Enabling-Endpoint-Permissions">Enabling Endpoint Permission Overrides</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Enabling-Username-Accts">Enabling/Disabling Client Username Accounts</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Setting-Username-Passwords">Setting Client Username Passwords</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Setting">Setting Client Username Attributes</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="Assigning-ACL-Profiles"/>Assigning ACL Profiles</h2>
    <p>To assign an existing Access Control List (ACL) profile to a client username account, enter the following commands:</p>
    <p class="Code">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;<br/>solace(configure/client-username)# acl-profile &lt;name&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;name&gt;</code> is the name of an existing ACL profile within the given Message VPN</p>
    <p>The no version of this command, <code>no acl-profile</code>, resets the assigned ACL profile back to the default ACL profile named <code>default</code>.</p>
    <p>For information on ACL profiles, refer to <MadCap:xref href="Managing-Access-Control-Lists.htm">Managing Access Control Lists</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="Assigning-Client-Profiles"/>Assigning Client Profiles</h2>
    <p>To assign an existing client profile to a client username account, enter the following commands:</p>
    <p class="Code">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;<br/>solace(configure/client-username)# client-profile &lt;name&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;name&gt;</code> is the name of an existing client profile within the given Message VPN</p>
    <p>The no version of this command, <code>no client-profile</code>, resets the assigned client profile back to the default client profile named <code>default</code>.</p>
    <p>For information on creating and configuring client profiles, refer to <MadCap:xref href="Configuring-Client-Profiles.htm">Configuring Client Profiles</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="Configuring-Sub-Managers"/>Configuring Subscription Managers</h2>
    <p>Clients that are configured as Subscription Managers can add or remove subscriptions for direct messaging on behalf of other clients within the Message VPN.</p>
    <p>To configure clients using the given client username the ability to act as Subscription Managers within the given Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;<br/>solace(configure/client-username)# subscription-manager</p>
    <p>The no version of this command, <code>no subscription-manager</code>, disables Subscription Manager capability for the given client username.</p>
    <p class="Note">
            Clients configured as Subscription Managers are subject to the rules in the ACL profile associated with their client username. This may limit the subscriptions they can add on behalf of other clients.
        </p>
    <h2 class="with-rule"><a name="Enabling-Endpoint-Permissions"/>Enabling Endpoint Permission Overrides</h2>
    <p>This command enables endpoint permission override for a client username account. When enabled, all endpoints may be accessed, modified, or deleted with the same permission as the owner. (The only exception to this permission override is that endpoints provisioned by a CLI user can still only be deleted by that CLI user (that is, the owner)).</p>
    <p>Endpoint permission override is disabled by default.</p>
    <p>To enable endpoint permission override for the given client username account, enter the following commands:</p>
    <p class="Code">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;<br/>solace(configure/client-username)# guaranteed-endpoint-permission-override</p>
    <p>The no version of this command, <code>no guaranteed-endpoint-permission-override</code>, disables endpoint permission override for a client username account.</p>
    <h2 class="with-rule"><a name="Enabling-Username-Accts"/>Enabling/Disabling Client Username Accounts</h2>
    <p>To enable a client username account, enter the following commands:</p>
    <p class="Code">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;<br/>solace(configure/client-username)# no shutdown</p>
    <p>To disable a client username account, enter the following commands:</p>
    <p class="Code">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;<br/>solace(configure/client-username)# shutdown</p>
    <p class="Note">By default, when you create a new client username account, it is automatically enabled. Likewise, the client username account named <code>default</code> is not enabled.</p>
    <h2 class="with-rule"><a name="Setting-Username-Passwords"/>Setting Client Username Passwords</h2>
    <p>By default, no password is set for a client username. To set a password for the given client username account, which is then used to authenticate the client username account when internal authentication is the provisioned method of user authentication on the event broker, enter the following commands:</p>
    <p class="Code">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;<br/>solace(configure/client-username)# password &lt;password&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;password&gt;</code> is the password for the specified client username account. Passwords can contain from 1 to 128 non-null characters. Passwords cannot contain the following characters: <code>:()";'&lt;&gt;,`\&amp;|</code></p>
    <p>The no version of this command, <code>no password</code>, removes any password set for the client username account.</p>
    <div class="Note">
      <ul>
        <li>The password is encrypted by one-way encryption before being stored in the event broker database. If internal authentication is enabled, but no password is assigned to a given client username, then authentication fails for that client.</li>
        <li>Changing the password for a client username has no effect on connections which have already been authenticated with the event broker using the old password.</li>
        <li>The password is displayed on the screen as it is being typed (so that the operator can verify the password is correct), but it is not displayed in any <code>show</code> User EXEC command display outputs.</li>
      </ul>
    </div>
    <h2 class="with-rule"><a name="Setting"/>Setting Client Username Attributes</h2>
    <p>A client username attribute is a key-value pair that can be used to locate a client username, for example when using client certificate to Message VPN matching. For more information, see <MadCap:xref href="Configuring-Client-Authentication.htm#Configur">Configuring Client Certificate to Message VPN Matching</MadCap:xref>.</p>
    <p class="Note">There are fewer <i>client username attribute</i> objects on the broker than there are <i>client username</i> objects. Therefore you must be judicious about the number of attributes you create. For more information, see the <MadCap:snippetText src="../Resources/Snippets/System-Limits-Spreadseet.flsnp"/>.</p>
    <p>To create a client username attribute, enter the following commands:</p>
    <p class="Code">solace(configure)# client-username &lt;username&gt; message-vpn &lt;vpn-name&gt;<br/>solace(configure/client-username)# create attribute &lt;name&gt; &lt;value&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;name&gt;</code> is the name of the attribute (of up to 64 characters).</p>
    <p><code>&lt;value&gt;</code> is the value of the attribute (of up to 256 characters).</p>
    <p>The no version of this command, <code>no attribute &lt;name&gt; &lt;value&gt;</code>, removes the attribute. </p>
    <p>The following example sets a client username attribute named <code>ou</code> with a value of <code>Unit1</code> for client username <code>App1</code>. If an appropriate client certificate matching rule is configured on the event broker, the event broker will compare the organizational unit in the client certificate to make sure it matches <code>Unit1</code> before the client is permitted to connect to the Message VPN.</p>
    <pre xml:space="preserve">solace(configure)# client-username App1 message-vpn vpn1
solace(configure/client-username)# create attribute ou Unit1</pre>
    <p class="Note">If you are using LDAP authorization, username attributes must be configured on the external LDAP server.</p>
    <h2 class="with-rule"><a name="Config-Usernames-Example"/>Example: Configuring Client Username Accounts</h2>
    <p>This example shows how to:</p>
    <ul>
      <li>Create client username accounts (<code>pascal</code>) in separate Message VPNs (<code>blue</code> and <code>red</code>)</li>
      <li>Create client profiles (<code>Sales_Access</code>) in both Message VPNs</li>
      <li>Assign those client profiles to the client username accounts</li>
      <li>Activate the client username accounts for service</li>
    </ul>
    <ol>
      <li>Create the Message VPN <code>blue</code>:            
			<p class="Code">solace&gt; enable<br/>solace# configure<br/>solace(configure)# create message-vpn blue<br/>solace(configure/message-vpn)# exit</p></li>
      <li>Create the Message VPN <code>red</code>:
        <p class="Code">solace(configure)# create message-vpn red<br/>solace(configure/message-vpn)# exit</p></li>
      <li>Create the client username account <code>pascal</code> in Message VPN <code>blue</code>:        
			<p class="Code">solace(configure)# create client-username pascal message-vpn blue<br/>solace(configure/client-username)# exit</p></li>
      <li>Create the client username account <code>pascal</code> in Message VPN <code>red</code>:        
			<p class="Code">solace(configure)# create client-username pascal message-vpn red<br/>solace(configure/client-username)# exit</p></li>
      <li>Enter the following show command on the client username accounts <code>pascal</code> to confirm their creation:
        <p class="Code">solace(configure)# show client-username pascal message-vpn *</p></li>
      <li>Create the client profile <code>Sales_Access</code> in Message VPN <code>blue</code>:        
			<p class="Code">solace(configure)# create client-profile Sales_Access message-vpn blue<br/>solace(configure/client-profile)# exit</p></li>
      <li>Create the client profile <code>Sales_Access</code> in Message VPN <code>red</code>:        
			<p class="Code">solace(configure)# create client-profile Sales_Access message-vpn red<br/>solace(configure/client-profile)# exit</p></li>
      <li>Enter the following show command on the client profile <code>Sales_Access</code> to confirm its creation and configuration.
                <p class="Code">solace(configure)# show client-profile Sales_Access detail</p></li>
      <li>Enter the <b>client-profile</b> Client Username CONFIG command to assign client profile <code>Sales_Access</code> to the client username account <code>pascal</code> in Message VPN <code>blue</code>:            
			<p class="Code">solace(configure)# client-username pascal message-vpn blue<br/>solace(configure/client-username)# client-profile Sales_Access<br/>solace(configure/client-username)# exit</p></li>
      <li>Assign client profile <code>Sales_Access</code> to the client username account <code>pascal</code> in Message VPN <code>red</code>:
            <p class="Code">solace(configure)# client-username pascal message-vpn red<br/>solace(configure/client-username)# client-profile Sales_Access<br/>solace(configure/client-username)# exit</p></li>
      <li>Enter the following show command to confirm the client username accounts have been assigned to client profile <code>Sales_Access</code>:
            <p class="Code">solace(configure)# show client-username pascal detail</p></li>
      <li>Activate the client username account <code>pascal</code> in Message VPN <code>blue</code> for service:
			<p class="Code">solace(configure)# client-username pascal message-vpn blue<br/>solace(configure/client-username)# no shutdown<br/>solace(configure/client-username)# exit</p></li>
      <li>Activate the client username account <code>pascal</code> in Message VPN <code>red</code> for service:
            <p class="Code">solace(configure)# client-username pascal message-vpn red<br/>solace(configure/client-username)# no shutdown<br/>solace(configure/client-username)# exit</p></li>
      <li>Enter the following show command to confirm the client username accounts’ activation:
            <p class="Code">solace(configure)# show client-username pascal message-vpn *</p><p class="Code">Username                        Message VPN                 Enabled # Clients</p><p class="Code">------------------------------- --------------------------- -------  --------</p><p class="Code">pascal                          blue                            Yes         0</p><p class="Code">pascal                          red                             Yes         0</p></li>
      <li>To activate the Message VPNs <code>blue</code>, <code>red</code>, and <code>default</code> for service, go to <MadCap:xref href="../Features/VPN/CLI-Sequence-VPN-to-C-Profiles.htm">CLI Sequence for Setting Up VPNs With Client Profiles</MadCap:xref>.</li>
    </ol>
  </body>
</html>
