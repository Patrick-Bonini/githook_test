<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Configuring OCSP-CRL Certificate Revocation Checking</h1>
    <p>To configure a Solace PubSub+ event broker to use a certificate authority (CA) with a combination of OCSP-CRL certificate revocation checking, complete the following steps:</p>
    <ul>
      <li>
        <MadCap:xref href="#Step1">Step 1: Review Prerequisites </MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Step2">Step 2: Configure Certificate Authorities</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Step3">Step 3: Configure OCSP and CRL Parameters</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Step4">Step 4: Enable CA Revocation Checking</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Step5">Step 5: Configure Message VPN Overrides</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Step6">Step 6: Enable OCSP-CRL Certificate Revocation Checking</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="Step1"/>Step 1: Review Prerequisites </h2>
    <MadCap:snippetBlock src="../Resources/Snippets/Prereq-Cert-Revocation.flsnp"/>
    <h2 class="with-rule"><a name="Step2"/>Step 2: Configure Certificate Authorities</h2>
    <p>To configure a CA, see <MadCap:xref href="Managing-Certificate-Authorities.htm#configure-client-ca-list">Configuring Certificate Authorities</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="Step3"/>Step 3: Configure OCSP and CRL Parameters</h2>
    <p>When using OCSP-CRL certificate revocation checking, you can configure optional CRL and OCSP parameters.</p>
    <ul>
      <li>To configure OCSP parameters, see <MadCap:xref href="Configuring-OCSP-Certificate-Revocation.htm#Step3">Step 3: Configure OCSP Parameters </MadCap:xref> </li>
      <li>To configure CRL parameters, see <MadCap:xref href="Configuring-CRL-Certificate-Revocation.htm#Step3">Step 3: Configure CRL Parameters</MadCap:xref>.</li>
    </ul>
    <h2 class="with-rule"><a name="Step4"/>Step 4: Enable CA Revocation Checking</h2>
    <p>For the event broker to successfully use the CA, enable the revocation checking:</p>
    <p>
      <p class="Code">solace(configure/authentication/client-certificate-authority/revocation-check)# no shutdown</p>
    </p>
    <h2 class="with-rule"><a name="Step5"/>Step 5: Configure Message VPN Overrides</h2>
    <p>You can optionally configure revocation overrides for specific Message VPNs, based on the revocation status of the client certificates.</p>
    <p>To configure the revocation checking overrides, see <MadCap:xref href="../Features/VPN/Configuring-VPNs.htm#Configur">Configuring Message VPN Overrides</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="Step6"/>Step 6: Enable OCSP-CRL Certificate Revocation Checking</h2>
    <p>Once CA and CRL configurations are completed, certificate revocation checking can be enabled for the event broker.</p>
    <ol>
      <li>Enable OCSP-CRL certificate revocation checking for the event broker:<p class="Code">solace(configure)# authentication<br/>solace(configure/authentication)# client-certificate-revocation-checking ocsp-crl</p></li>
      <li>Verify if the OCSP-CRL certificate revocation checking has been enabled:
             <p class="Code">solace (configure/authentication)# show authentication</p><MadCap:dropDown><MadCap:dropDownHead><MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot></MadCap:dropDownHead><MadCap:dropDownBody><p class="Code">CLI and SEMP user class:<br/>    radius-domain:<br/>    auth-type: Internal database authentication <br/>    profile-name:<br/><br/>Replace Duplicate Client Connections:   yes<br/>Client Certificate Revocation Checking: ocsp-crl<br/><br/>Shell Users                                            Direct shell login enabled<br/>=====================================================  ==========================<br/>support                                                                       Yes<br/></p></MadCap:dropDownBody></MadCap:dropDown></li>
    </ol>
  </body>
</html>
