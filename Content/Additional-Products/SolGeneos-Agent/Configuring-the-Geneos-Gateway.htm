<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Configuring the Geneos Gateway for Event Brokers</h1>
    <p>Use the Gateway Setup Editor in an ITRS Active Console to configure the Geneos Gateway that manages the connection to your Solace PubSub+ event broker.</p>
    <p class="Tip" MadCap:autonum="&lt;b&gt;Tip:  &lt;/b&gt;">To access the Gateway Setup Editor, launch Active Console, then, in the Gateways area, double-click your Geneos Gateway for an event broker. </p>
    <p>Using the Gateway Setup Editor, you must perform the following steps to configure the Geneos Gateway for the event broker:</p>
    <ul>
      <li>
        <MadCap:xref href="#solgeneos_overview_2955917983_254175">Step 1: Install the Solace Include Files</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#solgeneos_overview_2955917983_255752">Step 2: Copy Event Log Samplers and Rules to the Main Setup File</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#solgeneos_overview_2955917983_257561">Step 3: Copy the FKM Tables to the Main Setup File</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#solgeneos_overview_2955917983_256140">Step 4: Create the Solace Sampler</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#solgeneos_overview_2955917983_256159">Step 5: Create a NetProbe</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#solgeneos_overview_2955917983_256166">Step 6: Create the Managed Entity</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="solgeneos_overview_2955917983_254175"/>Step 1: Install Solace Include Files</h2>
    <p>To install the Solace include files provided with the Solace Geneos Agent package, do the following:</p>
    <ol>
      <li>From the Solace Geneos Agent package that was extracted to the <code>/usr/sw</code> directory on the event broker, copy the following files to a location where they can be read by the Gateway process.
        <ul><li><code>solgeneos/loads/&lt;version&gt;/templates/eventlogsampler/solace_event_log_sampler_config.xml</code></li><li><code>solgeneos/loads/&lt;version&gt;/templates/eventlogsampler/solace_fkm_config.xml</code></li><li><p><code>solgeneos/loads/&lt;version&gt;/templates/eventlogsampler/solace_event_log_sampler_config_VMR.xml</code></p><p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">This file is required to monitor a Solace PubSub+ software event broker.</p></li></ul></li>
      <li>In the Gateway Setup Editor, click <b>Includes</b> in the <b>Navigation</b> area.
        <p style="text-align: left;"><img src="Images/includes_create.png" style="width: 502.6608px;height: 259.7088px;margin-left: 31.54824px;margin-top: 8.25048px;margin-bottom: 10.49903px;" alt=""/></p></li>
      <li>A <b>Confirmation</b> dialog box appears to ask whether you want to include files, click <b>Yes</b>.</li>
      <li>In the <b>Includes</b> view, click the <b>Advanced</b> tab, and then click <b>Add New</b>.
        <p style="text-align: left;"><img src="Images/includes_add_new.png" style="width: 474.0701px;height: 227.808px;margin-left: 24.75px;margin-top: 5.99976px;margin-right: 5.256714px;margin-bottom: 1.494015px;" alt=""/></p></li>
      <li>In the <b>Priority</b> box, enter a priority level of 2, and in the <b>Location</b> box, enter the full path and file name for the <code>solace_event_log_sampler_config.xml</code> (or the <code>solace_event_log_sampler_config_VMR.xml</code> file for a Solace PubSub+ software event broker).
        <p style="text-align: left;"><img src="Images/includes_initial_file_select_only_one.png" style="width: 456.8563px;height: 261.145px;margin-left: 15.75px;margin-top: 7.50024px;margin-right: 6.106323px;margin-bottom: 4.389851px;" alt=""/></p></li>
      <li>Click <b>Add New</b>, and in the new row, enter a priority level of 3 in the <b>Priority</b> box, and in the <b>Location</b> box, enter the full path and file name for the <code>solace_fkm_config.xml</code>.</li>
      <li>Click <b>File</b> &gt; <b>Save</b> to save the updates.</li>
      <li>Click <b>File</b> &gt; <b>Exit</b>.</li>
    </ol>
    <h2 class="with-rule"><a name="solgeneos_overview_2955917983_255752"/>Step 2: Copy Event Log Samplers and Rules to Main Setup File</h2>
    <p>After including the configuration files, the event log samplers and rules that they provide must be copied to the <code>Samplers</code> and <code>Rules</code> folders.</p>
    <p>To copy the sampler and rules to the main setup file, do the following:</p>
    <ol>
      <li>In the <b>Gateways</b> area of the Active Console, double-click the Geneos Gateway that manages the connection to your event broker. 
                <p>The Gateway Setup Editor appears.</p></li>
      <li>In the <b>Navigation</b> area of the Gateway Setup Editor, navigate to the <b>Solace Event Log Sampler</b> file that is located in the <b>Samplers</b> folder of the included <code>solace_event_log_sampler_config.xml</code> file (or the <code>solace_event_log_sampler_config_VMR.xml</code> file for a Solace PubSub+ software event broker), and copy the Solace Event Log Sampler file.
        <p style="text-align: left;"><img src="Images/sampler_copy.png" alt=""/></p></li>
      <li>Scroll down to the <b>Samplers</b> folder, and paste in the <b>Event Log Sampler</b> file.
        <p style="text-align: left;"><img src="Images/sampler_paste.png" alt=""/></p></li>
      <li>Navigate to the <b>Rules</b> folder of the included <code>solace_event_log_sampler_config.xml</code> file (<code>solace_event_log_sampler_config_VMR.xml</code> file for a Solace PubSub+ software event broker), and copy all of the rules in that folder.
        <p style="text-align: left;"><img src="Images/rules_copy.png" alt=""/></p></li>
      <li>Scroll down to the <b>Rules</b> folder, and paste in the copied rules.
        <p style="text-align: left;"><img src="Images/rules_paste.png" alt="Screenshot showing the settings described in the surrounding steps."/></p></li>
      <li>Click <b>File</b> &gt; <b>Save</b>.</li>
    </ol>
    <h2 class="with-rule"><a name="solgeneos_overview_2955917983_257561"/>Step 3: Copy FKM Tables to Main Setup File</h2>
    <p>After including the config files, you must copy the contents of the included <code>solace_fkm_config.xml</code> file and paste it to the FKM section for the main setup file.</p>
    <p>To copy the <code>solace_fkm_config.xml</code> file to the main setup file, do the following:</p>
    <ol>
      <li>In the <b>Navigation</b> area of the Gateway Setup Editor, open the Includes folder, and click the <code>solace_fkm_config.xml</code> file to load the file. 
        <p style="text-align: left;"><img src="Images/fkm_load.png" style="width: 176.64px;height: 159.9994px;margin-left: 3.75048px;margin-top: 5.25024px;margin-right: 210.0003px;margin-bottom: 3.149281px;" alt="Screenshot showing the settings described in the surrounding steps."/></p></li>
      <li>Under the newly loaded <code>solace_fkm_config.xml</code> file, navigate to the <b>Solace &lt;version&gt;</b> folder that is located in the <b>FKM</b> subdirectory of <b>Static Variables</b>, and copy the files in the <b>Solace &lt;version&gt;</b> folder.
        <p style="text-align: left;"><img src="Images/fkm_copy.png" style="width: 520.5744px;height: 387.4464px;margin-left: 5.62248px;margin-top: 8.25192px;margin-right: 3.756243px;margin-bottom: 4.433047px;" alt=""/></p></li>
      <li>Navigate to the <b>FKM</b> subdirectory of <b>Static Variables</b> that is located in the main setup file, and paste in the files copied from the included <b>Solace &lt;version&gt;</b> folder.
        <p style="text-align: left;"><img src="Images/fkm_paste.png" style="width: 520.0167px;height: 387.0307px;margin-left: 3.7944px;margin-top: 5.25168px;margin-right: 1.501895px;margin-bottom: 0.9950547px;" alt=""/></p></li>
      <li>Click <b>File</b> &gt; <b>Save</b>.</li>
    </ol>
    <h2 class="with-rule"><a name="solgeneos_overview_2955917983_256140"/>Step 4: Create Solace Sampler</h2>
    <p>A Sampler Object defines a set of views that a NetProbe gathers from a particular managed entity. The Solace Sampler exposes all of the Solace views.</p>
    <p>To create the Solace Sampler in the Gateway Setup Editor, do the following:</p>
    <ol>
      <li>In the <b>Navigation</b> area, select the <b>Samplers</b> folder.
                <p>The Sampler view displays. </p></li>
      <li>In the <b>Sampler</b> view, click <b>New Sampler</b>.</li>
      <li>In the <b>Name</b> box, type <i class="Emphasis">SolaceSampler</i>.</li>
      <li>Select <b>Plugin</b>, and choose <b>API</b> from the list.</li>
      <li>Click <b>File</b> &gt; <b>Save</b>.</li>
    </ol>
    <h2 class="with-rule"><a name="solgeneos_overview_2955917983_256159"/>Step 5: Create a NetProbe</h2>
    <p>A NetProbe is the data collection point for the system and is associated with Gateway objects. At least one NetProbe is required per managed event broker.</p>
    <p>To create a NetProbe in the Gateway Setup Editor, do the following:</p>
    <ol>
      <li>In the <b>Navigation</b> area, select the <b>Probes</b> folder
                <p>The Probes view displays. </p></li>
      <li>In the <b>Probes</b> view, click <b>New Probe</b>.</li>
      <li>On the <b>Basic</b> tab, type the event broker name in the <b>Name</b> box.</li>
      <li>In the <b>Hostname</b> box, type the IP address of the event broker, specified in the dotted decimal notation form (nnn.nnn.nnn.nnn).</li>
      <li>In the <b>Port</b> box, type the NetProbe port number of the event broker’s NetProbe service. The default setting is 7036.</li>
      <li>Click <b>File</b> &gt; <b>Save</b>.</li>
    </ol>
    <h2 class="with-rule"><a name="solgeneos_overview_2955917983_256166"/>Step 6: Create the Managed Entity</h2>
    <p>Managed entities represent any hardware or software component being monitored. The user is responsible for creating and naming the event broker managed entity on the Gateway, and associating it with a NetProbe running on that event broker or off the event broker.</p>
    <p>At least one managed entity is required per managed event broker.</p>
    <p>To create a managed entity for the event broker in the Gateway Setup Editor, do the following:</p>
    <ol>
      <li>In the <b>Navigation</b> area, select the <b>Managed Entities</b> folder.
                <p>The Managed Entities view displays. </p></li>
      <li>In the <b>Managed Entities</b> view, click <b>New Managed Entity</b>.
        <p style="text-align: left;"><img src="Images/manage_entity_create.png" style="width: 518.3367px;height: 364.1712px;margin-left: 5.77224px;margin-top: 6.7536px;margin-right: 3.754066px;margin-bottom: 3.857026px;" alt=""/></p></li>
      <li>On the <b>Basic</b> tab, type the Managed Entity’s name in the <b>Name</b> box.
        <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">This name must precisely match the string on the <code>managedEntities</code> line in the event broker’s <code>solgeneosagent.properties</code> file (for example, <code>managedEntities=[np0,lab-130-20_ManEnt]</code>).</p></li>
      <li>For <b>Options</b>, select <b>Probe </b>and the hostname of the event broker that is being monitored by the associated NetProbe. </li>
      <li>For <b>Sampler</b>, select the listed Samplers that you want to use with the Managed Entity.
                <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">For Solace PubSub+ software event broker event log sampling, you must use the appropriate Solace Event Log Sampler.</p></li>
      <li>Click <b>File</b> &gt; <b>Save</b>.</li>
    </ol>
  </body>
</html>
