<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Modifying Custom Monitors Created Before Version 7.2</h1>
    <p>The 7.2 version of the Solace Geneos Agent introduced support for encrypted management passwords to access the event broker. Any custom monitors that were created with earlier versions of the Solace-provided <code>UsersMonitor.java</code> example before Version 7.2 require code changes if an encrypted management password is to be used.</p>
    <p>The required code changes are generic to all monitors based on the <code>UsersMonitor.java</code> example.</p>
    <h2 class="with-rule"><a name="Steps"/>Steps to Modify Custom Monitors</h2>
    <ol>
      <li>Unpack the <code>sol-geneossample</code> file and copy all custom monitor java files into the appropriate places in the <code>src/com/â€¦</code> directory structure.</li>
      <li>Modify the sections and methods, as described in <MadCap:xref href="#Sections">Sections and Methods Requiring Modification</MadCap:xref> below.</li>
      <li>After the indicated sections and methods are modified, you must recompile, redeploy, and restart the Solace Geneos Agent. Refer to <MadCap:xref href="Adding-a-New-Monit.htm">Steps to Add a New Monitor</MadCap:xref>.</li>
    </ol>
    <h2 class="with-rule"><a name="Sections"/>Sections and Methods Requiring Modification</h2>
    <p>The following sections and methods of pre-version 7.2 monitors must be modified:</p>
    <ul>
      <li><b>onPostInitialize() method</b><![CDATA[
                ]]><p>Find where the password is set to the clear text management password property value:</p><ul><li><code>String password = props.getProperty(MGMT_ENCRYPTED_PASSWORD_PROPERTY_NAME);</code></li></ul><p>Set the password instead to the encrypted management password property value, using the <code>getEncryptedProperty </code>method that accepts one argument (the encrypted management password property) or two arguments (the encrypted manegement password property, and the clear text management password property as the fall back password if the encypted management password property value does not exist):</p><ul><li><code>String password = SolGeneosAgent.onlyInstance.getEncryptedProperty(MGMT_ENCRYPTED_PASSWORD_PROPERTY_NAME);</code><p>OR</p><li><code>String password = SolGeneosAgent.onlyInstance.getEncryptedProperty(MGMT_ENCRYPTED_PASSWORD_PROPERTY_NAME,MGMT_PASSWORD_PROPERTY_NAME);</code><br/></li></li></ul></li>
    </ul>
  </body>
</html>
