<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1>Global Caching Notifications</h1>
    <p>A local PubSub+ Cache Instance that is actively caching global topics must monitor its connectivity to the home Cache Cluster to ensure that it is caching the same messages as the home Cache Cluster.</p>
    <p>If the PubSub+ Cache Instance stops receiving global caching heart beats from the remote home Cache Cluster, it notifies clients of this loss of connectivity through global prefix status messages. (It also generates these messages when connectivity is restored.) These messages are sent to the following topic:</p>
    <p class="Code">#LOG/NOTICE/VPN/&lt;rtr-name&gt;/VPN_SOLCACHE_GLOBAL_PREFIX_STATUS/&lt;vpn-name&gt;/&lt;distributed-cache-name&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;rtr-name&gt;</code> is the name of the Designated Router that the PubSub+ Cache Instance belongs to.</p>
    <p><code>&lt;vpn-name&gt; </code>is the name of the Message VPN that the PubSub+ Cache Instance belongs to.</p>
    <p><code>&lt;distributed-cache-name&gt;</code> is the name of the local Distributed Cache that the PubSub+ Cache Instance belongs to.</p>
    <p>The binary attachment of the message indicates the state of the PubSub+ Cache Instance’s connection to the home Cache Cluster:</p>
    <ul>
      <li>If the connection is lost, the binary attachment contains the following text: “Cache Instance (id)’s Global Caching connectivity to home cluster is lost.”</li>
      <li>If the connection is restored, the binary attachment contains the following text: “Cache Instance (id)’s Global Caching connectivity to home cluster is restored.”</li>
    </ul>
    <p>The message contains additional information in the user property map:</p>
    <table class="TableStyle-Table_Num" style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" cellspacing="0">
      <caption valign="top" style="padding-bottom: 3pt;">
        <p class="TblCaption">Global Prefix Status Information Provided in User Property Map</p>
      </caption>
      <col width="25%" class="TableStyle-Table_Num-Column-Column1"/>
      <col width="25%" class="TableStyle-Table_Num-Column-Column1"/>
      <col style="width: 50%;" class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Field</th>
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Keyed Data Type</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">status</p>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">String</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The status of the global topic prefixes in the message can be:</p>
            <p class="Tbl_Bullet">STALE—Connectivity to the home Cache Cluster is lost, and the PubSub+ Cache Instance is not actively caching global topics.</p>
            <p class="Tbl_Bullet">OK—There is connectivity to the home Cache Cluster, and the PubSub+ Cache Instance is actively caching global topics.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">prefix-list</p>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Stream</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">A list of the topic prefixes whose status is being reported.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">distributed-cache-name</p>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">String</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The local Distributed Cache that has lost connectivity with the home Cache Cluster.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
            <p class="Tbl_Body">cache-cluster</p>
          </td>
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
            <p class="Tbl_Body">String</p>
          </td>
          <td class="TableStyle-Table_Num-BodyD-Column1-Body1">
            <p class="Tbl_Body">The local Cache Cluster within the Distributed Cache that lost connectivity with the home Cache Cluster.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">cache-instance</p>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">String</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The local PubSub+ Cache Instance within the Cache Cluster that lost connectivity with the home Cache Cluster. </p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p class="Tbl_Body">home-cache-cluster</p>
          </td>
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p class="Tbl_Body">String</p>
          </td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p class="Tbl_Body">The Cache Cluster that is home to the topic prefixes listed in this message.</p>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
