<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Using Ingress Message Plug-Ins</h1>
    <p>By default, the PubSub+ Cache service facility caches all live data messages that it receives on a topic, subject to its configured constraints. However, the Ingress Message Plug-In can be used so that live data messages received for a topic can be inspected and then processed according to criteria defined in a shared library before a PubSub+ Cache Instance caches or discards them. This allows only those messages that meet specific customer-defined criteria to be cached.</p>
    <p>When an Ingress Message Plug-In is enabled, PubSub+ Cache passes a special‑purpose data structure (<code>solCache_pluginEventInfo_t</code>) to the Plug-In function (<code>solCache_plugin</code>) used by the dynamically shared library. The <code>solCache_plugin</code> function can examine the contents of an ingress live data message, optionally modify or replace the message (using the standard Solace C API message parsing/processing functions), and then return an operation code (<code>solCache_opcode_t</code>) to the PubSub+ Cache Instance that instructs it to do one of the following actions:</p>
    <ul>
      <li>cache the message</li>
      <li>flush the cache contents for the topic, then cache the message</li>
      <li>flush the cache contents for the topic, then discard the message</li>
      <li>discard the message</li>
      <li>discard the message, and then act as if a message loss was detected</li>
    </ul>
    <p>The following example shows how the Plug-In can process ingress live data messages.</p>
    <p class="GraphicCaption">Ingress Plug-In Operation</p>
    <p style="text-align: left;">
      <img src="Images/ingress_graphic.jpg" alt=""/>
    </p>
    <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">Cache flush operations affect in-progress cache requests. A cache request may retrieve pre- and post-flush data if the flush occurs while a PubSub+ Cache Instance is sending the response to a request.</p>
  </body>
</html>
