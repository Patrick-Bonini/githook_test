<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1><MadCap:concept term="Software;Appliance"/>Configuring VPN Event Thresholds</h1>
    <p>You can configure the set and clear thresholds  that control when Message VPN events are generated for a given Message VPN. You can configure any of the following event thresholds:</p>
    <ul>
      <li>
        <MadCap:xref href="#montoring_and_management_1462237600_255333">Connections Thresholds</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#montoring_and_management_1462237600_255351">Egress Message Rate Thresholds</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#montoring_and_management_1462237600_255359">Ingress Message Rate Thresholds</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#montoring_and_management_1462237600_255367">Large Message Threshold</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#montoring_and_management_1462237600_255382">Service</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#montoring_and_management_1462237600_255457">Subscriptions Thresholds</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="montoring_and_management_1462237600_255333"/>Connections Thresholds</h2>
    <p>To configure the threshold values that determine when to generate events for the combined number of client connections of all service types (that is, SMF, Web transport, and incoming REST connections) that simultaneously connect in a Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure)# message-vpn &lt;vpn-name&gt;<br/>solace(configure/msg-vpn)# event<br/>solace(configure/msg-vpn/event)# connections thresholds {{[set-value &lt;set-value&gt;] [clear-value &lt;clear-value&gt;]}|{[set-percentage &lt;set-percentage&gt;][clear-percentage &lt;clear-percentage&gt;]}}</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;set-value&gt;</code> is the set threshold expressed as a count value. The valid range is from 0 to the maximum total number of SMF client and combined Web transport/REST clients that can be supported by the type of event broker (for example, Solace PubSub+ 3530 or Solace PubSub+ 3560) and the version of NAB used.</p>
    <p><code>&lt;clear-value&gt;</code> is the clear threshold expressed as a count value. The valid range is from 0 to the maximum total number of SMF and Web clients that can be supported by the type of event broker and the version of NAB used. </p>
    <p><code>&lt;set-percentage&gt;</code> is the set threshold value expressed as a percentage (from 0 to 100) of the maximum number of client connections that can simultaneously connect to the given Message VPN. The default is 80. (For information on setting the max-connections, see <MadCap:xref href="../Features/VPN/Configuring-VPNs.htm#Max-Connections">Configuring Maximum Connections</MadCap:xref>.)</p>
    <p><code>&lt;clear-value&gt;</code> is the clear threshold value expressed as a percentage (from 0 to 100) of the maximum number of client connections that can simultaneously connect to the given Message VPN. The default is 60.</p>
    <p>The no version of this command (<code>no connections thresholds</code>) reverts the thresholds back to the default values for the Message VPN.</p>
    <p>To view the maximum total number of SMF and Web client connections that can be supported, enter the <code>show service</code> User EXEC command.</p>
    <h2 class="with-rule"><a name="montoring_and_management_1462237600_255351"/>Egress Message Rate Thresholds</h2>
    <p>To configure the threshold values that determine when to generate events for the configured aggregate egress message rate in a Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure)# message-vpn &lt;vpn-name&gt;<br/>solace(configure/msg-vpn)# event<br/>solace(configure/msg-vpn/event)# egress-message-rate thresholds {set-value &lt;set-value&gt; | clear-value &lt;clear-value&gt;}</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;set-value&gt;</code> is the set threshold expressed as a count value (measured in messages/second).</p>
    <p><code>&lt;clear-value&gt;</code> is a clear threshold expressed as a count value (measured in messages/second).</p>
    <p>The no version of the command (<code>no egress-message-rate thresholds</code>) reverts the thresholds back to the default values.</p>
    <h2 class="with-rule"><a name="montoring_and_management_1462237600_255359"/>Ingress Message Rate Thresholds</h2>
    <p>To configure the threshold values that determine when to generate events for the configured aggregate ingress message rate in a Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure)# message-vpn &lt;vpn-name&gt;<br/>solace(configure/msg-vpn)# event<br/>solace(configure/msg-vpn/event)# ingress-message-rate thresholds {set-value &lt;set-value&gt; | clear-value &lt;clear-value&gt;}</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;set-value&gt;</code> is the set threshold expressed as a count value (measured in messages/second).</p>
    <p><code>&lt;clear-value&gt;</code> is a clear threshold expressed as a count value (measured in messages/second).</p>
    <p>The no version of the command (<code>no ingress-message-rate thresholds</code>) reverts the thresholds back to the default values.</p>
    <h2 class="with-rule"><a name="montoring_and_management_1462237600_255367"/>Large Message Threshold</h2>
    <p>The large message threshold generates events when the size of a message in a Message VPN exceeds a specified size.</p>
    <p>To configure the large message threshold, enter the following commands:</p>
    <p class="Code">solace(configure)# message-vpn &lt;vpn-name&gt;<br/>solace(configure/msg-vpn)# event<br/>solace(configure/msg-vpn/event)# large-message-threshold &lt;size&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;size&gt;</code> is an integer value that represents the maximum message size in KB.</p>
    <p>Once triggered, this event must be reset through the <code>clear-event</code> Admin EXEC command. For more information, see <MadCap:xref href="Clearing-One-Shot-Events.htm#Clearing_1_shot_client">Clearing One-Shot Client Events</MadCap:xref>.</p>
    <p>The no version of the command (<code>no large-message-threshold</code>) reverts the threshold value back to the default.</p>
    <h2 class="with-rule"><a name="montoring_and_management_1462237600_255382"/>Service Thresholds</h2>
    <p>For a given Message VPN, you can configure the thresholds at which events are generated for  clients that use a specific service type. You can configure the set and clear event thresholds for the following types of services:</p>
    <ul>
      <li>
        <MadCap:xref href="#service-AMQP">AMQP</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#service-MQTT">MQTT</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#montoring_and_management_1462237600_255400">REST</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#montoring_and_management_1462237600_255420">SMF</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#montoring_and_management_1462237600_255439">Web Transport</MadCap:xref>
      </li>
    </ul>
    <h3><a name="service-AMQP"/>AMQP</h3>
    <p>To configure the threshold values that determine when to generate events for the incoming REST connections made to a Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure/message-vpn/event)# service amqp<br/>solace(configure/message-vpn/event/service/amqp)# connections<br/>solace(...ent/service/rest/incoming/connections)# thresholds {{[set-value &lt;set-value&gt;] [clear-value &lt;clear-value&gt;]}|{[set-percentage &lt;set-percentage&gt;][clear-percentage &lt;clear-percentage&gt;]}}</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;set-value&gt;</code> is the set threshold expressed as a count value.</p>
    <p><code>&lt;clear-value&gt;</code> is the clear threshold expressed as a count value.</p>
    <p><code>&lt;set-percentage&gt;</code> is the set threshold value expressed as a percentage (from 0 to 100) of the maximum number of AMQP connections allowed for the Message VPN. The default value is 80.</p>
    <p><code>&lt;clear-percentage&gt;</code> is the clear threshold percentage expressed as a percentage (from 0 to 100) of the maximum number of AMQP connections allowed for the Message VPN. The default value is 60.</p>
    <p>The no version of this command (<code>no thresholds</code>) resets the AMQP connections thresholds back to the default values.</p>
    <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">For information on setting the maximum number of incoming AMQP connections for a Message VPN, see <MadCap:xref href="../Services/AMQP-on-VPN-Management.htm#Set-Max-Connects">Set Maximum Number of AMQP Connections</MadCap:xref>.</p>
    <h3><a name="service-MQTT"/>MQTT</h3>
    <p>To configure the threshold values that determine when to generate events for the incoming REST connections made to a Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure/message-vpn/event)# service mqtt<br/>solace(configure/message-vpn/event/service/mqtt)# connections<br/>solace(...ent/service/rest/incoming/connections)# thresholds {{[set-value &lt;set-value&gt;] [clear-value &lt;clear-value&gt;]}|{[set-percentage &lt;set-percentage&gt;][clear-percentage &lt;clear-percentage&gt;]}}</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;set-value&gt;</code> is the set threshold expressed as a count value.</p>
    <p><code>&lt;clear-value&gt;</code> is the clear threshold expressed as a count value.</p>
    <p><code>&lt;set-percentage&gt;</code> is the set threshold value expressed as a percentage (from 0 to 100) of the maximum number of MQTT connections allowed for the Message VPN. The default value is 80.</p>
    <p><code>&lt;clear-percentage&gt;</code> is the clear threshold percentage expressed as a percentage (from 0 to 100) of the maximum number of MQTT connections allowed for the Message VPN. The default value is 60.</p>
    <p>The no version of this command (<code>no thresholds</code>) resets the MQTT connections thresholds back to the default values.</p>
    <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">For information on setting the maximum number of incoming MQTT connections for a Message VPN, see <MadCap:xref href="../Services/Managing-MQTT-Messaging.htm#managing_mqtt_messaging_1203392003_440596">Setting the Maximum Number of MQTT Connections</MadCap:xref>.</p>
    <h3><a name="montoring_and_management_1462237600_255400"/>REST</h3>
    <p>To configure the threshold values that determine when to generate events for the incoming REST connections made to a Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure/message-vpn/event)# service rest<br/>solace(configure/message-vpn/event/service/rest)# incoming connections<br/>solace(...ent/service/rest/incoming/connections)# thresholds {{[set-value &lt;set-value&gt;] [clear-value &lt;clear-value&gt;]}|{[set-percentage &lt;set-percentage&gt;][clear-percentage &lt;clear-percentage&gt;]}}</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;set-value&gt;</code> is the set threshold expressed as a count value.</p>
    <p><code>&lt;clear-value&gt;</code> is the clear threshold expressed as a count value.</p>
    <p><code>&lt;set-percentage&gt;</code> is the set threshold value expressed as a percentage (from 0 to 100) of the maximum number of incoming REST connections allowed for the Message VPN. The default value is 80.</p>
    <p><code>&lt;clear-percentage&gt;</code> is the clear threshold percentage expressed as a percentage (from 0 to 100) of the maximum number of incoming REST connections allowed for the Message VPN. The default value is 60.</p>
    <p>The no version of this command (<code>no thresholds</code>) resets the incoming REST connections thresholds back to the default values.</p>
    <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">For information on setting the maximum number of incoming REST connections for a Message VPN, see <MadCap:xref href="../Services/Managing-REST-Service.htm#Set-Max-In">Setting the Max Incoming Connections</MadCap:xref>.</p>
    <h3><a name="montoring_and_management_1462237600_255420"/>SMF</h3>
    <p>To configure the threshold values that determine when to generate events for the number of SMF client connections made to a Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure/message-vpn/event)# service smf connections<br/>solace(configure/message-vpn/event/service/smf/connections)# thresholds {{[set-value &lt;set-value&gt;] [clear-value &lt;clear-value&gt;]}|{[set-percentage &lt;set-percentage&gt;][clear-percentage &lt;clear-percentage&gt;]}}</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;set-value&gt;</code> is the set threshold expressed as a count value.</p>
    <p><code>&lt;clear-value&gt;</code> is the clear threshold expressed as a count value.</p>
    <p><code>&lt;set-percentage&gt;</code> is the set threshold value expressed as a percentage (from 0 to 100) of the maximum number of simultaneous SMF client connections allowed for the Message VPN. The default value is 80.</p>
    <p><code>&lt;clear-percentage&gt;</code> is a clear threshold percentage expressed as a percentage (from 0 to 100) of the maximum number of simultaneous SMF connections allowed for the Message VPN. The default value is 60.</p>
    <p>The no version of this command (<code>no thresholds</code>) resets the SMF connections thresholds back to the default values.</p>
    <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">For information on configuring the maximum number of SMF clients that can be simultaneously connected to a given Message VPN on an event broker, see <MadCap:xref href="../Features/VPN/Configuring-VPNs.htm#Config-Services">Configuring Services</MadCap:xref>.</p>
    <h3><a name="montoring_and_management_1462237600_255439"/>Web Transport</h3>
    <p>To configure the threshold values that determine when to generate events for the number of Web transport client connections made to a Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure/message-vpn/event)# service web-transport connections<br/>solace(...ssage-vpn/event/service/web-transport/connections)# thresholds {{[set-value &lt;set-value&gt;] [clear-value &lt;clear-value&gt;]}|{[set-percentage &lt;set-percentage&gt;][clear-percentage &lt;clear-percentage&gt;]}}</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;set-value&gt;</code> is the set threshold expressed as a count value.</p>
    <p><code>&lt;clear-value&gt;</code> is the clear threshold expressed as a count value.</p>
    <p><code>&lt;set-percentage&gt;</code> is the set threshold value expressed as a percentage (from 0 to 100) of the maximum number of incoming Web transport connections allowed for the Message VPN. The default value is 80.</p>
    <p><code>&lt;clear-percentage&gt;</code> is the clear threshold percentage expressed as a percentage (from 0 to 100) of the maximum number of incoming Web transport connections allowed for the Message VPN. The default value is 60.</p>
    <p>The no version of this command (<code>no thresholds</code>) resets the Web transport connections thresholds back to the default values.</p>
    <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">For information on configuring the maximum number of Web transport clients that can be simultaneously connected to a given Message VPN on an event broker, see <MadCap:xref href="../Features/VPN/Configuring-VPNs.htm#Config-Services">Configuring Services</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="montoring_and_management_1462237600_255457"/>Subscriptions Thresholds</h2>
    <p>To configure the threshold values that determine when to generate events for the number of subscriptions allowed for a Message VPN, enter the following commands:</p>
    <p class="Code">solace(configure/message-vpn/event)# subscriptions thresholds {{[set-value &lt;set-value&gt;] [clear-value &lt;clear-value&gt;]}|{[set-percentage &lt;set-percentage&gt;][clear-percentage &lt;clear-percentage&gt;]}}</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;set-value&gt;</code> is a set threshold expressed as a count value.</p>
    <p><code>&lt;clear-value&gt;</code> is a clear threshold expressed as a count value.</p>
    <p><code>&lt;set-percentage&gt;</code> is the set threshold value expressed as a percentage (from 0 to 100) of the maximum number of local client subscriptions (both primary and backup) allowed for the Message VPN. The default is 80. (For information on setting the max-connections, see <MadCap:xref href="../Features/VPN/Configuring-VPNs.htm#Max-Subs">Configuring Maximum Subscriptions</MadCap:xref>.)</p>
    <p><code>&lt;clear-value&gt;</code> is a clear threshold value expressed as a percentage (from 0 to 100) of the maximum number of local client subscriptions (both primary and backup) allowed for the Message VPN. The default is 60.</p>
    <p>The no version of the command (<code>subscriptions no thresholds</code>) disables event generation for subscriptions in a Message VPN.</p>
  </body>
</html>
