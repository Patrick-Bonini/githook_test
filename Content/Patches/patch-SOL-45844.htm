<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1>Patch SOL-45844</h1>
    <p>This patch updates the <code>sudo</code> utility to address a heap-based buffer overflow in argument parsing.</p>
    <p>This patch applies to ALL appliance types.</p>
    <p>This patch applies to the following SolOS releases:</p>
    <ul>
      <li> SolOS 9.3</li>
    </ul>
    <p>This patch resolves the following <a href="https://cve.mitre.org/index.html" target="_blank" class="link-offsite">Common Vulnerabilities and Exposures</a> (CVEs):
</p>
    <ul>
      <li>CVE-2021-3156</li>
    </ul>
    <div class="Caution">
      <p>You must reapply the patch after upgrading to any SolOS version before 9.8.1.</p>
    </div>
    <h2><a name="patch-sol-45844-installation"/>Installation Procedure</h2>
    <div class="Note">
      <p>You can run the patch script with the <code>-c</code> flag.  If this flag is specified, the script verifies:</p>
      <ul>
        <li> whether the patch can be applied to the appliance</li>
        <li>whether the patch has already been applied</li>
      </ul>
    </div>
    <ol>
      <li>Ensure direct shell access is enabled:
<pre class="Code" xml:space="preserve">
solace&gt; show authentication

. . .

Shell Users                                        Direct shell login enabled
================================================== ==========================
support                                                                   Yes</pre><p>To enable direct shell access, run the following commands:</p><pre class="Code" xml:space="preserve">
solace&gt; enable
solace# configure
solace# authentication allow-direct-shell-login</pre></li>
      <li>Copy the patch package to the Solace appliance:
            <pre class="Code" xml:space="preserve">$ scp patch-sol-45844.tgz support@&lt;appliance-mgmt-ip&gt;:</pre></li>
      <li>Log in to the appliance with the support account over an SSH connection:
            <pre class="Code">$ ssh support@&lt;appliance-mgmt-ip&gt;</pre></li>
      <li>Unpack the patch package:<pre class="Code" xml:space="preserve">$ cd /usr/sw/support
$ tar zxf patch-sol-45844.tgz</pre></li>
      <li>Change to the <code>patch-sol-45844</code> directory:<pre class="Code" xml:space="preserve">$ cd /usr/sw/support/patch-sol-45844</pre></li>
      <li>Check whether the appliance needs this patch (the root password is required):
<pre class="Code" xml:space="preserve">$ sudo ./patch-sol-45844 -c</pre><ul><li><p>If the output is <code>Patch is not installed</code>, proceed to Step 7.</p></li><li><p>If the output is any of the following, patching is not required. Stop this procedure.</p><pre style="background-color: #e9eff2;">Patch is installed</pre><p>or</p><pre>This patch does not apply to this platform. Supported platforms:
CHS-3230AC-01-D, CHS-3230AC-02-A, CHS-3260AC-01-A, CHS-3260AC-01-B,
CHS-3260AC-01-C, CHS-3260AC-02-A, CHS-3260AC-03-A, CHS-3260AC-04-A,
CHS-3530AC-01-A, CHS-3530AC-02-A, CHS-3530AC-03-A, CHS-3560AC-01-A,
CHS-3560AC-02-A, CHS-3560AC-03-A, CHS-3560AC-04-A, CHS-3560AC-05-A,
CHS-3560AC-06-A, CHS-3560AC-07-A.</pre><p>or</p><pre>This patch does not apply to SolOS versions less than SolOS 8.4.</pre><p>or</p><pre>This patch does not apply to software event brokers.
For software event brokers, please upgrade to SolOS 9.8.1 or newer versions.</pre></li></ul></li>
      <li>Run the patch script with <code>sudo</code> to install the patch (the root password is required). <pre class="Code" xml:space="preserve">$ sudo ./patch-sol-45844 -i
Installation succeeded
Patch was applied successfully</pre></li>
      <li>If you had to enable direct shell access in Step 1 to run this procedure, turn it off now.
<pre class="Code">solace&gt; enable
solace# configure
solace# no authentication allow-direct-shell-login</pre></li>
    </ol>
    <p>You have completed this procedure.</p>
  </body>
</html>
