<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us">
    <head><title></title>
        <link href="../../Resources/Stylesheets/mqtt_311_prtcl.css" rel="stylesheet" />
    </head>
    <body>
        <h1 class="Heading1">6 Using WebSocket as a network transport</h1>
        <p MadCap:conditions="Default.HideFromAllOutput"><b>***NOTE&#160;TO&#160;WRITERS:</b> Highlighted content in this topic is that way on purpose. It is intended to show differences in this spec of MQTT. Do not remove the spans.</p>
        <p>If MQTT is transported over a WebSocket <a href="Introduction.htm#RFC6455"><span class="Hyperlink">[RFC6455]</span></a> connection, the following conditions apply: </p>
        <ul>
            <li><span class="span_17">MQTT Control Packets MUST be sent in WebSocket binary data frames. If any other type of data frame is received the recipient MUST close the Network Connection</span> <span class="span_14">[MQTT-6.0.0</span><span class="span_14">-</span><span class="span_14">1]</span>.</li>
            <li><span class="span_17">A single WebSocket data frame can contain multiple or partial MQTT Control Packets. The receiver MUST NOT assume that MQTT Control Packets are aligned on WebSocket frame boundaries</span> <span class="span_14">[MQTT-6.0.0</span><span class="span_14">-</span><span class="span_14">2]</span>.</li>
            <li><span class="span_17">The client MUST include “mqtt” in the list of WebSocket Sub Protocols it offers</span> <span class="span_14">[MQTT-6.0.0</span><span class="span_14">-</span><span class="span_14">3]</span>.  </li>
            <li><span class="span_17">The WebSocket Sub Protocol name selected and returned by the server MUST be “mqtt”</span> <span class="span_14">[MQTT-6.0.0</span><span class="span_14">-</span><span class="span_14">4]</span>.</li>
            <li>The WebSocket URI used to connect the client and server has no impact on the MQTT protocol. </li>
        </ul>
        <h2 class="Heading2"> <a name="_Toc430864992"></a>6.1 IANA Considerations</h2>
        <p>This specification requests IANA to register the WebSocket MQTT sub-protocol under the “WebSocket Subprotocol Name” registry with the following data:</p>
        <p class="GraphicCaptionWord"><a name="_Toc430865213"></a>Figure 6.1 - IANA WebSocket Identifier</p>
        <table class="table_5">
            <col style="width: 155pt;" />
            <col style="width: 320pt;" />
            <tr>
                <td class="td_1">
                    <p class="p_28">Subprotocol Identifier</p>
                </td>
                <td class="td_2">
                    <p class="p_28">mqtt</p>
                </td>
            </tr>
            <tr>
                <td class="td_3">
                    <p class="p_28">Subprotocol Common Name</p>
                </td>
                <td class="td_4">
                    <p class="p_28">mqtt</p>
                </td>
            </tr>
            <tr>
                <td class="td_3">
                    <p class="p_28">Subprotocol Definition</p>
                </td>
                <td class="td_4">
                    <p class="p_28">http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/mqtt-v3.1.1.html</p>
                </td>
            </tr>
        </table>
        <p class="p_25">
            <div style="height: 64.6pt;width: 423.6pt;" class="div_2">
                <p><span class="span_3"> Solace Implementation Note</span>
                </p>
                <p class="p_1">The Solace server supports WebSocket transport.</p>
                <p class="p_1">The Solace server supports WebSocket Secure transport.</p>
            </div>
        </p>
    </body>
</html>