<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Consuming Messages in Transactions</h1>
    <p>To consume messages in transactions, a client must acquire a <code>MessageConsumer</code> or <code>TopicSubscriber</code> from the transacted Session. </p>
    <p>After acquiring a <code>MessageConsumer</code> or <code>TopicSubscriber</code>, messages can then be received either:</p>
    <ul>
      <li>asynchronously, through a defined <code>MessageListener</code></li>
      <li>synchronously, through individual <code>receive(...)</code> calls</li>
    </ul>
    <p>Consumers in a transacted Session function the same as those in a non‑transacted Session, except that the messages they receive are only acknowledged, and subsequently removed from the event broker, when a successful commit occurs for the transacted Session. For example, calling <code>Message.acknowledge()</code> has no effect on transacted Sessions. For information on how to receive Guaranteed messages synchronously or asynchronously through a <code>MessageConsumer</code>, refer to <MadCap:xref href="Receiving-Messages-Synch.htm#receiving_messages_3569307012_280033">Receiving Messages Synchronously or Asynchronously</MadCap:xref>.</p>
    <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">When the following situations occur after the messages are consumed in a transaction, but before a commit is made, those messages are still successfully committed:</p>
    <ul>
      <li>The messages are removed from the event broker by an administrative action (that is, the messages are deleted from the spool).</li>
      <li>The amount of time set for the messages’ TTL has expired. The commit succeeds whether or not expired messages are moved to a Dead Message Queue (DMQ).</li>
    </ul>
  </body>
</html>
