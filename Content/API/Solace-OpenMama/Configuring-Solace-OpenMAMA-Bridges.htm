<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1>Configuring Solace OpenMAMA Bridges</h1>
    <p>The Solace Middleware and Payload Bridges are required to establish the transports used to connect OpenMAMA clients and Solace PubSub+, and to allow messaging data to pass between them.</p>
    <p>For an OpenMAMA client application to publish messages to or receive messages from Solace PubSub+, it must establish one or more transports through a Solace Middleware Bridge to an event broker.</p>
    <p>To select the Solace Middleware Bridge, an OpenMAMA application must use the bridge identifier of <code>solace</code> (for example, when calling <code>mama_loadBridge()</code>).</p>
    <p>The OpenMAMA API uses the properties provided in a <code>mama.properties</code> configuration file to establish a middleware bridge and to establish the transports on that bridge.</p>
    <h2 class="with-rule"><a name="configuration-file-conventions"/>Configuration File Conventions</h2>
    <p>The <code>mama.properties</code> file uses a hierarchical naming convention (from left to right) with “.” as the separator between each element. The terminating element is “=” followed by the property value. The Solace Middleware Bridge and Solace Payload Bridge transport properties begin with <code>mama.solace.transport</code>, and payload-related properties begin with <code>mama.solace.payload</code>.</p>
    <p>The following entries show Solace-specific transport properties for two separate transports, <code>mamapublisher7</code> and <code>mamasubscriber3</code>:</p>
    <p class="Code">mama.solace.transport.mamapublisher7.session_vpn_name=default<br/>mama.solace.transport.mamapublisher7.session_reconnect_retries=3<br/>mama.solace.transport.mamasubscriber3.session_vpn_name=default<br/>mama.solace.transport.mamasubscriber3.session_reconnect_retries=3</p>
    <p>A <code>sample_mama.properties</code> file for the Solace Middleware Bridge is provided in the <code>solopenmama_bridge</code> directory where you extracted the SolOpenMAMA Bridge archive file. This sample file shows some of the Solace‑specific OpenMAMA properties.</p>
    <p>By default, the OpenMAMA API calls <code>mama_open()</code> to load the <code>mama.properties</code> file used for the middleware bridge from the location specified by the <code>WOMBAT_PATH</code> environment variable. Alternatively, the OpenMAMA API can use open functions to use another <code>mama.properties</code> file located in a specific directory instead of the <code>mama.properties</code> file provided by the <code>WOMBAT_PATH</code> environment variable.</p>
    <h2 class="with-rule"><a name="solace-bridge-configuration-properties"/>Solace Bridge Configuration Properties</h2>
    <p>In addition to standard middleware bridge configuration properties, for a Solace Middleware Bridge the following Solace‑specific transport properties must be configured:</p>
    <ul>
      <li>
        <MadCap:xref href="#global-properties">Global Properties</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#context-properties">Context Properties</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#properties-that-affect-all-transports">Properties that Affect All Transports</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#per-transport-properties">Per-Transport Properties</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#pubsubcache-properties">PubSub+ Cache Properties</MadCap:xref>
      </li>
    </ul>
    <p>These Solace-specific transport properties map to the Solace C API initialize function, and context and session properties, which are required to establish client connections to an event broker.</p>
    <p>When the PubSub+ Cache last-value caching facility is to be used, Solace C API cache session properties must also be configured.</p>
    <p>The Global and Context settings apply to all transports, but the other properties must be set for each transport to be established for the bridge. To create multiple transports for the Middleware Bridge, you must provide a unique transport name in the <code>mama.properties</code> file for each transport.</p>
    <p>If transport properties are not explicitly set in the <code>mama.properties</code> file, they are set to the default values for the corresponding C API session property. Although the defaults can be used in many cases, some session properties require explicit input for the client application to establish a transport connection to the event broker. Refer to <MadCap:xref href="#per-transport-properties">Per-Transport Properties</MadCap:xref>.</p>
    <h3 class="with-rule"><a name="global-properties"/>Global Properties</h3>
    <p>The <code>mama.solace.transport.global_*</code> properties are used to initialize the underlying Solace C API. The C API equivalent for these properties is <code>solClient_initialize(...)</code>.</p>
    <p class="Note">Although the logging levels to be used for the transports to the event broker can be set through these <code>mama.solace.transport.global_*</code> properties, it is recommended that you set the transport logging levels through standard OpenMAMA methods. The Solace Middleware Bridge will then automatically make the appropriate adjustments. For more information, refer to <MadCap:xref href="Solace-Implementation-Considerations.htm#Logging">Logging</MadCap:xref>.</p>
    <h3 class="with-rule"><a name="context-properties"/>Context Properties</h3>
    <p>The <code>mama.solace.transport.context_*</code> properties are used to configure the context properties for all transports to an event broker. A context acts as a container in which one or more client Sessions are configured and Session‑related events are handled. It encapsulates threads that drive network I/O and message delivery notification for the Sessions associated with that Context.</p>
    <p>The C API equivalents for these properties are:</p>
    <ul>
      <li>
        <code>CONTEXT_TIME_RES_MS</code>
      </li>
      <li>
        <code>CONTEXT_CREATE_THREAD</code>
        <p class="Note"> The Solace Middleware Bridge presets the <code>mama.solace.transport.context_create_thread</code> to a value 1 so that an internal context thread is automatically created. This value cannot be overridden.</p>
      </li>
    </ul>
    <h3 class="with-rule"><a name="properties-that-affect-all-transports"/>Properties that Affect All Transports</h3>
    <p>The following transport properties are Solace-specific properties that set subscribe and publish preferences for the Solace Middleware Bridge. These properties affect all transports rather than a particular given transport.</p>
    <ul>
      <li><code>mama.solace.transport.queue_max_size</code>—This property specifies the maximum number of messages permitted for a middleware queue used for a transport. <p>Default: 50000</p><p>Valid range: 1 to 2147483647</p><p>When the defined value is exceeded, the Solace Middleware Bridge will either suspend receiving messages  (if asynchronous behavior is used for subscribe/unsubscribe operations) or discard any further received messages (if synchronous behavior is used for subscribe/unsubscribe operations).</p></li>
      <li><code>mama.solace.transport.subscribe_async</code>—This property specifies whether the Solace Middleware uses synchronous or asynchronous behavior for subscribe/unsubscribe operations.                <p>Default: 1</p><p>To use asynchronous behavior so that a subscribe/unsubscribe call does not wait for a confirmation to be received from the event broker, set the value to 1.</p><p>To use synchronous behavior so that a topic subscribe/unsubscribe call blocks until either a confirmation is received from the event broker or a timeout is reached, set the value to 0.</p></li>
      <li><code>mama.solace.transport.send_publisher_info</code>—This property sets whether the Solace Middleware Bridge will automatically include additional publisher information with every published message.                <p>Default: 1</p><p>To include publisher information, set the value to 1. To not include the information, set the value to 0.</p></li>
      <li><code>mama.solace.transport.defaultqueue.timeout</code>—This property specifies the queue destroy timeout for closing the default event queue while closing the Solace Middleware Bridge.<p>Default: 2000</p><p>Valid Range: 1 to 2147483647</p><p>If the <code>mama.solace.transport.defaultqueue.timeout</code> is omitted, then the value of the <code>mama.defaultqueue.timeout</code> property is used; if both are omitted, then the default value is used. Should either property value be out of range, the default value is used and a warning log is produced.</p></li>
    </ul>
    <h3 class="with-rule"><a name="per-transport-properties"/>Per-Transport Properties</h3>
    <p>The <code>mama.solace.transport.&lt;transport_name&gt;.session_*</code> properties are used to define single transports to the event broker (that is, a single client connection). The Solace Message Format (SMF) is used to facilitate the communication between a client established by a Session and an event broker, and this SMF communication is encapsulated through a single TCP connection.</p>
    <p>When the Solace Middleware Bridge specifies more than one transport, a separate set of Session properties are required for each transport.</p>
    <p>Session properties that are not explicitly supplied for a transport are set to default values. Although the defaults can be used in many cases, some client and event broker parameters require specific input to establish a connection to the event broker.</p>
    <p class="Note">The Solace Middleware Bridge hard codes the following Session properties to an enabled state. Theses properties cannot be overridden even if you attempt to explicitly overwrite these properties in the <code>mama.properties</code> file:</p>
    <ul>
      <li><code>session_reapply_subscriptions</code>—Topic subscriptions are remembered and reapplied after a Session reconnect occurs.</li>
      <li><code>session_topic_dispatch</code>—Messages that are published to specific topics can be handled by separate receive callbacks.</li>
      <li><code>session_connect_blocking</code>— After a client connection is established, a blocking operation mode is used for send, subscribe, and unsubscribe operations.</li>
    </ul>
    <p>The following parameters should be explicitly set for each transport:</p>
    <ul>
      <li>
        <MadCap:xref href="#allow-recover-gaps">Allow Recover Gaps</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#authentication-scheme">Authentication Scheme</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#host">Host</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#local-host">Local Host</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#message-VPN">Message VPN</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#send-subscription-requests">Send Subscription Requests</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#client-authentication-properties">Client Authentication Properties</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#connect-reconnect-properties">Connect/Reconnect Properties</MadCap:xref>
      </li>
    </ul>
    <p>For information on the full range of session properties, refer to the session properties listed in the “Defines” section of the <MadCap:xref href="../../API-Developer-Online-Ref-Documentation/c/index.html">C API Developer Reference</MadCap:xref>) documentation.</p>
    <p class="Note">By default, Sessions are unsecured—in a connected Session, the SMF data sent between a client and an event broker is transmitted as plain text. However, it is also possible to establish a secure Session that uses Transport Layer Security (TLS)/ Secure Sockets Layer (SSL) protocols so that the SMF data is encrypted. For information on how to configure specific TLS/SSL Session properties and establish a secure Session, refer to <MadCap:xref href="#creating-secure-sessions">Creating Secure Sessions</MadCap:xref>.</p>
    <h4><a name="allow-recover-gaps"/>Allow Recover Gaps</h4>
    <p>The  Allow Recover Gaps property (<code>mama.solace.transport.&lt;transport_name&gt;.allow_recover_gaps</code>) specifies whether the Solace Middleware Bridge should override the subscription setting for Recover Gaps.</p>
    <p>To maintain the subscription setting, set a value of 1. To override the subscription setting and not recover subscription gaps, set a value of 0. The default value is 0.</p>
    <h4><a name="authentication-scheme"/>Authentication Scheme</h4>
    <p>When a host event broker initially accepts a connection from a client, that connection is in an unauthenticated state, and the event broker cannot process any requests from the client until the connection is authenticated.</p>
    <p>The credentials that a client will use to authenticate its connection to the event broker are determined by the authentication scheme that is configured for the Session. The authentication scheme can be one of the following:</p>
    <ul>
      <li>
        <u>Basic Authentication</u>
      </li>
      <p>The <code>AUTHENTICATION_SCHEME_BASIC</code> session property sets a Basic authentication scheme. Basic authentication allows a client to authenticate with an event broker using a valid client username and password. This is the default authentication scheme.</p>
      <li>
        <u>Client Certificate</u>
      </li>
      <p>The <code>AUTHENTICATION_SCHEME_CLIENT_CERTIFICATE</code> session property sets a client certificate authentication scheme. Client certificate authentication allows a client to prove its identity to the event broker through an X509v3 client certificate. This authentication scheme also requires the client to use a secure connection (refer to <MadCap:xref href="#creating-secure-sessions">Creating Secure Sessions</MadCap:xref>).</p>
      <li>
        <u>Kerberos</u>
      </li>
      <p>The <code>AUTHENTICATION_SCHEME_GSS_KRB</code> session property sets a Kerberos authentication scheme. Kerberos authentication authenticates a connecting client using a ticket that the client obtains through an approved Ticket Granting Service (TGS).</p>
    </ul>
    <p>Each of these client authentication schemes require explicit input for related session properties to successfully authenticate a client. For more information, refer to <MadCap:xref href="#client-authentication-properties">Client Authentication Properties</MadCap:xref>.</p>
    <h4><a name="host"/>Host</h4>
    <p>The <code>SESSION_HOST</code> property is required to indicate the host event broker to connect or reconnect the Session to. A host entry is composed of the following:</p>
    <p class="Code">[Protocol:]Host[:Port]</p>
    <p><u>Where</u>:</p>
    <p><span class="File_Name">Protocol</span> is the protocol used for the transport channel. The valid values are:</p>
    <ul>
      <li>tcp: or tcp://—Use a TCP channel for communications between the application and its peers. If no protocol is set, TCP is used by default.</li>
      <li>tcps: or tcps://—Use a TLS/SSL channel over TCP for secure communications between the application and its peers.</li>
      <li>ws: or ws://—Use a WebSockets transport for communication between the application and its peers.</li>
      <li>wss: or wss://—Use a TLS/SSL channel over WebSockets for secure communication between the application and its peers.</li>
      <li>http: or http://—Use Hypertext Transfer Protocol (HTTP) for communication between the application and its peers.</li>
      <li>https: or https://—Use a TLS/SSL channel over HTTP for secure communication between the application and its peers.</li>
    </ul>
    <p><code>Host</code> is one or more IP addresses or hostnames of event brokers to connect to. Up to four potential hosts to connect or reconnect to can be entered in a comma‑separated list. Listing more than one host allows a client to attempt to connect or reconnect to alternate hosts should the first event broker be unavailable. Connect or reconnect attempts are made to the hosts in the order in which they are presented in the list. The listed host event brokers may be in separate geographic locations.</p>
    <div class="Note">
      <ul>
        <li>When event brokers are operating in high-availability (HA) redundant pairs, do not list both event brokers in the pair as hosts. The redundant pair use the same IP address for the connection, so they appear as one event broker to the messaging API.</li>
        <li>The connect and reconnect behavior of a client is controlled by the Session properties used for its connection with the event broker. For more information, refer to <MadCap:xref href="#connect-retries-per-host">Connect Retries Per Host</MadCap:xref>.</li>
      </ul>
    </div>
    <p><code>Port</code> is the port number to use to establish the connection. An explicit value is only required when the client needs to use a port other than the automatically‑assigned default port number. The default port number for TCP is 55555 when channel compression is not in use, or 55003 when compression is in use. The default port for TLS/SSL is 55443 (note that compression is not available when TLS/SSL is used).</p>
    <p>The following examples show how to specify transport channel types. Unless it is otherwise specified, the default port 55555 is used.</p>
    <ul>
      <li><code>192.168.160.28</code>—connect to IP address 192.168.160.28 over TCP.</li>
      <li><code>dev212</code>—connect to hostname <code>dev212</code> over TCP.</li>
      <li><code>dev212.solacesystems.com</code>—connect to hostname <code>dev212.<br/>solacesystems.com</code> over TCP.</li>
      <li><code>tcp:192.168.160.28</code>—connect to IP address 192.168.160.28 over TCP.</li>
      <li><code>tcps:192.168.160.28</code>—connect to IP address 192.168.160.28 and port 55443 with TLS/SSL over TCP.</li>
      <li><code>tcp:192.168.160.28:65535</code>—connect to IP address 192.168.160.28 and port 65535 over TCP.</li>
    </ul>
    <div class="Note">
      <ul>
        <li>In a Windows environment, a fully qualified domain name (FQDN) should be used for the host parameter, and it must match the FQDN that the event broker uses for the Kerberos Service Principal Name (SPN).</li>
        <li>When a SPN is generated for the client, the following format is used: <code>service_name/&lt;customer-provided_host&gt;@REALM</code>. The service name portion is configured through the KRB service name session property (by default, it is <code>solace</code>), and the realm portion is determined by the configuration files used by the KRB library. An example of a resulting service principle name is <code>solace/dev212@SIMPLESPNEXAMPLE.COM</code>.</li>
        <li>When using multiple hosts, the host used for the current connection generates the SPN.</li>
      </ul>
    </div>
    <h4><a name="local-host"/>Local Host</h4>
    <p>The <code>SESSION_BIND_IP</code> property indicates the hostname or IP address of the physical host on which the application is running. This Session property may be required when the application is running on a multi‑homed host.</p>
    <p>On a multi-homed host, a local hostname or IP address helps ensure that the API uses the correct network interface for communication with the event broker.</p>
    <h4><a name="message-VPN"/>Message VPN</h4>
    <p>The <code>SESSION_VPN_NAME</code> property indicates the name of the Message VPN to assign the client to when the Session connects to an event broker.</p>
    <p>Message VPNs are created on the event broker to provide isolation between groups of clients connecting to Solace PubSub+. A client’s username is scoped by the Message VPN in which it was provisioned.</p>
    <p>If a specific Message VPN is not provided, the Message VPN named <code>default</code> is used. The <code>default</code> Message VPN is always present on an event broker. Although a network administrator can change the configuration settings for <code>default</code>, it cannot be deleted.</p>
    <h4><a name="send-subscription-requests"/>Send Subscription Requests</h4>
    <p>If PubSub+ Cache is enabled for one or more transports (that is, <code>mama.solace.transport.&lt;transport_name&gt;.use_SolCache=1</code>), the Send Subscription Requests property (<code>mama.solace.transport.&lt;transport_name&gt;.send_subreq</code>) specifies whether the Solace Middleware Bridge should also send a subscription request message to an interactive publisher when a cache request is made.</p>
    <p>When a client makes a cache request, a PubSub+ Cache Instance returns an initial value in response, so another subscription request to a publisher for an initial value is typically unnecessary. However, the request to a publisher may be of benefit if some special behavior is associated with receiving the subscription request. For example, receiving a subscription request may be used to prompt an interactive publisher to start publishing real-time market data for a symbol when an initial subscriber shows interest in the symbol.</p>
    <p>To send a subscription request message to a publisher after each cache request is made, set the property value to 1. To not send a subscription request message to a publisher after a cache request, set the property value to 0. The default value is 0.</p>
    <h4><a name="client-authentication-properties"/>Client Authentication Properties</h4>
    <p>Each of the three possible authentication schemes (Basic, Client Certificate, or Kerberos) that can be chosen for client authentication must be provided with additional configuration parameters specified in session properties:</p>
    <ul>
      <li>
        <MadCap:xref href="#basic-authentication-properties">Basic Authentication Properties</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#client-certificate-authentication-properties">Client Certificate Authentication Properties</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#kerberos-authentication-properties">Kerberos Authentication Properties</MadCap:xref>
      </li>
    </ul>
    <h5><a name="basic-authentication-properties"/>Basic Authentication Properties</h5>
    <p>Basic authentication is the default client authentication scheme. When this scheme is used, the client must provide the following properties for the event broker to authenticate the client (these properties are not encrypted):</p>
    <ul>
      <li>
        <MadCap:xref href="#username">Username</MadCap:xref>
      </li>
      <li><MadCap:xref href="#password">Password</MadCap:xref> (this is optional)</li>
    </ul>
    <p>
      <a name="username"/>
      <b>Username</b>
    </p>
    <p>A username is required for a Session to authenticate any clients connecting with the event broker over that Session. A username must be provided in the <code>SESSION_USERNAME</code> property for each transport, and it must match with a client username account provisioned on the event broker.</p>
    <p>When a Session connects to an event broker, clients are created and deleted dynamically as they connect and disconnect from the event broker on that Session. Therefore, it is possible that multiple clients can use a single username.</p>
    <p class="Note">The username property is the same as the <code>client-username</code> property that can be shown through the Solace CLI or SolAdmin.</p>
    <p>
      <a name="password"/>
      <b>Password</b>
    </p>
    <p>When basic authentication is enabled on the event broker, a valid username/password pair must be provided in the <code>SESSION_PASSWORD</code> property to connect a Session to an event broker. The default is no password.</p>
    <h5><a name="client-certificate-authentication-properties"/>Client Certificate Authentication Properties</h5>
    <p>A client certificate authentication scheme allows a client to prove its identity to the event broker using a valid X509v3 client certificate obtained from a Certification Authority (CA). When the client certificate authentication scheme is used for the Session, the client must specify a client certificate and a private key and password through the following session properties:</p>
    <ul>
      <li><code>SESSION_SSL_CLIENT_CERTIFICATE_FILE</code>—the client certificate file name</li>
      <li><code>SESSION_SSL_CLIENT_PRIVATE_KEY_FILE</code>—the private key file name</li>
      <li><code>SESSION_SSL_CLIENT_PRIVATE_KEY_FILE_PASSWORD</code>—the password that decrypts the private key</li>
    </ul>
    <p class="Note">If a specified key store cannot be loaded (for example, a private key file or client certificate file is not readable) the connection is not attempted and an error is reported to the application.</p>
    <p>Client certificate authentication depends on the TLS/SSL facility on the event broker, so it can only be used for secure Sessions (refer to <MadCap:xref href="#creating-secure-sessions">Creating Secure Sessions</MadCap:xref>).</p>
    <p>
      <b>Required Event Broker Configurations</b>
    </p>
    <p>For a client to use a client certificate authentication scheme, the host event broker must be properly configured for TLS/SSL connections, and Client Certificate Authentication must be enabled for the particular Message VPN that the client is connecting to. The Message VPN that the client connects to can be configured to use the common name in the client certificate’s subject as the client username or to use a client username (refer to <MadCap:xref href="#username">Username</MadCap:xref> that the client provides. (By default, the event broker assigns the client username based on the common name in the client certificate.)</p>
    <h5><a name="kerberos-authentication-properties"/>Kerberos Authentication Properties</h5>
    <p>Kerberos authentication can be used to authenticate clients for either secured or unsecured Sessions to the event broker. Unlike client certificate authentication, Kerberos authentication does not depend on the TLS/SSL facility on the event broker.</p>
    <p>To use the Kerberos authentication scheme, the following configurations must be made:</p>
    <ul>
      <li>Required versions and libraries for the:<ul><li>C API on Linux and SunOS systems—libraries that implement GSSAPI Version 2 must be used</li><li>C APIs on Windows systems—the Security Support Provided Interface (SSPI) that is distributed with Windows is used</li></ul></li>
      <li>Set Kerberos as the authentication scheme to use for the session (refer to <MadCap:xref href="#authentication-scheme">Authentication Scheme</MadCap:xref>).</li>
    </ul>
    <p>
      <b>Required Event Broker Configurations</b>
    </p>
    <p>For a client to use a Kerberos authentication scheme, a Kerberos key tab file must be configured and Kerberos authentication must be configured on the host event broker and enabled for any Message VPNs that a client will connect to. For more information, refer to <MadCap:xref MadCap:unresolvedLink="import-link:managing_cli_user_authentication_and_authorization_1105770511_49686" href="../../Admin/Configuring-Mgmt-and-Shell-Users.htm">Managing CLI User Authentication/Authorization</MadCap:xref>.</p>
    <h5><a name="creating-secure-sessions"/>Creating Secure Sessions</h5>
    <p>Clients can optionally create secure Sessions that require trusted server certificates to establish a TLS/SSL-encrypted client connection to an event broker. When a secure Session is created, SMF information is transported using TLS/SSL over TCP instead of plain text over TCP.</p>
    <p>To create a secure Session, a number of TLS/SSL-specific Session properties must be specified as discussed below. In addition, the event broker that the secure Session will connect to must be properly configured, and the appropriate server certificate must be in place. For information on configuring an event broker to allow for secure connections, refer to <MadCap:xref MadCap:unresolvedLink="import-link:managing_tls_ssl_service_796577956_15157" href="../../Security/Managing-TLS-SSL-Service.htm">Managing TLS/SSL Service</MadCap:xref>.</p>
    <p>
      <b>TLS/SSL-Specific Properties for Secure Sessions</b>
    </p>
    <p>To create a secure Session, the following Session properties must be properly configured:</p>
    <ul>
      <li>Host—Each host entry for a TLS/SSL connection requires an appropriate TLS/SSL protocol, and a specific TLS/SSL port number can optionally be specified. If no port number is specified, the default port of 55443 is used.
    For more information on configuring hosts, refer to <MadCap:xref href="#host">Host</MadCap:xref>.</li>
      <li>SSL Excluded Protocols—A comma‑separated list of encryption protocols that may not be used for secure connections. Possible values are:<ul><li>SSL v3.0 (<code>SSLv3</code>)</li><li>TLS v1.0 (<code>TLSv1</code>)</li><li>TLS v1.1 (<code>TLSv1.1</code>)</li><li>TLS v1.2 (<code>TLSv1.2</code>)</li></ul><p>The default list is empty, meaning that any encryption protocol can be used (no protocols are excluded).</p></li>
      <li>SSL Validate Certificate (<code>SESSION_SSL_VALIDATE_CERTIFICATE</code>)—Indicates whether the API should validate server certificates with the trusted certificates in the trust store. The trust store is a directory on a server that contains the trusted certificates. The default value for this property is <code>true</code>.</li>
      <li>SSL Validate Certificate Date (<code>SESSION_SSL_VALIDATE_CERTIFICATE_DATE</code>)—Indicates whether the Session connection should fail when an expired certificate or a certificate not yet in use is received. The default is <code>true</code>.</li>
      <li>SSL Cipher Suites (<code>SESSION_SSL_CIPHER_SUITES</code>)—A comma-separated list of cipher suites, listed in order of importance, to use to negotiate with the event broker.        <p>A cipher suite is a combination of cryptographic parameters that define the security algorithms and key sizes used for authentication, key agreement, encryption, and integrity protection. For a listing of the supported cipher suites in order of preference, refer to the <MadCap:xref href="../../API-Developer-Online-Ref-Documentation/c/index.html">C API Developer Reference</MadCap:xref> documentation. By default, no cipher suites are listed, which indicates that all supported ciphers should be considered.</p></li>
      <li>SSL Trusted Common Name List (<code>SESSION_SSL_TRUSTED_COMMON_NAME_LIST</code>)—A list of up to 16 comma-separated common names trusted by the client. The list should include the common names of all of the event brokers the client can connect to.
        <p>By default, no common names are provided; this means that there is no common name verification and all common names are acceptable. Also, no common name validation is performed if SSL Validate Certificate is set to false.</p></li>
      <li>SSL Trusted Store Directory (<code>SESSION_SSL_TRUST_STORE_DIR</code>)—The network directory where the trusted certificates are stored.</li>
    </ul>
    <h4><a name="connect-reconnect-properties"/>Connect/Reconnect Properties</h4>
    <p>The following Session properties are used to configure Session connect and reconnect behavior:</p>
    <ul>
      <li>
        <MadCap:xref href="#connection-timeout">Connection Time-Out</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Connect-Retries">Connect Retries</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Reconnect-Retries">Reconnect Retries</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#reconnect-retry-wait">Reconnect Retry Wait</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#connect-retries-per-host">Connect Retries Per Host</MadCap:xref>
      </li>
    </ul>
    <p>For an example of how these Session properties work in relation to one another when a list of potential hosts are provided for client connection attempts, refer to <MadCap:xref href="#connect-retry-example">Connect Retry Example</MadCap:xref>. (For more information on listing multiple hosts, refer to <MadCap:xref href="#host">Host</MadCap:xref>.)</p>
    <div class="Note">
      <ul>
        <li>To find the default value for the properties listed in this section, refer to the <MadCap:xref href="../../API-Developer-Online-Ref-Documentation/c/index.html">C API Developer Reference</MadCap:xref> documentation.</li>
        <li>When using HA redundant event broker pairs, a failover from one event broker to its mate will typically occur in under 30 seconds, however, applications should attempt to reconnect for at least five minutes. To allow for a reconnect duration of five minutes for HA redundant event brokers, set the following session property values:<ul><li>connect retries—1</li><li>reconnect retries—5</li><li>reconnect retry wait—3000 ms</li><li>connect retries per host—20</li></ul></li>
      </ul>
    </div>
    <h5><a name="connection-timeout"/>Connection Time-Out</h5>
    <p>The connection time-out property (<code>SESSION_CONNECT_TIMEOUT_MS</code>) sets the maximum amount of time (in milliseconds) that is allowed for a Session to establish an initial connection to an event broker.</p>
    <p>When a host list is used, the amount of time set for the Connection Time-Out property is applied to each connection attempt to a host. So, for example, if there are four host entries, a worst-case scenario would be that an application would have to wait for the connection time-out to occur for each host entry, times the number of connect attempts, before receiving a notice of an established connection or a connection failure. This wait time is also extended by the Reconnect Retry Wait time that occurs after each unsuccessful attempt to connect to a host.</p>
    <p class="Note">A connection attempt can terminate quicker if a failure is detected by the socket layer.</p>
    <h5><a name="connect-retries"/>Connect Retries</h5>
    <p>The connect retries property (<code>SESSION_CONNECT_RETRIES</code>) sets the number of times to retry to establish an initial connection for a Session to a host event broker.</p>
    <p>The valid range for the Connect Retries property is –1 or greater. A value of –1 means retry forever; a value of 0 means no automatic connection retries (that is, try once and give up).</p>
    <p>When a list of hosts is used, the API attempts to establish a connection to the first listed event broker. If that attempt fails, the API waits for the amount of time set for the Reconnect Retry Wait property before attempting another connection to either the same host. (The value of Connect Retries Per Host property sets the number times to attempt to connect to one host before moving to the next listed host.) The API attempts to connect to the host entries sequentially in the order they are listed.</p>
    <p>If the Connect Retries property is greater than 0, the API can retry a connection attempt at the beginning of the host list if no connection could be established to any of the entries in the list. Each time the API works through the host list without establishing a connection is considered a connect retry. For example, if a Connect Retries value of 2 is used, the API could possibly work through all of the listed hosts without connecting to them three times: one time through for the initial connect attempt, and then two times through for each connect retry. Each connect retry begins with the first host listed.</p>
    <h5><a name="reconnect-retries"/>Reconnect Retries</h5>
    <p>The Reconnect Retries property (<code>SESSION_RECONNECT_RETRIES</code>) sets the number of times to try to reconnect to a host after a connected Session goes down. If a host list is used, this property sets the number of times the API will traverse the host list in an attempt to reconnect to one of the hosts in the list.</p>
    <p>The valid range is greater than or equal to –1. A value of –1 means retry forever; a value of 0 means no automatic connection retries (that is, try once and give up).</p>
    <p>When a host list is used, if the API cannot connect to the first event broker on the list (that is, the preferred event broker), it attempts to connect to the next listed event broker, and so on. The API attempts to connect to each host for the number of times set for the Connect Retries Per Host property before attempting to connect to the next host.</p>
    <p>After each unsuccessful connection attempt, the API waits for the amount of time set for the Reconnect Retry Wait property to expire before attempting to connect to the same host, the next listed host, or, after all of the listed hosts have been attempted, to the first host on the list again.</p>
    <p>Multiple reconnects should be specified when the Session is working with a host for which event broker redundancy has been enabled (that is, the IP address listed as a host is used by a pair of redundant event brokers). Disabling reconnect retries could affect activity switches that might occur when active/active redundancy is used and could cause service disruptions. For example, in a failover scenario, if no reconnect retries are enabled, a connection attempt cannot be made to the redundant event broker.</p>
    <h5><a name="reconnect-retry-wait"/>Reconnect Retry Wait</h5>
    <p>The Reconnect Retry Wait property (<code>SESSION_RECONNECT_RETRY_WAIT_MS</code>) sets the amount of time (in milliseconds) to wait after an unsuccessful attempt to reconnect to the same host that the client was connected to. After this time expires, another reconnect attempt can be made. Valid values are 1 or greater.</p>
    <p class="Note">If the API works through all of the entries in the host list without establishing a connection, and a Connect Retry is permitted because the Connect Retry property is greater than 0, the API waits for the amount of time set for the Reconnect Retry Wait property before retrying to connect to the first host in the host list.</p>
    <h5><a name="connect-retries-per-host"/>Connect Retries Per Host</h5>
    <p>When using a host list, the Reconnect Retries Per Host (<code>SESSION_CONNECT_RETRIES_PER_HOST</code>) property sets how many times to try to connect or reconnect the Session to one host before moving to the next host in the list.</p>
    <p>A value of 0 means make a single connection or reconnection attempt (that is, 0 retries). A value of –1 means attempt an infinite number of connect or reconnect retries (in this case, the API only tries to connect or reconnect to first host listed).</p>
    <p>If a connect or reconnect attempt to host is not successful, the API must wait for the amount of time set for the Reconnect Retry Wait property before making another connect or reconnect attempt.</p>
    <h5><a name="connect-retry-example"/>Connect Retry Example</h5>
    <p>The following figure shows how the Connect Try and Retry properties can affect Session connection attempt behavior when a host list is used. For demonstration purposes, this example shows the worst case scenario where all potential connection attempts are unsuccessful.</p>
    <p class="GraphicCaption">Connection Attempt Behavior When Using a Host List</p>
    <p style="text-align: left;">
      <p>
        <img src="../../Resources/Images/OpenMama/connect_props.jpg" alt=""/>
      </p>
    </p>
    <p>For this example, the Connect Retry Per Host property of 1 means that a connection attempt is tried twice for each of the four listed host entries. If the first connection attempt is not successful, the Reconnect Retry Wait value of 20 milliseconds must pass, then an attempt to “reconnect” to the same host can occur. If this attempt is not successful, an attempt to connect to the next host entry can occur, and so on.</p>
    <p>Each time the API works through all of the entries in the host list without establishing a connection is considered a Connect Try or Retry. So if a connection to one of the listed hosts is not established during the initial Connect Try, a Connect Retry value of 2 means that API can work through the host list two more times (again, each listed host can be attempted up to two times for each Connect Retry). Each Connect Retry begins with the first host and works through the entries in the order in which they are listed.</p>
    <p>Therefore, in the worst case scenario, the API could possibly work through the host list three times without making a connection to a host (one time through for the initial Connect Try, and then two times through for the Connect Retries), and because the Connect Retry Per Host value of 2 causes each host to be attempted twice, a maximum of 24 connection attempts can be made.</p>
    <h3 class="with-rule"><a name="pubsubcache-properties"/>PubSub+ Cache Properties</h3>
    <p>Solace properties are required when the PubSub+ Cache last‑value caching facility is to be used. Cache properties are set on a per-transport basis. Therefore, to enable OpenMAMA clients to use the optional PubSub+ Cache facility, set a value of 1 for the <code>mama.solace.transport.&lt;transport_name&gt;.use_solcache</code> property.</p>
    <p>When PubSub+ Cache is enabled for the given transport, the <code>mama.solace.transport.&lt;transport_name&gt;.cachesession_* </code>properties are used to configure cache sessions established on that transport. A cache session contains static cache properties and cache state information. It also allows multiple outstanding cache requests and synchronizes those requests.</p>
    <p>The available cache session properties are listed below. For more detailed information on these properties, refer to the “Defines” section of the <MadCap:xref href="../../API-Developer-Online-Ref-Documentation/c/index.html">C API Developer Reference</MadCap:xref>.</p>
    <table class="TableStyle-Table_Num" style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');width: 95%;" cellspacing="0">
      <caption valign="top" style="padding-bottom: 3pt;">
        <p class="TblCaption"><a name="cache-session-properties"/>Cache Session Properties</p>
      </caption>
      <col class="TableStyle-Table_Num-Column-Column1" style="width: 25%;"/>
      <col class="TableStyle-Table_Num-Column-Column1" style="width: 75%;"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Parameter</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_BodyCode">cachesession_cache_name</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The identifying name of the Distributed Cache, Cache Cluster, or PubSub+ Cache Instance to send the cache requests to.</p>
            <p class="Note">Specifying a Distributed Cache is the preferred method because specifying a PubSub+ Cache Instance bypasses redundancy and load balancing of cache requests.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_BodyCode">cachesession_max_age</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The maximum age (in seconds) of the messages to retrieve. Messages that have been cached for more than this amount of time are not retrieved.</p>
            <p class="Note">A value of 0 returns all possible messages for the topic, as defined by <code>cachesession_max_msgs</code>.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_BodyCode">cachesession_max_msgs</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The maximum number of cached messages to retrieve for any one topic. If more messages are cached for a topic than the maximum value, the newest messages are returned.</p>
            <p class="Note">A value of 0 retrieves all messages newer than <code>cachesession_max_age</code>.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
            <p class="Tbl_BodyCode">cachesession_reply_to</p>
          </td>
          <td class="TableStyle-Table_Num-BodyD-Column1-Body1">
            <p class="Tbl_Body">The reply-to topic for the cache request.</p>
            <p class="Tbl_Body">For most situations, it is recommended that this property be left unspecified so that the API uses the session P2P Reply To Topic. (For more information, refer to <code>session_p2p_in_use</code> in the <MadCap:xref href="../../API-Developer-Online-Ref-Documentation/c/index.html">C API Developer Reference</MadCap:xref>).</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p class="Tbl_BodyCode">cachesession_rr_timeout_ms</p>
          </td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p class="Tbl_Body">The amount of time (in milliseconds) to wait for a response to the cache request. This is a per‑request timeout where each request sent by the application could result in multiple underlying requests.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <h2 class="with-rule"><a name="solace-payload-configuration-properties"/>Solace Payload Configuration Properties</h2>
    <p>The  <code>mama.solace.payload.version</code> property is used to indicate at run-time which Solace-specific payload format to use for encoding and decoding messages. It can have a value of 1 (payload version 1 format) or 2 (use payload version 2 format). A value of 2 is the default, and if no value is explicitly set, a payload version 2 is used. </p>
    <p>The  <code>mama.solace.payload.version</code> property was introduced in Solace bridges for SolOpenMAMA 6.2.1.</p>
    <p class="Note">Solace bridges for OpenMAMA 6.2.1+ that communicate with one another must use the same value for the <code>mama.solace.payload.version</code> property because payload format conversion between bridges is not supported. Interaction between different payload versions is not supported and will result in unwanted behavior.</p>
    <p>As of SolOpenMAMA 7.5.0 release, the PubSub+ Cache instance handles only payload version 2 messages and drops payload version 1 messages. Clients can continue to use SolOpenMAMA versions before 7.5.0, with the exception that payload version 1 messages will be discarded in the PubSub+ Cache instance.</p>
    <h3><a name="payload-version-1"/>Payload Version 1</h3>
    <p>The payload version 1 format is backwards compatible with Solace bridges for OpenMAMA 2.4.1 and 6.1.0 for dates in the range January 1, 1970 to February 7, 2106.</p>
    <p>Additionally, this format supports dates from March 881 to October 3058, but only between Solace bridges for OpenMAMA 6.2.1 configured to run payload format version 1.</p>
    <p>When a date outside of the range March 881 to October 3058 is published from a Solace bridge for OpenMAMA 6.2.1 that uses payload format version 1, the publishing client will get a run-time error because those dates are not supported.</p>
    <p class="Note">Payload Version 1 is not fully compliant with OpenMAMA 6.2.1+ because wireline is not fully compatible, and, therefore, is not recommended for use with OpenMAMA 6.2.1+. If it is used, and a date between March 881 to January 1970 or  February 2106 to October 3058 is sent from a Solace bridge for OpenMAMA 6.2.1+ to a Solace bridge for OpenMAMA 2.4.1 or 6.1.0, the date will not cause any run-time issues, but will be received as invalid; that is, data integrity will be broken.</p>
    <h3><a name="payload-version-2"/>Payload Version 2</h3>
    <p>The payload version 2 format  supports the Extended Date Time Format introduced in OpenMAMA 6.2.1.</p>
    <p>Payload version 2 is not backward compatible with Solace bridges prior to 6.2.1.</p>
    <p class="Note">Interoperability between Solace bridges for OpenMAMA 6.2.1+ running different payload format versions is not supported.</p>
    <p>The table below summarizes how payload format version affects different versions of Solace bridges and their interoperability.</p>
    <p class="TblCaption">Payload Version Formats Specifications and Interoperability</p>
    <table style="width: 95%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">OpenMAMA Date Property</th>
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">
                        Payload Version 1 for OpenMAMA 2.4.1 &amp; 6.1.0</th>
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">
                        Payload Version 1                       for OpenMAMA 6.2.1</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">
                        Payload Version 2</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Seconds</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">0 to (2<sup>32</sup>-1) seconds<br/>(corresponds to January 1,1970 to February 7, 2106)</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">-(2<sup>36</sup>/2) to (2<sup>36</sup>/2 -1) seconds<br/>(corresponds to March 7, 881 to October 26, 3058; refer to <MadCap:xref href="Solace-Implementation-Considerations.htm#Datetime">Datetime</MadCap:xref> for details on implementation limitations)</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">-(2<sup>64</sup>/2) to (2<sup>64</sup>/2-1) seconds<br/>(as per OpenMAMA API; refer to <MadCap:xref href="Solace-Implementation-Considerations.htm#Datetime"> Datetime</MadCap:xref> for details on implementation limitations)</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Fraction of the second</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">0 to 1,048,576 microseconds(with microsecond precision)</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">0 to 999,999 microseconds(with microsecond precision, nanoseconds are rounded)</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">0 to (2<sup>32</sup>-1) nanoseconds(as per OpenMAMA API;with nanoseconds precision)</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Precision</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">0 to 15</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">0 to 15</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">0 to 255</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">Hints</td>
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">0 to 15</td>
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">0 to 15</td>
          <td class="TableStyle-Table_Num-BodyD-Column1-Body1">0 to 255</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">Wire Format</td>
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">Backwards compatible</td>
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">Partially backwards compatible</td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">Non-backwards compatible</td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
