<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1><a name="top"/>Redundancy Best Practices</h1>
    <p>This section describes considerations that should be made when your client applications are to be used with <MadCap:variable name="Product-Names.pubsub_brand_only"/> event brokers using redundancy features, such as high availability (HA). High availability involves using two brokers, a primary and a backup, that work together to provide seamless failover capabilities. For more information, see <MadCap:xref href="../../Features/HA-Redundancy/Redundancy-and-Fault-Tolerance-Overview.htm">Event Broker Redundancy for High Availability</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="HA-Values"/>High Availability Reconnection Settings</h2>
    <p>High Availability (HA) failovers typically take approximately 30 seconds. This duration accounts for the failover from one appliance to its mate within an HA redundant group. You should configure your applications to handle reconnection attempts to ensure minimal disruption.

		To provide a robust failover mechanism, <MadCap:variable name="Variables.CompanyName"/> recommends that applications set their reconnect duration to last at least 300 seconds or 5 minutes. This reconnect duration accommodates the HA failover process and helps manage any additional delays that might occur. To allow for a reconnect duration of 5 minutes for HA redundant event brokers, set the following session properties to these values:</p>
    <ul>
      <li>connect retries: 1</li>
      <li>reconnect retries: 20</li>
      <li>reconnect retry wait: 3,000 ms</li>
      <li>connect retries per host: 5</li>
    </ul>
    <p>For information about setting these properties on the client applications, see <MadCap:xref href="Configuring-Connection-T.htm#top">Configuring Connection Time-Outs and Retries</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="Host"/>Host Lists for Software Event Brokers</h2>
    <p>Applications using software event brokers should be configured with a host list of two addresses, one for the primary event broker and one for the backup event broker in the HA redundant group. The addresses can be either IP addresses or hostnames. Appliances in HA redundant groups share the same host address, so  configuring multiple hosts is not necessary.</p>
    <p>When the application attempts to connect to an event broker, it should follow the specified order in the host list. If the connection to the primary event broker fails, the client will automatically attempt to connect to the backup event broker after the specified number of retries per host. Therefore, setting a reconnect retries per host to a low value, such as 1, is recommended to facilitate quick failover.</p>
    <p>Host lists are crucial in an HA setup to ensure that client applications can seamlessly switch to the backup event broker in case of a primary broker failure. The failover mechanism should ensure minimal disruption, typically taking approximately 30 seconds for the backup broker to become active and ready to handle client connections.</p>
  </body>
</html>
