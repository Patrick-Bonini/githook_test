<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1>Creating Transacted Sessions</h1>
    <p>A client can create one or more Transacted Sessions within an existing Session. A Transacted Session always has exactly one active Transaction. Once a Transacted Session is created, a Transaction automatically begins within that Transacted Session.</p>
    <p>Within a Transacted Session, a client can create a maximum of one producer flow to publish messages (refer to <MadCap:xref href="Publishing-Messages-inT.htm">Publishing Messages in Transactions</MadCap:xref>) and a maximum of 256 consumer flows to consume messages (refer to <a href="Consuming-Msgs-in-Transactions.htm"><MadCap:xref href="Consuming-Msgs-in-Transactions.htm">Consuming Messages in Transactions</MadCap:xref></a>.</p>
    <h4>JCSMP </h4>
    <p>For JCSMP, a producer flow and/or a consumer flow must be specifically invoked within the Transacted Session.</p>
    <p>To invoke a producer flow, call <code>createProducer(...)</code>.</p>
    <p>To invoke a consumer flow, call <code>createConsumer(...)</code>.</p>
    <h4>Java RTO, C and .NET APIs</h4>
    <p>For the Java RTO, C, and .NET APIs, by default a Transacted Session automatically establishes a producer flow for a transacted session and lazily creates a Context‑bound message dispatcher thread for asynchronous message delivery. </p>
    <p>You can modify the default Transacted Session properties if:</p>
    <ul>
      <li>You do not want to allow publish operations in Transactions.</li>
      <li>You want to use a new transacted-session-bound message dispatcher when asynchronously receiving messages rather than the default Context-bound message dispatcher. (Using transacted‑session-bound message dispatcher threads can possibly improve performance, but they add programming and debugging complexity.)</li>
      <li>you want to change the timeout value (in milliseconds) to wait for response from the event broker when invoking transacted session operations such as commit or rollback.</li>
    </ul>
    <p>The other Transacted Session property that you can modify is the amount of time (in milliseconds) to wait for a response from the event broker when invoking Transacted Session operations such as commit or rollback.</p>
    <table class="TableStyle-Table_Num" style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');width: 95%;" cellspacing="0">
      <caption valign="top" style="padding-bottom: 3pt;">
        <p class="TblCaption">To Create a Transacted Session</p>
      </caption>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1"><MadCap:variable name="Product-Names.pubsub_brand_only"/> Messaging API</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">
                       Use
                    </th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">JCSMP</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_BodyCode">JCSMPSession.createTransactedSession()</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Java RTO</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_BodyCode">SessionHandle.<br/>createTransactedSessionForHandle(...)</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">C</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_BodyCode">solClient_session_<br/>createTransactedSession(...)</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p class="Tbl_Body">.NET</p>
          </td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p class="Tbl_BodyCode">ISession.createTransactedSession(...)</p>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
