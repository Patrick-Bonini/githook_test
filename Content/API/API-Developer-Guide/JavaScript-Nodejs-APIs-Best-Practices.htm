<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>JavaScript &amp; Node.js APIs Best Practices</h1>
    <h2 class="with-rule"><a name="Do"/>Do Not Block in Event Handlers and Listeners</h2>
    <p>Since JavaScript is single threaded, applications must not block in and should return as quickly as possible from message receive, event, and timer handler or listener code.</p>
    <h2 class="with-rule"><a name="Behavior"/>Behavior Profiles</h2>
    <p>Generally, Solace recommends using the latest version's factory profile when writing a new application. When modifying an existing application to use a new behavior profile, the differences between behavior profiles should be considered.</p>
    <p>For more information on the JavaScript and Node.js APIs behavior profiles, refer to <MadCap:xref href="Initializing-and-Monitoring-APIs.htm">Initializing and Monitoring APIs</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="Secure"/>Secure Connections Support</h2>
    <h3><a name="JavaScri"/>JavaScript API</h3>
    <p>When browser and web applications are using WSS or HTTPS secure connections, a client certificate is requested from the event broker during the SSL handshake. In order for connections to succeed, browsers may need to prompt the user which client certificates to use, if any, before connecting to a session. To facilitate this, the following steps are required:</p>
    <ol>
      <li>Define and load an invisible <code>iframe</code> with a target of <code>https://&lt;router-ip&gt;/crossdomain.xml</code> before connecting.</li>
      <li>Wait for the <code>iframe</code> to load successfully.</li>
      <li>Continue connecting the session.</li>
    </ol>
    <p>For details, refer to the SecureSessions sample and locate the <code>iframe</code> related code in both the <code>html</code> and <code>js</code> sources.</p>
    <p>If client certificate authentication is used, the appropriate client certificate must be installed in the browser.</p>
    <h3><a name="Node.js"/>Node.js API</h3>
    <p>To configure secure connections, refer to <MadCap:xref href="Creating-Secure-Sessions.htm">Creating Secure Sessions</MadCap:xref>.</p>
    <p>If client certificate authentication is used, refer to <MadCap:xref href="Defining-Client-Authentication.htm">Defining Client Authentication Info</MadCap:xref>.</p>
    <p>Â </p>
  </body>
</html>
