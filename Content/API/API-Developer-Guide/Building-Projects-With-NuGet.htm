<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Building .NET Projects with NuGet</h1>
    <p>This section provides information on how to consume the Solace .NET messaging API NuGet package using the NuGet Visual Studio extension version v3.5.0 or NuGet Commandline v3.5.0.</p>
    <p>NuGet is a package manager for the Microsoft development platform, that is distributed as a Microsoft Visual Studio extension (<code>NuGet.Tools.vsix</code>) and is pre-installed starting with Microsoft Visual Studio 2012. If you download the Windows x86 Command line distribution (<code>nuget.exe</code>), you can also use NuGet from console by running it directly from the Windows Command Processor or by using the Package Manager Console.</p>
    <p>From version 10.0.0 on, the Solace .NET messaging API (also referred to as SolClient for .NET) is also available as a NuGet package. The SolClient for .NET NuGet package can be consumed directly from <a href="http://nuget.org/" class="link-internal">nuget.org</a>, published to and then consumed from a corporate repository that supports the NuGet packaging format, or copied to a local directory and consumed from there.</p>
    <p>The following section provides information on how to consume the Solace .NET messaging API NuGet package using the NuGet Visual Studio extension version v3.5.0 or NuGet Commandline v3.5.0.</p>
    <p class="Note" MadCap:autonum="&lt;b&gt;:  &lt;/b&gt;">For general information on how to consume NuGet packages, see Microsoft <a href="https://docs.microsoft.com/en-gb/nuget/consume-packages/overview-and-workflow" class="link-internal">NuGet Package Consumption Workflow</a> Web page.</p>
    <h2 class="with-rule"><a name="NuGet-upgrade"/>Upgrading Projects to NuGet</h2>
    <p>Before upgrading an existing Visual Studio project to consume the SolClient for .NET NuGet package, remove any post-build events that copy Solace C API libraries into the target directory. Failing to do this will result in the loading of wrong Solace C API libraries at runtime.</p>
    <p>Correct libraries from the SolClient for .NET NuGet will be automatically copied to the target directory at build time.</p>
    <h2 class="with-rule"><a name="NuGet-VSE"/>Consuming Using NuGet Visual Studio Extension</h2>
    <ol>
      <li>Specify the package source.
        <p>You must know the location from which the SolClient for .NET package will be consumed: nuget.org, an internal NuGet repository, or a local file. Knowing the consuming location allows you to select the package source from the NuGet Visual Studio extension (VSE) GUI.</p><p>When the package source is  specified, the <code>SolaceSystems.Solclient.Messaging</code> package will display in the Browse tab of the NuGet VSE.</p><p><img src="Images/nuget-browse-page.png" alt="NuGet Browse Tab" MadCap:mediastyle="@media print { max-width: 650px; }" style="max-width: 650px;"/></p></li>
      <li>Click the “Install” button in the NuGet VSE, then accept the license terms.
                <p>When the installation finishes, the <code>SolaceSystems.Solclient.Messaging</code> package appears on the Installed tab of the NuGet VSE, and it is added to the list of your project references, as shown below.</p><p><img src="Images/nuget-project-refs.png" alt="NuGet Project References" MadCap:mediastyle="@media print { max-width: 250px; }" style="max-width: 250px;"/></p><p>At this stage, the SolClient for .NET NuGet package has been successfully consumed, and it should be possible to use the <code>SolaceSystems.Solclient.Messaging namespace</code> in a program.</p><p><img src="Images/nuget-api-in-project.png" MadCap:mediastyle="@media print { max-width: 350px; }" alt="" style="max-width: 350px;"/></p></li>
    </ol>
    <h2 class="with-rule"><a name="NuGet-CLI"/>Consuming Using the NuGet Command Line</h2>
    <p>This section provides examples of using the NuGet command line that is embedded into the NuGet Visual Studio extension (the Package Manager Console) and the standalone <code>nuget.exe</code>.</p>
    <h3><a name="Package"/>Package Manager Console</h3>
    <ol>
      <li>To use the Package Manager Console on the NuGet Visual Studio extension, activate its window.<p>Select  <b>View</b> &gt; <b>Other Windows</b> &gt; <b>Package Manager Console</b>, and switch the input focus to that window.</p></li>
      <li>Select the proper Package source and  Default project.<p><img src="Images/package-manager-console.png" alt="Package Monitor Console" MadCap:mediastyle="@media print { max-width: 500px; }" style="max-width: 500px;"/></p></li>
      <li>At the command line prompt, enter the <code>Install-Package SolaceSystems.Solclient.Messaging</code> command:<p class="Code">PM&gt; Install-Package SolaceSystems.Solclient.Messaging<br/>Attempting to gather dependency information for package 'SolaceSystems.Solclient.Messaging.10.0.0' with respect to project 'ConsoleApplication1', targeting '.NETFramework,Version=v4.5'<br/>Attempting to resolve dependencies for package 'SolaceSystems.Solclient.Messaging.10.0.0' with DependencyBehavior 'Lowest'<br/>Resolving actions to install package 'SolaceSystems.Solclient.Messaging.10.0.0'<br/>Resolved actions to install package 'SolaceSystems.Solclient.Messaging.10.0.0'<br/>Adding package 'SolaceSystems.Solclient.Messaging.10.0.0' to folder 'C:\Projects\ ConsoleApplication1\packages'<br/>Added package 'SolaceSystems.Solclient.Messaging.10.0.0' to folder 'C:\Projects\ ConsoleApplication1\packages'<br/>Added package 'SolaceSystems.Solclient.Messaging.10.0.0' to 'packages.config'<br/>Successfully installed 'SolaceSystems.Solclient.Messaging 10.0.0' to ConsoleApplication1</p></li>
    </ol>
    <p class="Note" MadCap:autonum="&lt;b&gt;:  &lt;/b&gt;">For more details, see the Microsoft <a href="https://docs.microsoft.com/en-us/nuget/tools/package-manager-console" class="link-internal">Package Manager Console</a> tools page.</p>
    <h3><a name="Standalo"/>Standalone nuget.exe</h3>
    <p>To use a standalone nuget.exe, you must specify a proper package source as a parameter.
                <p class="Note" MadCap:autonum="&lt;b&gt;:  &lt;/b&gt;">It is also possible to describe the source in the <code>%AppData%\NuGet\NuGet.config</code> file, but this is an advanced option for package consumption and it is recommended only when other methods listed above do not produce the intended results. For more details see the Microsoft <a href="https://docs.microsoft.com/en-gb/nuget/consume-packages/configuring-nuget-behavior" class="link-internal">Configuring NuGet Behavior</a> Web page.</p><p>If the package source location is <code>C:\Projects</code>, the command will be:</p><p class="Code">C:\Projects\ConsoleApplication1&gt;nuget.exe install SolaceSystems.Solclient.Messaging –Source C:\Projects<br/>Feeds used:<br/>C:\Projects<br/>Attempting to gather dependency information for package 'SolaceSystems.Solclient.Messaging.10.0.0' with respect to project 'C:\Projects\ ConsoleApplication1', targeting 'Any,Version=v0.0'<br/>Gathering dependency information took 14.1 ms<br/>Attempting to resolve dependencies for package 'SolaceSystems.Solclient.Messaging.10.0.0' with DependencyBehavior 'Lowest'<br/>Resolving dependency information took 0 ms<br/>Resolving actions to install package 'SolaceSystems.Solclient.Messaging.10.0.0'<br/>Resolved actions to install package 'SolaceSystems.Solclient.Messaging.10.0.0'<br/>Retrieving package 'SolaceSystems.Solclient.Messaging 10.0.0' from 'C:\Projects'.<br/>Adding package 'SolaceSystems.Solclient.Messaging.10.0.0' to folder 'C:\Projects\ConsoleApplication1'<br/>Added package 'SolaceSystems.Solclient.Messaging.10.0.0' to folder 'C:\Projects\ConsoleApplication1'<br/>Successfully installed 'SolaceSystems.Solclient.Messaging 10.0.0' to C:\Projects\ConsoleApplication1<br/>Executing nuget actions took 198.63 ms<br/>C:\Projects\ConsoleApplication1&gt;</p><p>Notice that the install command does not modify a project file or the <code>packages.config</code> file, it only adds packages to disk but does not change a projectʼs dependency.</p></p>
    <p class="Tip" MadCap:autonum="&lt;b&gt;:  &lt;/b&gt;">To add <code>SolaceSystems.Solclient.Messaging</code> as a dependency, either add it to a project through the Package Manager UI or Console in Visual Studio, or modify <code>packages.config</code> and then run the install command.</p>
    <p class="Note" MadCap:autonum="&lt;b&gt;:  &lt;/b&gt;">For more details on using the standalone <code>nuget.exe</code>, see the Microsoft  <a href="http://docs.nuget.org/docs/reference/command-line-reference" class="link-internal">NuGet CLI Reference</a> Web page.</p>
  </body>
</html>
