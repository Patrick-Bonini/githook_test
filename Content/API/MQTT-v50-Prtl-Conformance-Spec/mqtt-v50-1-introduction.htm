<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/Stylesheets/mqtt_311_prtcl.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <h1><a name="top"/>1 Introduction</h1>
    <div class="div_2">
      <p>
        <b>Solace Implementation Note</b>
      </p>
      <p class="p_1">This document provides an annotated version of the full text of the MQTT v5.0 functional specification. MQTT v5.0 is supported by the Solace PubSub+ event brokers running Solace PubSub+ software version 9.9 or greater acting in the role of an MQTT server. The text of the protocol specification is annotated with boxes like this one, which indicate any deviations, limitations, or choices made in the “SHOULD” and “MAY” clauses for the Solace implementation.</p>
      <p class="p_1">Only exceptions to the MQTT v5.0 specification are highlighted – meaning that unless indicated otherwise, the Solace server conforms to each section of the specification.</p>
      <p>The target audience for these annotations are application developers developing MQTT clients for use with a Solace MQTT appliance as their MQTT server.</p>
      <p class="p_1">A summary of the functionality supported by Solace is below. Solace PubSub+ software has only a few exceptions from what is required in the MQTT v5.0 specification.</p>
      <ol start="1" class="ol_2">
        <li class="li_1" value="1">Server-side role only</li>
        <li value="2">QoS 0 and QoS 1 messages are fully supported. QoS 2 messages from clients are accepted but are treated as QoS 1 messages. QoS 2 subscriptions from clients are accepted but are downgraded to QoS 1. Both of these behaviors are allowed by the specification.</li>
        <li class="li_1" value="3">Will messages are supported with certain limitations.</li>
        <li class="li_1">Qos 1 shared subscriptions are downgraded to QoS 0.</li>
      </ol>
    </div>
    <h2>1.0 Intellectual property
rights policy</h2>
    <p class="MsoNormal">This specification is provided under the <a href="https://www.oasis-open.org/policies-guidelines/ipr#Non-Assertion-Mode">Non-Assertion</a>
Mode of the <a href="https://www.oasis-open.org/policies-guidelines/ipr">OASIS
IPR Policy</a>, the mode chosen when the Technical Committee was established. For
information on whether any patents have been disclosed that may be essential to
implementing this specification, and any offers of patent licensing terms,
please refer to the Intellectual Property Rights section of the TC’s web page (<a href="https://www.oasis-open.org/committees/mqtt/ipr.php">https://www.oasis-open.org/committees/mqtt/ipr.php</a>).</p>
    <h2><a name="1.1-organization"/>1.1 Organization of the MQTT specification</h2>
    <p class="MsoNormal">The specification is split into seven chapters:</p>
    <ul>
      <li>
        <MadCap:xref href="#top">1 Introduction</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="mqtt-v50-2-control-packet-format.htm">2 MQTT
Control Packet format</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="mqtt-v50-3-control-packets.htm">3 MQTT
Control Packets</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="mqtt-v50-4-operational-behavior.htm">4 Operational behavior</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="mqtt-v50-5-security.htm">5 Security (non-normative)</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="mqtt-v50-7-conformance.htm">7 Conformance</MadCap:xref>
      </li>
    </ul>
    <h2><a name="1.2-terminology"/>1.2
Terminology</h2>
    <p class="MsoNormal"><a name="term-keywords"/>The key
words "MUST", "MUST NOT", "REQUIRED",
"SHALL", "SHALL NOT", "SHOULD", "SHOULD
NOT", "RECOMMENDED", "MAY", and "OPTIONAL"
in this specification are to be interpreted as described in IETF RFC 2119 <a href="#RFC2119" class="link-internal">[RFC2119]</a>, except where they appear in text that is marked
as non-normative.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="term-network-connection"/>
      <span class="Refterm">Network
Connection:</span>
    </p>
    <p class="MsoNormal">A construct provided by the underlying
transport protocol that is being used by MQTT.
        </p>
    <p>It connects the Client to the Server.</p>
    <p>It provides the means to send an ordered, lossless, stream of bytes in both
directions.</p>
    <p class="MsoNormal">Refer to <MadCap:xref href="mqtt-v50-4-operational-behavior.htm#4.2-network-connections">4.2 Network Connections</MadCap:xref> for non-normative examples.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="term-application-message"/>
      <span class="Refterm">Application
Message:</span>
    </p>
    <p class="MsoNormal">The data carried by the MQTT protocol across the network for
the application. When an Application Message is transported by MQTT it contains
payload data, a Quality of Service (QoS), a collection of Properties, and a
Topic Name.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="term-client"/>
      <b>Client:</b>
    </p>
    <p class="MsoNormal">A program or device that uses MQTT. A Client:</p>
    <ul>
      <li>opens the Network Connection to the Server</li>
      <li>publishes Application Messages that other Clients might be
interested in.</li>
      <li>subscribes to request Application Messages that it is interested
in receiving.</li>
      <li>unsubscribes to remove a request for Application Messages.</li>
      <li>closes the Network Connection to the Server.</li>
    </ul>
    <p> </p>
    <p class="MsoNormal">
      <a name="term-server"/>
      <b>Server:</b>
    </p>
    <p class="MsoNormal">A program or device that acts as an intermediary between
Clients which publish Application Messages and Clients which have made
Subscriptions. A Server:</p>
    <ul>
      <li>accepts Network Connections from Clients.</li>
      <li>accepts Application Messages published by Clients.</li>
      <li>processes Subscribe and Unsubscribe requests from Clients.</li>
      <li>forwards Application Messages that match Client Subscriptions.</li>
      <li>closes the Network Connection from the Client.</li>
    </ul>
    <p> </p>
    <p class="MsoNormal">
      <a name="term-session"/>
      <b>Session:</b>
    </p>
    <p class="MsoNormal">A stateful interaction between a Client and a Server. Some
Sessions last only as long as the Network Connection, others can span multiple
consecutive Network Connections between a Client and a Server.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="term-subscription"/>
      <b>Subscription:</b>
    </p>
    <p class="MsoNormal">A Subscription comprises a Topic Filter and a maximum QoS. A
Subscription is associated with a single Session. A Session can contain more
than one Subscription. Each Subscription within a Session has a different Topic
Filter.</p>
    <p class="MsoNormal" style="text-align: justify;"> </p>
    <p class="MsoNormal">
      <a name="term-shared-subscription"/>
      <b>Shared Subscription:</b>
    </p>
    <p class="MsoNormal">A Shared Subscription comprises a Topic Filter and a maximum
QoS. A Shared Subscription can be associated with more than one Session to
allow a wider range of message exchange patterns. An Application Message that
matches a Shared Subscription is only sent to the Client associated with one of
these Sessions. A Session can subscribe to more than one Shared Subscription
and can contain both Shared Subscriptions and Subscriptions which are not
shared.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="term-wildcard-subscription"/>
      <b>Wildcard Subscription:</b>
    </p>
    <p class="MsoNormal">A Wildcard Subscription is a Subscription with a Topic
Filter containing one or more wildcard characters. This allows the subscription
to match more than one Topic Name. Refer to <a href="mqtt-v50-4-operational-behavior.htm#4.7-topic-names-topic-filters" class="link-internal">section
4.7</a> for a description of wildcard characters in a Topic Filter.</p>
    <p class="MsoNormal" style="text-align: justify;"> </p>
    <p class="MsoNormal">
      <a name="term-topic-name"/>
      <b>Topic Name:</b>
    </p>
    <p class="MsoNormal">The label attached to an Application Message which is
matched against the Subscriptions known to the Server.</p>
    <p class="MsoNormal" style="text-align: justify;"> </p>
    <p class="MsoNormal">
      <a name="term-topic-filter"/>
      <b>Topic Filter:</b>
    </p>
    <p class="MsoNormal">An expression contained in a Subscription to indicate an
interest in one or more topics. A Topic Filter can include wildcard characters.</p>
    <p class="MsoNormal" style="text-align: justify;"> </p>
    <p class="MsoNormal">
      <a name="term-mqtt-control-packet"/>
      <b>MQTT Control Packet:</b>
    </p>
    <p class="MsoNormal">A packet of information that is sent across the Network
Connection. The MQTT specification defines fifteen different types of MQTT Control
Packet, for example the PUBLISH packet is used to convey Application Messages.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="term-malformed-packet"/>
      <b>Malformed Packet:</b>
    </p>
    <p class="MsoNormal">A control packet that cannot be parsed according to this
specification. Refer to <a href="mqtt-v50-4-operational-behavior.htm#4.13-handling-errors" class="link-internal">section 4.13</a> for
information about error handling.</p>
    <p> </p>
    <p class="MsoNormal">
      <a name="term-protocol-error"/>
      <b>Protocol Error:</b>
    </p>
    <p class="MsoNormal">An error that is detected after the packet has been parsed
and found to contain data that is not allowed by the protocol or is
inconsistent with the state of the Client or Server. Refer to <a href="mqtt-v50-4-operational-behavior.htm#4.13-handling-errors" class="link-internal">section 4.13</a> for information about error handling.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="term-will-message"/>
      <b>Will Message:</b>
    </p>
    <p class="MsoNormal">An Application Message which is published by the Server
after the Network Connection is closed in cases where the Network Connection is
not closed normally. Refer to <a href="mqtt-v50-3-control-packets.htm#3.1.2.5-Will-Flag" class="link-internal">section 3.1.2.5</a> for
information about Will Messages.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="term-disallowed-unicode-code-point"/>
      <b>Disallowed Unicode code point:</b>
    </p>
    <p class="MsoNormal">The set of Unicode Control Codes and Unicode Noncharacters
which should not be included in a UTF-8 Encoded String. Refer to <a href="#1.5.4-utf-8-encoded-string" class="link-internal">section 1.5.4</a> for
more information about the Disallowed Unicode code points.</p>
    <h2><a name="1.3-normative-references"/>1.3 Normative references</h2>
    <p class="MsoNormal">
      <a name="RFC2119"/>
      <b>[RFC2119]</b>
    </p>
    <p class="MsoNormal">Bradner, S., "Key words for use in RFCs to Indicate
Requirement Levels", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997, </p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc2119">http://www.rfc-editor.org/info/rfc2119</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC3629"/>
      <b>[RFC3629]</b>
    </p>
    <p class="MsoNormal">Yergeau, F., "UTF-8, a transformation format of ISO
10646", STD 63, RFC 3629, DOI 10.17487/RFC3629, November 2003,</p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc3629">http://www.rfc-editor.org/info/rfc3629</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC6455"/>
      <b>[RFC6455]</b>
    </p>
    <p class="MsoNormal">Fette, I. and A. Melnikov, "The WebSocket Protocol", RFC 6455, DOI 10.17487/RFC6455, December 2011,</p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc6455">http://www.rfc-editor.org/info/rfc6455</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="Unicode"/>
      <b>[Unicode]</b>
    </p>
    <p class="MsoNormal">The Unicode Consortium. The Unicode Standard, </p>
    <p class="MsoNormal">
      <a href="http://www.unicode.org/versions/latest/">http://www.unicode.org/versions/latest/</a>
    </p>
    <h2><a name="_Toc462729063"/>1.4 Non-normative references</h2>
    <p class="MsoNormal">
      <a name="RFC793"/>
      <b>[RFC0793]</b>
    </p>
    <p class="MsoNormal">Postel, J., "Transmission Control Protocol", STD
7, RFC 793, DOI 10.17487/RFC0793, September 1981, <a href="http://www.rfc-editor.org/info/rfc793">http://www.rfc-editor.org/info/rfc793</a></p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC5246"/>
      <b>[RFC5246]</b>
    </p>
    <p class="MsoNormal">Dierks, T. and E. Rescorla, "The Transport Layer
Security (TLS) Protocol Version 1.2", RFC 5246, DOI 10.17487/RFC5246,
August 2008, </p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc5246">http://www.rfc-editor.org/info/rfc5246</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="AES"/>
      <b>[AES]</b>
    </p>
    <p class="MsoNormal">Advanced Encryption Standard (AES) (FIPS PUB 197).</p>
    <p class="MsoNormal">
      <a href="https://csrc.nist.gov/csrc/media/publications/fips/197/final/documents/fips-197.pdf">https://csrc.nist.gov/csrc/media/publications/fips/197/final/documents/fips-197.pdf</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="CHACHA20"/>
      <b>[CHACHA20]</b>
    </p>
    <p class="MsoNormal">
      <span lang="EN">ChaCha20 and Poly1305 for IETF Protocols</span>
    </p>
    <p class="MsoNormal">
      <a href="https://tools.ietf.org/html/rfc7539">
        <span lang="EN">https://tools.ietf.org/html/rfc7539</span>
      </a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="FIPS1402"/>
      <b>[FIPS1402]</b>
    </p>
    <p class="MsoNormal">Security Requirements for Cryptographic Modules (FIPS PUB
140-2)</p>
    <p class="MsoNormal">
      <a href="https://csrc.nist.gov/csrc/media/publications/fips/140/2/final/documents/fips1402.pdf">https://csrc.nist.gov/csrc/media/publications/fips/140/2/final/documents/fips1402.pdf</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="IEEE8021AR"/>
      <b>[IEEE 802.1AR]</b>
    </p>
    <p class="MsoNormal">IEEE Standard for Local and metropolitan area networks -
Secure Device Identity</p>
    <p class="MsoNormal">
      <a href="http://standards.ieee.org/findstds/standard/802.1AR-2009.html">http://standards.ieee.org/findstds/standard/802.1AR-2009.html</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="ISO29192"/>
      <b>[ISO29192]</b>
    </p>
    <p class="MsoNormal">ISO/IEC 29192-1:2012 Information technology -- Security
techniques -- Lightweight cryptography -- Part 1: General</p>
    <p class="MsoNormal">
      <a href="https://www.iso.org/standard/56425.html">https://www.iso.org/standard/56425.html</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="MQTTNIST"/>
      <b>[MQTT NIST]</b>
    </p>
    <p class="MsoNormal">MQTT supplemental publication, MQTT and the NIST Framework
for Improving Critical Infrastructure Cybersecurity</p>
    <p class="MsoNormal">
      <a href="http://docs.oasis-open.org/mqtt/mqtt-nist-cybersecurity/v1.0/mqtt-nist-cybersecurity-v1.0.html">http://docs.oasis-open.org/mqtt/mqtt-nist-cybersecurity/v1.0/mqtt-nist-cybersecurity-v1.0.html</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="MQTTV311"/>
      <b>[MQTTV311]</b>
    </p>
    <p class="MsoNormal">MQTT V3.1.1 Protocol Specification</p>
    <p class="MsoNormal">
      <a href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html">http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html</a>
    </p>
    <p>
        </p>
    <p class="MsoNormal">
      <a name="ISO20922"/>
      <b>[ISO20922]</b>
    </p>
    <p class="MsoNormal">MQTT V3.1.1
ISO Standard (ISO/IEC 20922:2016)</p>
    <p class="MsoNormal">
      <a href="https://www.iso.org/standard/69466.html">https://www.iso.org/standard/69466.html</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="NISTCSF"/>
      <b>[NISTCSF]</b>
    </p>
    <p class="MsoNormal">Improving Critical Infrastructure Cybersecurity Executive
Order 13636</p>
    <p class="MsoNormal">
      <a href="https://www.nist.gov/sites/default/files/documents/itl/preliminary-cybersecurity-framework.pdf">https://www.nist.gov/sites/default/files/documents/itl/preliminary-cybersecurity-framework.pdf</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="NIST7628"/>
      <b>[NIST7628]</b>
    </p>
    <p class="MsoNormal">NISTIR 7628 Guidelines for Smart Grid Cyber Security Catalogue</p>
    <p class="MsoNormal">
      <a href="https://www.nist.gov/sites/default/files/documents/smartgrid/nistir-7628_total.pdf">https://www.nist.gov/sites/default/files/documents/smartgrid/nistir-7628_total.pdf</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="NSAB"/>
      <b>[NSAB]</b>
    </p>
    <p class="MsoNormal">NSA Suite B Cryptography</p>
    <p class="MsoNormal">
      <a href="http://www.nsa.gov/ia/programs/suiteb_cryptography/">http://www.nsa.gov/ia/programs/suiteb_cryptography/</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="PCIDSS"/>
      <b>[PCIDSS]</b>
    </p>
    <p class="MsoNormal">PCI-DSS Payment Card Industry Data Security Standard</p>
    <p class="MsoNormal">
      <a href="https://www.pcisecuritystandards.org/pci_security/">https://www.pcisecuritystandards.org/pci_security/</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC1928"/>
      <b>[RFC1928]</b>
    </p>
    <p class="MsoNormal">Leech, M., Ganis, M., Lee, Y., Kuris, R., Koblas, D., and L.
Jones, "SOCKS Protocol Version 5", RFC 1928, DOI 10.17487/RFC1928,
March 1996, </p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc1928">http://www.rfc-editor.org/info/rfc1928</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC4511"/>
      <b>[RFC4511]</b>
    </p>
    <p class="MsoNormal">Sermersheim, J., Ed., "Lightweight Directory Access
Protocol (LDAP): The Protocol", RFC 4511, DOI 10.17487/RFC4511, June 2006,
</p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc4511">http://www.rfc-editor.org/info/rfc4511</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC5280"/>
      <b>[RFC5280]</b>
    </p>
    <p class="MsoNormal">Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley,
R., and W. Polk, "Internet X.509 Public Key Infrastructure Certificate and
Certificate Revocation List (CRL) Profile", RFC 5280, DOI 10.17487/RFC5280,
May 2008, </p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc5280">http://www.rfc-editor.org/info/rfc5280</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC6066"/>
      <b>[RFC6066]</b>
    </p>
    <p class="MsoNormal">Eastlake 3rd, D., "Transport Layer Security (TLS)
Extensions: Extension Definitions", RFC 6066, DOI 10.17487/RFC6066,
January 2011,</p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc6066">http://www.rfc-editor.org/info/rfc6066</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC6749"/>
      <b>[RFC6749]</b>
    </p>
    <p class="MsoNormal">Hardt, D., Ed., "The OAuth 2.0 Authorization
Framework", RFC 6749, DOI 10.17487/RFC6749, October 2012, </p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc6749">http://www.rfc-editor.org/info/rfc6749</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC6960"/>
      <b>[RFC6960]</b>
    </p>
    <p class="MsoNormal">Santesson, S., Myers, M., Ankney, R., Malpani, A., Galperin,
S., and C. Adams, "X.509 Internet Public Key Infrastructure Online
Certificate Status Protocol - OCSP", RFC 6960, DOI 10.17487/RFC6960, June
2013,</p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc6960">http://www.rfc-editor.org/info/rfc6960</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="SARBANES"/>
      <b>[SARBANES]</b>
    </p>
    <p class="MsoNormal">Sarbanes-Oxley Act of 2002.</p>
    <p class="MsoNormal">
      <a href="http://www.gpo.gov/fdsys/pkg/PLAW-107publ204/html/PLAW-107publ204.htm">http://www.gpo.gov/fdsys/pkg/PLAW-107publ204/html/PLAW-107publ204.htm</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="USEUSAFEHARB"/>
      <a name="USEUPRIVSH"/>
      <b>[USEUPRIVSH]</b>
    </p>
    <p class="MsoNormal">U.S.-EU Privacy Shield Framework</p>
    <p class="MsoNormal">
      <a href="https://www.privacyshield.gov">https://www.privacyshield.gov</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC3986"/>
      <b>[RFC3986]</b>
    </p>
    <p class="MsoNormal">Berners-Lee, T., Fielding, R., and L. Masinter,
"Uniform Resource Identifier (URI): Generic Syntax", STD 66, RFC
3986, DOI 10.17487/RFC3986, January 2005, </p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc3986">http://www.rfc-editor.org/info/rfc3986</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC1035"/>
      <b>[RFC1035]</b>
    </p>
    <p class="MsoNormal">Mockapetris, P., "Domain names - implementation and
specification", STD 13, RFC 1035, DOI 10.17487/RFC1035, November 1987,</p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc1035">http://www.rfc-editor.org/info/rfc1035</a>
    </p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">
      <a name="RFC2782"/>
      <b>[RFC2782]</b>
    </p>
    <p class="MsoNormal">Gulbrandsen, A., Vixie, P., and L. Esibov, "A DNS RR
for specifying the location of services (DNS SRV)", RFC 2782, DOI
10.17487/RFC2782, February 2000,</p>
    <p class="MsoNormal">
      <a href="http://www.rfc-editor.org/info/rfc2782">http://www.rfc-editor.org/info/rfc2782</a>
    </p>
    <h2><a name="1.5-data-representation"/>1.5 Data representation</h2>
    <h3><a name="1.5.1-bits"/>1.5.1 Bits</h3>
    <p class="MsoNormal">Bits in a byte are labelled 7 to 0. Bit number 7 is the most
significant bit, the least significant bit is assigned bit number 0.</p>
    <h3><a name="1.5.2-two-byte-integer"/>1.5.2 Two Byte Integer</h3>
    <p class="MsoNormal">Two Byte Integer data values are 16-bit unsigned integers in
big-endian order: the high order byte precedes the lower order byte. This means
that a 16-bit word is presented on the network as Most Significant Byte (MSB),
followed by Least Significant Byte (LSB).</p>
    <h3><a name="1.5.3-four-byte-integer"/>1.5.3 Four Byte Integer</h3>
    <p class="MsoNormal">Four Byte Integer data values are 32-bit unsigned integers
in big-endian order: the high order byte precedes the successively lower order
bytes. This means that a 32-bit word is presented on the network as Most
Significant Byte (MSB), followed by the next most Significant Byte (MSB),
followed by the next most Significant Byte (MSB), followed by Least Significant
Byte (LSB). </p>
    <h3><a name="1.5.4-utf-8-encoded-string"/>1.5.4 UTF-8 Encoded String</h3>
    <p class="MsoNormal">Text fields within the MQTT Control Packets described later
are encoded as UTF-8 strings. UTF-8 <a href="#RFC3629" class="link-internal">[RFC3629]</a> is an
efficient encoding of Unicode <a href="#Unicode" class="link-internal">[Unicode]</a> characters that
optimizes the encoding of ASCII characters in support of text-based
communications.</p>
    <p class="MsoNormal">Each of these strings is prefixed with a Two Byte Integer
length field that gives the number of bytes in a UTF-8 encoded string itself,
as illustrated in <a href="#_Figure_1.1_Structure" class="link-internal">Figure 1.1 Structure of UTF-8 Encoded
Strings</a> below. Consequently, the maximum size of a UTF-8 Encoded String is
65,535 bytes.</p>
    <p class="MsoNormal">Unless stated otherwise all UTF-8
encoded strings can have any length in the range 0 to 65,535 bytes.</p>
    <p class="MsoNormal"> </p>
    <p class="TblCaption"><a name="_Figure_1.1_Structure"/>Figure
1‑1 Structure of UTF-8 Encoded Strings</p>
    <table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse;border: none;">
      <tr>
        <td width="213" valign="top" style="width: 159.6pt;border: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>Bit</b>
          </p>
        </td>
        <td width="53" valign="top" style="width: 39.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>7</b>
          </p>
        </td>
        <td width="53" valign="top" style="width: 39.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>6</b>
          </p>
        </td>
        <td width="53" valign="top" style="width: 39.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>5</b>
          </p>
        </td>
        <td width="53" valign="top" style="width: 39.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>4</b>
          </p>
        </td>
        <td width="53" valign="top" style="width: 39.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>3</b>
          </p>
        </td>
        <td width="53" valign="top" style="width: 39.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>2</b>
          </p>
        </td>
        <td width="53" valign="top" style="width: 39.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>1</b>
          </p>
        </td>
        <td width="53" valign="top" style="width: 39.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>0</b>
          </p>
        </td>
      </tr>
      <tr>
        <td width="213" valign="top" style="width: 159.6pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal">byte 1</p>
        </td>
        <td width="426" colspan="8" valign="top" style="width: 319.2pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">String length MSB</p>
        </td>
      </tr>
      <tr>
        <td width="213" valign="top" style="width: 159.6pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal">byte 2</p>
        </td>
        <td width="426" colspan="8" valign="top" style="width: 319.2pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">String length LSB</p>
        </td>
      </tr>
      <tr>
        <td width="213" valign="top" style="width: 159.6pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal">byte 3 ….</p>
        </td>
        <td width="426" colspan="8" valign="top" style="width: 319.2pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">UTF-8 encoded
 character data, if length &gt; 0.</p>
        </td>
      </tr>
    </table>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal"><span style="background: yellow;">The character data in a
UTF-8 Encoded String MUST be well-formed UTF-8 as defined by the Unicode
specification </span><a href="#Unicode" class="link-internal">[Unicode]</a><span style="background: yellow;"> and restated in RFC 3629 </span><a href="#RFC3629" class="link-internal">[RFC3629]</a><span style="background: yellow;">. 
In particular, the character data MUST NOT include encodings of code points
between U+D800 and U+DFFF</span><span style="color: red;">[MQTT-1.5.4-1]</span>.If the Client or Server
receives an MQTT Control Packet containing ill-formed UTF-8 it is a Malformed
Packet. Refer to <a href="mqtt-v50-4-operational-behavior.htm#4.13-handling-errors" class="link-internal">section 4.13</a> for information about handling errors.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal"><span style="background: yellow;">A UTF-8 Encoded String MUST
NOT include an encoding of the null character U+0000. </span><span style="color: red;">[MQTT-1.5.4-2]</span>. If a receiver (Server or Client)
receives an MQTT Control Packet containing U+0000 it is a Malformed Packet.
Refer to<a href="mqtt-v50-4-operational-behavior.htm#4.13-handling-errors" class="link-internal"> section 4.13</a> for information about
handling errors.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal">The data SHOULD NOT include encodings of the Unicode
[Unicode] code points listed below. If a receiver (Server or Client) receives an
MQTT Control Packet containing any of them it MAY treat it as a Malformed Packet.
These are the Disallowed Unicode code points. Refer
to <a href="mqtt-v50-5-security.htm#5.4.9-handlind-disallowed-unicode-codepoints" class="link-internal">section 5.4.9</a> for more information
about handling Disallowed Unicode code points.</p>
    <ul>
      <li>U+0001..U+001F control characters </li>
      <li>U+007F..U+009F control characters </li>
      <li>Code points defined in the Unicode specification <a href="#Unicode" class="link-internal">[Unicode]</a> to be non-characters (for example U+0FFFF) </li>
    </ul>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal"><span style="background: yellow;">A UTF-8 encoded sequence
0xEF 0xBB 0xBF is always interpreted as U+FEFF ("ZERO WIDTH NO-BREAK SPACE")
wherever it appears in a string and MUST NOT be skipped over or stripped off by
a packet receiver</span><span style="color: red;">[MQTT-1.5.4-3]</span>.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal" style="margin-left: 27.0pt;">
      <b>Non-normative example</b>
    </p>
    <p class="MsoNormal" style="margin-left: 27.0pt;text-align: justify;">For example,
the string A<img src="cjk-unified-ideograph-2A6D4.png" style="height: 20px;vertical-align: bottom;" alt="CJK ideograph extension B character"/>
which is LATIN
CAPITAL Letter A followed by the code point U+2A6D4 (which represents a CJK
IDEOGRAPH EXTENSION B character) is encoded as follows: </p>
    <p class="MsoNormal" style="margin-left: 27.0pt;text-align: justify;"> </p>
    <p class="TblCaption"><a name="_Figure_1.2_UTF-8_1"/>Figure
1‑2 UTF-8 Encoded String non-normative example</p>
    <table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse;border: none;">
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>Bit</b>
          </p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>7</b>
          </p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>6</b>
          </p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>5</b>
          </p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>4</b>
          </p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>3</b>
          </p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>2</b>
          </p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>1</b>
          </p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>0</b>
          </p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal">byte 1</p>
        </td>
        <td width="511" colspan="8" valign="top" style="width: 383.1pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">String Length MSB
 (0x00)</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal"> </p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal">byte 2</p>
        </td>
        <td width="511" colspan="8" valign="top" style="width: 383.1pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">String Length LSB
 (0x05)</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal"> </p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal">byte 3</p>
        </td>
        <td width="511" colspan="8" valign="top" style="width: 383.1pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">‘A’ (0x41)</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal"> </p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal">byte 4</p>
        </td>
        <td width="511" colspan="8" valign="top" style="width: 383.1pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">(0xF0)</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal"> </p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal">byte 5</p>
        </td>
        <td width="511" colspan="8" valign="top" style="width: 383.1pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">(0xAA)</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal"> </p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
      </tr>
      <tr style="height: 24.9pt;">
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;height: 24.9pt;">
          <p class="MsoNormal">byte 6</p>
        </td>
        <td width="511" colspan="8" valign="top" style="width: 383.1pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;height: 24.9pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">(0x9B)</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal"> </p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal">byte 7</p>
        </td>
        <td width="511" colspan="8" valign="top" style="width: 383.1pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">(0x94)</p>
        </td>
      </tr>
      <tr>
        <td width="128" valign="top" style="width: 95.7pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal"> </p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.85pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">0</p>
        </td>
        <td width="64" valign="top" style="width: 47.9pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;page-break-after: avoid;">0</p>
        </td>
      </tr>
    </table>
    <h3><a name="1.5.5-variable-byte-integer"/>1.5.5 Variable Byte Integer</h3>
    <p class="MsoNormal">The Variable Byte Integer is encoded using an encoding
scheme which uses a single byte for values up to 127. Larger values are handled
as follows. The least significant seven bits of each byte encode the data, and
the most significant bit is used to indicate whether there are bytes following
in the representation. Thus, each byte encodes 128 values and a
"continuation bit". The maximum number of bytes in the Variable Byte
Integer field is four. <span style="background: yellow;">The encoded value MUST
use the minimum number of bytes necessary to represent the value</span><span style="color: red;">[MQTT-1.5.5-1]. </span>This is
shown in <a href="#table-1-1-size-of-variable-byte-integer" class="link-internal">Table 1‑1 Size of Variable Byte Integer</a>.</p>
    <p class="MsoCaption"> </p>
    <p class="TblCaption"><a name="table-1-1-size-of-variable-byte-integer"/>Table 1‑1
Size of Variable Byte Integer</p>
    <table class="MsoNormalTable" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse;border: none;">
      <tr>
        <td width="61" valign="top" style="width: 45.9pt;border: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>Digits</b>
          </p>
        </td>
        <td width="240" valign="top" style="width: 2.5in;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>From</b>
          </p>
        </td>
        <td width="252" valign="top" style="width: 189.0pt;border: solid windowtext 1.0pt;border-left: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">
            <b>To</b>
          </p>
        </td>
      </tr>
      <tr>
        <td width="61" valign="top" style="width: 45.9pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">1</p>
        </td>
        <td width="240" valign="top" style="width: 2.5in;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" style="text-align: justify;">0 (0x00)</p>
        </td>
        <td width="252" valign="top" style="width: 189.0pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" style="text-align: justify;">127 (0x7F)</p>
        </td>
      </tr>
      <tr>
        <td width="61" valign="top" style="width: 45.9pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">2</p>
        </td>
        <td width="240" valign="top" style="width: 2.5in;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" style="text-align: justify;">128 (0x80, 0x01)</p>
        </td>
        <td width="252" valign="top" style="width: 189.0pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" style="text-align: justify;">16,383 (0xFF, 0x7F)</p>
        </td>
      </tr>
      <tr>
        <td width="61" valign="top" style="width: 45.9pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">3</p>
        </td>
        <td width="240" valign="top" style="width: 2.5in;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" style="text-align: justify;">16,384 (0x80, 0x80, 0x01)</p>
        </td>
        <td width="252" valign="top" style="width: 189.0pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" style="text-align: justify;">2,097,151 (0xFF, 0xFF, 0x7F)</p>
        </td>
      </tr>
      <tr>
        <td width="61" valign="top" style="width: 45.9pt;border: solid windowtext 1.0pt;border-top: none;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" align="center" style="text-align: center;">4</p>
        </td>
        <td width="240" valign="top" style="width: 2.5in;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" style="text-align: justify;">2,097,152 (0x80, 0x80, 0x80,
 0x01)</p>
        </td>
        <td width="252" valign="top" style="width: 189.0pt;border-top: none;border-left: none;border-bottom: solid windowtext 1.0pt;border-right: solid windowtext 1.0pt;padding: 0in 5.4pt 0in 5.4pt;">
          <p class="MsoNormal" style="text-align: justify;">268,435,455 (0xFF, 0xFF, 0xFF,
 0x7F)</p>
        </td>
      </tr>
    </table>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal" style="margin-left: .5in;">
      <b>Non-normative
comment</b>
    </p>
    <p class="MsoNormal" style="margin-left: .5in;text-align: justify;">The algorithm
for encoding a non-negative integer (X) into the Variable Byte Integer encoding
scheme is as follows:</p>
    <pre style="margin-left: 0.5in;">do

   encodedByte = X MOD 128

   X = X DIV 128

   // if there are more data to encode, set the top bit of this byte

   if (X &gt; 0)

      encodedByte = encodedByte OR 128

   endif

   'output' encodedByte

while (X &gt; 0)</pre>
    <p class="MsoNormal" style="margin-left: .5in;text-align: justify;">Where <code>MOD</code> is the modulo operator (<code>%</code> in C), <code>DIV</code> is integer division (<code>/ </code>in C), and <code>OR</code> is bit-wise or (<code>|</code> in C).</p>
    <p class="MsoNormal" style="margin-left: .5in;text-align: justify;"> </p>
    <p class="MsoNormal" style="margin-left: .5in;">
      <b>Non-normative
comment</b>
    </p>
    <p class="MsoNormal" style="margin-left: .5in;text-align: justify;">The algorithm
for decoding a Variable Byte Integer type is as follows:</p>
    <pre style="margin-left: 0.5in;">multiplier = 1

value = 0

do

   encodedByte = 'next byte from stream'

   value += (encodedByte AND 127) * multiplier

   if (multiplier &gt; 128*128*128)

      throw Error(Malformed Variable Byte Integer)

   multiplier *= 128

while ((encodedByte AND 128) != 0)</pre>
    <p class="MsoNormal" style="margin-left: .5in;text-align: justify;">where <span style="font-family: &quot;Arial,Consolas&quot;, serif;">AND</span> is the bit-wise and
operator (<span style="font-family: &quot;Arial,Consolas&quot;, serif;">&amp;</span> in C).</p>
    <p class="MsoNormal" style="margin-left: 0.5in;">When this algorithm terminates, <code>value</code> contains the Variable
Byte Integer value.</p>
    <h3><a name="1.5.6-binary-data"/>1.5.6
Binary Data</h3>
    <p class="MsoNormal">Binary Data is represented by a Two Byte Integer length
which indicates the number of data bytes, followed by that number of bytes. Thus,
the length of Binary Data is limited to the range of 0 to 65,535 Bytes. </p>
    <h3><a name="1.5.7-utf-8-string-pair"/>1.5.7
UTF-8 String Pair</h3>
    <p class="MsoNormal">A UTF-8 String Pair consists of two UTF-8 Encoded Strings.
This data type is used to hold name-value pairs. The first string serves as the
name, and the second string contains the value.</p>
    <p class="MsoNormal"> </p>
    <p class="MsoNormal"><span style="background: yellow;">Both strings MUST comply
with the requirements for UTF-8 Encoded Strings</span><span style="color: red;">[MQTT-1.5.7-1]</span>.
If a receiver (Client or Server) receives a string pair which does not meet
these requirements it is a Malformed Packet. Refer to <a href="mqtt-v50-4-operational-behavior.htm#4.13-handling-errors" class="link-internal">section
4.13</a> for information about handling errors.</p>
    <h2><a name="1.6-security"/>1.6 Security</h2>
    <p class="MsoNormal">MQTT Client and Server implementations SHOULD offer Authentication, Authorization and secure
communication options, such as those discussed in <a href="mqtt-v50-5-security.htm" class="link-internal">Chapter 5</a>. Applications concerned with critical infrastructure, personally identifiable information, or other personal or sensitive information are strongly advised to use these security capabilities.</p>
    <h2><a name="1.7-editing-convention"/>1.7 Editing convention</h2>
    <p class="MsoNormal">Text highlighted in <span style="background: yellow;">Yellow</span>
within this specification identifies conformance statements. Each conformance
statement has been assigned a reference in the format <span style="color: red;">[MQTT-x.x.x-y]</span> where
<span style="color: red;">x.x.x</span> is the section number and <span style="color: red;">y</span> is a statement counter within the section.</p>
    <h2><a name="1.8-change-history"/>1.8 Change history</h2>
    <h3><a name="1.8.1-mqtt-v3.1.1"/>1.8.1 MQTT v3.1.1</h3>
    <p class="MsoNormal">MQTT v3.1.1 was the first OASIS standard version of MQTT <a href="#MQTTV311" class="link-internal">[MQTTV311]</a>.</p>
    <p class="MsoNormal">MQTT v3.1.1 is also standardized as ISO/IEC 20922:2016<a href="#ISO20922" class="link-internal"> [ISO20922]</a>.</p>
    <h3><a name="1.8.2-mqtt-v5.0"/>1.8.2 MQTT v5.0</h3>
    <p class="MsoNormal">MQTT v5.0 adds a significant number of new features to MQTT
while keeping much of the core in place. The major functional objectives are:</p>
    <ul>
      <li>Enhancements for scalability and large scale systems</li>
      <li>Improved error reporting</li>
      <li>Formalize common patterns including capability discovery and request response</li>
      <li>Extensibility mechanisms including user properties</li>
      <li>Performance improvements and support for small clients</li>
    </ul>
    <p class="MsoNormal">Refer to <a href="mqtt-v50-C-summary-new-features.htm" class="link-internal">Appendix C</a> for a summary of changes in MQTT v5.0.</p>
  </body>
</html>
