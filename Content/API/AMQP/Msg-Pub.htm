<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Message Publication</h1>
    <p>In this section we'll look at the rules for specifying destinations when publishing messages through non-JMS APIs. At a high-level, there are basically two things to know:</p>
    <ol>
      <li>You can specify the destination (queue, topic, etc.) in the target address of the client’s sending link attach frame. If the destination is non-null, all messages sent by the client on that link will use that destination.</li>
      <li>Or you can specify the destination in the <code>to</code> field of the <code>properties</code> of each message. If the destination in the client’s sending link attach frame is <code>null</code>, then each message’s properties’ <code>to</code> field is used to determine that message's destination.</li>
    </ol>
    <p>Although that's the gist of what you'll need to do, there's a little more to it than that. Detailed rules for setting destinations in either the attach frame or message can be found in <MadCap:xref href="Rules-Dest-Spec.htm">Rules for Destination Specification</MadCap:xref>. If you're looking for a bit more summary information before a full dive into the particulars, consider taking a look at,</p>
    <ul>
      <li>
        <MadCap:xref href="#Publishi2">On the Use of #</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Specifyi">Specifying Durable Queue Destinations</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Specifyi2">Specifying Topic Destinations</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="Publishi2"/>Using # to Specify Temporary Queues &amp; Topics</h2>
    <h3 MadCap:conditions="Default.HideFromAllOutput">On the Use of # in Targets and Subscriptions</h3>
    <p>Any destination or subscription starting with <code>#</code> will have that topic treated as the literal destination for the message. This allows AMQP applications to publish to destinations such as temporary queues (<code>#P2P/QTMP/<i>queue-name</i></code>), temporary topics (<code>#P2P/TTMP/<i>topic-string</i></code>), or other event broker generated topics. </p>
    <p>A temporary queue is a non-durable queue whose name is usually auto-generated by the event broker; likewise, a temporary topic is a non-durable topic usually auto-generated by the event broker. It can be useful to be able to publish to these sorts of objects because an AMQP app might receive the address to one as the <code>reply-to</code> address from another app.</p>
    <p>For general information on the use of <code>#</code> with a Solace PubSub+ event broker, refer to <MadCap:xref href="../../Messaging/Reserved-Topics.htm">Special Solace Topics</MadCap:xref>.</p>
    <h3 MadCap:conditions="Default.HideFromAllOutput">Targeting Temporary Queues</h3>
    <p MadCap:conditions="Default.HideFromAllOutput">A client can specify that a message is being addressed to a temporary, or non-durable, queue by formatting the message target address as follows:</p>
    <p class="Code" MadCap:conditions="Default.HideFromAllOutput">#P2P/QTMP/<i>queue-name</i></p>
    <p MadCap:conditions="Default.HideFromAllOutput">The <code>#P2P/QTMP/</code> prefix indicates that the destination is a temporary, or non-durable, queue whose name, <code style="font-style: italic;">queue-name</code>, is auto-generated by the event broker.</p>
    <h3 MadCap:conditions="Default.HideFromAllOutput">Targeting Temporary Topics</h3>
    <p MadCap:conditions="Default.HideFromAllOutput">A client can specify that a message is being addressed to a temporary, or non-durable, topic by formatting the message target address as follows:</p>
    <p class="Code" MadCap:conditions="Default.HideFromAllOutput">#P2P/TTMP/<i>topic-name</i></p>
    <p MadCap:conditions="Default.HideFromAllOutput">The <code>#P2P/TTMP/</code> prefix indicates that the destination is a temporary, or non-durable, topic whose name, <code style="font-style: italic;">topic-name</code>, is auto-generated by the event broker.</p>
    <h2 class="with-rule"><a name="Specifyi"/>Specifying Durable Queue Destinations</h2>
    <p>A client specifies that messages are to be published to a durable queue by formatting the destination as follows:</p>
    <p class="Code">queue://<i>queue-name</i></p>
    <p>The <code>queue://</code> prefix is <u>optional</u> and isn't case sensitive. </p>
    <p>If a prefix isn't part of the destination, and the destination doesn’t start with <code>#</code>, the event broker will assume the message is intended for delivery to a durable queue, as long as no other setting has been used to specify the destination type.</p>
    <p>Detailed rules regarding how to set a durable queue destination are presented in <MadCap:xref href="Rules-Dest-Spec.htm">Rules for Destination Specification</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="Specifyi2"/>Specifying Topic Destinations</h2>
    <p>A client specifies that messages are to be published to a topic by formatting the destination as follows:</p>
    <p class="Code">topic://<i>topic-string</i></p>
    <p>The <code>topic://</code> prefix is <u>recommended</u> when publishing to a topic and isn't case sensitive. If a prefix isn't part of the destination, and the destination doesn’t start with <code>#</code>, the event broker will assume the message is intended for delivery to a queue, as long as no other setting has been used to specify the destination type. </p>
    <p>Detailed rules regarding how to set a topic destination are presented in <MadCap:xref href="Rules-Dest-Spec.htm">Rules for Destination Specification</MadCap:xref>.</p>
  </body>
</html>
