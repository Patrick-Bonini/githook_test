<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1>How to Consume from Sources</h1>
    <p>In the introduction, <MadCap:xref href="Msg-Con.htm">Message Consumption</MadCap:xref>, we took a high-level look at how to specify sources for message consumption through non-JMS APIs. In this section, we'll look at the detailed rules for specifying consumption sources:</p>
    <ul>
      <li>
        <MadCap:xref href="#Rules">Rules for Source Specification</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="Rules"/>Rules for Source Specification</h2>
    <p>As we mentioned in the introduction, <MadCap:xref href="Msg-Con.htm">Message Consumption</MadCap:xref>, you specify the consumption source in the attach frame.</p>
    <h3>In the Attach Frame</h3>
    <ul>
      <li>You can set the source capabilities in the attach frame, with <code>role=receiver</code>, from the client with one of the  settings in the following table.</li>
      <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <thead>
          <tr class="TableStyle-Table_Num-Head-Header1">
            <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Source Capabilities</th>
            <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">not present</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Subsequent options will be used to determine the source type; if no other options are set, it defaults to 'queue'.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">queue</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">The client attempts to bind to  a durable queue.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">topic</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <p>The client attempts to bind to  a topic endpoint.</p>
              <p> If the expiry policy is <code>NEVER</code>, and the terminus-durability is 1 or 2, then the client will bind to a durable topic endpoint. For the other combinations of terminus durability and expiry-policy, the event broker will create a temporary topic endpoint.</p>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyE-Column1-Body1">temporary-queue</td>
            <td class="TableStyle-Table_Num-BodyD-Column1-Body1">The client attempts to bind to  a temporary queue.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyB-Column1-Body1">temporary-topic</td>
            <td class="TableStyle-Table_Num-BodyA-Column1-Body1">The client attempts to bind to  a temporary topic endpoint.</td>
          </tr>
        </tbody>
      </table>
      <p class="Note">Setting the source capabilities will override any other setting you make for the prefix of the source address.</p>
      <li>You can set the prefix of the source address in the attach frame, with <code>role=receiver</code>, from the client
        with one of the  settings in the following table.</li>
      <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <thead>
          <tr class="TableStyle-Table_Num-Head-Header1">
            <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Source Address</th>
            <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">not present</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Subsequent options will be used to determine the source type; if no other options are set, it defaults to 'queue'.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">unprefixed</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Subsequent options will be used to determine the source type, if no other options are present it defaults to 'queue'.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">prefixed by <code>queue://</code></td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1"> The client attempts to bind to a durable queue. If it's in conflict with specified source capabilities, then the source capabilities value overwrites the prefix value, the prefix is stripped, and a warning is logged to <code>debug.log</code>.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyE-Column1-Body1">prefixed by <code>topic://</code></td>
            <td class="TableStyle-Table_Num-BodyD-Column1-Body1">
              <p>The client consumes from a topic endpoint.</p>
              <p>  If the expiry policy is <code>NEVER</code>, and the terminus-durability is 1 or 2, then the client will bind to a durable topic endpoint. For the other combinations of terminus durability and expiry-policy, the event broker will create a temporary topic  endpoint.</p>
              <p> If it's in conflict with specified source capabilities, then the source capabilities value overwrites the prefix value, the prefix is stripped, and a warning is logged to <code>debug.log</code>.</p>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyB-Column1-Body1">prefixed by <code>dsub://</code></td>
            <td class="TableStyle-Table_Num-BodyA-Column1-Body1">The client attempts to bind to a durable topic endpoint. The DTE name is specified in the link name in the attach frame, and the topic subscription on the DTE is specified in the source address after the <code>dsub://</code> prefix.  If it's in conflict with specified source capabilities, then the source capabilities value overwrites the prefix value, the prefix is stripped, and a warning is logged to <code>debug.log</code>.</td>
          </tr>
        </tbody>
      </table>
    </ul>
    <h3>Recommendation</h3>
    <p>Source capabilities is not present and set the desired prefixed source address in the attach frame, with <code>role=receiver</code>.</p>
  </body>
</html>
