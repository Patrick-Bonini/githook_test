<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1>Rules for Destination Specification</h1>
    <p>As we mentioned in the introduction, <MadCap:xref href="Msg-Pub.htm">Message Publication</MadCap:xref>, you can specify the destination in the attach frame or in a message (anonymous relay). We'll look at both ways.</p>
    <h2 class="with-rule"><a name="In2"/>In the Attach Frame</h2>
    <ul>
      <li>You can set  the target capabilities in the attach frame, with <code>role=sender</code>, from the client with one of the  settings in the following table.</li>
      <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <thead>
          <tr class="TableStyle-Table_Num-Head-Header1">
            <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Target Capabilities</th>
            <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">not present</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Subsequent options will be used to determine the destination type; if no other options are set, it defaults to 'queue'.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">queue</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">All messages sent on this link will be processed by the event broker as published to a durable queue.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">topic</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">All messages sent on this link will be processed by the event broker as published to a topic.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyE-Column1-Body1">temporary-queue</td>
            <td class="TableStyle-Table_Num-BodyD-Column1-Body1">All messages sent on this link will be processed by the event broker as published to a temporary queue.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyB-Column1-Body1">temporary-topic</td>
            <td class="TableStyle-Table_Num-BodyA-Column1-Body1">All messages sent on this link will be processed by the event broker as published to a temporary topic.</td>
          </tr>
        </tbody>
      </table>
      <p class="Note">Setting the target capabilities will override any other settings you make in the other fields we discuss below, even those in <MadCap:xref href="#In">In A Message</MadCap:xref>.</p>
      <li>You can set the prefix of the target address in the attach frame, with <code>role=sender</code>, from the client with one of the settings in the following table.</li>
      <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <thead>
          <tr class="TableStyle-Table_Num-Head-Header1">
            <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Target Address</th>
            <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">not present</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Subsequent options will be used to determine the destination type; if no other options are set, it defaults to 'queue'.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">unprefixed</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Subsequent options will be used to determine the destination type, if no other options are present it defaults to 'queue'.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">prefixed by <code>queue://</code></td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">All messages sent on this link will be processed by the event broker as published to a queue. If this in conflict with specified target capabilities, then the target capabilities value overwrites the prefix value, the prefix is stripped, and a warning is logged to <code>debug.log</code>.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyE-Column1-Body1">prefixed by <code>topic://</code></td>
            <td class="TableStyle-Table_Num-BodyD-Column1-Body1">All messages sent on this link will be processed by the event broker as published to a topic.  If this in conflict with specified target capabilities, then the target capabilities value overwrites the prefix value, the prefix is stripped, and a warning is logged to <code>debug.log</code>.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">prefixed by <code>#P2P/QTMP/</code></td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">All messages sent on this link will be processed by the event broker as published to a temporary queue.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyB-Column1-Body1">prefixed by <code>#P2P/TTMP/</code></td>
            <td class="TableStyle-Table_Num-BodyA-Column1-Body1">All messages sent on this link will be processed by the event broker as published to a temporary topic.</td>
          </tr>
        </tbody>
      </table>
    </ul>
    <h3>Recommendation</h3>
    <p>Target capabilities is not present and set the desired prefixed target address in the attach frame, with <code>role=sender</code>.</p>
    <h2 class="with-rule"><a name="In"/>In A Message</h2>
    <ul>
      <li>You can set the <code>x-opt-jms-dest</code> message-annotation  with one of the settings in the following table.</li>
      <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <thead>
          <tr class="TableStyle-Table_Num-Head-Header1">
            <th class="TableStyle-Table_Num-HeadE-Column1-Header1">x-opt-jms-dest</th>
            <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">not present</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Subsequent options will be used to determine the destination type; if no other options are set, it defaults to 'queue'.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">0</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">The message will be processed by the event broker as published to a durable queue.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">1</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">The message will be processed by the event broker as published to a  topic.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyE-Column1-Body1">2</td>
            <td class="TableStyle-Table_Num-BodyD-Column1-Body1">The message will be processed by the event broker as published to a temporary queue.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyB-Column1-Body1">3</td>
            <td class="TableStyle-Table_Num-BodyA-Column1-Body1">The message will be processed by the event broker as published to a temporary topic.</td>
          </tr>
        </tbody>
      </table>
      <li>You can set the <code>to</code> message property  with one of the settings in the following table.</li>
      <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <col class="TableStyle-Table_Num-Column-Column1"/>
        <thead>
          <tr class="TableStyle-Table_Num-Head-Header1">
            <th class="TableStyle-Table_Num-HeadE-Column1-Header1">'to' message property</th>
            <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">not present</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Defaults to 'queue'.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">unprefixed</td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">The message will be processed by the event broker as published to a queue.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">prefixed by <code>queue://</code></td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">The message will be processed by the event broker as published to a topic. If the prefix is in conflict with what's specified in the <code>x-opt-jms-dest</code> message-annotation, then the <code>x-opt-jms-dest</code> value overwrites the prefix value and the prefix is silently stripped.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyE-Column1-Body1">prefixed by <code>topic://</code></td>
            <td class="TableStyle-Table_Num-BodyD-Column1-Body1">The message will be processed by the event broker as published to a topic. If the prefix is in conflict with what's specified in the <code>x-opt-jms-dest</code> message-annotation, then the <code>x-opt-jms-dest</code> value overwrites the prefix value and the prefix is silently stripped.</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">prefixed by <code>#P2P/QTMP/</code></td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">The message will be processed by the event broker as published to a temporary queue</td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyB-Column1-Body1">prefixed by <code>#P2P/TTMP/</code></td>
            <td class="TableStyle-Table_Num-BodyA-Column1-Body1">The message will be processed by the event broker as published to a temporary topic</td>
          </tr>
        </tbody>
      </table>
    </ul>
    <h3>Recommendation</h3>
    <p><code>x-opt-jms-dest</code> is not present and set the <code>to</code> message property with the desired prefixed destination.</p>
  </body>
</html>
