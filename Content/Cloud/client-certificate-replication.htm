<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1>Installing and Synchronizing Client Certificates for High-Availability <MadCap:variable name="Product-Names.broker_cloud_short_title"/> in Bridges</h1>
    <p>You can install client certificates on high-availability <MadCap:variable name="Product-Names.broker_cloud_short"/>s in Message VPN and DMR bridges for added security. <MadCap:variable name="Product-Names.broker_cloud_short_intitalcap"/>s with a client certificate in a bridge require other <MadCap:variable name="Product-Names.broker_cloud_short"/>s to authenticate. This can cause problems in a high availability <MadCap:variable name="Product-Names.broker_cloud_short"/> because both nodes must have the same synchronized client certificate. If a node becomes active and it does not have a client certificate, or the certificate is out of synch, it may not authenticate with other <MadCap:variable name="Product-Names.broker_cloud_short"/>s in the bridge. You can use the <MadCap:variable name="Product-Names.pubsubmanager_short"/> to install client certificates on both nodes of an <MadCap:variable name="Product-Names.broker_cloud_short"/> in a bridge. You can also use the <MadCap:variable name="Product-Names.pubsubmanager_short"/> to synchronize client certificates installed on the nodes of an <MadCap:variable name="Product-Names.broker_cloud_short"/> in a bridge and if necessary, to replicate a client certificate from one node of an <MadCap:variable name="Product-Names.broker_cloud_short"/> to the other node. </p>
    <p>For more information see:</p>
    <ul>
      <li>
        <p>
          <MadCap:xref href="#Consider">Considerations for Installing or Synchronizing Client Certificates on [%=Product-Names.broker_cloud_short_title%] Nodes</MadCap:xref>
        </p>
      </li>
      <li>
        <p>
          <MadCap:xref href="#Installi">Installing a Client Certificate on Both Nodes in a High Availability [%=Product-Names.broker_cloud_short_title%] in a Bridge</MadCap:xref>
        </p>
      </li>
      <li>
        <p>
          <MadCap:xref href="#Synchron">Synchronizing Client Certificates on Nodes in an [%=Product-Names.broker_cloud_short_title%] in a Bridge</MadCap:xref>
        </p>
      </li>
    </ul>
    <h2><a name="Consider"/>Considerations for Installing or Synchronizing Client Certificates on <MadCap:variable name="Product-Names.broker_cloud_short_title"/> Nodes</h2>
    <p>Consider the following when installing or synchronizing client certificates on the nodes of <MadCap:variable name="Product-Names.broker_cloud_short"/>s:</p>
    <ul>
      <li>
        <p>The <MadCap:variable name="Product-Names.broker_cloud_short"/> must be version 10.5.1 or later. </p>
      </li>
      <li>
        <p>To enable this feature on an <MadCap:variable name="Product-Names.broker_cloud_short"/> during an upgrade to 10.5.1, <a href="../get-support.htm" target="_blank" class="link-internal">contact <MadCap:variable name="Variables.CompanyName"/></a>. A small downtime similar to a <a href="scaling_services.htm" target="_blank" class="link-internal">upscaling an <MadCap:variable name="Product-Names.broker_cloud_short"/></a> may be required during the upgrade process. </p>
      </li>
      <li>
        <p>The <MadCap:variable name="Product-Names.broker_cloud_short"/> must be in a Static (Message VPN) or DMR bridge.<br/></p>
      </li>
      <li>
        <p>When in stalling a client certificate on <MadCap:variable name="Product-Names.broker_cloud_short"/>s in a bridge, you must have a client certificate already created. If you do not have a client certificate, see <MadCap:xref href="ght_client_certs.htm#step1-tutorial-cacerts">Create an Internal Certificate Authority</MadCap:xref> for information on how to create one.</p>
      </li>
    </ul>
    <h2><a name="Installi"/>Installing a Client Certificate on Both Nodes in a High Availability <MadCap:variable name="Product-Names.broker_cloud_short_title"/> in a Bridge</h2>
    <ol>
      <li><MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp">
                </MadCap:snippetText><![CDATA[
]]></li>
      <li>Select <MadCap:variable name="Product-Names.cluster_mgr" style="font-weight: bold;"/><img src="../Resources/Images/Cloud/reusable-icons/navbar_cluster_manager.png" class="img.img-inline" alt=""/> on the navigation bar.</li>
      <li>Select the <MadCap:variable name="Product-Names.broker_cloud_short"/>. </li>
      <li>Click <b>More Actions</b> <img src="../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" class="img.img-inline" alt=""/><b>, </b>and then<b><MadCap:variable name="Product-Names.pubsubmanager_long"/></b>.
            <p><img src="../Resources/Images/Broker-Manager/manager-go-to-manager.png" class="img-border" alt=""/></p></li>
      <li>In <MadCap:variable name="Product-Names.pubsubmanager_short"/>, click <b>Bridges</b> in the navigation bar and select the bridge with the <MadCap:variable name="Product-Names.broker_cloud_short"/> you want to install client certificates on. </li>
      <li>Click <b>Synchronize Certificates</b>.

            <p><div class="thumbnail-container"><img src="../Resources/Images/Broker-Manager/manager-bridge-details.png" class="solacethumbnail" alt=""/></div></p><p>The <b>Synchronize Client Certificates</b> page opens. When no client certificate is installed on any node of the <MadCap:variable name="Product-Names.broker_cloud_short"/> only the <b>Enter New Certificate</b> button is available. </p><p><div class="thumbnail-container"><img src="../Resources/Images/Broker-Manager/manager-nocerts.png" class="solacethumbnail" alt=""/></div></p></li>
      <li>Click <b>Enter New Certificate</b>.
                <p>The <b>Configure Certificate</b> window opens.</p><p><img src="../Resources/Images/Broker-Manager/manager-config-cert-window.png" class="img-border" alt=""/></p></li>
      <li>Enter the your client certificate into the <b>Content</b> field and enter a password if required, then click <b>Apply</b>.</li>
    </ol>
    <h2><a name="Synchron"/>Synchronizing Client Certificates on Nodes in an <MadCap:variable name="Product-Names.broker_cloud_short_title"/> in a Bridge</h2>
    <ol>
      <li>
        <MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
      </li>
      <li>Select <MadCap:variable name="Product-Names.cluster_mgr" style="font-weight: bold;"/> <img src="../Resources/Images/Cloud/reusable-icons/navbar_cluster_manager.png" class="img.img-inline" alt=""/> on the navigation bar.</li>
      <li>Select the <MadCap:variable name="Product-Names.broker_cloud_short"/>. </li>
      <li>Click <b><MadCap:variable name="Product-Names.pubsubmanager_long"/></b>.
            <p><img src="../Resources/Images/Broker-Manager/manager-go-to-manager.png" class="img-border" alt=""/></p></li>
      <li>In <MadCap:variable name="Product-Names.pubsubmanager_short"/>, click <b>Bridges</b> in the navigation bar and select the bridge with the <MadCap:variable name="Product-Names.broker_cloud_short"/> whose client certificate synchronization you want to check.</li>
      <li>Click <b>Synchronize Certificates</b>.

            <p><div class="thumbnail-container"><img src="../Resources/Images/Broker-Manager/manager-bridge-details.png" class="solacethumbnail" alt=""/></div></p></li>
      <li>The Synchronize Client Certificates page shows if the client certificates are installed and if they are synchronized. If a node does not have a certificate installed, either the <b>Synchronize Primary to Backup</b> or <b>Synchronize Backup to Primary</b> option will be available, depending which node is missing the certificate.<p><div class="thumbnail-container"><img src="../Resources/Images/Broker-Manager/manager-no-cert-synch.png" class="solacethumbnail" alt=""/></div></p></li>
      <li>Click the available button to copy the certificate to the broker that is not synchronized. 
            <p>A Configure Certificate window opens, confirming that you want to update the certificate. </p></li>
      <li>Click <b>Configure Certificate</b>.
            <p>The certificate copies and the Synchronize Client Certificates page refreshes, showing the same client certificate on each node. When synchronized, both <b>Synchronize Primary to Backup</b> or <b>Synchronize Backup to Primary</b> are disabled. <br/>You can confirm the client certificates are identical by comparing the <b>Thumbprint</b> of both nodes.</p><p><div class="thumbnail-container"><img src="../Resources/Images/Broker-Manager/manager-synched-certs.png" class="solacethumbnail" alt=""/></div></p></li>
    </ol>
  </body>
</html>
