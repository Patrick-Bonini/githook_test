<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Creating an Event Mesh</h1>
    <p>Before you can create an event mesh or edit and existing one, you must fulfill the following prerequisites:</p>
    <ul>
      <li>You require the <MadCap:variable name="Product-Names.cm_editor"/> role assigned to your user profile. Contact the administrator for your account if you require this role.<p> For more information about the role requirements, see <MadCap:xref href="about_event_meshes.htm#considerations-working-with-event-meshes">Considerations for Working with Event Meshes in [%=Product-Names.cloud_product_short%]</MadCap:xref>. </p></li>
      <li>The Enterprise <MadCap:variable name="Product-Names.broker_cloud_short"/>s that you want to include in the  event mesh already exist. To create an event mesh, you require a minimum of two <MadCap:variable name="Product-Names.broker_cloud_short"/>s. After you create your <MadCap:variable name="Product-Names.broker_cloud_short"/>s, you use <MadCap:variable name="Product-Names.mesh_manager"/> to specify the nodes that are in your event mesh. <p>If you are connecting a DMR cluster that has multiple nodes in it, you must identify one <MadCap:variable name="Product-Names.broker_cloud_short"/> to be the  <i>gateway node</i>. </p></li>
      <li>
        <p>Creating and using an event mesh during its beta requires that your event broker services have specific Access Control List (ACL) Profile properties configured to ‘allow’. See <MadCap:xref href="run_health_check.htm#config-acl-properties">Configuring ACL Profile Properties When Using the Event Mesh</MadCap:xref>.</p>
      </li>
    </ul>
    <p> For more information abut event meshes and before you create an event mesh, see <MadCap:xref href="about_event_meshes.htm">Understanding Event Meshes and [%=Product-Names.mesh_manager%] (Beta)</MadCap:xref> and <MadCap:xref href="about_event_meshes.htm#considerations-working-with-event-meshes">Considerations for Working with Event Meshes</MadCap:xref>.</p>
    <p>The following example illustrates how to create an event mesh with these characteristics:<br/></p>
    <ul>
      <li>Three Enterprise <MadCap:variable name="Product-Names.broker_cloud_short"/>s connected in a full mesh (where every <MadCap:variable name="Product-Names.broker_cloud_short"/> is connected to others in the event mesh), called <b>My_First_Service</b>, <b>My_Second_Service</b>, and <b>My_Third_Service</b>. For illustrative purposes, the <MadCap:variable name="Product-Names.broker_cloud_short"/> run in separate data centers and with different cloud providers.</li>
      <li>Each <MadCap:variable name="Product-Names.broker_cloud_short"/> is the only node in the DMR cluster and hence is the event broker service (gateway node) we use for the event mesh. </li>
    </ul>
    <p>
      <div class="thumbnail-container">
        <img src="../../Resources/Images/Mesh_Manager/example_create_mesh.png" class="solacethumbnail" alt="Illustration depicting the concepts described in the surrounding text."/>
      </div>
    </p>
    <p> </p>
    <ol>
      <li>
        <MadCap:snippetBlock src="../../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
      </li>
      <li>Select <MadCap:variable name="Product-Names.mesh_manager" style="font-weight: bold;"/> <img src="../../Resources/Images/Cloud/reusable-icons/navbar_mesh_manager.png" class="img-img-inline" alt=""/> from the navigation bar.</li>
      <li>In <MadCap:variable name="Product-Names.mesh_manager"/>, click <b>Create  Mesh</b>.</li>
      <li>On the <b>Create Mesh</b> page, enter a name for your event mesh in the <b>Mesh Name</b> field.</li>
      <li>Click <b>Add Service</b>.</li>
      <li>
        <p> On the <b>Add Service: Full Mesh</b> dialog, in the <b>Select services to add to a full mesh topology</b> field, select the <MadCap:variable name="Product-Names.broker_cloud_short"/> to add to the event mesh using one of the following methods:</p>
        <ul>
          <li> Enter the first few letters of the name of your <MadCap:variable name="Product-Names.broker_cloud_short"/> to filter the list. When you see the correct one in the list, select it, and then click <b>Add Service</b>.</li>
          <li>Scroll and select  the name of your service in the drop-down menu, then click <b>Add Service</b>. Note that the list can be long and for that reason, we recommend using the previous method to find the name of your <MadCap:variable name="Product-Names.broker_cloud_short"/>.</li>
        </ul>
        <p>
          <div class="thumbnail-container">
            <img src="../../Resources/Images/Mesh_Manager/meshmanager-add-service.png" class="solacethumbnail" alt=""/>
          </div>
        </p>
      </li>
      <li>
        <p>After you return to the <b>Create Mesh</b> page, click <b>Add Service</b> again and on the <b>Add Service: Full Mesh</b> dialog, select another <MadCap:variable name="Product-Names.broker_cloud_short"/>. In most cases, you can accept the suggested initiating links. </p>
        <p>You can optionally click the <b>Switch Initiator</b> <img src="../../Resources/Images/Cloud/reusable-icons/switch_initiator.png" style="width: 31px;height: 32px;" class="img.img-inline" alt=""/>icon to change which <MadCap:variable name="Product-Names.broker_cloud_short"/> begins the creation of the DMR link. For more information about choosing the initiating service, see <MadCap:xref href="modify_mesh.htm#modify-change-initiator">Switch the Initiator for a Link on the Event Mesh</MadCap:xref>. There are the reasons you may want to change the initiator:</p>
        <p>If the one of the <MadCap:variable name="Product-Names.broker_cloud_short"/>s has a private endpoint and the other service is a public endpoint, you must change the initiating service to  be the one with the private endpoint. On the remote endpoint, you can only select the endpoint if  you have more than one endpoint available, otherwise, only the single endpoint is shown and  automatically selected for you.
                    </p>
        <p>For example, below My-First-Service  only has a Public Endpoint so it is automatically selected:
                </p>
        <p>
          <div class="thumbnail-container">
            <img src="../../Resources/Images/Mesh_Manager/mesh_manager_addsecond_service.png" class="solacethumbnail" alt=""/>
          </div>
        </p>
        <p>Repeat this step until you've added all the <MadCap:variable name="Product-Names.broker_cloud_short"/>s that you want to your event mesh.</p>
      </li>
      <li>
        <p>After you return to  the <b>Create Mesh</b> page, you'll see the links under <b>Services in Mesh</b>. </p>
        <p>As you add services, the map on the right updates to show all the connections in your event mesh. When you're ready, click   <b>Create Mesh</b>. </p>
        <p>
          <div class="thumbnail-container">
            <img class="solacethumbnail" src="../../Resources/Images/Mesh_Manager/mesh-picture.png" alt=""/>
          </div>
        </p>
        <p>Creating an event mesh can take up to five minutes and starts after the <b>Create started</b> notification appears near the bottom of the page. You can wait on the same page or come back later to check the event mesh creation progress. For more information, see <MadCap:xref href="view_mesh_information.htm#check-event-mesh-progress"> Check Progress of an Event Mesh</MadCap:xref>.</p>
        <p> A <b>Creation is complete</b> notification message appears after the event mesh creation process completes and you can see that the event mesh is up. </p>
        <p>
          <div class="thumbnail-container">
            <img src="../../Resources/Images/Mesh_Manager/mesh_created.png" class="solacethumbnail" alt=""/>
          </div>
        </p>
      </li>
    </ol>
    <p>As part of creating an event mesh, a Health Check is run that validates connectivity for each of  <MadCap:variable name="Product-Names.broker_cloud_short"/> in the event mesh. You can also choose to run Health Check manually. For more information details, see <MadCap:xref href="run_health_check.htm#run-health-check">Running Health Checks</MadCap:xref>.</p>
  </body>
</html>
