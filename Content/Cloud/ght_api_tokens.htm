<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.ContentProductLink">
  <head>
    <link href="../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <div class="document" id="how-to-manage-api-tokens">
      <h1><MadCap:concept term="Cloud"/>Managing API Tokens</h1>
      <MadCap:snippetBlock src="../Resources/Snippets/Cloud/REST-API/referenceToReadme.flsnp" MadCap:conditions="SAP.SapHideFromOutput"/>
      <p>To use the REST APIs available in <MadCap:variable name="Product-Names.cloud_product_long"/>, you need an API token to authenticate and authorize REST requests. You assign permissions to tokens, much like you would assign permissions to user roles. These permissions permit applications that have the token to perform different actions and access different features. It is a best practice to create different tokens for different applications to provide only the minimum number of permissions that allow the application using the API token to function. This helps ensure that an application can make only the necessary changes, access only the necessary features, or access only the required data to function correctly. You can create up to 50 API tokens (per user) in an account.</p>
      <p>You must include the API token in the Authorization Bearer header when you make a REST call. </p>
      <p>This section includes the following tasks:</p>
      <ul>
        <li>
          <MadCap:xref href="#Create">Creating an API Token</MadCap:xref>
        </li>
        <li>
          <MadCap:xref href="#create-token-clicktoconnect">Creating an API Token for Click-to-Connect</MadCap:xref>
        </li>
        <li><MadCap:xref href="#regenerate-api-token">Regenerating an API Token</MadCap:xref>.</li>
        <li>
          <MadCap:xref href="#deleting-api-token">Deleting an API Token</MadCap:xref>
        </li>
        <li><MadCap:xref href="#using-postman">Using an API Token with Postman</MadCap:xref>. </li>
      </ul>
      <h2>Before You Begin</h2>
      <p>Before you can start managing  API tokens for using the <MadCap:variable name="Product-Names.cloud_product_short"/> REST APIs,  you require the following:</p>
      <ul>
        <li>A role assigned that allows you to create an API token and assign the proper permissions to that API token. The permissions you can see and set depend on your assigned account role. If you don't see some permissions that you need, you may not have the required permissions for your account. </li>
        <li MadCap:conditions="SAP.SapHideFromOutput">The REST API URL to use depends on the regional site where you have your account. All REST API examples  use the URL for the United States. Here's a summary of the different URLs for each regional site that you will use for the REST API. </li>
        <li MadCap:conditions="SAP.SapOnlyOutput">The REST API to use is listed as follows:</li>
        <MadCap:snippetBlock src="../Resources/Snippets/Cloud/rest_api_regional_urls.flsnp"/>
      </ul>
      <h2><a name="Create"/>Creating an API Token</h2>
      <p>The following steps show you how to create an API token. You can set multiple permissions for developmental and learning purposes, but you should set the fewest permissions necessary for production use. After you create an API token, you can't modify the token permissions. If you require updated permissions, you must create another token.</p>
      <p>To create an API token, perform the following steps:</p>
      <ol>
        <li>
          <MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
        </li>
        <li>On the navigation bar, <b>User &amp; Account  </b><img src="../Resources/Images/Cloud/reusable-icons/useraccount_green_navbar.png" alt=""/>, and then select <b>Token Management</b>.</li>
        <li>Click <b>Create Token</b>.
				</li>
        <li>Enter a <b>Token Name</b>.</li>
        <li>
          <p>In the <b>Selected Permissions</b> section, select the permissions that you want to enable. You can select read and write permissions for a category and you can enable or disable individual permissions. It is best practice to select the minimum number of permissions required for your purposes.</p>
          <p class="Note" MadCap:conditions="SAP.SapHideFromOutput">On the API Token Management page, for some permissions, the URLs no longer appear beside the permissions. <MadCap:variable name="Variables.CompanyName"/> has changed these permissions to align with the  <MadCap:variable name="Product-Names.cloud_product_short_titlecase"/> <code>v2</code> REST APIs, which offer a much improved experience. For more information, see  <a href="https://api.solace.dev/cloud/reference/using-the-v2-rest-apis-for-pubsub-cloud" target="_blank" class="link-offsite"><MadCap:variable name="Product-Names.pubsub_brand_only"/> v2 REST API Reference</a>.</p>
          <p>
            <div class="thumbnail-container">
              <img src="../Resources/Images/Cloud/create-api-token.png" alt="Screenshot showing the settings described in the surrounding steps." class="solacethumbnail"/>
            </div>
          </p>
        </li>
        <li>Click the <b>Create Token</b> button.</li>
        <li>
          <p>Click the <b>Copy</b> button to copy the token to your clipboard.</p>
          <p><b>Note:</b> For security reasons, this dialog doesn't appear again. If you lose the token you must regenerate the API token or create one.</p>
        </li>
        <li>Click <b>Close</b>.</li>
        <li>
          <p>To use the token, put the value that you copied in the following REST header for any calls to your account:</p>
          <pre class="Code" xml:space="preserve">Authorization: Bearer &lt;Your New Token&gt;</pre>
          <p>Alternatively, you can use development tools (such as Postman or curl) to learn about how to use the <MadCap:variable name="Product-Names.cloud_product_short"/> REST API . Our subsequent tutorials use Postman. For more information, see <MadCap:xref href="#using-postman">Using an API Token with Postman</MadCap:xref>.</p>
        </li>
      </ol>
      <h2><a name="create-token-clicktoconnect"/>Creating an API Token for Click-to-Connect</h2>
      <p>For <MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput"><MadCap:variable name="Product-Names.broker_appliance_short"/>s, <MadCap:variable name="Product-Names.broker_sw_short"/>s, and</MadCap:conditionalText> <MadCap:variable name="Product-Names.broker_cloud_short"/>s, you can use an API token for authorization with the <b>Click-to-Connect</b> wizards. You can use <b>Click-to-Connect</b> wizards  to create Message VPN bridges and configure clusters in <MadCap:variable name="Product-Names.pubsubmanager_short"/>. </p>
      <p>The API token that you create must have at least one of the following permissions, or the <b>Click-to-Connect</b> wizards won't work:</p>
      <ul>
        <li><b>Get Services with Management Credentials</b> allows you to see all services within your organization.</li>
        <li><b>Get My Services with Management Credentials</b> allows you to see only services that you've created within your organization.</li>
      </ul>
      <p>
        <div class="Note">You can remove or regenerate the API tokens that you us for the <b>Click-to-Connect</b>  wizard after the wizard uses them. The wizard uses the API token once to retrieve the service details, and does not store the API token.</div>
      </p>
      <p>You can use the following steps to create an API token for use with <b>Click-to-Connect</b>:</p>
      <ol>
        <li>
          <MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
        </li>
        <li>On the navigation bar, click <b>User &amp; Account  </b> <img src="../Resources/Images/Cloud/reusable-icons/useraccount_green_navbar.png" alt=" "/>, and then select <b>Token Management</b>.
				</li>
        <li>Click <b>Create Token</b>.
				</li>
        <li>Enter a <b>Token Name</b>.</li>
        <li>In the <i style="font-weight: bold; font-style: normal;">Selected Permissions</i> section, select   one of the following permissions:<ul><li><b>Get My Services with Management Credentials</b>: <p><div class="thumbnail-container"><img src="../Resources/Images/Cloud/clicktoconnect_myservices.png" class="solacethumbnail" alt="Screenshot showing the settings described in the surrounding steps."/></div></p></li><li>or <b>Get My Services with Management Credentials</b>: <p><div class="thumbnail-container"><img src="../Resources/Images/Cloud/clicktoconnect_allservices.png" class="solacethumbnail" alt="Screenshot showing the settings described in the surrounding steps."/></div></p></li></ul></li>
        <li>Click the <b>Create Token</b> button.</li>
        <li>
          <p>Click the <b>Copy</b> button to copy the token to your clipboard.</p>
          <p>If you lose the copied token before you use it, you must regenerate the token or create a new one.</p>
        </li>
      </ol>
      <p MadCap:conditions="SAP.SapHideFromOutput">You now can now use the token in <MadCap:variable name="Product-Names.pubsubmanager_long"/> to create a VPN bridge or clustering link. For more information, see <MadCap:xref href="../Admin/Broker-Manager/VPN-Bridge-Click-to-Connect.htm">Creating a Message VPN Bridge with Click-to-Connect</MadCap:xref>.</p>
      <p MadCap:conditions="SAP.SapOnlyOutput">You now can now use the token in <a href="using-broker-manager-cloud.htm" class="link-internal">Broker Manager</a>.</p>
      <h2><a name="regenerate-api-token"/>Regenerating an API Token</h2>
      <p>You cannot retrieve lost API tokens, but you can regenerate them. Regenerating a token creates a new token with the same permissions. If you regenerate an API token, you must update all applications and scripts that use the token to allow them to continue accessing the REST API for <MadCap:variable name="Product-Names.cloud_product_short"/>.</p>
      <p>To regenerate an API token, perform the following steps:</p>
      <ol>
        <li>
          <MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
        </li>
        <li>On the navigation bar, click <b>User &amp; Account</b> <img src="../Resources/Images/Cloud/reusable-icons/useraccount_green_navbar.png" alt=" "/>, and then select <b>Token Management</b>.
				</li>
        <li>Click <b>More Actions</b><img src="../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=""/>for the token that you want to delete and select <b>Regenerate Token</b>.</li>
        <li>Click <b>Regenerate</b>.	</li>
        <li>Click the <b>Copy</b> button to copy the token to your clipboard.
</li>
        <li>Click <b>Close</b>.	</li>
      </ol>
      <p>The API token should be on your clipboard. You can paste it into your application code for usage with the REST API or use it with the <b>Click-to-Connect</b> wizard. </p>
      <h2><a name="deleting-api-token"/>Deleting an API Token</h2>
      <p>It's a good security measure to remove outdated API tokens and ones that you no longer use. You cannot restore an API token after you delete it, and applications can no longer use that API token to make API calls.</p>
      <p>To delete a token, perform the following steps:</p>
      <ol>
        <li>
          <p>
            <MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
          </p>
        </li>
        <li>On the navigation bar, click <b>User &amp; Account  </b><img src="../Resources/Images/Cloud/reusable-icons/useraccount_green_navbar.png" alt=" "/>, and then select <b>Token Management</b>.
				</li>
        <li>Click <b>More Actions</b><img src="../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=""/>for the token that you want to delete and select <b>Delete Token</b>.</li>
      </ol>
      <h2><a name="using-postman"/>Using an API Token with Postman</h2>
      <p>Generally, you use an API token in the code for your applications; however, you can make REST API messages  from your development environment using development tools such as curl or Postman. Our tutorials show how to use the REST APIs using Postman (versions 6.1.3 or greater) as a visual REST API development tool. Before you can complete the steps in this section, you must first <a href="#Create" class="link-offsite">create an API token</a>.</p>
      <p>To use the API token, you must include it in  Authorization header, which is by default set to use <b>Bearer</b> authentication. To set up Postman to make REST API calls, we recommend that you  set up an environment variable to configure the API token using these steps: </p>
      <ol xmlns="http://www.w3.org/1999/xhtml" class="arabic simple">
        <li xmlns="">To authorize REST requests from Postman to <MadCap:variable name="Product-Names.cloud_product_short"/>, you must set the Postman <code>apiToken</code> to the API that you've created. For more information, see <MadCap:xref href="#Create">Create an API Token</MadCap:xref>.
        <ol style="list-style-type: lower-alpha;"><li>Set the Postman Environment to <b><MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput"><MadCap:variable name="Product-Names.cloud_product_long"/></MadCap:conditionalText></b><MadCap:conditionalText MadCap:conditions="SAP.SapOnlyOutput"><b>advance event mesh for SAP Integration Suite</b></MadCap:conditionalText>.
				<p><div class="thumbnail-container"><img src="../Resources/Images/Cloud/restapi/use_api_setpostmanenv.png" class="solacethumbnail" alt="Screenshot showing the options described in the surrounding steps."/></div></p></li><li>Click the <b>Environment Quick Look</b> <img src="../Resources/Images/Cloud/restapi/postman_eye.png" class="img-inline" alt=""/> button located next to the <b>Environment</b> drop-down list.</li><li>In the dialog box,  click <b>Edit</b> next to <b> Solace PubSub+ Environment</b>.</li><li>Paste the API token in the value field of the <code>apiToken</code> key into the field.
If the <code>apiToken</code> field doesn't exist, create it.				<p><div class="thumbnail-container"><img src="../Resources/Images/Cloud/restapi/use_api_setapittoken.png" class="solacethumbnail" alt="Screenshot showing the options described in the surrounding steps."/></div></p></li><li>If you are modifying a service, it's also useful to add a  <code>serviceId</code> variable so you don't need to specify it in the URL for each REST API call. You must do this step after you've created a <MadCap:variable name="Product-Names.broker_cloud_short"/>. Alternatively, you can fill the variable in the REST API calls. An easy way to find your <code>serviceId</code> is to open the service details on the <MadCap:variable name="Product-Names.console_ui_long"/> and find the identifier at end of the URL for your service.</li><li>Click <b>Update</b>.</li></ol></li>
      </ol>
      <p>Now you have an API token and have set up Postman to use it. You can now use  Postman to learn how to use the <MadCap:variable name="Product-Names.cloud_product_short"/> REST API. </p>
      <h2>Next Steps</h2>
      <p>After you have created an API token and configured Postman (or your application) to use the token, you can learn how to perform some tasks with the <MadCap:variable name="Product-Names.cloud_product_short"/> REST API such as:</p>
      <ul>
        <li>Manage services. For more information, see <MadCap:xref href="ght_use_rest_api_services.htm">Managing Services with the [%=Product-Names.cloud_product_short%] REST API</MadCap:xref>.</li>
        <li>Manage users. For more information, see <MadCap:xref href="ght_use_rest_api_users.htm">Managing Users with the [%=Product-Names.cloud_product_short%] REST API</MadCap:xref>.</li>
        <li>Manage client profiles. For more information, see <MadCap:xref href="ght_use_rest_api_client_profiles.htm">Managing Client Profiles with the [%=Product-Names.cloud_product_short%] REST API</MadCap:xref>.</li>
      </ul>
    </div>
  </body>
</html>
