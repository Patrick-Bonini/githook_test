<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <title><MadCap:concept term="Cloud"/>Configuring Custom Domain Hostnames for <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s</title>
  </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Configuring Custom Domain Hostnames for <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s</h1>
    <p class="Caution" MadCap:conditions="Default.HideFromAllOutput">Custom Domain Hostnames for <MadCap:variable name="Product-Names.broker_cloud_short"/>s is a <i>Controlled Availability</i> (CA) feature. Please contact <MadCap:variable name="Variables.CompanyName"/> to see if this feature is suitable for your use case and deployment requirements.</p>
    <p>Typically, an <MadCap:variable name="Product-Names.broker_cloud_short"/> uses the <code><MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingURL"/></code> domain as part of the fully-qualified domain name (FQDN). You can create a custom hostname of <code>mycustomhostname</code> to give an FQDN of  <code>mycustomhostname.<b><MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingURL"/></b></code>). If required, you can use a custom domain instead with a custom hostname to create a <i>custom domain hostname</i>, such as  <code>mycustomhostname.<b>example.com</b></code> to use as an alternate hostname to access the <MadCap:variable name="Product-Names.broker_cloud_short"/>.</p>
    <p>Using custom domain hostnames requires additional configuration for your <MadCap:variable name="Product-Names.broker_cloud_short"/>s to configure your domain. These configuration requirements are detailed in <MadCap:xref href="#consider-custom-domain">Considerations for Custom Domain Names</MadCap:xref>. The use of custom domain hostnames is disabled unless a <a href="selfserve-server-certs.htm" target="_blank" alt="link to Managing Custom Server Certificates" class="link-internal">custom TLS server certificate is installed</a> on your <MadCap:variable name="Product-Names.broker_cloud_short"/>. To add custom domain hostname, see <MadCap:xref href="#add-customhostname">Adding a Custom Domain Hostname</MadCap:xref>.</p>
    <h2><a name="consider-custom-domain"/>Considerations for Custom Domain Hostnames</h2>
    <p>Beyond the <MadCap:xref href="configure-hostnames.htm#considerations-custom-hostnames" target="_blank">Considerations for  Using Custom Hostnames</MadCap:xref>, using a custom domain hostname has several configuration requirements and effects on your <MadCap:variable name="Product-Names.broker_cloud_short"/>, including:</p>
    <ul>
      <li>The <MadCap:variable name="Product-Names.broker_cloud_short"/> requires a custom TLS certificate specifying a hostname associated with your custom domain. You can upload and install the custom certificate using the V2 REST API. For more information, see <MadCap:xref href="selfserve-server-certs.htm" target="_blank" alt="Link to managing custom certificates documentation">Managing Server Certificates for [%=Product-Names.broker_cloud_short_title%]s</MadCap:xref>. Alternatively, you can <a href="../get-support.htm" target="_blank" alt="link to get support topic" class="link-internal">contact <MadCap:variable name="Variables.CompanyName"/></a> to install the custom TLS certificate. Using a custom domain has specific configuration requirements that are required during deployment of <MadCap:variable name="Product-Names.cloud_product_short"/> and may not be available in all regions.</li>
      <li>A properly configured DNS with hostnames containing the custom domain hostname. You must  also configure these hostnames to have a <code>CNAME</code> that points to the initial, generated hostname in the <code>.<MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingURL"/></code> domain for the <MadCap:variable name="Product-Names.broker_cloud_short"/>. You can locate the hostname on the <b>Status</b> page for the <MadCap:variable name="Product-Names.broker_cloud_short"/> in <MadCap:variable name="Product-Names.cluster_mgr"/>. For more information, see <MadCap:xref href="ggs_create_first_service.htm#find-service-details" target="_blank">Finding the Connection Information of an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref>.</li>
      <li><MadCap:conditionalText MadCap:conditions="SAP.SapOnlyOutput">If you have <a href="enable-oauth-profiles-on-service.htm" target="_blank" alt="link to enabiling Oauth profiles for management access" class="link-internal">configured OAuth profiles to enable SSO for management access</a> to your <MadCap:variable name="Product-Names.broker_cloud_short"/>s, a</MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput">A</MadCap:conditionalText>fter adding a custom domain hostname, you may need to update your identity provider (IdP) with the new hostname and domain to continue using single sign-on (SSO) for event broker management, depending on the configuration of your IdP. For more information, see <MadCap:xref href="configure-hostnames.htm#custom-hostname-broker-sso">Considerations Using Hostnames and  [%=Product-Names.broker_cloud_short_title%] (SSO)</MadCap:xref>.</li>
      <li>This feature does not provide validation of the configuration of the custom domain hostname (or the custom domain). If you are having connectivity issues, check that the <code>CNAME</code> for your hostnames in your DNS points to the correct <MadCap:variable name="Product-Names.broker_cloud_short"/>'s  <code>.<MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingURL"/></code> address. Also, ensure that your custom TLS certificate is installed, and that its hostnames contain the custom domain name.</li>
      <li>If you are moving a hostname containing a custom domain name to a different <MadCap:variable name="Product-Names.broker_cloud_short"/>, you must ensure that the destination <MadCap:variable name="Product-Names.broker_cloud_short"/> has a custom TLS certificate containing the custom domain hostname. There is no validation  preventing you from moving your custom domain hostname. Without  a custom TLS certificate on the <MadCap:variable name="Product-Names.broker_cloud_short"/> that you're moving the custom domain hostname to, connections to that custom domain hostname fail. </li>
      <li>Depending on your network configuration, you may be required to update your DNS server to ensure that the <code>CNAME</code> for the host record points to the <MadCap:variable name="Product-Names.broker_cloud_short"/>'s system-generated hostname (the <code>.<MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingURL"/></code> address that you moved the custom domain hostname to).</li>
    </ul>
    <h2><a name="add-customhostname"/>Adding a Hostname with Custom Domain Name</h2>
    <p>You can add a hostname with custom domain name to an existing <MadCap:variable name="Product-Names.broker_cloud_short"/>. Optionally, you can set it as the primary URL used to access your <MadCap:variable name="Product-Names.broker_cloud_short"/> via the <MadCap:variable name="Product-Names.pubsubmanager_long"/> and client connections.</p>
    <p>To add a custom domain hostname to an existing <MadCap:variable name="Product-Names.broker_cloud_short"/>, perform these steps:</p>
    <ol>
      <li>
        <MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
        <li class="img.img-inline">Select <b>Cluster Manager</b> <img src="../Resources/Images/Cloud/reusable-icons/navbar_cluster_manager.png" alt=""/> from the navigation bar. </li>
        <li class="img.img-inline">Click on the <MadCap:variable name="Product-Names.broker_cloud_short"/> you want to add a hostname with custom domain hostname to. </li>
        <li>Select the <b>Manage</b> tab and then click <b>Advanced Options</b>.</li>
        <li>Scroll to <b>Hostnames</b> and click <b>Add</b>. With a custom TLS certificate installed, the <b>DNS Name</b> field starts in an active state with the <b>Hostname</b> field inactive.</li>
        <li>Use the drop-down list in the <b>DNS Name</b> field to select a custom domain hostname from those available on the custom TLS certificate. Note the following:</li>
        <ul>
          <li>If a list of custom domain names does not appear when you click on the <b>DNS Name</b> field, your custom TLS certificate may not contain domain names, or may be installed incorrectly. <a href="../get-support.htm" class="link-internal">Contact <MadCap:variable name="Variables.CompanyName"/></a> for support.</li>
          <li>Selecting a custom domain hostname without an asterisk wildcard (for example, <code>service.example.cloud</code>) populates the <b>Hostname</b> field with the selected custom domain hostname. The <b>Hostname</b> field remains inaccessible. </li>
          <li>Selecting a custom domain name with an asterisk wildcard (for example, <code>*.example.com</code>) or the default <code>.<MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingURL"/></code> domain allows access to the <b>Hostname</b> field. You can use the Hostname field to assign the hostname to the custom domain.  See <MadCap:xref href="configure-hostnames.htm#add-hostname-ui" target="_blank">Adding a Custom Hostname</MadCap:xref>.</li>
        </ul>
        <li>Use the <b>Select the endpoint to assign the hostname to</b> field and assign an endpoint. The type of endpoint available depends on the configured endpoints for the <MadCap:variable name="Product-Names.broker_cloud_short"/>. See <MadCap:xref href="edit-port-configuration.htm">Changing the Port Configuration for an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref> for information.</li>
        <li>Click <b>Add Hostname</b> to add the hostname with custom domain to the list of available hostnames. </li>
        <li>(Optional) Click the ellipses <img src="../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" class="img.img-inline" alt=""/> associated to the hostname with custom domain and click <b>Set as Default</b>. The default moves to the selected hostname.  See <MadCap:xref href="configure-hostnames.htm#add-hostname-ui" target="_blank">Adding a Custom Hostname</MadCap:xref> for more information.</li>
      </li>
    </ol>
    <p>You can confirm that the custom domain hostname is configured properly by accessing the <MadCap:variable name="Product-Names.pubsubmanager_short"/>. </p>
    <ul>
      <li>You can choose to make the custom domain hostname the primary URL used to access it from <MadCap:variable name="Product-Names.pubsubmanager_long"/>.  See <MadCap:xref href="configure-hostnames.htm#set-default-hostname" target="_blank">Setting a Hostname as Default</MadCap:xref> for more information.<ul><li>If you have done so, click <b>Open <MadCap:variable name="Product-Names.pubsubmanager_short"/></b>. If for your <MadCap:variable name="Product-Names.broker_cloud_short"/> <MadCap:variable name="Product-Names.pubsubmanager_short"/> to validate that the URL in the address bar is the custom domain hostname. For example <code>https://myservice.example.com:943/...</code>.</li><li>If the URL is incorrect, ensure that you update your DNS server so that the  <code>CNAME</code> for the host record points to the <MadCap:variable name="Product-Names.broker_cloud_short"/>'s system-generated hostname.</li></ul></li>
    </ul>
  </body>
</html>
