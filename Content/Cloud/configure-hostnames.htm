<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.ContentProductLink">
  <head>
    <title>Configuring Hostnames for Event Broker Services</title>
    <style>
			img{
			max-width: 80%;
			}
		</style>
  </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Configuring Custom Hostnames for an <MadCap:variable name="Product-Names.broker_cloud_short_title"/></h1>
    <p>Each <MadCap:variable name="Product-Names.broker_cloud_short"/> (or its connection endpoints) has a unique, randomly generated hostname,  such as  <code>mr1egxydp8fguv.<MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingHostname"/></code>. You may want to configure custom hostnames, giving you a personalized name for the host in the <code><MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingHostname"/></code> domain. You can access the <MadCap:variable name="Product-Names.broker_cloud_short"/> using the custom hostnames you've assigned, including its initial generated hostname. A custom hostname is useful for migration, improving client application integration (for example, using names that are simpler to remember or align with your hostname naming conventions), or application partitioning. For more information, see <MadCap:xref href="#use-case-alternative-hostnames">Use Cases for Using Custom Hostnames</MadCap:xref>. </p>
    <p>You can configure up to five additional hostnames to use as custom hostnames for an <MadCap:variable name="Product-Names.broker_cloud_short"/> in addition to the generated one.</p>
    <p>You can use different hostnames for different connection endpoints. This allows you to have different hostnames that client applications use depending on whether they connect via the public Internet or private IP addresses. Regardless of whether the endpoint is public or private, the hostname must be unique and exist within the <code><MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingHostname"/></code> domain. Connection endpoints are created as part of the port configuration process when you create or modify an <MadCap:variable name="Product-Names.broker_cloud_short"/>.  For more information about endpoints, see <MadCap:xref href="create-service.htm#Configure-Custom-Ports">Configuring Client Port Connections</MadCap:xref> and <MadCap:xref href="edit-port-configuration.htm">Changing the Port Configuration for an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref>.</p>
    <p>When you create an <MadCap:variable name="Product-Names.broker_cloud_short"/>, its initial, generated hostname (or connection endpoint) is assigned the <b>Default</b> status.  If there is more than one connection endpoint, the public endpoint is assigned  the <b>Default</b> status.  After you assign a hostname  as <b>Default</b>, the URL of that hostname:</p>
    <ul>
      <li>becomes the primary URL that is used to access <MadCap:variable name="Product-Names.pubsubmanager_short"/> </li>
      <li>is shown as the hostname in the <b>Status</b> or <b>Connect</b> tabs in <MadCap:variable name="Product-Names.cluster_mgr"/>. </li>
    </ul>
    <p>You can choose to assign a custom hostname you create as <b>Default</b>. The following shows the <b>Default</b> status indicator on the hostname:</p>
    <p>
      <img class="img-border" src="../Resources/Images/Cloud/default-tagged-hostname.png" alt=""/>
    </p>
    <p> You can also use a  custom domain hostname rather than have your hosts use the <code><MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingHostname"/></code> domain. For example, you could have a custom domain, such as <code>example.com</code>. If you want to use a custom domain hostname, it has specific configuration requirements, requires a custom TLS certificate to be used as part of your deployment, and may affect connectivity of existing  <MadCap:variable name="Product-Names.broker_cloud_short"/>s. For more information, see <MadCap:xref href="configure-domain-name.htm">Configuring a Custom Domain for an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref>.</p>
    <h2><a name="use-case-alternative-hostnames"/>Use Cases for Using Custom Hostnames</h2>
    <p>The following are the most common uses cases for using custom hostnames:</p>
    <dl>
      <dt>Hostname Migration</dt>
      <dd>
        <p>You may need to migrate a hostname from one <MadCap:variable name="Product-Names.broker_cloud_short"/>  to another. For example, when an <MadCap:variable name="Product-Names.broker_cloud_short"/> is deleted (or about to be deleted), its custom hostname can be used for another the <MadCap:variable name="Product-Names.broker_cloud_short"/> so that  previous client applications can connect  using the same custom hostname. Any connections from the client applications need to be re-established with the new <MadCap:variable name="Product-Names.broker_cloud_short"/>, but the configuration for the connection doesn't need to change. For example, you could have a name such as <code>myfirstservice.<MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingHostname"/></code> that you use. If you needed to create another <MadCap:variable name="Product-Names.broker_cloud_short"/>, you could simply move the hostname to the new  <MadCap:variable name="Product-Names.broker_cloud_short"/> without the need to change the configuration any of your client applications – provided you also copied over the client <MadCap:variable name="Product-Names.broker_cloud_short"/> configuration (such as client usernames, authentication, certificates, and client profiles).</p>
      </dd>
      <dd>
        <p>In addition,  you can create different hostnames that are accessible using private IP addresses or public Internet. This permits you to have a different hostname based on the connectivity from the public Internet or from a private network (via private IP addresses).</p>
      </dd>
      <dt>Application Partitioning</dt>
      <dd>
        <p>If you need to spread the load of clients connected to an <MadCap:variable name="Product-Names.broker_cloud_short"/>, you can use  multiple hostnames to spread the load (horizontally-scaling) or evenly partition the load. For example, you could configure your applications to perform a round-robin of specific hostnames to distribute the load across a set of <MadCap:variable name="Product-Names.broker_cloud_short"/>s, where each hostname maps to a different <MadCap:variable name="Product-Names.broker_cloud_short"/>.</p>
      </dd>
    </dl>
    <p>You can configure another hostname to use as a custom hostname using the <MadCap:variable name="Product-Names.console_ui_long"/> or use the  REST API for <MadCap:variable name="Product-Names.cloud_product_firstuse"/>. For more information, see the following sections.</p>
    <ul>
      <li>
        <MadCap:xref href="#config-custom-hostnames-ui">Configuring Custom Hostnames in the [%=Product-Names.console_ui_long%]</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="ght_use_rest_api_services.htm#configure-hostnames-rest-api">Configuring Custom Hostnames using the REST API</MadCap:xref>
      </li>
    </ul>
    <h2><a name="config-custom-hostnames-ui"/>Configuring Custom Hostnames in the <MadCap:variable name="Product-Names.console_ui_long"/></h2>
    <p>In the <MadCap:variable name="Product-Names.console_ui_long"/>, you can configure  custom hostnames for an existing <MadCap:variable name="Product-Names.broker_cloud_short"/> provided the calling application or your user profile is assigned the proper permission or role, respectively. The hostname you add can be used as a custom hostname to access the <MadCap:variable name="Product-Names.broker_cloud_short"/>. </p>
    <p>You can specify a custom name provided you have the permissions and follow the guidelines found in <MadCap:xref href="#considerations-custom-hostnames">Considerations for Configuring Custom Hostnames</MadCap:xref>. Specifically, you can:</p>
    <ul>
      <li><a href="#add-hostname-ui" class="link-internal">Add a custom hostname</a> to an existing <MadCap:variable name="Product-Names.broker_cloud_short"/></li>
      <li><a href="#set-default-hostname" class="link-internal">Set a hostname as the Default status </a> to make its URL the primary one to access the <MadCap:variable name="Product-Names.broker_cloud_short"/> when using the <MadCap:variable name="Product-Names.pubsubmanager_long"/> or be shown as hostname in the <MadCap:variable name="Product-Names.console_ui_long"/>.</li>
      <li><a href="#move-hostname-ui" class="link-internal">Move an existing custom hostname</a> from one <MadCap:variable name="Product-Names.broker_cloud_short"/> to another <MadCap:variable name="Product-Names.broker_cloud_short"/></li>
      <li><a href="#delete-hostname-ui" class="link-internal">Delete a custom hostname</a> from an existing <MadCap:variable name="Product-Names.broker_cloud_short"/></li>
      <li class="link-internal"><a href="#copy-hostname-ui" class="link-internal">Copy the hostname</a> from an <MadCap:variable name="Product-Names.broker_cloud_short"/> to your clipboard</li>
    </ul>
    <h3><a name="considerations-custom-hostnames"/>Considerations for  Using Custom Hostnames</h3>
    <p>The following are considerations when you use custom hostnames:</p>
    <h4><a name="custom-hostnames-naming"/>Considerations for Custom Hostnames </h4>
    <p>The following are naming conventions for custom hostnames:</p>
    <ul>
      <li>Hostnames must be alphanumeric characters (including dashes (<code>-</code>) as long as it’s not at the beginning or end of the name). The length of the hostname cannot be longer than 255 characters.</li>
      <li>A hostname must be globally unique within the domain. A validation error occurs  if a hostname   is <b>not</b> unique.</li>
      <li>
        <p>Separate hostnames can be created for a private or public endpoints and are accessible via the configured hostname provided the correct ports are used.</p>
      </li>
    </ul>
    <h4><a name="custom-hostname-moving"/>Considerations When Moving of Hostnames between <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s </h4>
    <p>When you add, move, or delete the hostname, there's a period of time before the operation completes. The initial, generated hostname  for each connection endpoint  or service can't be deleted show a Lock <img src="../Resources/Images/Cloud/reusable-icons/lock-grey.png" alt="img.img-inline"/> icon beside it. You also can't delete a hostname that has been assigned the <b>Default</b> status.</p>
    <h4><a name="custom-hostnames-permissions"/>Permissions Required to Use Custom Hostnames </h4>
    <p>The following permissions are required to add, update, or delete custom(alternate) hostnames:</p>
    <ul>
      <li>For calling applications that use the REST API, they must have one or both of the following:<ul><li>the <b>Update Services</b> permission (under My Service) to configure hostnames for services the user owns</li><li>the <b>Update Services</b> (under Organization Services) to configure hostnames for <MadCap:variable name="Product-Names.broker_cloud_short"/>s owned in the account (or Workspace)</li></ul></li>
      <li>For users in the <MadCap:variable name="Product-Names.console_ui_long"/>, they must be assigned the <MadCap:variable name="Product-Names.cm_editor"/> role.</li>
    </ul>
    <h4 MadCap:conditions="Default.ContentProductLink,SAP.SapHideFromOutput"><a name="custom-hostname-broker-sso"/>Considerations Using Custom Hostnames and  <MadCap:variable name="Product-Names.broker_cloud_short_title"/> (SSO) </h4>
    <p MadCap:conditions="SAP.SapHideFromOutput">After adding a hostname, you may need to manually update your identity provider (IdP) with the your custom hostname to continue using single sign-on (SSO) for event broker management if you set it as <b>Default</b>. The need depends on how you have set up the rules on your IdP.</p>
    <p MadCap:conditions="SAP.SapHideFromOutput">To re-enable SSO for management of your <MadCap:variable name="Product-Names.broker_cloud_short"/>, follow these steps:</p>
    <ol MadCap:conditions="SAP.SapHideFromOutput">
      <li>Add the new URI of the hostname to your identity provider. You must have the <b>Administrator</b> role in the account for <MadCap:variable name="Product-Names.cloud_product_short"/> and you can copy it from the <b>Manage Brokers</b> dialog window. See <MadCap:xref href="configure-oauth-for-broker-services.htm#retrieve-uri-event-broker-service">Retrieving the URI for an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref> for more information.</li>
      <li>Update the SSO configuration on the <MadCap:variable name="Product-Names.broker_cloud_short"/> which contains the URI for the custom hostname. For more information, see <MadCap:xref href="configure-oauth-for-broker-services.htm#update-sso-oidc-accountlevel">Updating the SSO configuration for an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref>.</li>
      <li>Test the SSO configuration and confirm that the URI for the custom hostname is used to access <MadCap:variable name="Product-Names.pubsubmanager_long"/>. For more information, see <MadCap:xref href="configure-oauth-for-broker-services.htm#test-oidc-sso">Testing Single Sign-On for an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref>.</li>
    </ol>
    <h3><a name="add-hostname-ui"/>Adding a Custom Hostname </h3>
    <p>You can add a custom hostname to access an existing <MadCap:variable name="Product-Names.broker_cloud_short"/>. That hostname is not used to access <MadCap:variable name="Product-Names.pubsubmanager_long"/> unless it is assigned as <b>Default</b>. That name however can be used by client connections to access the <MadCap:variable name="Product-Names.broker_cloud_short"/>.</p>
    <p>To add a custom hostname to an existing <MadCap:variable name="Product-Names.broker_cloud_short"/>, perform these steps:</p>
    <ol>
      <li>
        <MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
      </li>
      <li class="img.img-inline">Select <b>Cluster Manager</b> <img src="../Resources/Images/Cloud/reusable-icons/navbar_cluster_manager.png" alt=""/> from the navigation bar. </li>
      <li class="img.img-inline">On the <b>Services</b> page, click the <MadCap:variable name="Product-Names.broker_cloud_short"/> for which you want to add a hostname.</li>
      <li>
        <p>Select the <b>Manage</b> tab and then click <b>Advanced Options</b>.</p>
      </li>
      <li>
        <p>On the <b>Hostnames</b> tile, click <b>Add</b>.</p>
        <p>
          <img class="img-border" src="../Resources/Images/Cloud/add_custom_hostname.png" alt="" style="width: 880px;height: 184px;"/>
        </p>
      </li>
      <li>
        <p>In the <b>Add New Hostname</b> dialog, in the <b>Hostname</b> field, enter in a name using these rules:</p>
        <ul>
          <li>
            <p>the name can contain only alphanumeric characters or  dashes (<code>-</code>)</p>
          </li>
          <li>
            <p>the length of the name cannot be more than 255 characters</p>
          </li>
          <li>
            <p>the name must be unique in the domain</p>
          </li>
        </ul>
        <p>
          <img class="img-border" src="../Resources/Images/Cloud/add_new_hostname.png" alt="" style="width: 512px;height: 257px;"/>
        </p>
      </li>
      <li>
        <p>In the <b>Select the endpoint to assign the hostname to </b>list, select the name of the endpoint to assign. The type of endpoint available is based what endpoints are configured for the <MadCap:variable name="Product-Names.broker_cloud_short"/>.</p>
        <p class="Note">This step is available for <MadCap:variable name="Product-Names.broker_cloud_short"/> deployed in Kubernetes clusters for <MadCap:variable name="Product-Names.customer-controlled_region"/>s, <MadCap:variable name="Product-Names.public_region"/>s, and <MadCap:variable name="Product-Names.dedicated_region"/>s.</p>
      </li>
      <li>
        <p>Click <b>Validate and Add Hostname</b>. If the name is not validated, return step 5 and try another name.</p>
      </li>
    </ol>
    <p>The hostname you added appears beneath the default hostname assigned to your <MadCap:variable name="Product-Names.broker_cloud_short"/>. If you want to assign the new hostname you created as <b>Default</b>, see <MadCap:xref href="#set-default-hostname">Setting a Hostname as Default</MadCap:xref>.</p>
    <p>You can test the new hostname you've created using the <b>Try Me!</b> tab for your <MadCap:variable name="Product-Names.broker_cloud_short"/> by entering the hostname in the <b>Broker URL</b> field found in the <b>Advanced options</b>. </p>
    <h3><a name="set-default-hostname"/>Setting a Hostname as Default</h3>
    <p> You can set the <b>Default</b> status to another generated hostname or a custom hostname.  The hostname that is set as <b>Default</b> becomes the primary URL that is used to access <MadCap:variable name="Product-Names.pubsubmanager_short"/> and shown as the hostname to connect to the<MadCap:variable name="Product-Names.broker_cloud_short"/> in the <MadCap:variable name="Product-Names.console_ui_long"/>. You can only set   one hostname with the <![CDATA[  ]]><b>Default</b> status at one time.</p>
    <p>To set a hostname as  <b>Default</b>, perform these steps:</p>
    <ol>
      <li>
        <MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
      </li>
      <li class="img.img-inline">In <MadCap:variable name="Product-Names.cluster_mgr" style="font-weight: bold;"/>, on the <b>Services</b> page, click the <MadCap:variable name="Product-Names.broker_cloud_short"/> you want to assign a default hostname for.</li>
      <li>Select the <b>Manage</b> tab and then click <b>Advanced Options</b>.</li>
      <li>On the <b>Hostnames</b> tile, beside the hostname, click  <b>Actions </b><img src="../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" class="img.img-inline" alt=""/> and then select <b>Set as Default</b>.</li>
      <li>The <b>Default</b> indicator appears beside the selected hostname.</li>
    </ol>
    <h3><a name="move-hostname-ui"/>Moving a Custom Hostname</h3>
    <p>You can move a hostname from one <MadCap:variable name="Product-Names.broker_cloud_short"/> to another <MadCap:variable name="Product-Names.broker_cloud_short"/>. When you move a hostname, you can also choose whether to move it to the public or private endpoint if the endpoint exists on the target <MadCap:variable name="Product-Names.broker_cloud_short"/>. When you move a custom hostname, only the hostname is migrated—not  the settings. You are responsible for migrating any required <MadCap:variable name="Product-Names.broker_cloud_short"/> settings when you move a hostname so that client applications can connect using the same hostname as expected. </p>
    <p>These settings can include:</p>
    <ul>
      <li>authentication  settings (including any client certificates)</li>
      <li>client profiles</li>
      <li>ACL profiles</li>
      <li>client usernames</li>
    </ul>
    <div class="Note">
      <ul>
        <li>
          <p> If you attempt to move a hostname to another <MadCap:variable name="Product-Names.broker_cloud_short"/> that has the maximum number of hostnames configured, a warning message appears.</p>
        </li>
        <li>You can't move a hostname that is set as <b>Default</b>. You must move the default status to another hostname first. See <MadCap:xref href="#set-default-hostname">Setting a Hostname as Default</MadCap:xref>.</li>
      </ul>
    </div>
    <p>To move a hostname from one <MadCap:variable name="Product-Names.broker_cloud_short"/> to another, perform these steps:</p>
    <ol>
      <li class="img.img-inline">In <MadCap:variable name="Product-Names.cluster_mgr" style="font-weight: bold;"/>, on the <b>Services</b> page, click the <MadCap:variable name="Product-Names.broker_cloud_short"/> that you want to move a hostname from.</li>
      <li>Select the <b>Manage</b> tab and then click <b>Advanced Options</b>.</li>
      <li>On the <b>Hostnames</b> tile beside the hostname that you want to move,  click <b>Actions</b> <img src="../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" class="img.img-inline" alt=""/>, and then in the drop-down list, select <b>Move</b>.</li>
      <li>In the <b>Move Hostname</b> dialog, choose the <MadCap:variable name="Product-Names.broker_cloud_short"/> that you want to move the hostname to from the <b>Select the service your wish to move it to</b> drop-down list.
			<p><img class="img-border" src="../Resources/Images/Cloud/move_hostname.png" alt="" style="width: 618px;height: 273px;"/></p></li>
      <li>
        <p>In the <b>Select the endpoint to assign to hostname</b>, select the name of the endpoint to assign. The type of endpoint available is based on what endpoints are configured for the <MadCap:variable name="Product-Names.broker_cloud_short"/>.</p>
        <p class="Note">This step is available for <MadCap:variable name="Product-Names.broker_cloud_short"/> deployed on Kubernetes for <MadCap:variable name="Product-Names.customer-controlled_region"/>s, <MadCap:variable name="Product-Names.dedicated_region"/>s, and  <MadCap:variable name="Product-Names.public_region"/>s.</p>
      </li>
      <li>Click <b>Move Hostname</b>.</li>
    </ol>
    <p>In the <b>Hostnames</b> tile, a <b>Moving</b> tag appears beside the hostname that is moving until the operation competes. The process may take a few minutes.</p>
    <h3><a name="delete-hostname-ui"/>Deleting a Custom Hostname</h3>
    <p>You can remove a custom hostname from an <MadCap:variable name="Product-Names.broker_cloud_short"/>. It's important to note that you can't remove the system-generated hostnames that's assigned to the <MadCap:variable name="Product-Names.broker_cloud_short"/>, and you can't delete a hostname that is set as  <b>Default</b>. To delete a custom hostname, you must remove <b>Default</b> status first. See <MadCap:xref href="#set-default-hostname">Setting a Hostname as Default</MadCap:xref> for more information.</p>
    <p class="Warning">Deleting a hostname impacts the connectivity of clients that use the deleted hostname. Don't delete an existing hostname if you don't want connectivity to be impacted.</p>
    <p>To remove a hostname from an <MadCap:variable name="Product-Names.broker_cloud_short"/>, perform these steps:</p>
    <ol>
      <li class="img.img-inline">In <MadCap:variable name="Product-Names.cluster_mgr" style="font-weight: bold;"/>, on the <b>Services</b> page, click the <MadCap:variable name="Product-Names.broker_cloud_short"/> that you want to delete a hostname from.</li>
      <li>Select the <b>Manage</b> tab and then click <b>Advanced Options</b>.</li>
      <li>On the <b>Hostnames</b> tile beside the hostname you want to remove, click <b>Actions </b><img src="../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" class="img.img-inline" alt=""/> and then select <b>Delete</b>.</li>
      <li>
        <p>In the <b>Delete Hostname</b> confirmation dialog, click <b>Delete Hostname</b> to confirm that you want to delete the host name.</p>
        <p>
          <img class="img-border" src="../Resources/Images/Cloud/delete_hostname.png" alt="" style="width: 674px;height: 180px;"/>
        </p>
      </li>
    </ol>
    <p>In the <b>Hostnames</b> tile, a <b>Deleting</b> tag appears beside the hostname that you are deleting until the operation completes. The process may take a few minutes.</p>
    <h3><a name="copy-hostname-ui"/>Copying the FQDN for the Hostname </h3>
    <p>You can copy a hostname from an <MadCap:variable name="Product-Names.broker_cloud_short"/> to your clipboard to paste elsewhere. The copied name is the fully-qualified domain name (FQDN), such as <code>mr-1egxydp8fguv.<MadCap:variable name="Manifest-Products-Links.CloudConsoleMessagingHostname"/></code>. </p>
    <p>To copy the  FQDN of the hostname to the clipboard, perform these steps:</p>
    <ol>
      <li class="img.img-inline">In <MadCap:variable name="Product-Names.cluster_mgr" style="font-weight: bold;"/>, on the <b>Services</b> page, click the <MadCap:variable name="Product-Names.broker_cloud_short"/> that you want to copy the hostname from.</li>
      <li>Select the <b>Manage</b> tab and then click <b>Advanced Options</b>.</li>
      <li>On the <b>Hostnames</b> tile, beside the hostname that you want to copy, click  <b>Actions </b><img src="../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" class="img.img-inline" alt=""/> and then select <b>Copy to Clipboard</b>.</li>
    </ol>
    <p>The FQDN is copied to your clipboard is available for you to paste. </p>
  </body>
</html>
