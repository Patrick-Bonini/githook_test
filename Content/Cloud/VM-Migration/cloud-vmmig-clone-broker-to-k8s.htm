<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.OnlyForPDF">
  <head>
    </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Clone the <MadCap:variable name="Product-Names.broker_cloud_short_title"/> for Migration</h1>
    <p>To  simplify migration, you can clone an <MadCap:variable name="Product-Names.broker_cloud_short"/> using <MadCap:variable name="Product-Names.cluster_mgr"/> in the <MadCap:variable name="Product-Names.console_ui_long"/>. Cloning an <MadCap:variable name="Product-Names.broker_cloud_short"/> allows you to create copies of existing <MadCap:variable name="Product-Names.broker_cloud_short"/>s, including their configurations. The copy includes most of the <MadCap:variable name="Product-Names.broker_cloud_short"/> configurations, including clients, queues, connectors, access control, and caches.  For a list of items that aren't cloned, see the <MadCap:xref href="#Consider">Considerations for Cloning an [%=Product-Names.broker_cloud_short_title%] Using the [%=Product-Names.console_ui_short%]</MadCap:xref>. </p>
    <p>Before you begin, the Source <MadCap:variable name="Product-Names.broker_cloud_short"/> in your VM-based deployment must have a custom hostname configured. Client applications must be configured to use the custom hostname as an alternate hostname for messaging. For more information, see <MadCap:conditionalText MadCap:conditions="Default.NotForPDF"><MadCap:xref href="../configure-hostnames.htm">Configuring Hostnames for [%=Product-Names.broker_cloud_short_title%]s</MadCap:xref></MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="Default.OnlyForPDF"><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/configure-hostnames.htm" target="_blank" class="link-offsite">Configuring Hostnames for <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s</a></MadCap:conditionalText>.</p>
    <h2><a name="Consider"/>Considerations for Cloning an <MadCap:variable name="Product-Names.broker_cloud_short_title"/></h2>
    <p>Consider the following information when using the <MadCap:variable name="Product-Names.console_ui_short"/> to clone an <MadCap:variable name="Product-Names.broker_cloud_short"/>.</p>
    <ul>
      <li>You can only clone <MadCap:variable name="Product-Names.broker_cloud_short"/>s that are version 10.0 or greater. If the <MadCap:variable name="Product-Names.broker_cloud_short"/> you want to clone is not 10.0 or greater, you must upgrade it before cloning. See <MadCap:xref href="../upgrade-event-broker.htm" target="_blank" MadCap:conditions="Default.NotForPDF">Upgrading [%=Product-Names.broker_cloud_short_title%]s in [%=Product-Names.cloud_product_titlecase%]</MadCap:xref><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/upgrade-event-broker.htm" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Upgrading <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s in <MadCap:variable name="Product-Names.cloud_product_titlecase"/></a>.</li>
      <li>You must have the <MadCap:variable name="Product-Names.cm_editor"/> or Administrator role. For more information, see <MadCap:xref href="../cloud-user-management.htm#Roles" target="_blank" MadCap:conditions="Default.NotForPDF">Roles and Permissions</MadCap:xref><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/cloud-user-management.htm#Roles" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Roles and Permissions</a>.</li>
      <li>Before cloning <MadCap:variable name="Product-Names.broker_cloud_short"/>s, we recommend that you confirm that  the Kubernetes-based region (datacenter) has the service classes that you require. </li>
      <li MadCap:conditions="SAP.SapHideFromOutput"> Your account must also have enough available services to create new <MadCap:variable name="Product-Names.broker_cloud_short"/>s. The number of services that you can create in your account are based on your <i>service limits</i>. <MadCap:variable name="Variables.CompanyName"/> has provided additional temporary licenses to enable migration of VM-based <MadCap:variable name="Product-Names.broker_cloud_short"/>s. If you require more services or have reached your service limits, see <MadCap:xref href="../ght_capacity_increase.htm" MadCap:conditions="Default.NotForPDF">Increasing Your Capacity or Number of [%=Product-Names.broker_cloud_short_title%]s</MadCap:xref><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/ght_capacity_increase.htm" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Increasing Your Capacity or Number of <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s</a>. </li>
      <li>
        <p>You can only create a clone <MadCap:variable name="Product-Names.broker_cloud_short"/> with the same service class and version as the Source <MadCap:variable name="Product-Names.broker_cloud_short"/>. To upscale or upgrade an <MadCap:variable name="Product-Names.broker_cloud_short"/>, see <MadCap:xref href="../scaling_services.htm" target="_blank" MadCap:conditions="Default.NotForPDF">Upscaling an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/scaling_services.htm" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Upscaling an <MadCap:variable name="Product-Names.broker_cloud_short_title"/></a> and <MadCap:xref href="../upgrade-event-broker.htm" MadCap:conditions="Default.NotForPDF">Upgrading [%=Product-Names.broker_cloud_short_title%]s in [%=Product-Names.cloud_product_titlecase%]</MadCap:xref><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/upgrade-event-broker.htm" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Upgrading <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s in <MadCap:variable name="Product-Names.cloud_product_titlecase"/></a>.</p>
      </li>
      <li>
        <p>During the clone process, the following <MadCap:variable name="Product-Names.broker_cloud_short"/>'s configurations are not cloned:
        <ul><li>Bridge configuration</li><li>Event mesh configuration (Dynamic Message Routing (DMR) configuration)</li><li>Distributed tracing configuration</li><li>Single sign-on (SSO) configuration (OAuth profiles)</li><li><MadCap:variable name="Product-Names.broker_cloud_short_intitalcap"/> SSO (for management access)</li><li>Any client certificates other than those used for REST delivery points (RDPs)</li><li>Domain and Client Certificate Authorities (CA). You can choose to clone them by <a href="#CloneCerts" class="link-internal">enabling the option to do so on the Create Service: Clone page</a>. </li></ul></p>
      </li>
      <li>
        <p>Cloning enables the same ports and port numbers  from the Source service. You  can change the connection endpoints that are enabled or change the ports in the cloned service or edit them after. For more information about the port details, see <MadCap:xref href="../create-service.htm#port-configuration-details" MadCap:conditions="Default.NotForPDF">Details for Port Configuration</MadCap:xref><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/create-service.htm#port-configuration-details" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Details for Port Configuration</a>. </p>
        <p class="Note">Port numbers are not cloned if you are using NodePort. The same ports will be enabled or disabled, but new numbers will be generated after service creation.
				</p>
      </li>
      <li>Cloning an <MadCap:variable name="Product-Names.broker_cloud_short"/> with <a href="../ght_service_deletion_protection.htm" target="_blank" class="link-internal" MadCap:conditions="Default.NotForPDF">deletion protection enabled</a><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/ght_service_deletion_protection.htm" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">deletion protection enabled</a> creates a new <MadCap:variable name="Product-Names.broker_cloud_short"/> that also has deletion protection enabled. If creation of the new <MadCap:variable name="Product-Names.broker_cloud_short"/> fails, the deletion protection is disabled, allowing you to delete it. </li>
    </ul>
    <h2>Cloning an <MadCap:variable name="Product-Names.broker_cloud_short_title"/></h2>
    <ol>
      <li><MadCap:snippetText src="../../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp">
                </MadCap:snippetText><![CDATA[
               ]]></li>
      <li>Select <MadCap:variable name="Product-Names.cluster_mgr" style="font-weight: bold;"/><img src="../../Resources/Images/Cloud/reusable-icons/navbar_cluster_manager.png" class="img.img-inline" alt="cluster manager icon"/> on the navigation bar. </li>
      <li>On the <b>Services</b> page,  locate the card that matches the service you want to clone and click <b>Actions </b><img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" class="img.img-inline" alt="more actions icon"/> and then select <b>Clone Service</b>.
           <p>The <b>Create Service: Clone Pre-Check</b> dialog opens.</p><p><img class="img-border" src="../../Resources/Images/Cloud/clone_pre_check_example.png" alt=""/></p><p> The <b>Create Service: Clone Pre-Check</b> dialog includes a list of pre-check validations as well as any warning or errors. These items are related to the information and prerequisites listed in <MadCap:xref href="#Consider">Considerations for Cloning an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref>.
            <ul><li>Pre-check validations passed—items that passed validation, shown for informational purposes</li><li>Warnings—items that can't or won't be cloned, shown for informational purposes only</li><li>Errors—items preventing the clone process from continuing. Errors indicate the issue and actions you can take to remedy them</li></ul></p></li>
      <li>Click <b>Continue</b>. 
				<p>The <b>Create Service: Clone</b> page opens. </p><p><div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Cloud/Clone_Create_Service.png" alt=""/></div></p><p>The <b>Service Name</b> field populates with the same name as the  source VM-<MadCap:variable name="Product-Names.broker_cloud_short"/> appended with '- Clone'. You can optionally enter a new name for the clone <MadCap:variable name="Product-Names.broker_cloud_short"/>.</p><p>You must select a <b>Cloud</b> and <b>Region</b> using the provided fields. </p><p class="Note" MadCap:conditions="SAP.SapHideFromOutput,Default.HideFromAllOutput">If you are cloning a VM-based <MadCap:variable name="Product-Names.broker_cloud_short"/> as part of a migration to Kuberenetes, the <b>Cloud</b> and <b>Region</b> fields don't populate with the data from the source <MadCap:variable name="Product-Names.broker_cloud_short"/>. You must complete these fields as part of the cloning process. </p><p>Other fields on the <b>Create Service: Clone</b> page cannot be changed. These include the <b>Service Type</b> and <b>Broker Version</b> fields. </p></li>
      <li>Click <b>Advanced Connection Options</b> to ensure that the configuration of the connectivity options for the cloned <MadCap:variable name="Product-Names.broker_cloud_short"/> are the same as the service you are cloning. Both of these must be the same:<br/><ul><li><b>Message VPN Name</b></li><li><b>Cluster Name</b></li></ul></li>
      <li>(Optional) Click <b>Port Configuration</b> under <b>Advanced Connection Options</b> to change the connection endpoints.            <p>You can configure your connection endpoints to match the Source <MadCap:variable name="Product-Names.broker_cloud_short"/>. To do so, use the port numbers listed on the <b>Port Configuration</b> tile in <b>Manage &gt; Advanced Options</b> for the Source service.</p><p>For more information about configuring ports, see <MadCap:xref href="../create-service.htm#Configure-Custom-Ports" MadCap:conditions="Default.NotForPDF">Configuring Client and Management Ports</MadCap:xref><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/create-service.htm#Configure-Custom-Ports" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Configuring Client and Management Ports</a>.</p></li>
      <li><a name="CloneCerts"/>(Optional) Under <b>Clone Options</b>, select the <b>Certificate Authorities</b> check box if you want to copy the client and domain CA certificates from the Source service. See <MadCap:xref href="../server_certs.htm" MadCap:conditions="Default.NotForPDF">Configure Certificates for Server and Client Authentication</MadCap:xref><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/server_certs.htm" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Configuring Certificates for Server and Client Authentication</a> for more information. </li>
      <li>Click <b>Create Service</b>. </li>
    </ol>
    <p>The creation of the cloned the cloned service takes a few minutes. When cloning is complete, your new <MadCap:variable name="Product-Names.broker_cloud_short"/> starts. You can view your created service in <MadCap:variable name="Product-Names.cluster_mgr"/> on the <b>Services</b> page. See <MadCap:xref href="../cloud-configure-messaging-services.htm" MadCap:conditions="Default.NotForPDF">Viewing and Configuring [%=Product-Names.broker_cloud_short_title%]s</MadCap:xref><a href="[%=Manifest-Products-Links.WebsitePDFLinks%]/Cloud/cloud-configure-messaging-services.htm" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Viewing and Configuring <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s</a>.</p>
    <p MadCap:conditions="SAP.SapHideFromOutput">(Optional) If you have a custom domain configured for your event broker services, the custom TLS certificate must be installed on both <MadCap:variable name="Product-Names.broker_cloud_short"/>s. <MadCap:conditionalText MadCap:conditions="Default.NotForPDF"><a href="../../get-support.htm" target="_blank" class="link-internal">Contact <MadCap:variable name="Variables.CompanyName"/></a></MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="Default.OnlyForPDF">Contact <MadCap:variable name="Variables.CompanyName"/></MadCap:conditionalText> for more information.</p>
  </body>
</html>
