<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1><MadCap:concept term="Cloud"/><MadCap:concept term="Cloud"/>Managing Users with the <MadCap:variable name="Product-Names.cloud_product_titlecase"/> REST API</h1>
    <MadCap:snippetBlock src="../Resources/Snippets/Cloud/REST-API/pointv2APIs.flsnp" MadCap:conditions="SAP.SapHideFromOutput"/>
    <p>With the <MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput"><MadCap:variable name="Product-Names.cloud_product_long"/></MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="SAP.SapOnlyOutput"><MadCap:variable name="Product-Names.cloud_product_firstuse"/></MadCap:conditionalText> REST API and API token support for user management, you can create, update, and delete users  programmatically.</p>
    <p>This tutorial shows you how to:</p>
    <ul>
      <li>Create and invite a user to <MadCap:variable name="Product-Names.cloud_product_short"/>. For more information, see <MadCap:xref href="#create-user">Creating a User</MadCap:xref>.</li>
      <li>Getting Users in an Account. For more information, see <MadCap:xref href="#get-allusers">Getting All Users from Account.</MadCap:xref></li>
      <li>Retrieve the user's information. For more information, see <MadCap:xref href="#get-user">Get User Details</MadCap:xref>.</li>
      <li>Determine available roles and assign one or more roles to the user. For more information, see <MadCap:xref href="#assign-role">Assign Roles to a User</MadCap:xref>.</li>
      <li>Delete a user from your account. For more information, see <MadCap:xref href="#delete-user">Delete a User</MadCap:xref>.</li>
    </ul>
    <h2>Before you Begin</h2>
    <p>Before you can start this tutorial, you'll require the following:</p>
    <ul>
      <li>An Enterprise Account for <MadCap:variable name="Product-Names.cloud_product_short"/>. Only Enterprise Accounts support multiple users; REST endpoints in this example cannot be used otherwise.</li>
      <li>Your account must be assigned the Administrator role.</li>
      <li>An API token with at least the  following permissions under <b>Account
Management</b>:<ul><li><b>Get Users</b></li><li><b>Get Roles</b></li><li><b>Create Users</b></li><li><b>Delete Users</b></li><li><b>Set
Roles</b></li></ul><p>For more information, see <MadCap:xref href="ght_api_tokens.htm#Create">Creating an API Token</MadCap:xref>.</p></li>
      <li>
        <p>A way to send REST messages from your development environment. We use Postman in this tutorial. You can use the <a href="https://documenter.getpostman.com/view/4953125/RztsomaP?version=latest" target="_blank">Solace Blogs – Solace Cloud User Management</a> Postman collection and click the <b>Run in Postman</b> button to import the collection to Postman, which permits you to easily work through the steps in this tutorial. Alternatively, you can simply make each call by specifying it REST API in Postman after you've set up the environment in Postman to use your API token. For more information about setting up Postman, see <MadCap:xref href="ght_api_tokens.htm">Using an API Token with Postman</MadCap:xref>.</p>
        <MadCap:snippetBlock src="../Resources/Snippets/Cloud/restapi_checktoken.flsnp"/>
      </li>
    </ul>
    <h2><a name="create-user"/>Creating a User</h2>
    <p>You can use the <MadCap:variable name="Product-Names.cloud_product_short"/> REST API to create a user. To create a user, follow these steps:</p>
    <ol>
      <li>In the Postman Collection <b>Solace Blogs – Solace Cloud User Management</b>, select the request <b>POST Invite User</b>. The POST request would be to the URL, <code><MadCap:variable name="Manifest-Products-Links.CloudRESTAPIPrefix"/>users</code>.	</li>
      <li>In the Body, modify the <code>email</code> object's value to the email address of the user you wish to invite, then click the <b>Send</b> button.<p><div class="thumbnail-container"><img class="solacethumbnail" src="../Resources/Images/Cloud/restapi/use_api_invite_user.png" alt=""/></div></p><p>You should see a JSON response confirming that the specified user was invited.</p></li>
      <li>Go to the <MadCap:variable name="Product-Names.console_ui_long"/>, click <b>User &amp; Account  </b> <img src="../Resources/Images/Cloud/reusable-icons/useraccount_green_navbar.png" alt=" "/> on the navigation bar, select <b>Account Details</b>, and then select the <b>User Management</b> tab. On the page, you should see the invited user.<p><div class="thumbnail-container"><img class="solacethumbnail" src="../Resources/Images/Cloud/restapi/invite_console.png" alt=""/></div></p></li>
    </ol>
    <p>You have just successfully invited another user. The user for the email address you specified should receive an invitation email that guides the them through the rest of the activation process.</p>
    <h2><a name="get-allusers"/>Getting All Users from Your Account</h2>
    <p class="Note" MadCap:conditions="SAP.SapHideFromOutput">You can perform this procedure using our feature-rich and consistent v2 REST API. See the  <a href="[%=Manifest-Products-Links.ReadmeReference%]/getusers" class="link-offsite">Get a list of users in your account</a> in the <a href="[%=Manifest-Products-Links.ReadmeReference%]/using-the-v2-rest-apis-for-pubsub-cloud" target="_blank" class="link-offsite"><MadCap:variable name="Product-Names.pubsub_brand_only"/> v2 REST API Reference</a> for more information. </p>
    <p>You can get a list of all the users for an account for which the API token was created. To  find all the users in an account,  follow these steps:</p>
    <ol>
      <li>In the Postman Collection <b>Solace Blogs – Solace Cloud User Management</b>, select the request <b>Get Users in My Account</b>. The GET request would be to the URL, <code><MadCap:variable name="Manifest-Products-Links.CloudRESTAPIPrefix"/>users</code>.</li>
      <li>Click <b>Send</b>.<p><div class="thumbnail-container"><img class="solacethumbnail" src="../Resources/Images/Cloud/restapi/use_api_get_all_users.png" alt=""/></div></p><p>You should see the details for all user in the response. An important part of the information is the <code>userId</code>, which is used for the other commands.</p></li>
    </ol>
    <h2><a name="get-user"/>Getting the Details of a User</h2>
    <p class="Note" MadCap:conditions="SAP.SapHideFromOutput">You can perform this procedure using our feature-rich and consistent v2 REST API. See the  <a href="[%=Manifest-Products-Links.ReadmeReference%]/getusers" class="link-offsite">Get a list of users in your account</a> in the <a href="[%=Manifest-Products-Links.ReadmeReference%]/using-the-v2-rest-apis-for-pubsub-cloud" target="_blank" class="link-offsite"><MadCap:variable name="Product-Names.pubsub_brand_only"/> v2 REST API Reference</a> for more information. </p>
    <p>Once you know the user, you can retrieve details about the user based on the <code>userId</code> value. You can use the <b>Get Users in My Account</b> command to find that information. To get the details of a user, follow these steps:</p>
    <ol>
      <li>In the Postman Collection <b>Solace Blogs – Solace Cloud User Management</b>, select the request <b>Get User in Account</b>. The GET request would be to the URL, <code><MadCap:variable name="Manifest-Products-Links.CloudRESTAPIPrefix"/>users/{userId}</code>. </li>
      <li>Modify Get request URL and replace the  <code>{userId}</code>  with the	userID value you want. In this case, we put <code>16kpvpyui5vp</code>.</li>
      <li>Click <b>Send</b>.<p><div class="thumbnail-container"><img class="solacethumbnail" src="../Resources/Images/Cloud/restapi/use_api_get_single_user.png" alt=""/></div></p><p>You should see the details of the specified user in the response.</p></li>
    </ol>
    <h2><a name="assign-role"/>Assigning Roles to a User</h2>
    <p>One you've  created and retrieved the details of your user, you can try change the roles assigned to a user. First, we'll want to determine the roles that are available for assigning. To determine the roles available that you can assign, use these steps:</p>
    <ol>
      <li>In the <b>Solace Blogs – Solace Cloud User Management</b>  Postman Collection, select the <b>Get Roles in Account</b> request. The GET request would be to the URL, <code><MadCap:variable name="Manifest-Products-Links.CloudRESTAPIPrefix"/>organization/roles</code>.</li>
      <li>
        <p>Click <b>Send</b>.</p>
        <p>
          <div class="thumbnail-container">
            <img class="solacethumbnail" src="../Resources/Images/Cloud/restapi/use_api_get_roles.png" alt=""/>
          </div>
        </p>
        <p>You should be see a list of available roles, each with a list of permissions they contain.</p>
      </li>
    </ol>
    <p>Now, use the following  steps to set the roles for a user:</p>
    <ol>
      <li>
        <p>In the  <b>Solace Blogs – Solace Cloud User Management</b> Postman Collection, select the <b>PUT Set Roles for User</b> request. The PUT request would be to the URL, <code><MadCap:variable name="Manifest-Products-Links.CloudRESTAPIPrefix"/>users/{userId}/roles</code></p>
      </li>
      <li>
        <p>Modify PUT request URL and replace the  <code>{userId}</code>  with value of the user you want to assign roles to. In the body of the request, set the see the value <code>messaging-service-editor</code> and <code>billing-administrator</code> for the <code>id</code> field. Multiple roles are simply specified as an additional  <code>id</code>. This ID corresponds to one of the roles returned from the previous <b>Get Roles in Account</b> request. When you send the request, the user's existing roles are replaced with the ones you've specified.</p>
      </li>
      <li> Click <b>Send</b>.
                <p><div class="thumbnail-container"><img class="solacethumbnail" src="../Resources/Images/Cloud/restapi/use_api_set_user_roles.png" alt=""/></div></p><p>You should receive a <code>200 OK</code> response that confirms roles were successfully assigned to the user.</p></li>
    </ol>
    <h2><a name="delete-user"/>Deleting a User</h2>
    <p>You can delete a user. It's typical to delete users that you've used for testing and that you may want to remove as part of clean-up. To delete a user, follow these steps:</p>
    <ol>
      <li>In the <b>Solace Blogs – Solace Cloud User Management</b> Postman Collection, select the <b>Delete User</b> request. The DELETE request would be to the URL, <code><MadCap:variable name="Manifest-Products-Links.CloudRESTAPIPrefix"/>users/{userId}</code></li>
      <li>Modify Delete request URL and replace the  <code>{userId}</code>  with the	identifier of the user that you want to delete. </li>
      <li>Click <b>Send</b>.<p><div class="thumbnail-container"><img class="solacethumbnail" src="../Resources/Images/Cloud/restapi/use_api_delete_user.png" alt=""/></div></p><p>You should receive a <code>200 OK</code> response that confirms deletion of the user was successful.</p></li>
    </ol>
  </body>
</html>
