<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Using NAT with Static IP Addresses for Outbound Connections for Kubernetes-Based Deployments</h1>
    <p>Outbound connections are required when <MadCap:variable name="Product-Names.broker_cloud_short"/>s initiate the connections for the following scenarios:</p>
    <ul>
      <li>using  REST destination points (RDPs) to deliver REST requests to a remote server, for example, for outbound RDPs by subscribing applications (consumers)</li>
      <li>linking to a replication mate (for disaster recovery)</li>
      <li>creating Dynamic Message Routing (DMR) links to another node</li>
      <li>creating VPN bridges made to other brokers</li>
      <li>spawning new connections to an LDAP database</li>
    </ul>
    <p>For <MadCap:variable name="Product-Names.dedicated_region"/> and <MadCap:variable name="Product-Names.public_region"/> deployments, the availability of static IPs depends on the <a href="deployment-options-ownership.htm" target="_blank" class="link-internal">deployment type</a> and cloud provider you choose. For more information, see <MadCap:xref href="K8s-dedicated-source-target-ips.htm">Static IP Availability for Inbound and Outbound Connections in [%=Product-Names.public_region%]s and [%=Product-Names.dedicated_region%]s</MadCap:xref>. If static IPs are available, you can <a href="../../get-support.htm" target="_blank" class="link-internal">contact <MadCap:variable name="Variables.CompanyName"/></a> to request the static IP address of the network address translation (NAT). <br/></p>
    <p><span>For <MadCap:variable name="Product-Names.customer-controlled_region"/>s, <MadCap:variable name="Variables.CompanyName"/> recommends that customers create a  Network Address Translation (NAT) in each Kubernetes cluster where the <MadCap:variable name="Product-Names.broker_cloud_short"/>s are deployed to handle outbound connections.</span> Each NAT can be configured to have its own public static IP address. When a <MadCap:variable name="Product-Names.broker_cloud_short"/> connects to an external host, the source IP address of the connections is the NAT's public static IP address. Because external hosts must know the IP addresses to allow for their firewalls to permit secure connections, it is useful to use a static IP address.</p>
    <p>
      <span><MadCap:variable name="Variables.CompanyName"/> also recommends that the customer deploys at least two NATs for better resilience and redundancy. Access for the inbound connections for external clients continues through a public load balancer.</span>
    </p>
    <p>Using public static IP addresses via NAT for outbound connections has these advantages:</p>
    <ul>
      <li>external hosts can modify their allow lists to use static IP address through their firewalls; the same IP address is used when multiple <MadCap:variable name="Product-Names.broker_cloud_short"/> come from the same datacenter</li>
      <li>improved security because the worker nodes are no longer exposed to public IP addresses </li>
      <li>improved reliability and resilience because when an <MadCap:variable name="Product-Names.broker_cloud_short"/> is upgraded or restarted, its IP address may change and the renewed, private IP addresses can be quickly remapped to the static IP address of the NAT</li>
    </ul>
  </body>
</html>
