<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Kubernetes Upgrades in <MadCap:variable name="Product-Names.cloud_product_titlecase"/></h1>
    <p><a href="https://kubernetes.io/" target="_blank" class="link-offsite">Kubernetes</a> releases new versions at <a href="https://kubernetes.io/releases/release/#the-release-cycle" target="_blank" class="link-offsite">a specific cadence</a>. The Kubernetes providers and distributions release their implementations on their own schedules. New Kubernetes versions can introduce or remove APIs and features and include security and bug fixes.</p>
    <p>For <MadCap:variable name="Product-Names.cloud_product_short"/>, <MadCap:variable name="Variables.CompanyName"/> has a Kubernetes Adoption Policy that defines the process for testing, validating, and adopting Kubernetes versions from a set list of providers and distributions. This policy outlines:</p>
    <ul>
      <li>
        <MadCap:xref href="#Upgradin3">Upgrading Kubernetes Clusters to New Versions</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Kubernet">Kubernetes Provider Categories</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Support">Support Level for New Kubernetes and [%=Product-Names.broker_cloud_short_title%] Releases</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Deprecat">Deprecation of Support</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Kubernet3">Kubernetes Adoption Policy Frequently Asked Questions</MadCap:xref>
      </li>
    </ul>
    <h2><a name="Upgradin3"/>Upgrading Kubernetes Clusters to New Versions</h2>
    <p>When <MadCap:variable name="Variables.CompanyName"/> validates a new version of Kubernetes, we schedule cluster upgrades according to the type of deployment you are using. This section explains:</p>
    <ul>
      <li>How we notify you when an upgrade is required. See <MadCap:xref href="#Upgrade">Upgrade Notifications</MadCap:xref>.</li>
      <li>When upgrades happen, what version we upgraded you to, and how often we perform cluster upgrades. See <MadCap:xref href="#Upgradin">Upgrading [%=Product-Names.public_region%] and [%=Product-Names.dedicated_region%]s</MadCap:xref>.</li>
      <li>Responsibilities for <MadCap:xref href="#Upgradin2">Upgrading [%=Product-Names.customer-controlled_region%] Regions</MadCap:xref>.</li>
      <li>What impact you can expect to your <MadCap:variable name="Product-Names.broker_cloud_short"/>s during the cluster upgrade. See <MadCap:xref href="#Cluster">Cluster Upgrade Impact</MadCap:xref>.</li>
    </ul>
    <h3><a name="Upgrade"/>Upgrade Notifications</h3>
    <p><MadCap:variable name="Variables.CompanyName"/> either notifies or contacts you based your deployment type:</p>
    <table style="width: 100%;margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
      <col class="TableStyle-Table_Num-Column-Column1">
            </col>
      <col class="TableStyle-Table_Num-Column-Column1">
            </col>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Deployment Type</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Notification Policy</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p>
              <MadCap:variable name="Product-Names.public_region"/>
            </p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p><MadCap:variable name="Variables.CompanyName"/> notifies you before a scheduled upgrade, typically 14 days in advance.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p>
              <MadCap:variable name="Product-Names.dedicated_region"/>
            </p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p>You can proactively schedule a Kubernetes cluster upgrade via <a href="[%=Manifest-Products-Links.CloudCalendlyK8Upgrades%]" alt="Link to Calendly" class="link-offsite">Calendly</a>; otherwise, <MadCap:variable name="Variables.CompanyName"/> will contact you to schedule it.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p>
              <MadCap:variable name="Product-Names.customer-controlled_region"/>
            </p>
          </td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p>  Maintenance of clusters in <MadCap:variable name="Product-Names.customer-controlled_region"/>s is your responsibility. See <MadCap:xref href="#Upgradin2">Upgrading [%=Product-Names.customer-controlled_region%] Regions</MadCap:xref>.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <h3><a name="Upgradin"/>Upgrading <MadCap:variable name="Product-Names.public_region"/>s and <MadCap:variable name="Product-Names.dedicated_region"/>s</h3>
    <p>Kubernetes cluster upgrades of <MadCap:variable name="Product-Names.public_region"/>s and <MadCap:variable name="Product-Names.dedicated_region"/>s apply to the Kubernetes providers listed in the primary category, as outlined in <MadCap:xref href="#Kubernet">Kubernetes Provider Categories</MadCap:xref>. For both <MadCap:variable name="Product-Names.public_region"/>s and <MadCap:variable name="Product-Names.dedicated_region"/>s, the upgrade policies are similar and are summarized as follows:</p>
    <ul>
      <li><MadCap:variable name="Variables.CompanyName"/> upgrades the cluster within 180 days of either the end of support for, or end of life of, the current Kubernetes version.</li>
      <li><MadCap:variable name="Variables.CompanyName"/> upgrades the cluster to the latest  supported version of Kubernetes for which we have validated a provider or distribution.</li>
      <li><MadCap:variable name="Variables.CompanyName"/> performs up to two Kubernetes upgrades within a 12-month period. Exceptions to this may occur due to security and stability patch reviews. See <MadCap:xref href="#Support3">Support for Security and Stability Updates</MadCap:xref>.</li>
    </ul>
    <h3><a name="Upgradin2"/>Upgrading <MadCap:variable name="Product-Names.customer-controlled_region"/>s</h3>
    <p>In <MadCap:variable name="Product-Names.customer-controlled_region"/>s, you are responsible for keeping the Kubernetes cluster up-to-date. Your Kubernetes cluster version and your <MadCap:variable name="Product-Names.broker_cloud_short"/> version must be compatible. For more information about version compatibility, see <MadCap:xref href="cloud-broker-k8s-versions-support.htm">Supported Kubernetes Versions</MadCap:xref>. If your <MadCap:variable name="Product-Names.broker_cloud_short"/>s need to be upgraded before you upgrade your Kubernetes cluster, <a href="../../get-support.htm" class="link-internal">contact <MadCap:variable name="Variables.CompanyName"/></a> to schedule an upgrade. For more information, see <MadCap:xref href="../upgrade-event-broker.htm">Upgrading [%=Product-Names.broker_cloud_short_title%]s in [%=Product-Names.cloud_product_titlecase%]</MadCap:xref>.</p>
    <h3><a name="Cluster"/>Cluster Upgrade Impact to <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s</h3>
    <p>During a cluster upgrade, there may be some downtime for your <MadCap:variable name="Product-Names.broker_cloud_short"/>:</p>
    <ul>
      <li>
        <p>For <MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput">standalone and developer</MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="SAP.SapOnlyOutput">standard</MadCap:conditionalText> class <MadCap:variable name="Product-Names.broker_cloud_short"/>s, you may experience up to 15 minutes of downtime.</p>
      </li>
      <li>
        <p>For high-availability (HA) class <MadCap:variable name="Product-Names.broker_cloud_short"/>s, you can expect switching of activity between the <MadCap:variable name="Product-Names.broker_cloud_short"/>s, which may lead to an interruption of less than one minute. HA event broker services use a <code>PodDisruptionBudget</code> that ensures that there is always a healthy <MadCap:variable name="Product-Names.broker_cloud_short"/> that can carry traffic. If the upgrade is done in an uncontrolled way, there may be up to two failovers.</p>
        <p>In <MadCap:variable name="Product-Names.customer-controlled_region"/>s, if you want to ensure only a single failover, you can drain worker nodes that host the event broker service’s pods in this order: monitor, non-active, then active. For more information, see <a href="https://kubernetes.io/docs/tasks/administer-cluster/safely-drain-node/" target="_blank" class="link-offsite">Safely Drain a Node</a>.</p>
      </li>
    </ul>
    <h3><a name="Support3"/>Support for Security and Stability Updates</h3>
    <p>This policy applies to security and patch releases for all Kubernetes providers and distributions. See <a href="https://kubernetes.io/releases/" target="_blank" class="link-offsite">Releases in the Kubernetes documentation</a> for an explanation of how to determine a Kubernetes release type.</p>
    <p>Evaluation of the stability and security impacts of Kubernetes patch releases on <MadCap:variable name="Product-Names.public_region"/>s and <MadCap:variable name="Product-Names.dedicated_region"/>s occurs within 30 days. If the evaluation determines that an upgrade is required, <MadCap:variable name="Variables.CompanyName"/> contacts you to schedule an upgrade outside the regular upgrade schedule.</p>
    <h2><a name="Kubernet"/>Kubernetes Provider Categories and Validation</h2>
    <p>Validation and testing occur on different schedules based on which group the provider or distribution falls into. The following table lists the providers and distributions in each group.</p>
    <table style="margin-left: 0;margin-right: auto;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');width: 100%;" class="TableStyle-Table_Num" cellspacing="0">
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Category</th>
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Provider or distribution supplier</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Validation Time Frame</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p>Primary</p>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <ul>
              <li>Amazon Elastic Kubernetes Service (EKS)</li>
              <li>Azure Kubernetes Service (AKS)</li>
              <li>Google Kubernetes Engine (GKE)</li>
            </ul>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p>Within 90 days of the vendor’s release.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p>Other</p>
          </td>
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <ul>
              <li>Azure Red Hat OpenShift (ARO)</li>
              <li>Alibaba Cloud Container Service for Kubernetes (ACK)</li>
              <li>Anthos GKE on AWS (Controlled Availability) <a href="#notek8snewer" class="link-internal" style="font-weight: bold;">see note</a></li>
              <li>Canonical Charmed (Controlled Availability) <a href="#notek8snewer" class="link-internal" style="font-weight: bold;">see note</a></li>
              <li>EKS on AWS Outposts (Controlled Availability) <a href="#notek8snewer" class="link-internal" style="font-weight: bold;">see note</a></li>
              <li>Huawei Cloud Container Engine (CCE)</li>
              <li>RedHat OpenShift (OCP)</li>
              <li>Rancher (RKE1)</li>
              <li>VMware Tanzu Kubernetes Grid (TKG)</li>
            </ul>
          </td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p>Within 180 Days of the vendor’s release.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p class="Caution"><a name="notek8snewer"/>Kubernetes distributions/providers in Controlled Availability  may require additional time, tuning, and configuration for deployments. <MadCap:variable name="Variables.CompanyName"/> fully supports these newer Kubernetes deployments.</p>
    <p><MadCap:variable name="Variables.CompanyName"/> validates new Kubernetes versions against the <MadCap:variable name="Product-Names.broker_cloud_short"/> version that is in full technical support, as defined in <MadCap:xref href="../understand-event-broker-releases.htm">Version Adoption in [%=Product-Names.cloud_product_titlecase%]</MadCap:xref>. See <MadCap:xref href="cloud-broker-k8s-versions-support.htm">Supported Kubernetes Versions</MadCap:xref> for a complete list of supported versions.</p>
    <p class="Note">Providers may have varying names for their releases. For example, AKS terms a release <i>Generally Available (GA)</i>, while GKE refers to a release as a <i>regular channel release</i>. Refer to the provider or distribution release documentation for more information.</p>
    <p class="Warning"><MadCap:variable name="Variables.CompanyName"/> does not recommend the adoption of any Kubernetes version before we have validated its compatibility with event broker versions that are currently in full technical support.</p>
    <h3 MadCap:conditions="Default.HideFromAllOutput"><a name="Kubernet2"/>Kubernetes Support for Major <MadCap:variable name="Product-Names.broker_cloud_short_title"/> Versions</h3>
    <p>Whenever <MadCap:variable name="Variables.CompanyName"/> releases a major <MadCap:variable name="Product-Names.broker_cloud_short"/> version (for example 10.2), we validate its support on the various Kubernetes providers and distributions according to the following schedule:</p>
    <table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');margin-left: 0;margin-right: auto;" class="TableStyle-Table_Num" cellspacing="0">
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1"><MadCap:variable name="Product-Names.broker_cloud_short_title"/> Release Date</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Support Level for Major <MadCap:variable name="Product-Names.broker_cloud_short_title"/></th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p>Day of  release</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p>Support for the primary Kubernetes providers and distributions includes:</p>
            <ul>
              <li>the newest version validated by <MadCap:variable name="Variables.CompanyName"/>.</li>
              <li>the oldest supported version validated by <MadCap:variable name="Variables.CompanyName"/>. </li>
              <p>For example, if the newest validated GKE version supported by <MadCap:variable name="Variables.CompanyName"/> is 1.24 and the oldest is 1.21, then <MadCap:variable name="Variables.CompanyName"/> validates the new <MadCap:variable name="Product-Names.broker_cloud_short"/> release for both GKE 1.21 and 1.24. See <MadCap:xref href="cloud-broker-k8s-versions-support.htm">Supported Kubernetes Versions</MadCap:xref> for a complete list of supported versions.</p>
            </ul>
            <p MadCap:conditions="Default.HideFromAllOutput">Validation for other Kubernetes providers and distributions is performed on a combination of the latest supported <MadCap:variable name="Product-Names.customer-controlled_region"/> cluster types. </p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p>90 days after release</p>
          </td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p><MadCap:variable name="Variables.CompanyName"/> validates Kubernetes providers and distributions that were not validated on the day of the major <MadCap:variable name="Product-Names.broker_cloud_short"/> within 90 days.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <h2><a name="Deprecat"/>Deprecation of Support for Kubernetes Versions</h2>
    <p>When a Kubernetes provider or distribution ends support for a version of Kubernetes, referred to as End Of Life (EOL) by some providers, <MadCap:variable name="Variables.CompanyName"/> also ends support for that Kubernetes version. You should refer to the documentation and support policies for your chosen provider or distribution for details about the end of support for your chosen Kubernetes implementation. <MadCap:variable name="Variables.CompanyName"/> maintains a table of <a href="cloud-broker-k8s-versions-support.htm" target="_blank" class="link-internal">Supported Kubernetes Version</a> where you can see a summary of Kubernetes versions that we currently support.
        </p>
    <p><MadCap:variable name="Variables.CompanyName"/> reserves the right to deprecate support for particular Kubernetes versions at other times. Reasons for deprecation can include:</p>
    <ul>
      <li>a lifecycle support policy change from a Kubernetes provider or distribution.</li>
      <li>a need to drop compatibility with APIs that are out-of-date.</li>
    </ul>
    <h2><a name="Kubernet3"/>Kubernetes Adoption Policy Frequently Asked Questions</h2>
    <p>Below you will find answers to typically asked questions you may have about <MadCap:variable name="Variables.CompanyName"/>'s Kubernetes Adoption Policy for <MadCap:variable name="Product-Names.cloud_product_short"/>.</p>
    <dl>
      <dt>If I deploy to a <MadCap:variable name="Product-Names.public_region"/>, how does the Kubernetes Adoption Policy impact me?</dt>
      <dd>
        <p><MadCap:variable name="Variables.CompanyName"/> determines an <a href="#Upgradin" class="link-internal">upgrade schedule</a> and <a href="#Upgrade" class="link-internal">informs you</a> of the maintenance window. </p>
      </dd>
      <dt>If I deploy to a <MadCap:variable name="Product-Names.dedicated_region"/>, how does the Kubernetes Adoption Policy impact me?</dt>
      <dd>
        <p> You can proactively schedule a Kubernetes cluster upgrade using <a href="[%=Manifest-Products-Links.CloudCalendlyK8Upgrades%]" alt="Link to Calendly" class="link-offsite">Calendly</a>, otherwise <MadCap:variable name="Variables.CompanyName"/> will contact you to schedule it.</p>
      </dd>
      <dt>
                What if
I don't schedule an upgrade for my cluster in a <MadCap:variable name="Product-Names.dedicated_region"/> in time?</dt>
      <dd>
        <p><MadCap:variable name="Variables.CompanyName"/> expects a response to an upgrade request within five to seven business days. If we do not receive a response, we will attempt to contact you again. If you do not respond to the second request, <MadCap:variable name="Variables.CompanyName"/> notifies you that an upgrade is to occur on a specified date. We also outline the potential risks associated with this forced upgrade.</p>
      </dd>
      <dt>If I deploy to a <MadCap:variable name="Product-Names.customer-controlled_region"/>, how does the Kubernetes Adoption Policy impact me?</dt>
      <dd>
        <p>Keeping the Kubernetes cluster up to date is your responsibility. Your <MadCap:variable name="Product-Names.broker_cloud_short"/> must support the Kubernetes version hosting it, as outlined in <MadCap:xref href="cloud-broker-k8s-versions-support.htm">Supported Kubernetes Versions</MadCap:xref>.</p>
      </dd>
      <dt>When I upgrade my cluster in a <MadCap:variable name="Product-Names.customer-controlled_region"/>, are there any coordination activities required?</dt>
      <dd>
        <p>No. Upgrading your <MadCap:variable name="Product-Names.customer-controlled_region"/> Kubernetes cluster is your responsibility.</p>
      </dd>
      <dt>What if I don't upgrade the cluster in a <MadCap:variable name="Product-Names.customer-controlled_region"/> before Kubernetes support expires? </dt>
      <dd>
        <p>If you haven’t upgraded your cluster before the Kubernetes provider ends support for that version of Kubernetes, then the provider may not continue to offer support for any Kubernetes based issues you encounter until after you have upgraded the cluster.</p>
      </dd>
      <dt><a name="ExpectedDowntime"/>What is the impact to my event broker services during a Kubernetes upgrade?</dt>
      <dd>
        <p>The impact on your <MadCap:variable name="Product-Names.broker_cloud_short"/>s depends on its service class:</p>
        <ul>
          <li><MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput">Developer and standalone classes</MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="SAP.SapOnlyOutput">Standard class</MadCap:conditionalText> may experience <a href="#Cluster" class="link-internal">downtime of approximately 15 minutes</a>. </li>
          <li>High-availability (HA) class <MadCap:variable name="Product-Names.broker_cloud_short"/>s may have <a href="#Cluster" class="link-internal">an interruption of less than a minute</a>, which accounts for the switching of activity between the <MadCap:variable name="Product-Names.broker_cloud_short"/>s.</li>
        </ul>
      </dd>
      <dt>How can I prepare for my Kubernetes cluster upgrade? </dt>
      <dd>
        <p>You can ensure your <MadCap:variable name="Product-Names.broker_cloud_short"/> is up to date and is a version that is <a href="cloud-broker-k8s-versions-support.htm" target="_blank" class="link-internal">supported on the Kubernetes version you are upgrading to</a>. For details about upgrading your <MadCap:variable name="Product-Names.broker_cloud_short"/>s, see <MadCap:xref href="../upgrade-event-broker.htm">Upgrading [%=Product-Names.broker_cloud_short_title%]s in [%=Product-Names.cloud_product_titlecase%]</MadCap:xref>.</p>
      </dd>
      <dt>How long is the maintenance window for a Kubernetes cluster upgrade?</dt>
      <dd>
        <p>The maintenance window for the cluster upgrade can be up to six hours.</p>
      </dd>
      <dt>When does support for a Kubernetes version end?</dt>
      <dd>
        <p><MadCap:variable name="Variables.CompanyName"/> ends support for a Kubernetes version when the provider ends their support for it. <a href="#Deprecat" class="link-internal">In certain situations, we may end support earlier</a>.</p>
      </dd>
      <dt>Why are some Kubernetes versions listed as  Controlled Availability?</dt>
      <dd>
        <p>Kubernetes distributions or providers that are in Controlled Availability are early in the Kubernetes adoption process for <MadCap:variable name="Product-Names.cloud_product_short"/>.
                   These deployments  may require additional time to complete, tune, and configure. <MadCap:variable name="Variables.CompanyName"/> fully supports these newer Kubernetes deployments, but additional time is required to resolve issues.</p>
      </dd>
    </dl>
  </body>
</html>
