<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Building a Modeled Event Mesh</h1>
    <p>You build a modeled event mesh by adding event brokers, application versions, and event versions to it. In a modeled event mesh, an event broker represents a runtime Solace or  Kafka event broker. The applications and events that you add  represent actual runtime applications and the events that flow through your actual event brokers.</p>
    <p>You must add at least one event broker to a modeled event mesh before you can add applications and events. </p>
    <p>This section includes the following tasks:</p>
    <ul>
      <li>
        <MadCap:xref href="#adding_messaging_service">Adding an Event Broker to a Modeled Event Mesh</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Managing_Messaging_Services">Managing Model Event Brokers</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Adding_an_Application_Designer">Adding Applications and Events from [%=Product-Names.ep_designer%]</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Managing_Object_Associations">Viewing Object Environment Associations</MadCap:xref>
      </li>
      <li MadCap:conditions="Default.HideFromAllOutput">
        <MadCap:xref href="#add-eap">Adding an [%=Product-Names.eventapiproduct_long%] to a Modeled Event Mesh</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="adding_messaging_service"/>Adding an Event Broker to a Modeled Event Mesh</h2>
    <p>An event broker in a modeled event mesh represents a runtime event broker in an event flow. After you <a href="modeled-event-mesh.htm#Creating_a_MEM" class="link-internal">create a modeled event mesh</a>, you must add a model event broker that represents an event broker in the runtime.  Event brokers that you add to a modeled event mesh represent runtime event brokers of the same type. In Solace modeled event meshes you can add multiple Solace model event brokers to represent all of the runtime event brokers in the event mesh. For Kafka modeled event meshes, you can add only one model event broker to represent the Kafka cluster in the event flow.</p>
    <p>In a Solace modeled event mesh, you can model an existing  <MadCap:variable name="Product-Names.broker_cloud_short"/> by selecting a service from your <MadCap:variable name="Product-Names.cloud_product_short"/> account that has not already been added to another modeled event mesh. For both Solace and Kafka, you can also add an existing model event broker that was created with an <a href="event-portal-collect-runtime-data.htm#creating_connection_file" target="_blank" class="link-internal"><MadCap:variable name="Product-Names.ep_runtime_agent"/> Connection</a> or that was previously associated with a modeled event mesh that has since been deleted.</p>
    <p>Alternatively, you can add a new event broker to the model. If you want to design the event flows for a new modeled event mesh but you aren't ready to add the event broker details, you can create a placeholder event broker with just a name and update the connection details later.</p>
    <p>You must be an Administrator or <MadCap:variable name="Product-Names.ep_manager"/> to add event brokers to modeled event meshes. To add an event broker to a modeled event mesh, perform these steps:</p>
    <ol>
      <li><MadCap:snippetText src="../../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/><![CDATA[
               ]]></li>
      <li>In the <MadCap:variable name="Product-Names.console_ui_short"/>, select <b><MadCap:variable name="Product-Names.ep_rt_event_manager"/></b><img src="../../Resources/Images/Cloud/reusable-icons/navbar_runtime_manager.png" alt=""/> on the navigation bar. </li>
      <li>Select the <b>Modeled Event Meshes</b> tab.</li>
      <li>Click the name of the modeled event mesh that you want to add an event broker to.</li>
      <li>Select the <b>Event Broker Connections</b> tab.</li>
      <li>
        <p>Click <b>Connect Event Broker</b>.</p>
        <p>
          <div class="thumbnail-container">
            <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/add-event-broker.png" alt="Screenshot showing the options described in the surrounding text."/>
          </div>
        </p>
      </li>
      <li>To add a model event broker that represents an existing <MadCap:variable name="Product-Names.broker_cloud_short"/> in <MadCap:variable name="Product-Names.cloud_product_short"/>, or to add a model event broker that already exists in <MadCap:variable name="Product-Names.ep_rt_event_manager"/>, in the <b>Manage Event Broker Connections List</b>, select the checkbox next to the <MadCap:variable name="Product-Names.broker_cloud_short"/> or model event broker that you want to add. <MadCap:variable name="Product-Names.broker_cloud_short_intitalcap"/>s display <img src="../../Resources/Images/Cloud/reusable-icons/cloud-broker-service.png" alt=""/> next to the name.</li>
      <li><a name="create_new_event_broker"/>To create a new event broker in a Solace modeled event mesh, perform these steps:<ol style="list-style-type: lower-alpha;"><li>Click <b>New Event Broker</b>.</li><MadCap:snippetBlock src="../../Resources/Snippets/Cloud/Event-Portal/new-model-broker-solace.flsnp"/><li>Click <b>Connect Event Broker</b>.</li></ol></li>
      <li>To create an event broker in a Kafka modeled event mesh, perform these steps:<ol style="list-style-type: lower-alpha;"><li>Select <b>New Event Broker</b>.</li><MadCap:snippetBlock src="../../Resources/Snippets/Cloud/Event-Portal/new-model-broker-kafka.flsnp"/><li>Click <b>Connect Event Broker</b>.</li></ol></li>
      <li>Click <b>Add</b>.		</li>
    </ol>
    <p MadCap:conditions="SAP.SapHideFromOutput">After you've added the model event broker to the modeled event mesh, you can add it to an <MadCap:variable name="Product-Names.ep_runtime_agent"/> Connection to discover data from the runtime event broker that the model event broker represents. For more information, see <MadCap:xref href="event-portal-collect-runtime-data.htm#creating_connection_file">Setting Up an [%=Product-Names.ep_runtime_agent%] Connection</MadCap:xref>.</p>
    <h2><a name="Managing_Messaging_Services"/>Managing Model Event Brokers</h2>
    <p>Administrators and <MadCap:variable name="Product-Names.ep_manager"/>s can view information about each event broker in a modeled event mesh, including details about the <MadCap:variable name="Product-Names.ep_runtime_agent"/> connection and the list of associated applications. For Kafka event brokers you can also view the list of associated events<MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput"> and schemas</MadCap:conditionalText>. For Solace event brokers, you can also view associated <MadCap:variable name="Product-Names.eventapiproduct_long"/>s. If the model event broker was created for an <MadCap:variable name="Product-Names.broker_cloud_short"/> in your <MadCap:variable name="Product-Names.cloud_product_short"/> account, you can also view the <MadCap:variable name="Product-Names.broker_cloud_short"/> in <MadCap:variable name="Product-Names.cluster_mgr"/>.</p>
    <p>You can delete an event broker from a modeled event mesh if it has no objects associated with it. When you delete an event broker,  any corresponding runtime discovery data and audit results are deleted. If you created the event broker from an existing <MadCap:variable name="Product-Names.cloud_product_short"/> event broker service, it is not affected.</p>
    <p>Because a Solace modeled event mesh can have multiple event brokers and a Kafka modeled event mesh only has one event broker, the steps to manage them are slightly different.</p>
    <p>To view and manage a model event broker, perform these steps:</p>
    <ol>
      <li>On the <MadCap:variable name="Product-Names.ep_rt_event_manager" style="font-weight: bold;"/> home page, select the <b>Modeled Event Meshes</b> tab.</li>
      <li>Click the name of a modeled event mesh that you want to manage the event brokers for.</li>
      <li>In the modeled event mesh, select the <b>Event Broker Connections</b> tab.</li>
      <li>If you are managing event brokers in a Solace modeled event mesh, perform the following actions:
            <ol style="list-style-type: lower-alpha;"><li>In the event broker list, select the event broker you want to view the details for.</li><li>Perform any of the following actions:</li><ul><li style="font-weight: normal;">If the model event broker is connected to an <MadCap:variable name="Product-Names.ep_runtime_agent"/>, click <b>Run Discovery Scan</b> to scan for runtime data. For more information, see <MadCap:xref href="event-portal-collect-runtime-data.htm#collecting_runtime_data">Scan for Runtime Data</MadCap:xref>.</li><li>To view or edit the connection details to connect to an <MadCap:variable name="Product-Names.ep_runtime_agent"/>, click <b>View Connection Details</b>.</li><li>To view the linked event broker service in <MadCap:variable name="Product-Names.cluster_mgr"/>, click <b>More Actions</b><img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=" "/>for the event broker and select <b>View Service in <MadCap:variable name="Product-Names.cluster_mgr"/></b>.</li><li>To view the linked event broker service in <MadCap:variable name="Product-Names.pubsubmanager_long"/>, click <b>More Actions</b><img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=" "/>for the event broker and select <b>Open in <MadCap:variable name="Product-Names.pubsubmanager_long"/></b>.</li><li>To delete the event broker from the modeled event mesh, click <b>More Actions</b><img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=" "/>for the event broker and select <b>Delete From Event Portal</b>.</li></ul></ol></li>
      <li>If you are managing the event broker in a Kafka modeled event mesh, perform any of the following actions:
            <ul><li>If the model event broker is connected to an <MadCap:variable name="Product-Names.ep_runtime_agent"/>, click <b>Run Discovery Scan</b> to scan for runtime data. For more information, see <MadCap:xref href="event-portal-collect-runtime-data.htm#collecting_runtime_data">Scan for Runtime Data</MadCap:xref>.</li><li>To view or edit the connection details to connect to an <MadCap:variable name="Product-Names.ep_runtime_agent"/>, click <b>View Connection Details</b>.</li><li>To delete the event broker from the modeled event mesh, click <b>More Actions</b><img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=" "/>for the event broker and select <b>Delete From Event Portal</b>.</li></ul></li>
    </ol>
    <h2><a name="Adding_an_Application_Designer"/>Adding Applications and Events from <MadCap:variable name="Product-Names.ep_designer"/></h2>
    <p>You use <MadCap:variable name="Product-Names.ep_designer"/> to add application versions and event version created in Designer to a modeled event mesh. To add applications and events you associate an application version with an event broker. When you associate an application version with an event broker, you also associate the events that the application version publishes and subscribes to. </p>
    <p>You must have at least Editor access to both the application domain and the environment to add an application to a modeled event mesh. For more information, see <MadCap:xref href="event-portal-designer-applications.htm#app-environment" target="_blank">Adding an Application Version to an Environment</MadCap:xref>.</p>
    <p>You can also add a Kafka event version to a modeled event mesh by associating it directly with an event broker. You must be an Administrators or <MadCap:variable name="Product-Names.ep_manager"/> to add a Kafka event to a modeled event mesh. For more information, see <MadCap:xref href="event-portal-designer-events.htm#event-environment" target="_blank">Adding an Event to an Environment</MadCap:xref></p>
    <p>Administrators and <MadCap:variable name="Product-Names.ep_manager"/>s can also associate applications and events with a modeled event mesh by importing them from a runtime event broker. For more information, see <MadCap:xref href="event-portal-audit-runtime-data.htm#importing_objects">Importing Runtime Objects into [%=Product-Names.eventportal_product_short%]</MadCap:xref>.</p>
    <p>After you associate an application version to one model event broker, you can associate it with other event brokers using <MadCap:variable name="Product-Names.ep_rt_event_manager"/>. The event broker can be in the same modeled event mesh or a different modeled event mesh in any environment.</p>
    <h2><a name="Managing_Object_Associations"/>Viewing Object Environment Associations</h2>
    <p>You can view the environments, modeled event meshes, and event brokers that applications are associated with in <MadCap:variable name="Product-Names.ep_rt_event_manager"/>. You can also view associations for Kafka events added to an environment. </p>
    <p>To view the environment associations for an object, perform these steps:</p>
    <ol>
      <li>On the <MadCap:variable name="Product-Names.ep_rt_event_manager" style="font-weight: bold;"/> home page, select the <b>Modeled Event Meshes</b> tab.</li>
      <li>On the <b>Modeled Event Meshes</b> tab,  click the name of the modeled event mesh that contains the application or Kafka event.</li>
      <li>Select the <b>Architecture</b> tab.</li>
      <li>In the list view, in the <b>Applications</b> list or <b>Events</b> list, click <b>More Actions</b><img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=" "/>for the object and select <b>View Environment Associations</b>.</li>
    </ol>
    <h2 MadCap:conditions="Default.HideFromAllOutput"><a name="add-eap"/>Adding an <MadCap:variable name="Product-Names.eventapiproduct_long"/> to an Event Broker</h2>
    <p MadCap:conditions="Default.HideFromAllOutput"><MadCap:variable name="Product-Names.eventapiproduct_long"/>s allow you to expose important event assets to other development teams, external partners, or even customers. You can add <MadCap:variable name="Product-Names.eventapiproduct_long"/> versions to one or more model event brokers that represent Solace event brokers within a modeled event mesh. </p>
    <p MadCap:conditions="Default.HideFromAllOutput">You can also associate an <MadCap:variable name="Product-Names.eventapiproduct_long"/> with an event broker <a href="event-portal-designer-event-api-products.htm#eap-environment" class="link-internal">from <MadCap:variable name="Product-Names.ep_designer"/>.</a></p>
    <p MadCap:conditions="Default.HideFromAllOutput">To associate an <MadCap:variable name="Product-Names.eventapiproduct_long"/> version with an event broker, perform these steps:</p>
    <ol MadCap:conditions="Default.HideFromAllOutput">
      <li>On the <MadCap:variable name="Product-Names.ep_rt_event_manager" style="font-weight: bold;"/> home page, select the <b>Modeled Event Meshes</b> tab.</li>
      <li>Click the name of the modeled event mesh that you want to add the <MadCap:variable name="Product-Names.eventapiproduct_long"/> to.</li>
      <li>Select the <b>Event Broker Connections</b> tab.</li>
      <li>Click <b>View All</b>, then select the event broker  that you want to add the <MadCap:variable name="Product-Names.eventapiproduct_long"/> to.</li>
      <li>In the <b>Event API Products</b> section, click <b>Add Event API Product</b>.</li>
      <li>Select the <b>Application Domain</b> that contains the <MadCap:variable name="Product-Names.eventapiproduct_long"/>.</li>
      <li>Select the <b>Event API Product</b></li>
      <li>Select the <b>Event API Product Version</b></li>
      <li>Select the <b>Protocols</b> used to communicate with the event broker.</li>
      <li>Click <b>Add</b>.</li>
    </ol>
  </body>
</html>
