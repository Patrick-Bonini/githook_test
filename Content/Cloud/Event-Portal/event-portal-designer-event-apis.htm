<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Event APIs</h1>
    <p>Event APIs allow you to curate your event data together into packages that you can share with others to use to build new applications. Only shared events  can be part of an event API. For more information, see <MadCap:xref href="../../Cloud/Event-Portal/event-portal-designer-events.htm">Events</MadCap:xref>.</p>
    <p>You can share event APIs using an Async API document. You can also add event APIs to <MadCap:xref href="event-portal-designer-event-api-products.htm">Event API Products</MadCap:xref>.</p>
    <p>This section includes the following tasks:</p>
    <ul>
      <li>
        <MadCap:xref href="#Creating_an_Event_API">Creating an Event API</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Downloading_an_Async_API">Downloading an Async API Document</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Updating_an_Event_API">Updating an Event API</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Changing_the_State">Changing the State of an Event API Version</MadCap:xref>
      </li>
    </ul>
    <p>You can also create custom attributes for event APIs. For more information, see <MadCap:xref href="event-portal-designer-tool.htm#Using_Custom_Attributes">Using Custom Attributes.</MadCap:xref></p>
    <h2 class="with-rule"><a name="Creating_an_Event_API"/>Creating an Event API</h2>
    <p>You create event APIs within application domains. Events must be shared to add them to an event API, even if they are in the same application domain. </p>
    <p>To create an event API, perform these steps:</p>
    <ol>
      <li><MadCap:snippetText src="../../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/><![CDATA[
               ]]></li>
      <li>On the navigation bar, select <MadCap:variable name="Product-Names.ep_designer" style="font-weight: bold;"/><img src="../../Resources/Images/Cloud/reusable-icons/navbar_designer.png" alt=""/>. </li>
      <li>On the <b>Application Domains</b> page, select the application domain that you want to add the event API to.</li>
      <li>Click <b>Components </b><img src="../../Resources/Images/Cloud/reusable-icons/designer-list.png" alt=""/> to switch to the list view.</li>
      <li>
        <p>Select the <b>Event APIs</b> tab, then click <b>Create Event API</b>.</p>
        <p>
          <div class="thumbnail-container">
            <img src="../../Resources/Images/Event-Portal/create-event-api.png" alt="Screenshot showing the settings described in the surrounding steps." class="solacethumbnail"/>
          </div>
        </p>
      </li>
      <li>Enter a <b>Name</b> for the event API. </li>
      <li>Select the <b>Broker Type</b>. You can't change the broker type after you save the event API.</li>
      <li>If you want the event API to be available  in other application domains or you want to add it to an <MadCap:variable name="Product-Names.eventapiproduct_long"/>, select <b>Allow Event APIÂ to be shared across application domains</b>.               </li>
      <li>In the <b>Version</b> field, specify a semantic version value for the event API in the format major.minor.patch. The default is 0.1.0.</li>
      <li>(Optional) Enter a <b> Version Name</b> for the initial version of the event API.</li>
      <li>(Optional) Enter a <b>Description</b> for the event API. The <b>Description</b> field supports Markdown. Click <b>toggle preview</b><img src="../../Resources/Images/Cloud/reusable-icons/markdown-html-toggle.png" alt=""/> to preview the rendered text.</li>
      <li>(Optional) Add values for any custom attributes that have been set up in your organization.</li>
      <li>To select events to include in the event API, perform these steps:<ol style="list-style-type: lower-alpha;"><li>Click <b>Manage Events</b>.</li><li>In the <b>Application Domain</b> list, select the application domain for an event that you want to add to the event API. By default, the list shows shared events in the current application domain. If you select a different application domain, the list shows shared events in the selected application domain. If you remove the filter, the list shows shared events in all application domains that you have access to.</li><li>Expand an event to see the list of versions.</li><li>To allow an external application to subscribe to a version of an event, select <b>Sub</b> for the event version.</li><li>To allow an external application to publish a version of an event, select <b>Pub</b> for the event version.</li><li>When you are finished selecting events, click <b>Close</b> <img src="../../Resources/Images/Cloud/reusable-icons/close-x.png" alt=""/>.</li></ol></li>
      <li>Click <b>Save Event API</b>.</li>
    </ol>
    <h2><a name="Downloading_an_Async_API"/>Downloading an AsyncAPI Document for an Event API</h2>
    <p>An AsyncAPI document is a a JSON or YAML file generated according to the AsyncAPI Specification that describes the contents of your event API. For more information, see the <a href="https://www.asyncapi.com/" target="_blank" class="link-offsite">AsyncAPI Initiative</a>. You can give the AsyncAPI document to developers to help them create the actual applications and events that are part of your event mesh.</p>
    <p>You can download an AsyncAPI document for an event API in two ways:</p>
    <ul>
      <li>Download a basic AsyncAPI document from the event API page.</li>
      <li>Download a more comprehensive AsyncAPI document that includes service plan details and the server details and operation bindings for any event brokers that are associated with an <MadCap:variable name="Product-Names.eventapiproduct_long"/> that the event API is part of. For more information, see <MadCap:xref href="event-portal-designer-event-api-products.htm#Download_an_Async_API">Downloading an Async API Document with [%=Product-Names.eventapiproduct_long%] Information</MadCap:xref></li>
    </ul>
    <p>To download a basic AsyncAPI document for your event API, perform these steps:</p>
    <ol>
      <li>On the <b>Application Domains</b> page, click the application domain that contains the event API.</li>
      <li>Click <b>Components </b><img src="../../Resources/Images/Cloud/reusable-icons/designer-list.png" alt=""/> to switch to the list view.</li>
      <li>Select the <b>Event APIs</b> tab.</li>
      <li>In the list of event APIs, click the name of the event API.</li>
      <li>In the <b>Versions</b> list, select the version that you want to download the AsyncAPI document for.</li>
      <li>In the version details, click <b>More Actions</b><img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=" "/> and select <b>Download Async API</b>.</li>
      <li>Select <b>JSON</b> or <b>YAML</b> file format.</li>
      <li>Click <b>Download File</b>.</li>
    </ol>
    <h2><a name="Updating_an_Event_API"/>Updating an Event API</h2>
    <p>When you update an event API, you can update an existing version or create a new version of the event API. Versions allow you to work on updates and test new versions  while the stable version remains in production. Each version also has a lifecycle state. You can only edit versions that are in Draft state. For more information, see <MadCap:xref href="../../Cloud/Event-Portal/event-portal-overview.htm#Versioning">Object Versions and Lifecycle States</MadCap:xref>.</p>
    <p> The version number uses semantic versioning in the format major.minor.patch. When you update an event API, you have three options:</p>
    <ul>
      <li>If the event API version is in Draft state, you can update an existing version and retain the version number </li>
      <li>If the event API version is in Released, Deprecated, or Retired state, you can duplicate a version and increment the version number to create a new Draft version.</li>
      <li>If the event API version is in Released, Deprecated, or Retired state, you can create a new version of the event API from scratch</li>
    </ul>
    <p>If you want to update a version that is not in Draft state it is best practice to create a new version rather than returning the version to Draft state.</p>
    <p>When you include an event in the event API, you select the version of the event that you want to include. If a new version of an event is created, you can choose when to update the event API to include the new version.</p>
    <p>To update an event API, perform these steps:</p>
    <ol>
      <li>On the <b>Application Domains</b> page, click the application domain that contains the event API you want to update.</li>
      <li>Click <b>Components </b><img src="../../Resources/Images/Cloud/reusable-icons/designer-list.png" alt=""/> to switch to the list view.</li>
      <li>Select the <b>Event APIs</b> tab.</li>
      <li>In the list of event APIs, click the name of the event API.</li>
      <li>Perform one of the following actions:</li>
      <ul>
        <li>In the <b>Versions</b> list, click <b><b>More </b>Actions</b><img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=" "/>for the version that you want to update and select <b>Edit</b>. Any changes you make update that version of the event API. You can edit an event API version only if it is in Draft state.</li>
        <li>In the <b>Versions</b> list, click <b>More </b><b>Actions</b><img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" alt=" "/>for the version that you want to update and select <b>Duplicate</b>. All properties of the existing version are copied into a new version. By default, the new version number is incremented by 0.0.1. You can change the version number to any number not already in use.</li>
        <li>Above the <b>Versions</b> list, click <b>Add</b><img src="../../Resources/Images/Cloud/reusable-icons/ep_add_icon.png" alt=""/>to create a new version of the event API without duplicating an existing version. By default, the new version number is the next unused major version. You can change the version number to any number not already in use.</li>
      </ul>
      <li>Update the event API version as necessary.</li>
      <li>Click <b>Save Version</b> or <b>Save &amp; Close</b>.</li>
    </ol>
    <h2><a name="Changing_the_State"/>Changing the State of an Event API Version</h2>
    <p>When you create a new version of an event API, the version is in Draft state. When the version is ready, you can change the version state to Released. When you release a new version of an event API, you may also want to change older versions of the event API to Deprecated or Retired. You must have at least the <MadCap:variable name="Product-Names.ep_user"/> role with Manager level access to the application domain to change the version state. For more information about version states, see <MadCap:xref href="../../Cloud/Event-Portal/event-portal-overview.htm#Versioning">Object Versions and Lifecycle States.</MadCap:xref></p>
    <p>You can only change an event API version from Draft to Released state if the event API references at least one  event version and if no referenced event versions are still in draft state</p>
    <p>To change the state of an event API version, perform these steps:</p>
    <ol>
      <li>On the <b>Application Domains</b> page, click the the application domain that contains the event API you want to update.</li>
      <li>Click <b>Components </b><img src="../../Resources/Images/Cloud/reusable-icons/designer-list.png" alt=""/> to switch to the list view.</li>
      <li>Select the <b>Event APIs</b> tab.</li>
      <li>In the list of event APIs, click the name of the event API.</li>
      <li>Select the version that you want to change the state of, then click <b>Manage Lifecycle</b>.</li>
      <li>Select the new state.</li>
      <li>(Optional) If you set the <b>State</b> to <b>Deprecated</b> or <b>Retired</b>, set the <b>End of Life</b> date. If you set a planned or actual <b>End of Life</b> date, the date displays in the version details.</li>
      <li>Click <b>Save</b>.</li>
    </ol>
  </body>
</html>
