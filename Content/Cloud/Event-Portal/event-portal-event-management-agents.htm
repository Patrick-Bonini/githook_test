<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.ContentProductLink">
  <head>
    </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Setting Up an <MadCap:variable name="Product-Names.ep_runtime_agent"/> to Run Scans from Event Portal</h1>
    <p>When you set up an <MadCap:variable name="Product-Names.ep_runtime_agent"/> in Scan from <MadCap:variable name="Product-Names.eventportal_product_short" style="font-weight: normal;"/> mode, you use one <MadCap:variable name="Product-Names.ep_runtime_agent"/> that is connected to <MadCap:variable name="Product-Names.eventportal_product_short"/>, one or more runtime event brokers, and optionally, a Confluent Schema Registry. This mode allows you to run discovery scans from <MadCap:variable name="Product-Names.eventportal_product_short"/> and upload the scanned data automatically.</p>
    <p>The instructions on this page assume you are using <a href="https://www.docker.com/" target="_blank" class="link-offsite">Docker</a> to set up the <MadCap:variable name="Product-Names.ep_runtime_agent"/>. You can set up the agent on your own following these instructions, or you can let <MadCap:variable name="Product-Names.ep_rt_event_manager"/> walk you through the set up after you finish <a href="event-portal-collect-runtime-data.htm#creating_connection_file" class="link-internal">setting up the <MadCap:variable name="Product-Names.ep_runtime_agent"/> connection</a>.</p>
    <MadCap:snippetBlock src="../../Resources/Snippets/Cloud/Event-Portal/ema-github-note.flsnp"/>
    <MadCap:snippetBlock src="../../Resources/Snippets/Cloud/Event-Portal/ema-pre-req.flsnp"/>
    <ul>
      <li>To use Scan from <MadCap:variable name="Product-Names.eventportal_product_short"/> mode, the computer requires network access to <MadCap:variable name="Product-Names.eventportal_product_short"/>, the event brokers that you want to discover runtime data from, and to any Confluent Schema Registries that you want to get subject data from.</li>
    </ul>
    <h2><a name="Setting_up_the_ema"/>Setting Up the <MadCap:variable name="Product-Names.ep_runtime_agent"/></h2>
    <p>To set up an <MadCap:variable name="Product-Names.ep_runtime_agent"/> with a connection to <MadCap:variable name="Product-Names.eventportal_product_short"/>, perform these steps:</p>
    <ol>
      <li>
        <p><a href="event-portal-collect-runtime-data.htm#creating_connection_file" class="link-internal">Set up an <MadCap:variable name="Product-Names.ep_runtime_agent"/> connection</a> to get the connection details for the event brokers.</p>
      </li>
      <li>Pull the <MadCap:variable name="Product-Names.ep_runtime_agent"/> image from Docker Hub using the following command:
            <pre>docker pull solace/event-management-agent</pre></li>
      <li>
        <p>Download the <MadCap:variable name="Product-Names.ep_runtime_agent"/> connection file. Make sure that your filename doesn't contain spaces or special characters or that it is wrapped in quotation marks to avoid OS-related filename errors.</p>
      </li>
      <li>Start the agent using the Docker run command in your OS terminal. Copy the command generated by <MadCap:variable name="Product-Names.eventportal_product_short"/> and update the following parameters:<ul><li>Replace <span class="Code">/path/to/file/AcmeRetail.yml</span> with the path to your connection file.</li><li>Replace each instance of [NAME_OF_THE_EP_EVENT_BROKER]_[AUTHENTICATION_TYPE]_PASSWORD with the password required by the authentication method for each event broker that the <MadCap:variable name="Product-Names.ep_runtime_agent"/> connects to.</li><li>If included, replace SCHEMA_REGISTRY_PASSWORD with the password to connect to the Confluent Schema Registry.</li></ul><pre xml:space="preserve">docker run -d -p 8180:8180 -v /path/to/file/AcmeRetail.yml:/config/ema.yml --env 
EVENT_BROKER_AUTHENTICATION_PASSWORD --env SCHEMA_REGISTRY_PASSWORD --name 
event-management-agent solace/event-management-agent:latest</pre></li>
      <li>If you are following the instructions in the <MadCap:variable name="Product-Names.console_ui_short"/>, click <b>Finish</b>.</li>
    </ol>
    <p>After the setup is complete, you can <a href="event-portal-collect-runtime-data.htm#collecting_runtime_data" class="link-internal">run discovery scans</a> from the associated modeled event meshes.<a name="Viewing_logs"/></p>
    <MadCap:snippetBlock src="../../Resources/Snippets/Cloud/Event-Portal/Viewing_EMA_Logs.flsnp"/>
  </body>
</html>
