<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False" MadCap:conditions="Default.NotForPDF">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
    <meta name="robots" content="noindex, nofollow"/>
  </head>
  <body>
    <h1>
      <MadCap:concept term="Cloud"/>
      <MadCap:variable name="Product-Names.ep_discovery"/>
    </h1>
    <p><MadCap:variable name="Product-Names.ep_discovery"/> is a tool in <MadCap:variable name="Product-Names.cloud_product_firstuse"/> that is used to discover event-driven architecture (EDA) data from your event brokers. You can use it to discover, import, and then visualize your EDA, including all associated applications, events, and schemas (if you have a Confluent Schema Registry) and their relationships from event brokers such as <MadCap:variable name="Product-Names.pubsub_brand_only"/> <MadCap:variable name="Product-Names.broker_cloud_short"/>s, Apache Kafka, Amazon MSK, or Confluent. You can run the Runtime
        <MadCap:variable name="Product-Names.ep_discovery"/> Agent multiple times, and on each run, it will discover the data, allow you to add it to        <MadCap:variable name="Product-Names.eventportal_product_short"/>'s data model. Once imported, the data is available in
        <MadCap:variable name="Product-Names.ep_catalog"/> and
        <MadCap:variable name="Product-Names.ep_designer"/> to visualize and understand your event-driven architecture.</p>
    <p>The following diagram illustrates the steps in performing a <MadCap:variable name="Product-Names.ep_discovery"/>:</p>
    <div class="thumbnail-container">
      <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/Horizontal-Discovery-Infographic.jpg" alt=" "/>
    </div>
    <h2 class="with-rule"><a name="Understa"/>Understanding <MadCap:variable name="Product-Names.ep_discovery"/> User Interface</h2>
    <p>On the <MadCap:variable name="Product-Names.ep_discovery"/> homepage you can:</p>
    <ul>
      <li>learn how to set up the <MadCap:variable name="Product-Names.discovery_agent"/> and run a scan</li>
      <li>access all your uploaded Discovery files</li>
      <li>use filter to view only those discoveries that are assigned to a specific Logical Event Mesh (LEM) </li>
      <li>use a sample to get started</li>
      <li>add new discoveries from your local system</li>
      <li>start the process of importing <MadCap:variable name="Product-Names.ep_discovery"/> file to <MadCap:variable name="Product-Names.ep_designer"/></li>
    </ul>
    <p>Your ability to import a <MadCap:variable name="Product-Names.ep_discovery"/> file to <MadCap:variable name="Product-Names.ep_designer"/> will depend on your role and access level.</p>
    <div class="thumbnail-container">
      <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/discovery-homepage.png" alt="Screenshot showing the settings described in the surrounding text."/>
    </div>
    <h2 class="with-rule">Prerequisites</h2>
    <ul>
      <li>Ensure that you have the correct user role and permission in
            <MadCap:variable name="Product-Names.eventportal_product_short"/>. At the minimum, you will need <MadCap:variable name="Product-Names.ep_manager"/> permission. For more information, refer to <MadCap:xref href="../cloud-user-management.htm">Managing Users, Groups, Roles, and Permissions</MadCap:xref>. </li>
      <li>The following event broker versions are currently supported:
            <ul><li>Apache Kafka versions 2.2, 2.3, 2.4, 2.5</li><li> Confluent versions 5.3, 5.4, 5.5</li><li> Amazon MSK version 2.2</li><li><MadCap:variable name="Product-Names.cloud_product_short_initialcase"/><MadCap:variable name="Product-Names.broker_cloud_short"/></li><li>A <a href="https://solace.com/support/support-dates-for-release-versions/" target="_blank" class="link-offsite">supported</a> Solace <MadCap:variable name="Product-Names.broker_sw_short"/>  or appliance.</li></ul></li>
    </ul>
    <h2 class="with-rule"><a name="Installi"/>Installing the <MadCap:variable name="Product-Names.discovery_agent"/></h2>
    <p> You can install the <MadCap:variable name="Product-Names.discovery_agent"/> as a Docker container on Linux, Mac, and Windows operating systems. Alternatively, you can download an executable file and install it locally in Windows, Mac or Linux operating systems.  After installing the agent you can use it offline, so no internet connection is required.</p>
    <p>The <MadCap:variable name="Product-Names.discovery_agent"/> requires JDK/JRE 11 to run; OpenJDK 11 is bundled with the agent installation package.</p>
    <h3><a name="Install"/>Install the <MadCap:variable name="Product-Names.discovery_agent"/> as a Docker Container</h3>
    <p>Follow the instructions below to install the <MadCap:variable name="Product-Names.discovery_agent"/> in a separate <code>docker container</code>.</p>
    <ol>
      <li>Log in to your
            <MadCap:variable name="Product-Names.cloud_product_short"/> account and select <b><MadCap:variable name="Product-Names.ep_discovery"/></b>.</li>
      <li>Click <b>How to get started?</b>.</li>
      <li> On the dialog that appears navigate to <b>Step 1. Run Discovery Agent</b> and click <b>Show Detailed Instructions</b>.</li>
      <li>Select the <b>Docker Instructions</b> tab.</li>
      <li>Click the dropdown menu and select <b>Mac</b>, <b>Linux</b>, or <b>Windows</b>.</li>
      <li>Copy and paste the commands into a terminal window. The
            <MadCap:variable name="Product-Names.discovery_agent"/> may take a few minutes to initialize</li>
      <li>Go to <a href="http://localhost:8120/" target="_blank" class="link-offsite">http://localhost:8120</a> to start running a scan. Refer to <MadCap:xref href="#Running">Running a
                <MadCap:variable name="Product-Names.ep_discovery"/> Scan </MadCap:xref>for more information.</li>
    </ol>
    <h3><a name="Install2"/>Install the       <MadCap:variable name="Product-Names.discovery_agent"/> via a Binary Executable</h3>
    <p>You can install the
  <MadCap:variable name="Product-Names.discovery_agent"/> locally in Mac, Windows and Linux. For local installation, download the
        <MadCap:variable name="Product-Names.ep_discovery"/> runtime archive from the console, and execute <code>bin/event-discovery-agent</code> for Linux and Mac or <code>bin/run.bat</code> for windows.</p>
    <p>To download and install the <MadCap:variable name="Product-Names.discovery_agent"/>, do the following:</p>
    <ol>
      <li>Log in to your
            <MadCap:variable name="Product-Names.cloud_product_short"/> account and select <b><MadCap:variable name="Product-Names.ep_discovery"/></b>.</li>
      <li>Click <b>How to get started?</b>.</li>
      <li>  On the dialog that appears navigate to <b>Step 1. Run Discovery Agent</b> and click <b>Show Detailed Instructions</b>.</li>
      <li>Select <b>Mac Download</b>, <b>Linux Download</b>, or <b>Windows Download</b>.</li>
      <li>When the download is complete, extract the archive and execute <code>bin/event-discovery-agent</code> for Mac or Linux, or <code> bin/run.bat</code> script for Windows.</li>
      <li>Go to <a href="http://localhost:8120/" target="_blank" class="link-offsite">http://localhost:8120</a> to start running a scan. Refer to <MadCap:xref href="#Running">Running a
                <MadCap:variable name="Product-Names.ep_discovery"/> Scan </MadCap:xref>for more information.</li>
    </ol>
    <h2 class="with-rule"><a name="Running"/>Running a
        <MadCap:variable name="Product-Names.ep_discovery"/> Scan</h2>
    <p>Once the <MadCap:variable name="Product-Names.discovery_agent"/> is <a href="#Install" class="link-internal">installed</a>, you can configure and run a scan from your browser. You can run a <MadCap:variable name="Product-Names.ep_discovery"/> scan on Kafka clusters., <MadCap:variable name="Product-Names.pubsub_brand_only"/> event broker service, or <MadCap:variable name="Product-Names.pubsub_brand_only"/> event broker. For more information, see the following sections:</p>
    <ul>
      <li>
        <MadCap:xref href="#Scanning-Kafka-brokers">Kafka Runtime Discovery</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#cluster-scan">Confluent Cloud Kafka Cluster</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#schema-scan">Confluent Cloud Schema Registry</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Scanning-Solace-Brokers"><MadCap:variable name="Product-Names.pubsub_brand_only"/> Runtime Discovery (Preview)</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Scanning"><MadCap:variable name="Product-Names.pubsub_brand_only"/> Topic Metrics Discovery (Preview)</MadCap:xref>
      </li>
    </ul>
    <h3><a name="Scanning-Kafka-brokers"/>Kafka Runtime <MadCap:variable name="Product-Names.ep_discovery"/></h3>
    <p>To configure and run a <MadCap:variable name="Product-Names.ep_discovery"/> scan on a Kafka Cluster or Kafka broker, do the following:</p>
    <ol>
      <li> Go to <a href="http://localhost:8120/" target="_blank" class="link-offsite">http://localhost:8120.</a></li>
      <li>Select the <b>Apache Kafka</b>, <b>Confluent</b>, or <b>Amazon MSK</b> to perform a run-time discovery.<![CDATA[            ]]><div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/discovery-agent-broker-list-kafka-runtime.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
      <li>Complete the input fields as shown in the example below:
            <div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/discovery-agent-broker-input.png" alt="Screenshot showing the settings described in the surrounding text."/></div><table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0"><col class="TableStyle-Table_Num-Column-Column1"/><col class="TableStyle-Table_Num-Column-Column1"/><thead><tr class="TableStyle-Table_Num-Head-Header1"><th class="TableStyle-Table_Num-HeadE-Column1-Header1">Tools (icons)</th><th class="TableStyle-Table_Num-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b><MadCap:variable name="Product-Names.ep_discovery"/> Name</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">The name that will be displayed on the list of discovered files in the
                <MadCap:variable name="Product-Names.eventportal_product_short"/></td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Host</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1"><p>Location where the broker is hosted.</p></td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Port</b>.</td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">Port used by the given broker</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyE-Column1-Body1"><b>Authentication</b></td><td class="TableStyle-Table_Num-BodyD-Column1-Body1"><p>Authentication type. The following authentication methods are supported:</p><ul><li>SASL Plain</li><li>SASL GSSAPI (Kerberos)</li><li>SASL SCRAM 256</li><li>SASL SCRAM 512</li><li>SSL</li></ul></td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Connector Authentication</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">Optional information, if you have a connector to authenticate.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyB-Column1-Body1"><b>Topic Subscriptions</b></td><td class="TableStyle-Table_Num-BodyA-Column1-Body1">
                       Options to scan specific topics or multiple topics.                  </td></tr></tbody></table></li>
      <li>Click <b>Start Scan</b>. Once the scan is completed, you can upload the
            <MadCap:variable name="Product-Names.ep_discovery"/> file to           <MadCap:variable name="Product-Names.cloud_product_short"/>. </li>
      <li><a name="DirectUploadDiscovery"/>To upload the file directly, click <b>Upload to Solace Cloud</b>.To manually upload the
            <MadCap:variable name="Product-Names.ep_discovery"/> file, see <MadCap:xref href="#Adding">Manually Adding a
                <MadCap:variable name="Product-Names.ep_discovery"/> File to
                <MadCap:variable name="Product-Names.cloud_product_short"/></MadCap:xref>.</li>
    </ol>
    <h3><a name="cluster-scan"/>Confluent Cloud Kafka Cluster</h3>
    <p>Before running a <MadCap:variable name="Product-Names.ep_discovery"/> scan on a Confluent Cloud Kafka Cluster, you will need the following cluster credentials:</p>
    <ul>
      <li>API keys (<code>key</code> and <code>secret</code>) to connect to the cluster </li>
      <li> Bootstrap server URL and port</li>
    </ul>
    <p>To run a <MadCap:variable name="Product-Names.ep_discovery"/> scan on a Confluent Cloud Kafka Cluster, perform the following steps:</p>
    <ol>
      <li> Go to <a href="http://localhost:8120/" target="_blank" class="link-offsite">http://localhost:8120.</a></li>
      <li>Select <b>Apache Kafka</b>.</li>
      <li>In the <b>Host</b> and <b>Port</b> fields, enter the  <b>Bootstrap server</b> information. <div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Cloud/confluent-cloud-scan-4.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
      <li>In the authentication field, select SASL Plain and enter the Cluster API <code>key</code> and <code>secret</code>.</li>
      <li>Select the <b>Add TLS Authentication</b> checkbox. </li>
      <li>Add the <b>Trust Store Location</b> and <b>Trust Store Password</b>. The Trust Store Location value depends on whether the <MadCap:variable name="Product-Names.discovery_agent"/> is running from a Docker container or as a Downloaded file.<ul><li>If the agent is running from the Docker container, set the following:<ul><li>Trust Store Location: <code>/opt/java/openjdk/lib/security/cacerts</code></li><li>Trust Store Password: <code>changeit</code></li></ul></li><li>If the agent was started from a script using a downloaded bundle file, do the following:<br/><ol><li>Locate the <code>cacerts</code> file for the JRE. This can typically be found at<code> $JAVA_HOME/lib/security/cacerts or $JAVA_HOME/jre/lib/security/cacerts</code>. </li><li>Enter the full path to the <code>cacerts</code> file in the Trust Store Location and <code>changeit</code> for the Trust Store Password.</li></ol><div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Cloud/confluent-cloud-scan-5.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li></ul></li>
      <li>Click <b>Start Scan</b>. </li>
    </ol>
    <h3><a name="schema-scan"/>Confluent Cloud Schema Registry</h3>
    <p>Before running a <MadCap:variable name="Product-Names.ep_discovery"/> scan on a Confluent Cloud Schema Registry, you will need the following schema registry information:</p>
    <ul>
      <li>Confluent Cloud's Schema Registry API endpoint</li>
      <li>API credentials (<code>key</code> and <code>secret</code>)</li>
    </ul>
    <p>Additionally, you will also need the connection details of the Confluent Cloud Kafka Cluster in your environment, which is discussed in detail in <MadCap:xref href="#Confluen">Confluent Cloud Kafka Cluster Scan</MadCap:xref>.</p>
    <p>To run a <MadCap:variable name="Product-Names.ep_discovery"/> scan on a Confluent Cloud Schema Registry, perform the following steps:</p>
    <ol>
      <li>Go to <a href="http://localhost:8120/" target="_blank" class="link-offsite">http://localhost:8120.</a></li>
      <li>Select <b>Confluent</b>.</li>
      <li>
        <p>Enter the <b>Target Cluster Authentication</b> details. For a step by step instructions, refer to <MadCap:xref href="#Confluen">Confluent Cloud Kafka Cluster Scan</MadCap:xref>.</p>
        <div class="thumbnail-container">
          <img class="solacethumbnail" src="../../Resources/Images/Cloud/confluent-cloud-scan-4.png" alt="Screenshot showing the settings described in the surrounding text."/>
        </div>
      </li>
      <li>
        <p>Enter the <b>Schema Registry Authentication</b> information as show in the example below. </p>
        <ol>
          <li>In the <b>Host</b> field, enter the API endpoint URL. <div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Cloud/confluent-cloud-scan-10.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
          <li>In the authentication field, select SASL Plain and enter the Schema Registry API <code>key</code> and <code>secret</code>.  Note that the API keys for the cluster and schema registry are different.</li>
        </ol>
      </li>
      <li>Select the <b>Add TLS Authentication</b> checkbox. </li>
      <li> Add the <b>Trust Store Location</b> and <b>Trust Store Password</b>. The Trust Store Location value depends on whether the  is running from a Docker container or as a Downloaded file.<ul><li>If the agent is running from the Docker container, set the following:<ul><li>Trust Store Location: <code>/opt/java/openjdk/lib/security/cacerts</code></li><li>Trust Store Password: <code>changeit</code></li></ul></li><li>If the agent was started from a script using a downloaded bundle file, do the following:<ol><li>Locate the <code>cacerts</code> file for the JRE. This can typically be found at<code> $JAVA_HOME/lib/security/cacerts or $JAVA_HOME/jre/lib/security/cacerts</code>. </li><li>Enter the full path to the <code>cacerts</code> file in the Trust Store Location and <code>changeit</code> for the Trust Store Password.</li></ol></li></ul></li>
      <li>Click <b>Start Scan</b>.</li>
    </ol>
    <h3><a name="Scanning-Solace-Brokers"/>Run-time <MadCap:variable name="Product-Names.ep_discovery"/><MadCap:conditionalText MadCap:conditions="SAP.SapOnlyOutput">on <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s</MadCap:conditionalText></h3>
    <p>You can execute a runtime
        <MadCap:variable name="Product-Names.ep_discovery"/> scan on
 <![CDATA[    ]]><MadCap:variable name="Product-Names.broker_cloud_short"/>s<MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput">, software event brokers, and appliances</MadCap:conditionalText>. The following event stream related data are discovered: Topics, Clients, Queues, Durable Topic Endpoints (DTEs), and Subscriptions. Once the scan is complete, a file in JSON format will be generated and available for download.</p>
    <p class="Note" MadCap:conditions="SAP.SapOnlyOutput"><MadCap:variable name="Product-Names.broker_cloud_short_intitalcap"/>s use technology from Solace to run <MadCap:variable name="Product-Names.ep_discovery"/> scans. Therefore, to run a <MadCap:variable name="Product-Names.ep_discovery"/> scan on an <MadCap:variable name="Product-Names.broker_cloud_short"/>in <MadCap:variable name="Product-Names.cloud_product_long"/>, you must select the <b>Solace Broker</b> option on the agent's user interface.</p>
    <p>To configure and execute a runtime
        <MadCap:variable name="Product-Names.ep_discovery"/> scan on a specific <MadCap:variable name="Product-Names.pubsub_brand_only"/> <MadCap:variable name="Product-Names.broker_cloud_short"/>, do the following:</p>
    <ol>
      <li> Go to <a href="http://localhost:8120/" target="_blank" class="link-offsite">http://localhost:8120.</a></li>
      <li>Select <b>Solace Broker</b>.
            <div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/discovery-agent-broker-list-solace-runtime.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
      <li>
        <p>Select Import to <b>Event Portal</b>.</p>
      </li>
      <li>Complete the input fields as shown in the example below.
            <div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/runtime-discovery-solace.png" alt="Screenshot showing the settings described in the surrounding text."/></div><table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0"><col class="TableStyle-Table_Num-Column-Column1"/><col class="TableStyle-Table_Num-Column-Column1"/><thead><tr class="TableStyle-Table_Num-Head-Header1"><th class="TableStyle-Table_Num-HeadE-Column1-Header1">Field</th><th class="TableStyle-Table_Num-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Discovery Name</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">The name that will be displayed on the list of discovered files in the
                <MadCap:variable name="Product-Names.eventportal_product_short"/></td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Client Username</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1"><p>The client username assigned to the Message VPN. To find this information on
                <MadCap:variable name="Product-Names.cloud_product_short"/>, select <b><MadCap:variable name="Product-Names.cluster_mgr"/></b> on the navigation bar, click the card for the service, select the <b>Connect</b> tab, expand <b>Solace Messaging</b>, and see the value for <b>Username</b>.</p></td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Client Password</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">Password for the given client username. To find this information on
                <MadCap:variable name="Product-Names.cloud_product_short"/>, select <b><MadCap:variable name="Product-Names.cluster_mgr"/></b> on the navigation bar, click the card for the service, on the <b>Connect</b> tab, expand <b>Solace Messaging</b>, and see the value for <b>Password</b>.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyE-Column1-Body1"><b>Client Protocol</b></td><td class="TableStyle-Table_Num-BodyD-Column1-Body1">Use TCP or TCPS protocol.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Client Host</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">IP address or hostname of the event broker to connect to. To find this information on
                <MadCap:variable name="Product-Names.cloud_product_short"/>, select <b><MadCap:variable name="Product-Names.cluster_mgr"/></b> on the navigation bar, click the card for the service, and on the <b>Status</b> tab, see the value for <b>Hostname</b>.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Messaging Port</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">The port number the
                <MadCap:variable name="Product-Names.ep_discovery"/> agent will use when connecting to the event broker. To find this information on
                <MadCap:variable name="Product-Names.cloud_product_short"/>, select <b><MadCap:variable name="Product-Names.cluster_mgr"/></b> on the navigation bar, click the card for the service, select the <b>Connect</b> tab, expand <b>Solace Messaging</b>, and see the port number used for <b>Secured SMF Host</b>.                  </td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Message VPN</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">Message VPN name. To find this information on
                <MadCap:variable name="Product-Names.cloud_product_short"/>, select <b><MadCap:variable name="Product-Names.cluster_mgr"/></b> on the navigation bar, click the card for the service, and on the <b>Status</b> tab, see the value for <b>Message VPN</b>.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyE-Column1-Body1"><b>SEMP username</b></td><td class="TableStyle-Table_Num-BodyD-Column1-Body1">SEMP username. To find this information on
                <MadCap:variable name="Product-Names.cloud_product_short"/>, select <b><MadCap:variable name="Product-Names.cluster_mgr"/></b> on the navigation bar, click the card for the service, and on the <b>Status</b> tab, see the value for <b>Management Username</b>.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>SEMP password</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">SEMP password. To find this information on
                <MadCap:variable name="Product-Names.cloud_product_short"/>, go to <b><MadCap:variable name="Product-Names.cluster_mgr"/></b>, click the card for the service, and on the <b>Status</b> tab, see the value for <b>Management Password</b>.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>SEMP Host</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">IP address or hostname of the event broker to connect to.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>SEMP Port</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1"><p>Port number to access the event broker. The following SEMP ports are supported:</p><ul><li>Event Broker or <MadCap:variable name="Product-Names.broker_cloud_short"/>: 943.</li><li>Software event broker: 8080 and 1943. For software event broker versions before the 9.4.0 release, use port 943.</li><li>Appliance: 80.</li></ul></td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyE-Column1-Body1"><b>SEMP URI Scheme</b></td><td class="TableStyle-Table_Num-BodyD-Column1-Body1">SEMP URI scheme. The two valid values are <b>http</b> and <b>https</b>.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Topic Subscriptions</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">Retrieves all topics from messages sent by the event broker during the scan interval and retrieves all available subscriptions. You can put one or more topic subscriptions (e.g., <code>/topicA/topicB</code>) or use a  wildcard (e.g., <code>&gt;</code>) to scan for everything. The subscription entered in the field filters published events for the topics that match that subscription; it does not filter subscriptions retrieved that are configured on the event broker. So limiting the scope of topics retrieved during the scan by entering a fined-grained subscription(s) in the field does not impact the number of subscriptions discovered.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyB-Column1-Body1"><b>Scan Duration</b></td><td class="TableStyle-Table_Num-BodyA-Column1-Body1">The duration in seconds for the discovery agent to receive event instances through the client interface to collect the associated data. The actual scan duration will depend on the data discovered from the management (SEMP) interface.</td></tr></tbody></table></li>
      <li>Click <b>Start Scan</b>.</li>
      <li>Once the scan is completed, you can upload the
            <MadCap:variable name="Product-Names.ep_discovery"/> file to
            <MadCap:variable name="Product-Names.cloud_product_short"/> or download it.
</li>
      <li MadCap:conditions="SAP.SapHideFromOutput">Once the scan is completed, click <b>Download Results</b> . After downloading the file, <a href="#Manually" class="link-internal">upload it to <MadCap:variable name="Product-Names.cloud_product_short"/></a>.<div class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/discovery-agent-solace-broker-upload.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
    </ol>
    <h3><a name="Scanning"/><MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput"><MadCap:variable name="Product-Names.pubsub_brand_only"/></MadCap:conditionalText>Topic Metrics <MadCap:variable name="Product-Names.ep_discovery"/> (Preview)</h3>
    <p>Topic scans analyze your runtime data. You can run a topic analysis scan on
        <MadCap:variable name="Product-Names.broker_cloud_short"/>s<MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput">, software event brokers, and appliances</MadCap:conditionalText>. Once the scan is complete, a file in JSON format will be generated and available for download.</p>
    <p class="Note" MadCap:conditions="SAP.SapOnlyOutput">The  <MadCap:variable name="Product-Names.broker_cloud_short"/> uses  technology from Solace to run <MadCap:variable name="Product-Names.ep_discovery"/> scans. To run a <MadCap:variable name="Product-Names.ep_discovery"/> scan on an <MadCap:variable name="Variables.SAPCompanyName"/> <MadCap:variable name="Product-Names.broker_cloud_short"/>, you must select the Solace Broker option on the agent's user interface.</p>
    <p MadCap:conditions="SAP.SapHideFromOutput">The following event broker versions are currently supported: 8.11.0.1033, 9.1.1.12 , 9.3.1.17, 9.5.0.25, 9.6.0.34. </p>
    <p>To configure and run a topic scan on an event broker <MadCap:conditionalText MadCap:conditions="SAP.SapOnlyOutput">service</MadCap:conditionalText>, do the following:</p>
    <ol>
      <li> Go to <a href="http://localhost:8120/" target="_blank" class="link-offsite">http://localhost:8120.</a></li>
      <li>Select <b> Solace Broker</b> to perform a run-time discovery.
            <div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/discovery-agent-broker-list-topic-metrics.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
      <li>
        <p>Select <b>Topic Metrics Discovery</b>.</p>
      </li>
      <li>Complete the input fields as shown in the example below.
            <div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/topic-metrics-discovery-solace.png" alt="Screenshot showing the settings described in the surrounding text."/></div><table style="width: 100%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0"><col class="TableStyle-Table_Num-Column-Column1"/><col class="TableStyle-Table_Num-Column-Column1"/><thead><tr class="TableStyle-Table_Num-Head-Header1"><th class="TableStyle-Table_Num-HeadE-Column1-Header1">Field</th><th class="TableStyle-Table_Num-HeadD-Column1-Header1">Description</th></tr></thead><tbody><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Client Username</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">The client username assigned to the Message VPN.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Client Password</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1"><p>Password for the given client username.</p></td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Message VPN</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">Message VPN name.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyE-Column1-Body1"><b>Secure SMF Host</b></td><td class="TableStyle-Table_Num-BodyD-Column1-Body1">Secure SMF hostname.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyH-Column1-Body1"><b>Topic Subscriptions</b></td><td class="TableStyle-Table_Num-BodyG-Column1-Body1">Retrieves all topics from messages sent by the event broker during the scan interval and retrieves all available subscriptions. You can put one or more topic subscriptions (e.g., <code>/topicA/topicB</code>) or use a  wildcard (e.g., <code>&gt;</code>) to scan for everything. The subscription entered in the field filters published events for the topics that match that subscription; it does not filter subscriptions retrieved that are configured on the event broker. So limiting the scope of topics retrieved during the scan by entering a fined-grained subscription(s) in the field does not impact the number of subscriptions discovered.</td></tr><tr class="TableStyle-Table_Num-Body-Body1"><td class="TableStyle-Table_Num-BodyB-Column1-Body1"><b>Scan Duration</b></td><td class="TableStyle-Table_Num-BodyA-Column1-Body1">The duration in seconds for the discovery agent to receive event instances through the client interface to collect the associated data.                  </td></tr></tbody></table></li>
      <li>Click <b>Start Scan</b>, and then click <b>Continue</b> on the dialog that appears.</li>
      <li>Once the scan is completed, you can download the
            <MadCap:variable name="Product-Names.ep_discovery"/> file as well as explore and visualize the topic hierarchy.<div class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/topic-metrics-discovery-solace3.png"/></div></li>
    </ol>
    <h2 class="with-rule" MadCap:conditions="SAP.SapHideFromOutput"><a name="Adding"/>Uploading <MadCap:variable name="Product-Names.ep_discovery"/> to <MadCap:variable name="Product-Names.cloud_product_short"/></h2>
    <p MadCap:conditions="SAP.SapHideFromOutput">After the <MadCap:variable name="Product-Names.ep_discovery"/> scan is completed, you can upload the <MadCap:variable name="Product-Names.ep_discovery"/> file to the <MadCap:variable name="Product-Names.cloud_product_short"/> directly through the <MadCap:variable name="Product-Names.discovery_agent"/> or you can download and add it manually.</p>
    <h3 MadCap:conditions="SAP.SapHideFromOutput">Upload Discovery to
        <MadCap:variable name="Product-Names.cloud_product_short"/></h3>
    <p MadCap:conditions="SAP.SapHideFromOutput">To upload a <MadCap:variable name="Product-Names.ep_discovery"/> directly from the agent's user interface, do the following:</p>
    <ol>
      <li MadCap:conditions="SAP.SapHideFromOutput">Once the <a href="#Running" class="link-internal">scan</a> is complete, click <b>Upload it </b><MadCap:variable name="Product-Names.cloud_product_short" style="font-weight: bold;"/>. </li>
      <li MadCap:conditions="SAP.SapHideFromOutput">Add your login credentials and click <b>Login and Send</b>.  If you have single sign-on (SSO) enabled, you must provide an authorization token.<div MadCap:conditions="SAP.SapHideFromOutput"><img class="img-border" src="../../Resources/Images/Event-Portal/upload-pubsub-discovery-to-cloud-1.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
      <li MadCap:conditions="SAP.SapHideFromOutput">If your account has multiple organizations, you will need to select the organization where you want the <MadCap:variable name="Product-Names.ep_discovery"/> uploaded.<div MadCap:conditions="SAP.SapHideFromOutput"><img class="img-border" src="../../Resources/Images/Event-Portal/upload-pubsub-discovery-to-cloud-2.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
      <li MadCap:conditions="SAP.SapHideFromOutput">Click <b>Send Results</b>.</li>
    </ol>
    <p MadCap:conditions="SAP.SapHideFromOutput">The uploaded <MadCap:variable name="Product-Names.ep_discovery"/> will be available in the Runtime Discoveries list in <MadCap:variable name="Product-Names.eventportal_product_short"/>.</p>
    <h2 class="with-rule" MadCap:conditions="SAP.SapOnlyOutput"><a name="Add"/>Add a
        <MadCap:variable name="Product-Names.ep_discovery"/> File to
        <MadCap:variable name="Product-Names.eventportal_product_short"/></h2>
    <h3>
      <a name="Manually" MadCap:conditions="SAP.SapHideFromOutput"/>
      <MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput">Manually Add a
        <MadCap:variable name="Product-Names.ep_discovery"/> File to
        <MadCap:variable name="Product-Names.eventportal_product_short"/></MadCap:conditionalText>
    </h3>
    <p> To <MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput">manually </MadCap:conditionalText>add a <MadCap:variable name="Product-Names.ep_discovery"/> file to <MadCap:variable name="Product-Names.cloud_product_short"/>, perform the following steps:</p>
    <ol>
      <li>
        <MadCap:snippetBlock src="../../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
      </li>
      <li>On the left navigation bar, select <b><MadCap:variable name="Product-Names.ep_discovery"/></b>.</li>
      <li>On the top-right part of the page, click <b>Add <MadCap:variable name="Product-Names.ep_discovery"/></b>.
            </li>
      <li>Select the             <MadCap:variable name="Product-Names.ep_discovery"/> file and click <b>Open</b>.</li>
      <li>The new
            <MadCap:variable name="Product-Names.ep_discovery"/> file will be added to the list of discoveries. </li>
    </ol>
    <p>You can now perform one of the following actions after adding your
        <MadCap:variable name="Product-Names.ep_discovery"/>:</p>
    <ul>
      <li>import it directly into
            <MadCap:variable name="Product-Names.ep_designer"/>. For more information, see <MadCap:xref href="#import-from-discovery-to-designer">Importing a Discovery to [%=Product-Names.ep_designer%]</MadCap:xref>.</li>
      <li>if you don't need it, you can archive it. For more information, see <MadCap:xref href="#Archivin">Archiving a
        [%=Product-Names.ep_discovery%] File</MadCap:xref></li>
    </ul>
    <h2 class="with-rule"><a name="import-from-discovery-to-designer"/>Importing a <MadCap:variable name="Product-Names.ep_discovery"/> to
        <MadCap:variable name="Product-Names.ep_designer"/></h2>
    <p>After you upload a <MadCap:variable name="Product-Names.ep_discovery"/> file into
        <MadCap:variable name="Product-Names.cloud_product_short"/>, you can import its contents into
        <MadCap:variable name="Product-Names.ep_designer"/> to model your event-driven architecture (EDA). </p>
    <p>As part of importing your
        <MadCap:variable name="Product-Names.ep_discovery"/> file to
        <MadCap:variable name="Product-Names.ep_designer"/>, you must assign the <MadCap:variable name="Product-Names.ep_discovery"/> to a Logical Event Mesh (LEM). A LEM represents the event mesh over which associated events flow within an EDA. If you don't have a LEM created, you are prompted to create one when you import your <MadCap:variable name="Product-Names.ep_discovery"/> to
        <MadCap:variable name="Product-Names.ep_designer"/>. For more information about LEMs, see <MadCap:xref href="event-portal.htm#Logical">Logical Event Mesh</MadCap:xref>. After you create a LEM, you must associate the discovered data with applications and application domains.</p>
    <p>To import the <MadCap:variable name="Product-Names.ep_discovery"/> file to <MadCap:variable name="Product-Names.ep_designer"/>, follow these steps:</p>
    <ol>
      <li>
        <MadCap:snippetBlock src="../../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
      </li>
      <li>Select
        the    <MadCap:variable name="Product-Names.ep_discovery" style="font-weight: bold;"/> card or icon on the navigation bar.</li>
      <li>On the <b><MadCap:variable name="Product-Names.ep_discovery"/></b>: <b>Runtime Discoveries</b> page, select the <MadCap:variable name="Product-Names.ep_discovery"/> that you want to import to
            <MadCap:variable name="Product-Names.ep_designer"/> from the list. A panel will expand on the right.</li>
      <li> Select <b>Import to </b><MadCap:variable name="Product-Names.ep_designer" style="font-weight: bold;"/>.</li>
      <li>On the dialog that appears, you can import the <MadCap:variable name="Product-Names.ep_discovery"/> to an existing LEM or create a new LEM. <div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/lem-existing-or-create.png" alt="Screenshot showing the settings described in the surrounding text."/></div><p>To use an existing LEM:</p><ol style="list-style-type: lower-alpha;"><li>Select <b>Choose Existing</b></li><li>Expand the drop-down menu and select a LEM</li><li>Click <b>Continue Import</b></li></ol><p>To create a new LEM:</p><ol style="list-style-type: lower-alpha;"><li>Select <b>Create New</b>.</li><li>In the <b>Name</b> field, give the LEM a name—the name must be unique in the account</li><li>(Optional) In the <b>Description</b> field, add information to help you understand the background. The Description text box supports native Markdown. Click <b>toggle preview</b><img src="../../Resources/Images/Cloud/reusable-icons/markdown-html-toggle.png" alt=" "/> to preview raw markdown text in a rich text format.</li><li>Under Topic Formatting, click the <b>Level Delimiter</b> drop-down and select a delimiter based on the broker type for your Discovery. <ul><li>For Solace, it's a forward ("<code>/</code>") which is automatically selected for you.</li><li>For Kafka, it can be either a dot ("<code>.</code>"), dash ("<code>-</code>"), or underscore ("<code>_</code>"). </li></ul></li></ol></li>
      <li>Click <b>Continue to Import</b>.</li>
      <li>After you select an existing LEM or create a new LEM, you can perform the following tasks:<ul><li><MadCap:xref href="#discoveryflow-add-topic">Creating an Event Type</MadCap:xref></li><li><MadCap:xref href="#discovery-flow-add-endpoint">Mapping Client Delivery Endpoints</MadCap:xref></li><li><MadCap:xref href="#Mapping">Mapping Consumer Groups to Applications</MadCap:xref> (only for Kafka event brokers)
</li><li><MadCap:xref href="#ep-discovery-workflow-add-connector">Adding Connectors to an Application Domain </MadCap:xref>(only for Kafka event brokers)
</li><li><MadCap:xref href="#schema-add">Adding Schemas to an Application Domain</MadCap:xref> (only for Kafka event brokers)
</li></ul></li>
      <li>Once you've completed adding the events, Client Delivery Endpoints, and Connectors, you can click <b>Return to </b><MadCap:variable name="Product-Names.ep_designer" style="font-weight: bold;"/>, which will take you to
            <MadCap:variable name="Product-Names.ep_designer"/>'s Topology view. There you can further modify your EDA and visualize what you've imported. For example, if you double-click on the Application Domain you've imported to, you'll see event information that you've associated with your Applications. For more information about using
            <MadCap:variable name="Product-Names.ep_designer"/> to further define your EDA, see <MadCap:xref href="event-portal-designer.htm">[%=Product-Names.ep_designer%]</MadCap:xref>.</li>
    </ol>
    <p>Additionally, you can re-run <MadCap:variable name="Product-Names.ep_discovery"/> scans and merge any new discovered data to the existing EDA. See <MadCap:xref href="#Re-runni">Scanning and Merging New [%=Product-Names.ep_discovery%] Data</MadCap:xref> to learn more.</p>
    <h3><a name="discoveryflow-add-topic"/>Creating an Event Type</h3>
    <p>You can add events using the topics (or event instances) that you've imported from your <MadCap:variable name="Product-Names.ep_discovery"/> scan. In the scanned Discovery, you will have many topic addresses that are organized as a Topic Tree. </p>
    <p>Topic Addresses consist of zero or more topic levels. Each topic level can be literal value (instances) of data found during a
        <MadCap:variable name="Product-Names.ep_discovery"/>, but in large system you may have multiple instances of same data as Topic Level. For that reason, it's more useful to use variables at a topic level to build a dynamic topic address for events. You can compress the topic level event instances down into dynamic topic addresses or types where each topic level can be represented using one or more <i>variables</i>. For more information about creating variables at a topic level, see <MadCap:xref href="#creating-variables">Creating Variables for a Topic Level</MadCap:xref>.</p>
    <p> The purpose of traversing your topic tree is to identify the events from looking at the raw data to represent and better understand it in your EDA and create types for reuse.</p>
    <p>The following steps shows how to traverse a topic tree and create an event:</p>
    <ol>
      <li>
        <p>On the <b>Add discovered items to Event Portal</b> page, select the <b>Topics</b> tab, expand each topic to drill down the hierarchy of the topic tree. At any topic level, you can optionally create variable to make that level dynamic. </p>
        <p>
          <div class="thumbnail-container">
            <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/EP_Discovery_AddTopic.png" alt="Screenshot showing the settings described in the surrounding text."/>
          </div>
        </p>
      </li>
      <li>Click <b>Add Events</b> <img src="../../Resources/Images/Cloud/reusable-icons/ep_add_icon.png" class="" alt=""/> beside the topic for which you want to create an event.</li>
      <li>In the <b>Create Event</b> dialog, type a name for the event in <b>Name</b> field.</li>
      <li>Choose an application domain for the event. You can do one of the following actions:</li>
      <ul>
        <li>Select <b>Existing Application Domain</b> and then choose an existing domain from the drop-down list. </li>
        <li>Select <b>New Application Domain</b> and type a name to create an application domain.</li>
      </ul>
      <li>Click <b>Create Event</b>.</li>
    </ol>
    <p>On the right-most panel, you'll notice that a new event has been added to the given application domain and the yellow status disappears.</p>
    <p>
      <div class="thumbnail-container">
        <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/ep_add_discovery_add_event_after.png" alt="Screenshot showing the settings described in the surrounding text."/>
      </div>
    </p>
    <h4><a name="creating-variables"/>Creating Variables for a Topic Level</h4>
    <p>All topic address created in <MadCap:variable name="Product-Names.eventportal_product_short"/> contains individual topics from multiple event instances discovered from the event broker. These event instances are organized as a topic tree where you can see their hierarchical topic structure. These topics have levels that consist of literal value or a variable. A variable topic level is a placeholder that is substituted for a concrete value by publishing applications at runtime. Variable topic levels can be constrained into an enumeration set that contains a list of pre-defined possible values, or it can be unbounded. Since <MadCap:variable name="Product-Names.eventportal_product_short"/> models event types as opposed to event instances, using variables to represent some of the topic address levels usually makes sense for modeling an event-driven architecture, and therefore is appropriate to do before importing the events to <MadCap:variable name="Product-Names.ep_designer"/>.</p>
    <p>To create a variable, follow these steps:</p>
    <ol>
      <li>After you select <b>Import to </b><MadCap:variable name="Product-Names.ep_designer" style="font-weight: bold;"/>, create your Logical Event Mesh (LEM) if it hasn't been created, you can view the discovered event instances in the <b>Topics</b> tab.</li>
      <li>
        <p>In the <a href="event-portal.htm#Topic3" class="link-internal">Topic Tree</a>, select the <MadCap:xref href="event-portal.htm#Topic2">Topic Level </MadCap:xref> for which to create a variable. As you expand the Topic Tree, you usually have a number of similar instance information at the same Topic Level. For example, in the example below there are a number of driver-related updates in the sample we are using. As there could potentially be thousands of these instances, it's best to create unbounded variables in such situations.</p>
      </li>
      <li>
        <p>Select one or more check box at the Topic Level beside the name of the event instances you want to create a variable. </p>
        <p>
          <div class="thumbnail-container">
            <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/ep_discovery_create_variable1.png" alt="Screenshot showing the settings described in the surrounding text."/>
          </div>
        </p>
      </li>
      <li>
        <p>(Optionally) If you want to create a variable to represent all the event instances at that Topic Level, click <b>Select All</b> beside the entry you selected. </p>
        <p>
          <div class="thumbnail-container">
            <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/ep_discovery_create_variable2.png" alt="Screenshot showing the settings described in the surrounding text."/>
          </div>
        </p>
      </li>
      <li>
        <p>Click <b>Create Variable</b>. </p>
      </li>
      <li>In the <b>Create Variable</b> dialog, enter a unique name for the variable in the <b>Name</b> field and click <b>Create</b>. <div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/ep_discovery_create_variable4.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
      <li>Alternatively, you can create an Enum set to constrain the variable topic levels within a list of pre-defined values. To do so, complete these steps: <ol style="list-style-type: lower-alpha;"><li>On the Create Variable dialog, click <b>Create</b> beside the Enum field.</li><li>In the <b>Create Enum</b> dialog, enter a name for the enumerator in the Name field. </li><li>(Optional) Enter a description for the Enum in the <b>Description</b> field</li><li>Add or delete <img src="../../Resources/Images/Cloud/reusable-icons/eventportal-delete-grey.png" alt=" " class="img.img-inline"/> values and optionally enter a string in the <b>Display Name</b> field for each enumerated value, which is shown instead of the value when you visualize the event.</li><li><p> Click <b>Create</b> and you return back to the <b>Create Variable</b> dialog.</p><p><div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/ep_discovery_create_variable4_eums.png" alt="Screenshot showing the settings described in the surrounding text."/></div></p></li></ol></li>
      <li>
        <p>Click <b>Create</b>.</p>
        <p>
          <div class="thumbnail-container" MadCap:conditions="SAP.SapHideFromOutput">
            <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/ep_discovery_create_variable5_aseums.png" alt="Screenshot showing the settings described in the surrounding text."/>
          </div>
        </p>
      </li>
    </ol>
    <p>In the example below, you can see how the event instances for that topic level have been compressed.</p>
    <p>
      <div class="thumbnail-container">
        <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/ep_discovery_create_variable6_done.png" alt="Screenshot showing the settings described in the surrounding text."/>
      </div>
    </p>
    <p>You can select more topic levels and create variables as required until you get to a leaf node, in which you can create an event as described in <MadCap:xref href="#discoveryflow-add-topic">Adding Events to an Application Domain</MadCap:xref>.</p>
    <h3><a name="discovery-flow-add-endpoint"/>Mapping Client Delivery Endpoints</h3>
    <p>The <a href="event-portal.htm#Client" class="link-internal">Client Delivery Endpoint</a> (CDE) specifies the location on an event mesh that is used by an application to consume events. CDEs can be added to an Application using these rules:</p>
    <ul>
      <li>Applications can have multiple CDEs. For Direct Client Endpoints, you can have multiple Direct Client Endpoints per application, but only one per client username.</li>
      <li> A CDE can only be assigned to one application at any given time. </li>
    </ul>
    <p>Each CDE that is found is marked with a yellow status indicator on the left-side of the name of the CDE. The yellow status indicators shows that a CDE not been associated with an application. When a CDE has been associated with an application, the yellow status indicator is removed.</p>
    <p>You can add the following different types of Client Delivery Endpoints (CDEs) if there are endpoints found as part of your
        <MadCap:variable name="Product-Names.ep_discovery"/>, which is indicated by a number in parenthesis beside the Client Delivery Endpoints.</p>
    <p>The following CDEs are supported:</p>
    <ul>
      <li>Direct Client Endpoint (<MadCap:variable name="Product-Names.pubsub_brand_only"/> <MadCap:variable name="Product-Names.broker_cloud_short"/>s only)</li>
      <li>Durable Topic Endpoint (<MadCap:variable name="Product-Names.pubsub_brand_only"/> <MadCap:variable name="Product-Names.broker_cloud_short"/>s only)</li>
      <li>Event Queue (<MadCap:variable name="Product-Names.pubsub_brand_only"/> <MadCap:variable name="Product-Names.broker_cloud_short"/>s only)</li>
      <li>Consumer Group (Kafka only). For more information refer to <MadCap:xref href="#Mapping">Mapping Consumer Groups to Client Delivery Endpoints</MadCap:xref>.</li>
    </ul>
    <p>If you don't have an application, you can also add them as part of these steps.</p>
    <ol>
      <li>On the <b>Add discovered items to Event Portal</b> page, click on the <b>Queues &amp; Direct Clients</b> tab.<div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/ep_add_cde.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
      <li>If you have created an application domain with an application within it, proceed to the next step, otherwise the complete the following steps as required.<ul><li>If you don't have a and application domain, click <b>Add Domain</b> to create an application domain.</li><li>If you don't have an application, select the application domain that you want use in the Import Tool pane and then click <b>Add Application</b> and complete the form.</li></ul></li>
      <li>Select at least one CDE using the check box beside it. You can select multiple CDEs to add to an application at the same time.</li>
      <li>Click <b>Add to Application</b>.</li>
      <li>In the <b>Place in Application</b> dialog, select the application domain from the first list, select the application from the second list, and then click <b>Add Application</b>.</li>
    </ol>
    <p>After a CDE has been added, the yellow status disappears, and name of the application the endpoint that was added appears in the Application column.</p>
    <p>
      <div class="thumbnail-container">
        <img class="solacethumbnail" src="../../Resources/Images/Event-Portal/ep_add_cde-done.png" alt="Screenshot showing the settings described in the surrounding text."/>
      </div>
    </p>
    <p> Any remaining Client Delivery Endpoints that have a yellow status indicate that they are not associated with an application. However, you can choose to use the parts of the <MadCap:variable name="Product-Names.ep_discovery"/> that aligns with your EDA.</p>
    <p class="Tip"> When one or more CDEs are selected, you can drag the <img src="../../Resources/Images/Cloud/reusable-icons/multidrag_icon.png" alt=" "/> icon to the application listed in the <b>Import Tool</b> panel. This makes it easier for you to quickly associate a CDE with an application.<br/></p>
    <h3><a name="Mapping"/>Mapping Consumer Groups to Applications</h3>
    <MadCap:snippetBlock src="../../Resources/Snippets/Cloud/map-consumergroup-cde.flsnp"/>
    <h3><a name="ep-discovery-workflow-add-connector"/>Adding Connectors to an Application Domain</h3>
    <p>If you have a Kafka <MadCap:variable name="Product-Names.ep_discovery"/>, you can map connectors and their associated topics to application domains, so that you can view all the relevant EDA objects in <MadCap:variable name="Product-Names.ep_designer"/> and <MadCap:variable name="Product-Names.ep_catalog"/> model.</p>
    <p>A connector is used in Kafka for connecting Kafka event brokers with external systems to stream data into or out of Apache Kafka. In the <MadCap:variable name="Product-Names.eventportal_product_short"/>, a Kafka Connector is an application class you select to configure associated published and/or subscribed events and a set of Kafka-native attributes. When importing a Kafka-based Discovery, the connectors must be imported as applications. When importing connectors, only those published topics that were previously converted to events will be imported.</p>
    <p>To add connectors to an application domain, follow these steps:</p>
    <ol>
      <li>On the <b> Add discovered items to Event Portal</b> page, click the <b>Connectors</b> tab. Notice the yellow bar beside the connectors, which indicates that the connectors are not associated to an application domain.</li>
      <li>Select at least one connector using the check box beside it. You can select multiple connectors to add to an application domain at the same time.</li>
      <li>Click <b>Import as Application</b>.</li>
      <li>On Import Connectors as Application dialog, select an application domain and then click <b>Import</b>.</li>
      <li>On the Connector Topics dialog, review the connectors you are importing and click <b>Import Connector</b>.</li>
    </ol>
    <p>After a connector has been added, the yellow status beside the connector disappears, and on the Import Tool panel, the connector will be visible under the associated application domain.</p>
    <h3><a name="schema-add"/>Adding Schemas to an Application Domain</h3>
    <MadCap:snippetBlock src="../../Resources/Snippets/Cloud/add-schema-appdomain.flsnp"/>
    <h2 class="with-rule"><a name="Re-runni"/>Re-scanning and Merging <MadCap:variable name="Product-Names.ep_discovery"/> Data</h2>
    <p>One of the key features of <MadCap:variable name="Product-Names.ep_discovery"/> is the ability to re-run <MadCap:variable name="Product-Names.ep_discovery"/> scans on different event brokers, assign the <MadCap:variable name="Product-Names.ep_discovery"/> files to an existing LEM, and merge the discovered data. The newly discovered data is flagged and can be merged with the existing EDA in <MadCap:variable name="Product-Names.ep_designer"/>. You can run scan on all the different <MadCap:variable name="Product-Names.pubsub_brand_only"/> event brokers that are connected together in a <a href="../../Features/DMR/DMR-Overview.htm" class="link-internal">Direct Message Routing (DMR)</a> cluster to form an event mesh, and get a full view of the EDA components and events flowing through that mesh. This enables you to add to your modeled event-driven architecture up to date by comparing existing data with new discoveries. You can also re-run a scan on one event broker at different times and associate the newly discovered data with a previously create LEM.</p>
    <p>To re-run <MadCap:variable name="Product-Names.ep_discovery"/> scan on an event broker and merge the discovered data, do the following.</p>
    <ol>
      <li>Re-run scans on target event broker. For instructions, see <MadCap:xref href="#Running">Running a
        [%=Product-Names.ep_discovery%] Scan</MadCap:xref>.</li>
      <li>Upload the newly scanned data to <MadCap:variable name="Product-Names.eventportal_product_short"/>. For instructions, see <MadCap:xref href="#Adding">Uploading Discovery to <MadCap:variable name="Product-Names.cloud_product_short"/></MadCap:xref>.</li>
      <li>Import the discovered data to <MadCap:variable name="Product-Names.ep_designer"/>. All the new data will be flagged, which can then be merged with the existing data in the LEM. For instructions, see <MadCap:xref href="#import-from-discovery-to-designer">Importing a Discovery to
        [%=Product-Names.ep_designer%]</MadCap:xref>. </li>
    </ol>
    <h2 class="with-rule"><a name="Archivin"/>Archiving a
        <MadCap:variable name="Product-Names.ep_discovery"/> File</h2>
    <p>You have the option to archive a
        <MadCap:variable name="Product-Names.ep_discovery"/> file or even delete the file permanently. You may want to use the archive option if you have already imported the file into
        <MadCap:variable name="Product-Names.eventportal_product_short"/> and to reduce clutter.</p>
    <p>To archive a
        <MadCap:variable name="Product-Names.ep_discovery"/> file, follow the steps below:</p>
    <ol>
      <li>Click the <img src="../../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" class="img.img-inline" alt=" "/> on the
            <MadCap:variable name="Product-Names.ep_discovery"/> file you want to archive.<div class="thumbnail-container"><img class="solacethumbnail" src="../../Resources/Images/Event-Portal/Archive-Discovery.png" alt="Screenshot showing the settings described in the surrounding text."/></div></li>
      <li> Select <b>Archive Discovery</b>. The state of the file will change to archived.</li>
    </ol>
    <p>After the file is archived, you have the following options:</p>
    <p><b>Activate Discovery</b>: If you activate discovery, the audit will automatically run.</p>
    <p><b>Delete Discovery</b>: In this case, the
        <MadCap:variable name="Product-Names.ep_discovery"/> file will be permanently deleted from
        <MadCap:variable name="Product-Names.eventportal_product_short"/> Runtime Discoveries list.</p>
  </body>
</html>
