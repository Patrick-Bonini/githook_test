<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Using Audit Logs and System Logs</h1>
    <p><MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput"><MadCap:variable name="Product-Names.cloud_product_long"/></MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="SAP.SapOnlyOutput"><MadCap:variable name="Product-Names.cloud_product_firstuse_initialcase"/></MadCap:conditionalText>  provides ways for you to receive logs and be notified of system events that occur. Depending on your deployment and the security policies, you may want to consider how to integrate these into your existing security infrastructure. For more information about logs that you can use for security audits, see <MadCap:xref href="#audit-logs">Audit Logs</MadCap:xref>. </p>
    <p>In addition to overall audit logs in the <MadCap:variable name="Product-Names.console_ui_short"/>, there are system logs available for each <MadCap:variable name="Product-Names.broker_cloud_short"/>. These are useful for you to monitor the activities, performance, capacity, or operations that occur on your <MadCap:variable name="Product-Names.broker_cloud_short"/>s. You can access these logs in two ways:</p>
    <ul>
      <li> Using the SysLog Forwarding feature, where the <MadCap:variable name="Product-Names.broker_cloud_short"/>s can be configured to forward logs to target servers you own. For more information, see  <MadCap:xref href="#eb-logs">Event Broker Service Logs</MadCap:xref>.</li>
      <li>Using <MadCap:variable name="Product-Names.insights_long"/> Advanced Monitoring to access the logs collected from the central monitoring service. For more information, see <MadCap:xref href="../Insights/Insights.htm">[%=Product-Names.insights_long%] Overview</MadCap:xref>.</li>
    </ul>
    <h2><a name="audit-logs"/>Audit Logs</h2>
    <p>The audit logs provide records of user activity for security and compliance for your <MadCap:variable name="Product-Names.cloud_product_short"/> enterprise account. You can view, monitor, and track the sequence of the following activities in the <MadCap:variable name="Product-Names.console_ui_long"/>:</p>
    <ul>
      <li>IAM operations, such as user login</li>
      <li>user management activities, such as user activation or role changes</li>
      <li><MadCap:variable name="Product-Names.broker_cloud_short"/> lifecycle events such as the creation, modification, or deletion</li>
    </ul>
    <p>With correctly authenticated and authorized users (including administrators), you have a system that provides access to only those individuals who have the correct, pre-defined privileges. To ensure that the system authenticates and authorizes the right individuals, the system  logs events such as brute force password attacks in addition to expected access to data and configuration changes.</p>
    <p>You can view, filter, and download audit logs from <MadCap:variable name="Product-Names.cloud_product_short"/> to monitor what occurs on your system. For more information, see <MadCap:xref href="../managing-audit-logs.htm">Using Audit Logs</MadCap:xref>.</p>
    <h2><a name="eb-logs"/><MadCap:variable name="Product-Names.broker_cloud_short_title"/> Logs</h2>
    <p>System logs are useful to understand the operations that occur on <MadCap:variable name="Product-Names.broker_cloud_short"/>s. These logs pertain to system, Message VPN, and client logs. You can forward these logs to your own monitoring system to manage the health of your system. For more information, see <MadCap:xref href="../cloud-syslog-forwarding.htm">Forwarding Logs to an External System</MadCap:xref>.</p>
    <p>The same logs are used by  <MadCap:variable name="Product-Names.insights_long"/>, which permits you to monitor the health of your <MadCap:variable name="Product-Names.broker_cloud_short"/>s in your account (in addition to other useful monitoring features). For more information, see <MadCap:xref href="../Insights/Insights.htm">[%=Product-Names.insights_long%] Overview</MadCap:xref>.</p>
    <p>A subset of the <MadCap:variable name="Product-Names.broker_cloud_short"/> logs are collected and sent to our central monitoring system, which <MadCap:variable name="Variables.CompanyName"/> uses to monitor the health of your <MadCap:variable name="Product-Names.broker_cloud_short"/>s. </p>
    <p class="Note">There are more logs available from the <MadCap:variable name="Product-Names.broker_cloud_short"/>s.  You can use the Syslog Forwarding feature to enable the distribution of these logs in the <MadCap:variable name="Product-Names.console_ui_long"/>.</p>
    <p>Limited logs are collected which are required for <MadCap:variable name="Product-Names.cloud_product_short"/> to function correctly, which are as follows:</p>
    <ul>
      <li><code>command.log</code> — An audit log of all administrative commands run on the <MadCap:variable name="Product-Names.broker_cloud_short"/>. The command action is logged and includes the user account that issued the command as well as the IP address of the connection from where the command was issued.</li>
      <li><code>system.log</code> — A notification log for significant system-level health events (e.g., redundancy state changes). For a summary of the logs that are collected, see <MadCap:xref href="#system-logs">System Logs Collected</MadCap:xref>.</li>
      <li><code>gather-diagnostics</code> — A diagnostics dump of the system state and the logs that can be used to assist in troubleshooting issues.</li>
      <li>System metrics — Metrics for capacity monitoring and planning. The central monitoring service collects various logs from the <MadCap:variable name="Product-Names.broker_cloud_short"/>s. These logs are  used for notifications and for advanced monitoring  through <MadCap:variable name="Product-Names.insights_long"/>. For detailed information on the information collected, see <MadCap:xref href="#monitoring-logs">Monitoring Logs Collected</MadCap:xref>.</li>
      <li>Heartbeats — Health checks for various components of the <MadCap:variable name="Product-Names.broker_cloud_short"/>s are logged.</li>
      <li>Response codes and status — <MadCap:variable name="Product-Names.home_cloud_long"/> actions (upgrades, service creation, and deletion, etc.), confirmation as to whether the action completed as intended are collected.</li>
    </ul>
    <h2 class="with-rule"><a name="summary-log-info"/>Summary of Log Information Collected</h2>
    <p>The following is a summary of the log information collected by the <MadCap:variable name="Product-Names.cloud_product_short"/> for monitoring of <MadCap:variable name="Product-Names.broker_cloud_short"/> health. There are two categories of information that are collected:</p>
    <ul>
      <li>
        <a href="#system-logs" class="link-internal">System logs</a>
      </li>
      <li>
        <a href="#monitoring-logs" class="link-internal">Monitoring logs</a>
      </li>
    </ul>
    <h3><a name="system-logs"/>System Logs Collected</h3>
    <p>A number of system logs are collected from the <MadCap:variable name="Product-Names.broker_cloud_short"/>s. These system logs are required to monitor the health and performance of the <MadCap:variable name="Product-Names.broker_cloud_short"/>s and utilized by <MadCap:variable name="Product-Names.insights_long"/> for monitoring (via Datadog monitors). For information about the list of Datadog monitors and metrics available, see <MadCap:xref href="../Insights/Advanced-Monitoring/insights-monitors.htm">[%=Product-Names.insights_long%] Monitors Reference</MadCap:xref> and <MadCap:xref href="../Insights/Advanced-Monitoring/insights-metrics.htm">[%=Product-Names.insights_long%] Metrics and Checks</MadCap:xref>.</p>
    <p MadCap:conditions="SAP.SAPTempHide">The following is the list of system logs collected. For detailed information about each of the logs collected, see <MadCap:xref href="../../Admin-Ref/Solace-PubSub-Event-Reference/event_ref_boiler.html">Solace PubSub+ Syslog Events</MadCap:xref>.</p>
    <ul MadCap:conditions="SAP.SAPTempHide">
      <li> SYSTEM_AD_MAX_EGRESS_FLOWS_EXCEEDED</li>
      <li>SYSTEM_AD_MAX_INGRESS_FLOWS_EXCEEDED</li>
      <li>SYSTEM_AD_MSG_SPOOL_QUOTA_EXCEED</li>
      <li>SYSTEM_AD_DELIVERED_UNACKED_MSGS_EXCEED</li>
      <li> SYSTEM_AD_TRANSACTED_SESSION_RESOURCE_UTILIZATION_EXCEEDED</li>
      <li> SYSTEM_AD_DISK_USAGE_EXCEEDED</li>
      <li>SYSTEM_AD_MSG_COUNT_UTILIZATION_EXCEED</li>
      <li>SYSTEM_AD_TRANSACTED_SESSIONS_EXCEED</li>
      <li>SYSTEM_AD_SPOOL_FILES_EXCEEDED</li>
      <li>SYSTEM_AD_TRANSACTIONS_EXCEED</li>
      <li>SYSTEM_AD_MAX_ENDPOINTS_EXCEEDED</li>
      <li>SYSTEM_HA_REDUN_STATE_DOWN</li>
      <li>SYSTEM_CFGSYNC_DOWN</li>
      <li>SYSTEM_AD_TRANSACTIONS_HIGH</li>
      <li>SYSTEM_AD_SPOOL_FILES_HIGH</li>
      <li>SYSTEM_AD_DELIVERED_UNACKED_MSGS_HIGH</li>
      <li>SYSTEM_AD_DISK_USAGE_HIGH</li>
      <li>SYSTEM_AD_EGRESS_FLOWS_HIGH</li>
      <li>SYSTEM_AD_ENDPOINTS_HIGH</li>
      <li>SYSTEM_AD_INGRESS_FLOWS_HIGH</li>
      <li>SYSTEM_AD_MSG_COUNT_UTILIZATION_HIGH</li>
      <li>SYSTEM_AD_MSG_SPOOL_CHG</li>
      <li>SYSTEM_AD_MSG_SPOOL_HIGH</li>
      <li>SYSTEM_AD_SPOOL_FILES_HIGH</li>
      <li>SYSTEM_AD_TRANSACTED_SESSIONS_HIGH</li>
      <li>SYSTEM_AD_TRANSACTED_SESSION_RESOURCE_UTILIZATION_HIGH</li>
      <li>SYSTEM_AD_TRANSACTIONS_HIGH</li>
    </ul>
    <h3><a name="monitoring-logs"/>Metrics Collected</h3>
    <p>Logs are collected by a third-party, central monitoring service called <i>Datadog</i>.  Datadog agents on the <MadCap:variable name="Product-Names.broker_cloud_short"/>s collect the statistics and send them over a secure, encrypted connection to the central monitoring service. For more information about the central monitoring service and Datadog agents, see <MadCap:xref href="security-centralized-monitoring-service.htm">Centralized Monitoring Service and Datadog Agents</MadCap:xref>.</p>
    <p>The state information,  metrics, and statistics collected by the Datadog agents are listed in <MadCap:xref href="../Insights/Advanced-Monitoring/insights-metrics.htm">[%=Product-Names.insights_long%] Metrics and Checks</MadCap:xref> section. These metrics are available for Advanced Monitoring in <MadCap:variable name="Product-Names.insights_long"/>.</p>
    <ul MadCap:conditions="Default.HideFromAllOutput">
      <li>Message Spool:<ul><li>message-spool-info.operational-status</li><li>message-spool-info.active-disk-partition-usage</li><li>message-spool-info.current-persist-usage</li><li>message-spool-info.current-cache-usage</li></ul></li>
      <li>Memory: <ul><li>slot-infos.slot-info.nab-buffer-load-factor</li></ul></li>
      <li>Config Sync:<ul><li>config-sync.status.admin-status</li><li>config-sync.status.oper-status</li></ul></li>
      <li>Redundancy:<ul><li>redundancy.config-status</li><li><p>redundancy.redundancy-status</p></li><li><p>redundancy.redundancy-mode</p></li><li><p>redundancy.oper-status.adb-link-up</p></li><li><p>redundancy.oper-status.adb-hello-up</p></li><li><p>redundancy.virtual-routers.primary.status.activity</p></li><li><p>redundancy.virtual-routers.backup.status.activity</p></li></ul></li>
      <li>
        <p>Message Vpn:</p>
        <ul>
          <li>
            <p>vpn.total-local-unique-subscriptions</p>
          </li>
          <li>
            <p>vpn.total-remote-unique-subscriptions</p>
          </li>
          <li>
            <p>vpn.total-unique-subscriptions</p>
          </li>
          <li>
            <p>vpn.connections</p>
          </li>
          <li>
            <p>vpn.connections-service-smf</p>
          </li>
          <li>
            <p>vpn.connections-service-web</p>
          </li>
          <li>
            <p>vpn.connections-service-rest-incoming</p>
          </li>
          <li>
            <p>vpn.connections-service-mqtt</p>
          </li>
          <li>
            <p>vpn.connections-service-rest-outgoing</p>
          </li>
          <li>
            <p>message-vpn.vpn.current-queues-and-topic-endpoints</p>
          </li>
          <li>
            <p>message-vpn.vpn.num-queues</p>
          </li>
          <li>
            <p>message-vpn.vpn.num-topic-endpoints</p>
          </li>
          <li>
            <p>message-vpn.vpn.num-sequenced-topics</p>
          </li>
          <li>
            <p>message-vpn.vpn.current-messages-spooled</p>
          </li>
          <li>
            <p>message-vpn.vpn.current-spool-usage-mb</p>
          </li>
          <li>
            <p>message-vpn.vpn.current-transacted-sessions</p>
          </li>
          <li>
            <p>message-vpn.vpn.transacted-sessions-local-used</p>
          </li>
          <li>
            <p>message-vpn.vpn.transacted-sessions-xa-used</p>
          </li>
          <li>
            <p>message-vpn.vpn.current-transactions</p>
          </li>
          <li>
            <p>message-vpn.vpn.transactions-local-used</p>
          </li>
          <li>
            <p>message-vpn.vpn.transactions-xa-used</p>
          </li>
          <li>
            <p>message-vpn.vpn.current-egress-flows</p>
          </li>
          <li>
            <p>message-vpn.vpn.current-ingress-flow</p>
          </li>
        </ul>
      </li>
      <li>Client stats:<ul><li>client.global.stats.total-clients</li><li>client.global.stats.total-client-messages-received</li><li>client.global.stats.total-client-messages-sent</li><li>client.global.stats.client-data-messages-received</li><li>client.global.stats.client-data-messages-sent</li><li>client.global.stats.total-client-bytes-received</li><li>client.global.stats.total-client-bytes-sent</li><li>client.global.stats.client-data-bytes-received</li><li>client.global.stats.client-data-bytes-sent</li><li>client.global.stats.ingress-discards.total-ingress-discards</li><li>client.global.stats.ingress-discards.no-subscription-match</li><li>client.global.stats.ingress-discards.topic-parse-error</li><li>client.global.stats.ingress-discards.parse-error</li><li>client.global.stats.ingress-discards.msg-too-big</li><li>client.global.stats.ingress-discards.ttl-exceeded</li><li>client.global.stats.ingress-discards.web-parse-error</li><li>client.global.stats.ingress-discards.publish-topic-acl</li><li>client.global.stats.ingress-discards.msg-spool-discards</li><li>client.global.stats.ingress-discards.message-promotion-congestion</li><li>client.global.stats.ingress-discards.message-spool-congestion</li><li>client.global.stats.egress-discards.total-egress-discards</li><li>client.global.stats.egress-discards.transmit-congestion</li><li>client.global.stats.egress-discards.compression-congestion</li><li>client.global.stats.egress-discards.message-elided</li><li>client.global.stats.egress-discards.ttl-exceeded</li><li>client.global.stats.egress-discards.payload-could-not-be-formatted</li><li>client.global.stats.egress-discards.message-promotion-congestion</li><li>client.global.stats.egress-discards.message-spool-congestion</li><li>client.global.stats.egress-discards.client-not-connected</li><li>client.global.stats.egress-discards.msg-spool-egress-discards</li><li>client.global.stats.average-login-req-received-rate-per-minute</li><li>client.global.stats.average-login-rsp-sent-rate-per-minute</li></ul></li>
      <li>Ingress/Egress Message Spool Rates:<ul><li>message-vpn.total-message-spool-rates.qendpt-data-rates.average-ingress-byte-rate-per-minute</li><li>message-vpn.total-message-spool-rates.qendpt-data-rates.average-ingress-rate-per-minute</li><li>message-vpn.total-message-spool-rates.qendpt-data-rates.average-egress-byte-rate-per-minute</li><li>message-vpn.total-message-spool-rates.qendpt-data-rates.average-egress-rate-per-minute</li></ul></li>
      <li>Message Vpn Stats:<ul><li>vpn.stats.denied-client-connect-acl</li><li><p>vpn.stats.denied-subscribe-topic-acl</p></li><li><p>vpn.stats.denied-unsubscribe-topic-acl</p></li><li><p>vpn.stats.average-ingress-rate-per-minute</p></li><li><p>vpn.stats.average-egress-rate-per-minute</p></li><li><p>vpn.stats.average-ingress-byte-rate-per-minute</p></li><li><p>vpn.stats.average-egress-byte-rate-per-minute</p></li><li><p>vpn.stats.zip-stats.average-ingress-compressed-rate-per-minute</p></li><li><p>vpn.stats.zip-stats.average-egress-compressed-rate-per-minute</p></li><li><p>vpn.stats.zip-stats.average-ingress-uncompressed-rate-per-minute</p></li><li><p>vpn.stats.zip-stats.average-egress-uncompressed-rate-per-minute</p></li><li><p>vpn.stats.ssl-stats.average-ingress-ssl-rate-per-minute</p></li><li><p>vpn.stats.ssl-stats.average-egress-ssl-rate-per-minute</p></li><li><p>vpn.stats.ingress-discards.total-ingress-discards</p></li><li><p>vpn.stats.egress-discards.total-egress-discards</p></li></ul></li>
      <li>
        <p>Rest:</p>
        <ul>
          <li>rest.rest-delivery-points.rest-delivery-point.stats.http-post-response-messages-received-error</li>
        </ul>
      </li>
      <li>Replication:<ul><li>replication.message-vpns.message-vpn.remote-bridge.connection-state</li></ul></li>
      <li>Queues:<ul><li>queue.info.current-spool-usage-in-mb</li><li>queue.info.quota</li><li>queue.info.event.event-thresholds.set-percentage</li><li>event-thresholds-name:spool-usage</li></ul></li>
    </ul>
  </body>
</html>
