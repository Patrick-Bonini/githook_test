<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.ContentProductLink,SAP.SapHideFromOutput">
  <head>
    </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Configuring Group Management</h1>
    <p>If you have <a href="cloud-sso.htm" class="link-internal">SSO</a> enabled, you can configure user groups and assign roles to the group. After you create user groups, you map claim values provided by your identity provider (IdP) with your user groups in <MadCap:variable name="Product-Names.cloud_product_short"/>. Users are then automatically added to groups when they log in based on the claim values received from the identity provider. If a user's claim values don't match any mapped claim values, the user can be denied access or added to a default group that you specify.</p>
    <p><MadCap:variable name="Product-Names.cloud_product_short"/> also lets you enable just-in-time provisioning, which lets you onboard new <MadCap:variable name="Product-Names.cloud_product_short"/> users without inviting them manually and is required to  <a href="configure-oauth-for-broker-services.htm" target="_blank" class="link-internal">configure SSO for event broker services.</a></p>
    <p>You can set up user groups by performing these tasks:</p>
    <ul>
      <li>
        <MadCap:xref href="#Creating_User_Groups">Creating User Groups</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Group_Claim_Mapping">Mapping Claims to User Groups</MadCap:xref>
      </li>
    </ul>
    <h2>Prerequisites</h2>
    <p>Before you enable role management for your <MadCap:variable name="Product-Names.cloud_product_short"/> account, you need to perform these tasks:</p>
    <ul>
      <li>
        <a href="selfserve-cloud-sso.htm" class="link-internal">Enable SSO for <MadCap:variable name="Product-Names.cloud_product_short"/></a>
      </li>
      <li>Configure your IdP  to provide claim values that you can map to user groups. For more information, see, <MadCap:xref href="setup-claims-with-your-idp.htm">Configuring an OpenID Connect Identity Provider </MadCap:xref></li>
    </ul>
    <h2><a name="Creating_User_Groups"/>Creating User Groups</h2>
    <p>You can create as many user groups as you need to represent teams or job functions within your organization.</p>
    <ol>
      <li>
        <MadCap:snippetBlock src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/>
      </li>
      <li>On the navigation bar, click <b>User &amp; Account</b><img src="../Resources/Images/Cloud/reusable-icons/useraccount_green_navbar.png" class="img.img-inline" alt=" "/> and then select <b>Account Details</b>.</li>
      <li>On the <b>Account Details</b> page, select the <b>User Management</b> tab.</li>
      <li>Click <b>User Groups</b>.  This option is available only if SSO is enabled for the account.</li>
      <li>
        <p>Click <b>Create Group</b>.</p>
        <p>
          <img src="../Resources/Images/Cloud/user-group-create.png" class="img-border" alt="Screenshot showing the settings described in the surrounding text."/>
        </p>
      </li>
      <li>Enter a <b>User Group Name</b>.</li>
      <li>Select one or more <b>Roles</b> to assign to all members of the user group.</li>
      <li>(Optional) Enter a <b>Description</b> for the user group.</li>
      <li>Click <b>Create</b>.</li>
    </ol>
    <h2><a name="Group_Claim_Mapping"/>Managing User Groups</h2>
    <p>After you create user groups, you can map claims from your IdP to the groups.</p>
    <p>You can also edit and delete claim mappings, enable just-in-time provisioning and set a default user group.</p>
    <p>To map claims to and update group management settings, perform these steps:</p>
    <ol>
      <li>On the navigation bar, click <b>User Account</b> <img src="../Resources/Images/Cloud/reusable-icons/useraccount_green_navbar.png" class="img.img-inline" alt=" "/> and then select <b>Account Details</b>.</li>
      <li>On the <b>Account Details</b> page, select the <b>User Management</b> tab.</li>
      <li>Click <b>User Groups</b>. This option is available only if SSO is enabled for the account.</li>
      <li>Click <b>Group Management</b>.</li>
      <li>In the <b>Group, Role Identifier or Claim</b> field, add the claim name or key that provides the claim values that you want to map to roles.  You can use any claim that can be returned by your IdP. The "groups" claim is commonly used for this purpose.<p><div class="thumbnail-container"><img class="solacethumbnail" src="../Resources/Images/Cloud/user-group-management.png" alt="Screenshot showing the settings described in the surrounding text."/></div></p></li>
      <li>Perform the following steps for each new claim that you want to map to a user group:<ol><li>Click <b>Add Mapping</b>.</li><li>In the <b>Claim Mapping</b> table, add a <b>Claim Value</b> that you expect to receive from the identity provider. Your claim value can be a user email or a group where multiple users can be assigned the same value.</li><li><p>Select one or more <b>User Groups</b> to map to the claim value to.</p><p><div class="thumbnail-container"><img class="solacethumbnail" src="../Resources/Images/Cloud/user-group-claim-mapping.png" alt="Screenshot showing the settings described in the surrounding text."/></div></p></li><li> Click <b>Add</b>.</li></ol></li>
      <li>(Optional) Select <b>Enable Just-In-Time provisioning</b> to allow users who are able to authenticate with the identity provider to log in to <MadCap:variable name="Product-Names.cloud_product_short"/> and be added to a group without being manually invited first.</li>
      <li>(Optional) Select <b>Customize Default User Group</b> and select a user group from the  <b>Default User Group</b> drop-down list. When selected, if no defined claim mappings match the user claim value, the user is added to the specified group. When not selected, if no claim value for the user is mapped to a user group, the user is denied access to <MadCap:variable name="Product-Names.cloud_product_short"/>.</li>
      <li>Click <b>Test Access</b> &gt; <b>Run Test</b>. to test the updates to ensure that your administrator account is allowed access with the new settings. <p>A message confirms whether you will still have administrator privileges on the account after the settings are applied. If you will lose administrator access, update the settings before continuing.</p></li>
      <li>Click <b>Save</b>.</li>
    </ol>
    <h2><a name="disabling"/>Disabling Group Management </h2>
    <p>To disable group management, perform these steps:</p>
    <ol>
      <li>On the navigation bar, click <b>User &amp; Account</b><img src="../Resources/Images/Cloud/reusable-icons/useraccount_green_navbar.png" class="img.img-inline" alt=" "/> and then select <b>Account Details</b>.</li>
      <li>On the <b>Account Details</b> page, select the <b>User Management</b> tab.</li>
      <li>Click <b>User Groups</b>.</li>
      <li>Click <b>Group Management</b>.</li>
      <li>On the <b>Group Management</b> page, click <b>Disable</b>.</li>
      <li>In the dialog box that appears, click <b>Disable</b>.</li>
    </ol>
    <p>When group management is disabled, users are not dynamically added to user groups. All existing users  keep their currently assigned roles.</p>
  </body>
</html>
