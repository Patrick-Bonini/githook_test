<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1><MadCap:concept term="Cloud"/>Using Wide Area Network Optimization for <MadCap:variable name="Product-Names.broker_cloud_short_title"/>s in Kubernetes Clusters</h1>
    <p>Wide area network (WAN) optimization, sometimes referred to as WAN tuning, is the optimization of network performance to increase data transfer speeds in a WAN. You can use WAN optimization to increase the messaging performance between Kubernetes-based <MadCap:variable name="Product-Names.broker_cloud_short"/>s that are dispersed over different geographic locations. The distance between the <MadCap:variable name="Product-Names.broker_cloud_short"/>s could be as close as two different data centers in the same city, or as distant as data centers on different continents. </p>
    <p>To perform WAN optimization for your Kubernetes-based <MadCap:variable name="Product-Names.broker_cloud_short"/>s, <MadCap:variable name="Variables.CompanyName"/> deploys a DaemonSet alongside the <MadCap:variable name="Product-Names.cloud_agent_short"/>. The DaemonSet configures the TCP window size for each node's kernel to be larger than normal; it does this by increasing the maximum TCP connection memory size in the kernel settings. <MadCap:conditionalText MadCap:conditions="Default.HideFromAllOutput">The DaemonSet does this by increasing the maximum TCP connections memory size in the kernel settings. </MadCap:conditionalText>A larger TCP window size allows the <MadCap:variable name="Product-Names.broker_cloud_short"/>s to send larger amounts of data without waiting for acknowledgments from the receiving <MadCap:variable name="Product-Names.broker_cloud_short"/>.</p>
    <p> To perform the required configurations to the TCP window size, the DaemonSet requires specific permissions and configuration requirements. You need to be aware of these permissions and configuration requirements, as they may affect your security policies. These mandatory permissions and configuration requirements include:</p>
    <ul>
      <li>
        <p>running in privileged mode—The DaemonSet requires privileged mode to change kernel configurations.</p>
      </li>
      <li>
        <p>setting the <code>hostNetwork</code> setting to <code>true</code>—Setting the <code>hostnetwork</code> to <code>true</code>, allows the DaemonSet pod to see TCP settings that are not namespaced.</p>
      </li>
      <li>
        <p>setting the scheduling in the <MadCap:variable name="Product-Names.broker_cloud_short"/> nodes only—This ensures that only the primary and backup nodes have their TCP connection memory settings increased.</p>
      </li>
      <li>
        <p>configuring the nodes before the <MadCap:variable name="Product-Names.broker_cloud_short"/> establishes connections—The memory size of the TCP connection is determined during creation and can't be changed later.</p>
      </li>
    </ul>
    <p>To start using WAN optimization for your <MadCap:variable name="Product-Names.cloud_product_short"/> deployment, <a href="../get-support.htm" target="_blank" class="link-internal">contact <MadCap:variable name="Variables.CompanyName"/></a>.</p>
  </body>
</html>
