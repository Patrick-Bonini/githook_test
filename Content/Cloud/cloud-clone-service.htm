<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.ContentProductLink" MadCap:searchable="True">
  <head>
    </head>
  <body>
    <h1 MadCap:conditions="Default.ContentProductLink"><MadCap:concept term="Cloud"/>Cloning an <MadCap:variable name="Product-Names.broker_cloud_short_title"/></h1>
    <p>You can clone an <MadCap:variable name="Product-Names.broker_cloud_short"/> using <MadCap:variable name="Product-Names.cluster_mgr"/>. Cloning an <MadCap:variable name="Product-Names.broker_cloud_short"/> allows you to create copies of existing <MadCap:variable name="Product-Names.broker_cloud_short"/>s, including their configurations. The copy includes most of the <MadCap:variable name="Product-Names.broker_cloud_short"/> configurations, including clients, queues, connectors, access control, and caches.  For a list of items that aren't cloned, see the <MadCap:xref href="#Consider">Considerations for Cloning an [%=Product-Names.broker_cloud_short_title%] Using the [%=Product-Names.console_ui_short%]</MadCap:xref>. </p>
    <p>You can combine cloning with <a href="configure-hostnames.htm" target="_blank" class="link-internal">custom hostnames</a> to connect your applications to the cloned <MadCap:variable name="Product-Names.broker_cloud_short"/>. This prevents the need to reconfigure the connectivity of the applications. Using custom hostnames allows you to migrate your <MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput">VM or</MadCap:conditionalText> Kubernetes-based <MadCap:variable name="Product-Names.broker_cloud_short"/>s quickly, without downtime. You perform all these functions from the <MadCap:variable name="Product-Names.console_ui_short"/>. See <MadCap:xref href="configure-hostnames.htm" target="_blank">Configuring Custom Hostnames for an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref> for more information.</p>
    <h2>Use Cases</h2>
    <p>Cloning <MadCap:variable name="Product-Names.broker_cloud_short"/> saves you time that would otherwise be spent configuring new services. Below are some sample use cases where cloning would prove valuable:</p>
    <dl>
      <dt>Moving to a New Region or Cloud Provider</dt>
      <dd>
        <p>You can use cloning to copy <MadCap:variable name="Product-Names.broker_cloud_short"/>s to a <a href="ght_regions.htm" target="_blank" class="link-internal">new region</a>. You may do this to keep the physical distance between your <MadCap:variable name="Product-Names.broker_cloud_short"/>s and applications to a minimum, keeping latency low.  Cloning is also an efficient way to migrate your <MadCap:variable name="Product-Names.broker_cloud_short"/> to a new cloud provider. Maybe you want to change cloud providers to meet your evolving business needs, or to expand the <MadCap:variable name="Product-Names.broker_cloud_short"/>s in your <a href="Event-Mesh/about_event_meshes.htm" target="_blank" class="link-internal">event mesh</a> to providers to increase resiliency. Cloning provides a simple method of achieving this by moving your already configured <MadCap:variable name="Product-Names.broker_cloud_short"/>s. </p>
      </dd>
    </dl>
    <dl>
      <dt>Deploying or Expanding an Event Mesh</dt>
      <dd>
        <p>Cloning <MadCap:variable name="Product-Names.broker_cloud_short"/>s can speed up the deployment of your <a href="Event-Mesh/about_event_meshes.htm" target="_blank" class="link-internal">event mesh</a>. You can create a single <MadCap:variable name="Product-Names.broker_cloud_short"/> and configure it as a starting point to meet your event mesh requirements. Once this basic <MadCap:variable name="Product-Names.broker_cloud_short"/> is configured, you can clone it, using it as the template for other <MadCap:variable name="Product-Names.broker_cloud_short"/>s the event mesh. If you are concerned with disaster recovery, you can clone <MadCap:variable name="Product-Names.broker_cloud_short"/>s to <a href="ght_regions.htm" target="_blank" class="link-internal">new regions</a> to increase the resiliency of your event mesh. </p>
      </dd>
    </dl>
    <dl>
      <dt MadCap:conditions="SAP.SapHideFromOutput">Migrating a VM-based <MadCap:variable name="Product-Names.broker_cloud_short_title"/> to Kubernetes</dt>
      <dd>
        <p MadCap:conditions="SAP.SapHideFromOutput">You can clone <MadCap:variable name="Product-Names.broker_cloud_short"/>s using the <MadCap:variable name="Product-Names.console_ui_short"/> as part of the process of migrating your VM-based <MadCap:variable name="Product-Names.broker_cloud_short"/>s to Kubernetes. See <MadCap:xref href="VM-Migration/cloud-vmmig-lp.htm" target="_blank">Migrating VM-Based [%=Product-Names.broker_cloud_short_title%]s</MadCap:xref>. The source VM-based <MadCap:variable name="Product-Names.broker_cloud_short"/> being cloned must be version 10.0.</p>
      </dd>
    </dl>
    <h2><a name="Consider"/>Considerations for Cloning an <MadCap:variable name="Product-Names.broker_cloud_short_title"/></h2>
    <p>Consider the following information when using the <MadCap:variable name="Product-Names.console_ui_short"/> to clone an <MadCap:variable name="Product-Names.broker_cloud_short"/>:</p>
    <ul>
      <li>You can only clone <MadCap:variable name="Product-Names.broker_cloud_short"/>s that are version 10.0 or greater. If the <MadCap:variable name="Product-Names.broker_cloud_short"/> you want to clone is not 10.0 or greater, you must upgrade it before cloning. See <MadCap:xref href="upgrade-event-broker.htm" target="_blank">Upgrading [%=Product-Names.broker_cloud_short_title%]s in [%=Product-Names.cloud_product_titlecase%]</MadCap:xref>.</li>
      <li>You must have the <MadCap:variable name="Product-Names.cm_editor"/> or Administrator role. For more information, see <MadCap:xref href="cloud-user-management.htm#Roles" target="_blank">Roles and Permissions</MadCap:xref>.</li>
      <li>Before cloning <MadCap:variable name="Product-Names.broker_cloud_short"/>s, we recommend that you confirm that  the Kubernetes-based region (datacenter) has the service classes that you require. </li>
      <li MadCap:conditions="SAP.SapHideFromOutput"> Your account must also have enough available services to create new <MadCap:variable name="Product-Names.broker_cloud_short"/>s. The number of services that you can create in your account are based on your <i>service limits</i>. If you require more services or have reached your service limits, see <MadCap:xref href="ght_capacity_increase.htm">Increasing Your Capacity or Number of [%=Product-Names.broker_cloud_short_title%]s</MadCap:xref>.</li>
      <li>You can only create a clone <MadCap:variable name="Product-Names.broker_cloud_short"/> with the same service class and version as the source <MadCap:variable name="Product-Names.broker_cloud_short"/>. To upscale or upgrade an <MadCap:variable name="Product-Names.broker_cloud_short"/>, see <MadCap:xref href="scaling_services.htm" target="_blank">Upscaling an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref> and <MadCap:xref href="upgrade-event-broker.htm">Upgrading [%=Product-Names.broker_cloud_short_title%]s in [%=Product-Names.cloud_product_titlecase%]</MadCap:xref>.</li>
      <li>Cloning copies any additional spool size you have configured for the source <MadCap:variable name="Product-Names.broker_cloud_short"/>. You must ensure you have enough remaining GB in your message spool expansion to clone the <MadCap:variable name="Product-Names.broker_cloud_short"/>. For more information, see <a href="Configure-Message-Spools.htm#consider-expand-public" target="_blank" alt="Link to configuring message spool sizes" class="link-internal">Configuring Message Spool Sizes</a><MadCap:conditionalText MadCap:conditions="SAP.SapHideFromOutput"> and <MadCap:xref href="Event-Mesh/spool-subscription.htm" target="_blank" alt="Link to message spool exapansion subscription usage topic">Message Spool Expansion Subscription Usage</MadCap:xref></MadCap:conditionalText>.</li>
      <li>
        <p>During the clone process, the following <MadCap:variable name="Product-Names.broker_cloud_short"/>s configurations are not cloned:
        <ul><li>Bridge configuration<MadCap:conditionalText MadCap:conditions="Default.HideFromAllOutput"> (THIS NEEDS MORE INFO)</MadCap:conditionalText></li><li>Event mesh configuration (Dynamic Message Routing (DMR) configuration)</li><li>Distributed tracing configuration</li><li MadCap:conditions="SAP.SapHideFromOutput">Single sign-on (SSO) configuration (OAuth profiles)</li><li MadCap:conditions="SAP.SapHideFromOutput"><MadCap:variable name="Product-Names.broker_cloud_short_intitalcap"/> SSO (for management access)</li><li>Any client certificates other than those used for REST delivery points (RDPs)</li><li>Domain and Client Certificate Authorities (CA). You can choose to clone them by <a href="#CloneCerts" class="link-internal">enabling the option to do so on the Create Service: Clone page</a>. </li></ul></p>
      </li>
      <li>
        <p>Cloning enables the same ports and port numbers  from the Source service. You  can change the connection endpoints that are enabled or change the ports in the cloned service or edit them after. For more information about the port details, see <MadCap:xref href="create-service.htm#port-configuration-details">Details for Port Configuration</MadCap:xref>. </p>
        <p class="Note">Port numbers are not cloned if you are using NodePort. The same ports will be enabled or disabled, but new numbers will be generated after service creation.
				</p>
      </li>
      <li>Cloning does not copy over any messages from the source <MadCap:variable name="Product-Names.broker_cloud_short"/>.
				</li>
      <li>Cloning an <MadCap:variable name="Product-Names.broker_cloud_short"/> with <a href="ght_service_deletion_protection.htm" target="_blank" class="link-internal">deletion protection enabled</a> creates a new <MadCap:variable name="Product-Names.broker_cloud_short"/> that also has deletion protection enabled. If creation of the new <MadCap:variable name="Product-Names.broker_cloud_short"/> fails, the deletion protection is disabled, allowing you to delete it. </li>
      <li>
        <p MadCap:conditions="SAP.SapHideFromOutput,Default.HideFromAllOutput"> If you have a custom domain configured for your event broker services, the custom TLS certificate must be installed on both <MadCap:variable name="Product-Names.broker_cloud_short"/>s. <MadCap:conditionalText MadCap:conditions="Default.NotForPDF"><a href="../get-support.htm" target="_blank" class="link-internal">Contact <MadCap:variable name="Variables.CompanyName"/></a></MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="Default.OnlyForPDF">Contact <MadCap:variable name="Variables.CompanyName"/></MadCap:conditionalText> for more information.</p>
      </li>
      <li MadCap:conditions="Default.HideFromAllOutput"><a href="ght_service_deletion_protection.htm" target="_blank" class="link-internal">Deletion protection</a> is disabled if the cloning process fails.	</li>
    </ul>
    <h2><a name="cloning_a_service"/>Cloning an <MadCap:variable name="Product-Names.broker_cloud_short_title"/></h2>
    <ol>
      <li><MadCap:snippetText src="../Resources/Snippets/Cloud/Task_UI_Snippets/login_console.flsnp"/><![CDATA[
               ]]></li>
      <li>Select <MadCap:variable name="Product-Names.cluster_mgr" style="font-weight: bold;"/><img src="../Resources/Images/Cloud/reusable-icons/navbar_cluster_manager.png" class="img.img-inline" alt=""/> on the navigation bar. </li>
      <li>Select the <MadCap:variable name="Product-Names.broker_cloud_short"/> you want to clone, click <b>Actions </b><img src="../Resources/Images/Cloud/reusable-icons/more_actions_ellipsis.png" class="img.img-inline" alt=""/> and select <b>Clone</b>.
           <p>The <b>Create Service: Clone Pre-Check</b> dialog opens.</p><p MadCap:conditions="SAP.SapHideFromOutput"><img class="img-border" src="../Resources/Images/Cloud/clone_pre_check_example.png" alt="Screenshot showing the settings described in the surrounding steps."/></p><p> The <b>Create Service: Clone Pre-Check</b> dialog includes a list of pre-check validations as well as any warning or errors. These items are related to the information and prerequisites listed in <MadCap:xref href="#Consider">Considerations for Cloning an [%=Product-Names.broker_cloud_short_title%]</MadCap:xref>.
            <ul><li>Pre-check validations passed—items that passed validation, shown for informational purposes</li><li>Warnings—items that can't or won't be cloned, shown for informational purposes only</li><li>Errors—items preventing the clone process from continuing. Errors indicate the issue and actions you can take to remedy them</li></ul></p></li>
      <li>Click <b>Continue</b>. 
				<p>The <b>Create Service: Clone</b> page opens. </p><p><div class="thumbnail-container"><img class="solacethumbnail" src="../Resources/Images/Cloud/Clone_Create_Service.png" alt="Screenshot showing the settings described in the surrounding steps."/></div></p><p>Most of the fields on the <b>Create Service: Clone</b> page populate with information from the source <MadCap:variable name="Product-Names.broker_cloud_short"/>. You can change some of the fields, including: </p><ul><li><b>Service Name</b>—The default value is the same name as the source <MadCap:variable name="Product-Names.broker_cloud_short"/> appended with '- Clone'. You can optionally enter a new name for the clone <MadCap:variable name="Product-Names.broker_cloud_short"/>.</li><li><b>Cloud</b>—The default value is the same cloud provider as the source <MadCap:variable name="Product-Names.broker_cloud_short"/>. You can use the field to choose a different cloud provider.</li><li><b>Region</b>—The default value is the same region as the source <MadCap:variable name="Product-Names.broker_cloud_short"/>. You can use the field to choose a different region.</li></ul><p class="Note" MadCap:conditions="SAP.SapHideFromOutput">If you are cloning a VM-based <MadCap:variable name="Product-Names.broker_cloud_short"/> as part of a migrating to Kubernetes, the <b>Cloud</b> and <b>Region</b> fields don't populate with the data from the source <MadCap:variable name="Product-Names.broker_cloud_short"/>. You must complete these fields as part of the cloning process. </p><p>Other fields on the <b>Create Service: Clone</b> page can not be changed. These include the <b>Broker Release</b>, <b>Broker Version</b>, and <b>Service Type</b> fields. </p></li>
      <li>(Optional) Click <b>Advanced Connection Options</b> to see the configuration of the connectivity options for the cloned <MadCap:variable name="Product-Names.broker_cloud_short"/>, including:<br/><ul><li><b>Message VPN Name</b></li><li><b>Cluster Name</b></li></ul></li>
      <li>(Optional) Click <b>Port Configuration</b> to change the connection endpoints. For more information, see <MadCap:xref href="create-service.htm#Configure-Custom-Ports">Configuring Client and Management Ports</MadCap:xref>. </li>
      <li><a name="CloneCerts"/>(Optional) Under <b>Clone Options</b>, select the <b>Certificate Authorities</b> check box if you want to copy the client and domain CA certificates from the source <MadCap:variable name="Product-Names.broker_cloud_short"/>. See <MadCap:xref href="server_certs.htm">Configure Certificates for Server and Client Authentication</MadCap:xref> for more information. </li>
      <li>Click <b>Create Service</b>. </li>
    </ol>
    <p>Cloning the source <MadCap:variable name="Product-Names.broker_cloud_short"/> takes a few minutes. When cloning is complete, your new <MadCap:variable name="Product-Names.broker_cloud_short"/> starts. You can view your created service in <MadCap:variable name="Product-Names.cluster_mgr"/> on the <b>Services</b> page. See <MadCap:xref href="cloud-configure-messaging-services.htm">Viewing and Configuring [%=Product-Names.broker_cloud_short_title%]s</MadCap:xref>.</p>
  </body>
</html>
