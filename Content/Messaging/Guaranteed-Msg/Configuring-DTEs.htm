<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Configuring Topic Endpoints</h1>
    <p>To provision a durable topic endpoint in a given Message VPN, enter the following CONFIG commands:</p>
    <pre class="Code">solace(configure)# message-spool message-vpn &lt;vpn-name&gt;
solace(configure/message-spool)# create topic-endpoint &lt;name&gt;</pre>
    <p>To edit the properties of an existing, durable topic endpoint on a given Message VPN, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure)# message-spool message-vpn &lt;vpn-name&gt;
solace(configure/message-spool)# topic-endpoint &lt;name&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;name&gt;</code> is a topic endpoint name of up to 200 characters (the only invalid characters are '&lt;&gt;*?&amp;;). Each topic endpoint name in a Message VPN must be unique. </p>
    <p>The no version of this command, <code>no topic-endpoint &lt;name&gt;</code>, deletes the specified durable topic endpoint from the Message VPN. However, the topic endpoint cannot be deleted until it is shut down, which disables client access to the topic endpoint. Refer to <MadCap:xref href="#Enabling3">Enabling/Disabling Clients from Publishing to/Consuming from Topic Endpoints</MadCap:xref> for more information.</p>
    <p class="Note">
            The name for a temporary topic endpoint can be a maximum of 250 characters. A temporary topic endpoint differs from a durable topic endpoint provisioned through the Solace CLI or SolAdmin in that it is dynamically provisioned by a client application and can only exist as long as the client is connected.
        </p>
    <p class="Note">The topic subscription that a topic endpoint will spool messages for is not specified when a topic endpoint is provisioned; it is specified by a client when that client requests to bind a consumer flow to the topic endpoint (for information, refer to <MadCap:xref MadCap:unresolvedLink="import-link:receiving_guaranteed_messages_2343850064_57579" href="../../API/API-Developer-Guide/Creating-Flows.htm">Creating Flows</MadCap:xref>).</p>
    <h2 class="with-rule"><a name="Configure_Access_DTE"/>Configuring Access Types</h2>
    <p>To configure the client access type for durable topic endpoints on the Solace PubSub+ event broker on a per-topic-endpoint basis, enter the following CONFIG command.</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# access-type {exclusive | non-exclusive}</pre>
    <p><u>Where</u>:</p>
    <p><code>exclusive</code> specifies that only one client can bind to and be serviced by the topic endpoint; if other consumers attempt to bind, they will be rejected.</p>
    <p><code>non-exclusive</code> specifies that all bound flows are able to receive messages, and when multiple flows are bound to a non-exclusive topic endpoint, they receive messages in a round-robin fashion. </p>
    <p>The no version of this command, <code>no access-type</code>, reverts the setting back to the default (exclusive).</p>
    <p class="Note">The client access type cannot be changed until client access to the durable topic endpoint is shut down (refer to <MadCap:xref href="#Enabling3">Enabling/Disabling Clients from Publishing to/Consuming from Topic Endpoints</MadCap:xref>).
        </p>
    <h2 class="with-rule"><a name="Configure_Max_Bind"/>Configuring Max Number of Flows That May Bind</h2>
    <p>
		To configure the maximum number of flows that can bind to a non-exclusive durable topic endpoint on the Solace PubSub+ event broker on a per-topic-endpoint basis, enter the following CONFIG command.</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# max-bind-count &lt;value&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;value&gt;</code> is an integer value specifying the maximum number of flows that can bind to a non-exclusive durable topic endpoint. If the topic endpoint's access type has been set to exclusive, the value of <code>max-bind-count</code> is considered to be 1 regardless of the set value. The valid range is 0 to 10,000. The default value is 1.</p>
    <p>The no version of this command, <code>no max-bind-count</code>, resets the maximum number of flows that can bind to a durable topic endpoint back to the default.
</p>
    <p class="Note">A single client can create multiple flows, and flows may originate from one or more clients.
        </p>
    <h2 class="with-rule"><a name="Configur22"/>Configuring Max Number of Delivered Unacked Messages</h2>
    <p>For a given topic endpoint you can configure the maximum number of Guaranteed messages that can be delivered to a consuming client through a flow but remain unacknowledged by that client. That is, how many outstanding unreturned message acknowledgments are acceptable per flow bound to the topic endpoint.</p>
    <p>After this maximum number of delivered but unacknowledged messages is exceeded, the Solace PubSub+ event broker stops delivering messages to the client on the flow until the client acknowledges messages that are already delivered.</p>
    <p>To configure a limit for maximum outstanding number of delivered but unacknowledged messages per flow, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# max-delivered-unacked-msgs-per-flow &lt;max&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;max&gt;</code> is an integer value specifying the maximum number of messages that can be delivered to a client on a subscriber flow but remain unacknowledged by the client. The valid range is 1 to the maximum value supported by the event broker. The maximum value depends on the type of event broker used (for example, Solace PubSub+ 3530 or 3560). The default value is 10000. If the maximum number of delivered but unacknowledged messages amongst all clients is reached, the Solace PubSub+ event broker will stop delivering messages to all clients until some clients return acknowledgments back to the event broker.</p>
    <p>The no version of this command, <code>no max-delivered-unacked-msgs-per-flow</code>, resets the maximum number unacknowledged messages back to the default value.</p>
    <div class="Note">
      <p>Modifying <code>max-delivered-unacked-msgs-per-flow</code> may negatively impact performance if it is set lower than the transport window size used by consuming clients.</p>
      <p>Provided the application is using at least Version 10.0.2 of the JCSMP or JMS APIs, or at least Version 7.2.5 of the C, .NET, or Java RTO APIs, the API learns about the configured <code>max-delivered-unacked-msgs-per-flow</code> at bind time and adjusts its ACK threshold accordingly for best performance. If the<code> max-delivered-unacked-msgs-per-flow</code> is changed while clients are bound, the clients may need to be disconnected and allowed to reconnect to receive the new value.</p>
      <p>Older versions of the APIs do not adjust their ACK threshold based on the<code> max-delivered-unacked-msgs-per-flow</code> setting. If applications using older versions of the API bind to the topic endpoint, its <code>max-delivered-unacked-msgs-per-flow</code> must be set to a value greater than or equal to the transport window size used by the applications to ensure performance.</p>
    </div>
    <h2 class="with-rule"><a name="Configur23"/>Configuring Max Permitted Message Sizes</h2>
    <p>To configure the maximum message size allowed for the given topic endpoint, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# max-message-size &lt;size&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;size&gt;</code> is an integer value specifying the maximum message size (in bytes) permitted for the topic endpoint. The valid range is 0 to 30000000. For Solace PubSub+ 3230, the maximum message size (in bytes) permitted for the topic endpoint is lower. The valid range for a Solace PubSub+ 3230 is 0 to 10000000. The default value is 10000000.</p>
    <p>The no version of this command, <code>no max-message-size</code>, resets the permitted message size available for use by the topic endpoint back to its default value.</p>
    <h2 class="with-rule"><a name="Configur24"/>Configuring Max Permitted Redelivery Attempts</h2>
    <p>You can use the <code>max-redelivery</code> option to configure the maximum number of times the topic endpoint can attempt to redeliver a message to a client. If the number of redelivery attempts for a given message exceeds the <code>max-redelivery</code> value, the message is either discarded, or, if a Dead Message Queue (DMQ) has been created and is ready to accept messages, the message is removed and placed in the DMQ.</p>
    <p>To configure the maximum number of times a topic endpoint can attempt to redeliver a message to a client, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# max-redelivery &lt;count&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;count&gt;</code> is the maximum message redelivery attempts possible. The valid range is 0 to 255. 0 means try forever. The default is 0.</p>
    <p>The no version of this command, <code>no max-redelivery</code>, resets the max-redelivery value back to the default value.</p>
    <h2 class="with-rule"><a name="Configur3"/>Configuring a Message Redelivery Delay</h2>
    <p>When client applications are consuming messages from an event broker, they may occasionally encounter conditions where they are temporarily unable to process a message. In this scenario, the application may rollback the transaction to force a redelivery of a message.</p>
    <p>Redelivering the message immediately often does not help, as it does not allow sufficient time for the transient condition to be resolved. Configuring a message redelivery delay  can help in this scenario, by suspending message delivery to the client following a transaction rollback, until a configured redelivery delay time has passed. You can also configure a multiplier to allow for exponential back-off of redelivery attempts.</p>
    <p>When you configure a  message redelivery delay, it applies only when the broker attempts to redeliver a message to a client following an application-initiated local transaction rollback. Other types of redelivery will occur without a delay.</p>
    <div class="Caution">
      <p>Configuring a message redelivery delay is a Controlled Availability (CA) feature. Please <a href="../../get-support.htm" class="link-internal">contact Solace</a> to find out if this feature is supported for your use case.</p>
    </div>
    <p>To configure a message redelivery delay, enter the following command:</p>
    <pre class="Code" xml:space="preserve">solace(configure/message-spool/topic-endpoint)# redelivery-delay</pre>
    <p>The CLI is now at a level where you can configure the initial interval, maximum interval, and delay interval multiplier the topic endpoint uses when it attempts to redeliver a message to a client following an application-initiated local transaction rollback.</p>
    <ul>
      <li>
        <p>To configure the initial interval, enter the following command:</p>
        <pre class="Code" xml:space="preserve">solace(.../message-spool/topic-endpoint/redelivery-delay)# initial-interval &lt;value&gt;</pre>
        <p><u>Where</u>:</p>
        <p><code>&lt;value&gt;</code> is an integer value specifying the delay between the first two delivery attempts, in milliseconds. The valid range of values is 1 to 3600000. The default  is 1000.</p>
        <p>The no form of this command, <code>no inital-interval</code>, resets the value to the default. </p>
      </li>
      <li>
        <p>To configure the maximum interval, enter the following command:</p>
        <pre class="Code" xml:space="preserve">solace(.../message-spool/topic-endpoint/redelivery-delay)# max-interval &lt;value&gt;</pre>
        <p><u>Where</u>:</p>
        <p><code>&lt;value&gt;</code> is an integer value specifying the maximum delay to be used between any two redelivery attempts, in milliseconds. The valid range of values is 1 to 10800000. The default is 64000. </p>
        <p>The no form of this command, <code>no max-interval</code>, resets the value to the default. </p>
      </li>
      <li>
        <p>To configure the delay interval multiplier, enter the following command:</p>
        <pre class="Code" xml:space="preserve">solace(.../message-spool/topic-endpoint/redelivery-delay)# multiplier &lt;value&gt;</pre>
        <p><u>Where</u>:</p>
        <p><code>&lt;value&gt;</code> is a floating point value specifying the amount that each delay interval is multiplied by after each failed delivery attempt. The valid range of values is 1.00 to 5.00. The default is 2.00.</p>
        <p>The no form of this command, <code>no multiplier</code>, resets the value to the default. </p>
      </li>
    </ul>
    <p>To enable the message redelivery delay configuration, enter the following command:</p>
    <pre xml:space="preserve">solace(.../message-spool/topic-endpoint/redelivery-delay)# no shutdown</pre>
    <p>To disable the message redelivery delay configuration, enter the following command:</p>
    <pre xml:space="preserve">solace(.../message-spool/topic-endpoint/redelivery-delay)# shutdown</pre>
    <h2 class="with-rule"><a name="Configur"/>Configuring Message Redelivery</h2>
    <p>By default, the maximum number of times a topic endpoint can attempt to redeliver a message to a client is controlled by the <code>max-redelivery</code> command. For more information, refer to <MadCap:xref href="#Configur24">Configuring Max Permitted Redelivery Attempts</MadCap:xref>. </p>
    <p>You can instead disable this functionality. When message redelivery is disabled, a given message will
           only be attempted to be delivered from the topic endpoint once.</p>
    <div class="Caution">
      <p>Disabling message redelivery is a Controlled Availability (CA) feature. Please <a href="../../get-support.htm" class="link-internal">contact Solace</a> to find out if this feature is supported for your use case.</p>
    </div>
    <p>To disable message redelivery attempts, enter the following CONFIG command:</p>
    <pre class="Code" xml:space="preserve">solace(configure/message-spool/topic-endpoint)# no redelivery</pre>
    <p>To enable message redelivery attempts, enter the following CONFIG command.</p>
    <pre class="Code" xml:space="preserve">solace(configure/message-spool/topic-endpoint)# redelivery</pre>
    <h2 class="with-rule"><a name="Config_Message_Delivery_Count"/>Configuring Message Delivery Count</h2>
    <p>You can use the <code>delivery-count</code> option to enable or disable the delivery count property for messages. When enabled, each message sent from the topic endpoint to a consumer contains a property indicating whether this is the 1<sup>st</sup>, 2<sup>nd</sup>, … or n<sup>th</sup> attempt to deliver the message to a consumer. By default, the delivery count is disabled.</p>
    <p>In the case of a redundancy (HA) failover, message counts greater than <code>1</code> are reset to <code>2</code>.</p>
    <div class="Caution">
      <p>Enabling the message delivery count is a Controlled Availability (CA) feature. Please <a href="../../get-support.htm" class="link-internal">contact Solace</a> to find out if this feature is supported for your use case.</p>
    </div>
    <p>To enable the delivery count for messages on the topic endpoint, enter the following CONFIG command:</p>
    <pre class="Code" xml:space="preserve">solace(configure/message-spool/topic-endpoint)# delivery-count</pre>
    <p>To disable the delivery count for messages, enter the following CONFIG command.</p>
    <pre class="Code" xml:space="preserve">solace(configure/message-spool/topic-endpoint)# no delivery-count</pre>
    <h2 class="with-rule"><a name="Configur2"/>Configuring Delayed Delivery</h2>
    <p>By default, messages published to topic endpoints are immediately published to connected consumers. There are many use cases in which published messages must not be delivered to consumers immediately, but  delivered only after a fixed delay. One example is a retry mechanism within a payment processing system. After receiving a customer order, you may want to implement a  delivery delay to retry credit card transactions when the processing of the transaction fails for any reason.  For more information, refer to <MadCap:xref href="Delayed-Delivery.htm">Delayed Delivery</MadCap:xref>.</p>
    <p>You can use the <code>delivery-delay</code> option to   configure a delivery delay for a topic endpoint, such that all messages destined to a topic endpoint are not eligible to be delivered for a fixed period of time.</p>
    <p class="Note">If you are currently using DMQs to implement a delivery delay, contact Solace Professional Services for guidance on migrating your implementation to use  the <code>delivery-delay</code> option instead.</p>
    <p>To configure a delivery delay on the topic endpoint,  enter the following CONFIG command:</p>
    <pre class="Code" xml:space="preserve">solace(configure/message-spool/topic-endpoint)# delivery-delay &lt;delay&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;delay&gt;</code> is the delay, in seconds, to apply to messages arriving on the topic endpoint before the messages are eligible for delivery. The valid range is 0 to 4294967295. The default is 0. </p>
    <p>The no version of this command, <code>no delivery-delay</code>,  resets the <code>delivery-delay</code> value back to the default.</p>
    <h2 class="with-rule"><a name="max-spool-usage"/>Configuring Max Spool Usage Values</h2>
    <p>To configure the maximum message spool usage for durable topic endpoints on the Solace PubSub+ event broker on a per-topic endpoint basis, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# max-spool-usage &lt;size&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;size&gt;</code> is an integer value specifying the maximum amount of message spool disk space permitted for the topic endpoint in MB.  Setting the value to 0 is not recommended for topic endpoints. </p>
    <p>The no version of this command, <code>no max-spool-usage</code>, resets the default.</p>
    <MadCap:snippetBlock src="../../Resources/Snippets/link-to-max-spool-values.flsnp"/>
    <h2 class="with-rule"><a name="Configur26"/>Configuring Permissions for Non-Owner Clients</h2>
    <p>To configure the permission levels for all clients other than the owner of the given durable topic endpoint, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# permission all {read-only | consume | modify-topic | delete}</pre>
    <p><u>Where</u>:</p>
    <p><code>read-only</code> provides clients with read-only access permission to messages spooled to the topic endpoint</p>
    <p><code>consume</code> provides clients with read-only permission and the ability to delete messages from the topic endpoint</p>
    <p><code>modify-topic</code> provides clients with consume permission and the ability to modify the topic or selector assigned to the topic endpoint </p>
    <p><code>delete</code> provides clients with modify-topic permission and the ability to either delete messages from the topic endpoint, or delete the topic endpoint altogether. Note that clients cannot delete a topic endpoint if it was created using the CLI or SEMP by a management user.</p>
    <p>The no version of this command, <code>no permission</code>, resets the permission levels for all clients other than the owner of the topic endpoint to none; that is, no access. A client access level of none is the default permission level.</p>
    <div class="Note">
      <ul>
        <li>Permission levels are ignored for client-usernames with Guaranteed Endpoint Permission Override enabled. (Refer to <MadCap:xref href="../../Security/Configuring-Client-Usernames.htm#Enabling-Endpoint-Permissions">Enabling Endpoint Permission Overrides</MadCap:xref>.)</li>
        <li>Client access to the durable message topic endpoint must first be disabled before configuring permissions. (Refer to <MadCap:xref href="#Enabling3">Enabling/Disabling Clients from Publishing to/Consuming from Topic Endpoints</MadCap:xref>.)</li>
      </ul>
    </div>
    <h2 class="with-rule"><a name="Configur27"/>Configuring Reject Low‑Priority Message Limits</h2>
    <p>To configure a reject-low-priority-msg-limit for a topic endpoint, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# reject-low-priority-msg-limit &lt;limit&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;limit&gt;</code> is the total number of low- and high‑priority messages spooled. When this value is exceed, the topic endpoint discards any further published low-priority messages, but spools published high-priority messages. Valid values are from 0 through 4294967295. If value of 0 is set, the topic endpoint only spools high-priority messages are spooled. The default value is 0. </p>
    <h2 class="with-rule"><a name="Configur28"/>Configuring Topic Endpoint Event Thresholds</h2>
    <p>To configure the thresholds that control when message spool-related events are generated for the given topic endpoint, enter the following  CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# event</pre>
    <p>The CLI is now at a configuration level from which you can configure the set and clear thresholds for various message spool events for the topic endpoint.</p>
    <p class="Note">For specific information on the available Message VPN-level message spool events that are generated for a topic endpoint and how to set the set and clear thresholds for generating those events, refer to <MadCap:xref MadCap:unresolvedLink="import-link:configuring_event_output_and_thresholds_3996511907_42502" href="../../Monitoring/Configuring-VPN-M-Spool-Event-Thresholds.htm#montoring_and_management_1462237600_255676">Topic Endpoint Event Thresholds</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="Configur29"/>Configuring Topic Endpoint Owners</h2>
    <p>The ownership of a topic endpoint is established in the following manner:</p>
    <ul>
      <li>If a client application dynamically provisions a topic endpoint through a Solace messaging API, the client username associated with the client is automatically given ownership of that topic endpoint.</li>
      <li>If a CLI user manually provisions a topic endpoint through the Solace CLI, no client username is automatically given ownership of that topic endpoint.</li>
      <li>Any CLI user with Read-Write or Admin access to the Message VPN that the topic endpoint belongs to has full permissions on the topic endpoint (that is, management has ownership).</li>
    </ul>
    <p>To give ownership of the given topic endpoint to any clients associated with a particular client username, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# owner &lt;owner&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;owner&gt;</code> is an existing client username account name.</p>
    <p>The no version of this command, <code>no owner</code>, resets the ownership of the topic endpoint back to the default of none.</p>
    <div class="Note">
      <ul>
        <li>Client access to the durable topic endpoint must first be disabled through before an owner can be assigned. (Refer to <MadCap:xref href="#Enabling3">Enabling/Disabling Clients from Publishing to/Consuming from Topic Endpoints</MadCap:xref>.)</li>
        <li>The topic endpoint owner has full unlimited permissions for the topic endpoint. That is, the owner can consume (read and delete received messages), delete, or modify topics spooled to the topic endpoint.</li>
      </ul>
    </div>
    <h2 class="with-rule"><a name="Configur30"/>Configuring Message Discard Handling</h2>
    <p>The reject-msg-to-sender-on-discard option configures how a durable topic endpoint should handle ingress messages discards that occur due to one or more of the following conditions:</p>
    <ul>
      <li>adding the published message will exceed the configured message quota for the topic endpoint</li>
      <li>the published message exceeds the maximum message size allowed for the topic endpoint</li>
      <li>the client published the message to a topic it has also subscribed to and has an active flow with "No Local Delivery"</li>
    </ul>
    <p>If published message is not spooled because of any of the conditions above, the following will occur:</p>
    <ul>
      <li>If the reject-msg-to-sender-on-discard option <b>is enabled</b> for the topic endpoint, the message is discarded, and a nack is returned to the sender. In this case, the message cannot be spooled to any other queue or topic endpoint (regardless of whether those endpoints have the reject-msg-to-sender-on-discard option enabled or disabled).</li>
      <div class="Note">
        <ul>
          <li>A nack is only sent to the client if the message was originally published with a non-persistent or persistent delivery mode. If the message was published with a Direct delivery mode, but was changed to non-persistent because of a topic match, and was then discarded, a nack is not returned to the sender.</li>
          <li>How to handle the nack is the responsibility of the publishing application—not Solace APIs. Solace APIs do not retransmit nacked messages.</li>
        </ul>
      </div>
      <li>If the reject-msg-to-sender-on-discard option <b>is not enabled</b> for the topic endpoint, the ingress message is "silently" discarded (that is, it discards the message but returns an acknowledgment to the sender). In this case, other endpoints can spool the message—if they do not encounter any of the conditions listed above.</li>
    </ul>
    <p>To enable the reject-msg-to-sender-on-discard option for a durable topic endpoint, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# reject-msg-to-sender-on-discard </pre>
    <p>The no version of this command, <code>no reject-msg-to-sender-on-discard</code>, disables the reject-msg-to-sender-on-discard option on a durable topic endpoint.</p>
    <div class="Note">
      <ul>
        <li>By default, the reject-msg-to-sender-on-discard option is not enabled for topic endpoints. </li>
        <li>The reject-msg-to-sender-on-discard option also affects the behavior of transacted sessions. If ‘acks’ are being returned to the sender, then the transacted session commit succeeds. If a nack is returned to the sender, then the commit fails. For more information, refer to <MadCap:xref MadCap:unresolvedLink="import-link:using_local_transactions_4171207135_99441" href="../../API/API-Developer-Guide/Using-Local-Transactions.htm">Using Local Transactions</MadCap:xref> for Solace APIs and <MadCap:xref MadCap:unresolvedLink="import-link:using_transacted_sessions_1389810721_56149" href="../../API/Solace-JMS-API/Using-Transacted-Sessions.htm">Using Transacted Sessions</MadCap:xref> for the JMS API.</li>
      </ul>
    </div>
    <h2 class="with-rule"><a name="Enabling3"/>Enabling/Disabling Clients from Publishing to/Consuming from Topic Endpoints</h2>
    <ul>
      <li>To prevent client access to the specified durable topic endpoint, enter the following CONFIG command:
			<pre class="Code">solace(configure/message-spool/topic-endpoint)# shutdown [ingress | egress | full]</pre></li>
      <li>To enable client access to the specified durable topic endpoint, enter the following CONFIG command:
			<pre class="Code">solace(configure/message-spool/topic-endpoint)# no shutdown [ingress | egress | full]</pre></li>
    </ul>
    <p><u>Where</u>:</p>
    <p><code>ingress</code> specifies disable messages from being added to the durable topic endpoint.</p>
    <p><code>egress</code> specifies disable clients from binding to the durable topic endpoint to consume messages from it.</p>
    <p><code>full</code> specifies disable messages from being added to the durable topic endpoint and disable clients from binding to the durable topic endpoint. This is the default value.</p>
    <h2 class="with-rule"><a name="Enabling4"/>Enabling/Disabling Propagating Consumer Acks to Replicated VPNs</h2>
    <p>By default, endpoints on an active Replication Message VPN propagate consumer acks that they received to the standby Replication Message VPN.</p>
    <ul>
      <li>To prevent the topic endpoint from propagating consumer acks to the standby Replication Message VPN, enter the following CONFIG command: 
			<pre class="Code">solace(configure/message-spool/topic-endpoint)# no consumer-ack-propagation</pre></li>
      <li>To allow the topic endpoint to propagate consumer acks to the standby Replication Message VPN, enter the following CONFIG command to allow it to do so: 
			<pre class="Code">solace(configure/message-spool/topic-endpoint)# consumer-ack-propagation</pre></li>
    </ul>
    <h2 class="with-rule"><a name="Enabling5"/>Enabling Rejection of Low‑Priority Messages</h2>
    <p>To protect against message congestion scenarios where such a large number of published messages are delivered to a topic endpoint that system performance decreases, you can enable the topic endpoint to discard low‑priority messages but continue to spool high‑priority published messages. The topic endpoint selectively discards low-priority messages only after the total number of low- and high‑priority messages spooled exceeds the value set for the reject low‑priority message limit (refer to<MadCap:xref href="#Configur27"> Configuring Reject Low‑Priority Message Limits</MadCap:xref>). By default, the reject low‑priority message feature is not enabled for endpoints.</p>
    <p class="Note">To avoid inadvertently discarding all low-priority messages, it is recommended that you change the default value of 0 for the reject low‑priority message limit before enabling the reject low‑priority message feature to something more appropriate for your network. </p>
    <p>To enable the reject low‑priority message feature for a topic endpoint, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# reject-low-priority-msg</pre>
    <p>The no version of this command, <code>no reject-low-priority-msg</code>, configures the durable topic endpoint to not perform reject low‑priority message limit checking on published messages (the default configuration).</p>
    <div class="Note">
      <ul>
        <li>When this feature is enabled, the reject-msg-to-sender-on-discard option (refer to <MadCap:xref href="#Configur30">Configuring Message Discard Handling</MadCap:xref>) must also be enabled for the topic endpoint so that session events are sent to the publishing clients whenever messages are not enqueued on the topic endpoint and are discarded.</li>
        <li>Client applications can use the Solace messaging APIs to assign message priorities through the Class of Service (COS) property.</li>
      </ul>
    </div>
    <h2 class="with-rule"><a name="Configur31"/>Configuring Max Message TTLs</h2>
    <p>You can  configure a Max Time to Live (TTL) value for a durable topic endpoint so that received messages are provided with expiration value to limit how long they can remain on that durable topic endpoint when a Max TTL is used. If a message is not consumed and its expiration time is reached, the message is discarded or is moved to a DMQ (if the publisher has flagged the message as DMQ-eligible).</p>
    <p>A Max TTL value is only applied to messages when the Respect TTL option is enabled for the endpoint. It is also possible for a message to have a publisher-supplied TTL, which indicates how long the publisher considers a message to be valid. This differs from Max TTL in that the publisher TTL expiration starts when a message is published and counts down as the message passes through the network. The Max TTL only applies when a message is on the endpoint. If a message has both a publisher-assigned TTL and an endpoint-assigned Max TTL, the Solace PubSub+ event broker will use the minimum of the two TTL values when the message is on the endpoint.
        </p>
    <p>To define a maximum TTL for the topic endpoint to apply to messages to be spooled, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# max-ttl &lt;ttl&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;ttl&gt;</code> is maximum number of seconds that messages can stay on the topic endpoint when it has respect-ttl enabled.</p>
    <p>The no version of this command, <code>no max-ttl</code>, sets the default Max TTL value 0 (disabled), which means that no expiry time is applied to any received messages spooled to that endpoint.</p>
    <div class="Note">
      <ul>
        <li>Any messages already on the queue endpoint when this parameter is configured or changed will not be impacted; those messages will continue to use the TTL assigned to them (if any) when they were spooled to the endpoint.</li>
        <li>A Max TTL cannot be set on DMQs.</li>
        <li>Using Max TTL increases the amount of state that needs to be maintained for each message stored in the endpoint and will affect the Guaranteed messaging performance.</li>
      </ul>
    </div>
    <h2 class="with-rule"><a name="Enforcin2"/>Enforcing Whether to Respect Message TTLs</h2>
    <p>You can configure a topic endpoint to either respect or ignore messages' Time‑to-Live (TTL) expiration values. This includes both the TTL value that can be set by publishing clients and the TTL value set on an endpoint through its configured Max TTL property.</p>
    <p>When a topic endpoint is configured to respect message TTLs, messages' TTL values are checked. If a message’s TTL is expired, it is either removed from the message spool and discarded, or, if the message is eligible for a DMQ, it is moved to a DMQ provisioned on the event broker. If a message does not have an assigned TTL, then it will never expire. Note that by default, the DMQ is set to ignore message TTL expiry times and cannot be changed.
</p>
    <p>When a topic endpoint is configured to ignore message TTLs, spooled messages are not removed, even if they have been spooled for an amount of time that exceeds their set TTL value.</p>
    <p>To configure a topic endpoint to respect message TTLs, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# respect-ttl</pre>
    <p>The no version of this command, <code>no respect-ttl</code>, configures a durable topic endpoint to ignore message TTL expiry times (the default configuration).</p>
    <p class="Note">
            If the topic endpoint’s respect-ttl option is enabled after messages with a TTL value have been spooled, those existing spooled messages are not removed—even if their TTL expiration value has been exceeded. Only ingress messages with TTL values that are received after the respect-ttl option is enabled can be removed because TTL violations.
        </p>
    <h2 class="with-rule"><a name="Enforcing-Priority"/>Enforcing Whether to Respect Message Priority Values</h2>
    <p>You can configure an endpoint to either respect or ignore messages' priority values.</p>
    <p>When an endpoint is configured to respect message priority, the priority field in all received messages is used to deliver the message in the appropriate order, in other words messages with a higher priority are sent before messages with a lower priority. </p>
    <p>The event broker recognizes ten levels of priority from 0 (lowest) to 9 (highest). If the priority field in the message is greater than 9, then the event broker treats it as priority 9. Received messages that do not have a priority field are treated as priority 4.</p>
    <p>When transitioning from priority respected to ignored, all messages  remain at their existing priorities. Although the queue does not respect priority values in new messages, priority values in existing messages are respected. Since new messages are treated as priority 9, when the queue is configured to ignore message priority, new messages may bypass messages that were received before the transition. </p>
    <p>You must fully shutdown an endpoint  before you can change whether it respects or ignores priority values.</p>
    <div class="Note">
      <p>Enforcing message priority increases the chance that duplicate messages will be delivered to a consuming client after it recovers from a connection failure.</p>
    </div>
    <p>To configure a topic endpoint to respect message priority values, enter the following CONFIG command:</p>
    <pre class="Code">solace(configure/message-spool/topic-endpoint)# respect-message-priority</pre>
    <p>The no version of this command, <code>no respect-message-priority</code>, configures a durable topic endpoint to ignore message priority values (the default configuration).</p>
  </body>
</html>
