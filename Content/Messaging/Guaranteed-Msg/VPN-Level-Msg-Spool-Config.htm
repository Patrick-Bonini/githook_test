<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Message VPN-Level Guaranteed Messaging Configuration</h1>
    <p>To configure Guaranteed Messaging-related parameters for a Message VPN, or to provision durable endpoints on a Message VPN, enter the following CONFIG command.</p>
    <p class="Code">solace(configure)# message-spool message-vpn &lt;vpn-name&gt;</p>
    <p>The CLI is now at the Message Spool VPN CONFIG command level, from which you can perform the following tasks:</p>
    <ul>
      <li>
        <MadCap:xref href="#configure-vpn-thresholds">Configuring Message VPN Event Thresholds</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#configure-max-flows">Configuring the Max Number of Flows</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#configure-max-endpoints">Configuring the Max Number of Endpoints</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#configure-number-transactions">Configuring the Max Number of Transactions</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#configure-transacted-sessions">Configuring the Max Number of Transacted Sessions</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#vpn-max-spool-usage">Configuring the Max Spool Usage</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#configure-sequenced-topics">Configuring Sequenced Topics</MadCap:xref>
      </li>
    </ul>
    <p>At this level you can also configure durable queue and topic endpoints, and set Dead Message Queues. </p>
    <ul>
      <li>
        <MadCap:xref href="Configuring-Queues.htm">Configuring Queues</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Configuring-DTEs.htm">Configuring Topic Endpoints</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Setting-Dead-Msg-Queues.htm">Configuring Dead Message Queues</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="configure-vpn-thresholds"/>Configuring Message VPN Event Thresholds</h2>
    <p>To configure the thresholds that control when message spool-related events are generated for the given Message VPN, enter the following CONFIG command:</p>
    <p class="Code">solace(configure/message-spool)# event</p>
    <p>The CLI is now at a level at which you can configure the set and clear thresholds for various message spool events for the Message VPN.</p>
    <p class="Note">For specific information on the available Message VPN-level message spool events and how to set the set and clear thresholds for generating those events, refer to refer to <MadCap:xref MadCap:unresolvedLink="import-link:configuring_event_output_and_thresholds_3996511907_56763" href="../../Monitoring/Configuring-VPN-M-Spool-Event-Thresholds.htm">Configuring VPN Message Spool Event Thresholds</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="configure-max-flows"/>Configuring the Max Number of Flows</h2>
    <p>You can configure the maximum number of egress and ingress flows that can be created on the given Message VPN.</p>
    <p>Egress flows are Guaranteed message client consumer flows, and ingress flows are Guaranteed message client publisher flows.</p>
    <ul>
      <li><a name="Configur2"/><b>Egress</b>: To configure the maximum number of egress flows that can be created on the given Message VPN, enter the following CONFIG command:
			<p class="Code">solace(configure/message-spool)# max-egress-flows &lt;value&gt;</p><p><u>Where</u>:</p><p><code>&lt;value&gt;</code>is an integer value specifying the maximum number of consumer flows. The valid range is 0 to 200000.</p><p>The <code>no</code> version of this command, <code>no max-egress-flows</code>, resets the value to the default.</p></li>
      <li><a name="Configur3"/><b>Ingress</b>: To configure the maximum number of ingress flows that can be created on the given Message VPN, enter the following CONFIG command:
			<p class="Code">solace(configure/message-spool)# max-ingress-flows &lt;value&gt;</p><p><u>Where</u>:</p><p><code>&lt;value&gt;</code> is an integer value specifying the maximum number of publisher flows. The valid range is 0 to 1000000.</p><p>The <code>no</code> version of this command, <code>no max-ingress-flows</code>, resets the value to the default.</p></li>
    </ul>
    <h2 class="with-rule"><a name="configure-max-endpoints"/>Configuring the Max Number of Endpoints</h2>
    <p>To configure the maximum number of queues and topic endpoints that can be created on the given Message VPN, enter the following CONFIG command:</p>
    <p class="Code">solace(configure/message-spool)# max-endpoints &lt;value&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;value&gt;</code> is an integer value specifying the maximum number of queues and topic endpoints. The valid range and default value depends on the type of event broker used.</p>
    <p>The no version of this command, <code>no max-endpoints</code>, resets the value to the default.</p>
    <h2 class="with-rule"><a name="configure-number-transactions"/>Configuring the Max Number of Transactions</h2>
    <p>To configure the total maximum number of simultaneous transactions (both local transactions and transactions within XA transaction branches) allowed in the given Message VPN, enter the following CONFIG command:</p>
    <p class="Code">solace(configure/message-spool)# max-transactions &lt;value&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;value&gt;</code> is an integer value specifying the maximum number of transactions allowed for the given Message VPN. The valid range and default value depends on the type of event broker used. </p>
    <p>The no version of this command, <code>no max-transactions</code>, resets the maximum number of transactions allowed for the specified Message VPN back to the default value.</p>
    <h2 class="with-rule"><a name="configure-transacted-sessions"/>Configuring the Max Number of Transacted Sessions</h2>
    <p>Transacted sessions enable client applications to group multiple Guaranteed message send and/or receive operations together in single, atomic units known as transactions. Each transacted session can support a single series of transactions.</p>
    <p>To configure the maximum number of simultaneous transacted sessions and/or XA Sessions allowed for the given Message VPN, enter the following CONFIG command:</p>
    <p class="Code">solace(configure/message-spool)# max-transacted-sessions &lt;value&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;value&gt;</code> is an integer value specifying the maximum number of transacted sessions allowed for the given Message VPN. The valid range and default value depends on the type of event broker used. </p>
    <p>The no version of this command, <code>no max-transacted-sessions</code>, resets the maximum number of transacted sessions allowed for the specified Message VPN back to default.</p>
    <h2 class="with-rule"><a name="vpn-max-spool-usage"/>Configuring the Max Spool Usage</h2>
    <p>To configure the maximum amount of the system-level message spool disk space that a given Message VPN can use, enter the following CONFIG command:</p>
    <p class="Code">solace(configure/message-spool)# max-spool-usage &lt;size&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;size&gt;</code> is an integer specifying the maximum amount of message spool disk space (in MB) the Message VPN can use. The valid range is from 0 to the maximum amount of message spool disk space supported for the entire system. The default value is 0.</p>
    <MadCap:snippetBlock src="../../Resources/Snippets/link-to-max-spool-values.flsnp"/>
    <p>We recommend that this value be at least the <b>total</b> of the worst-case spool size for messages queued to be delivered to clients <b>plus</b> the replay log's <code>max-spool-usage</code>. For more information about the replay log, see <MadCap:xref href="../../Features/Replay/Msg-Replay-Config.htm">Configuring Message Replay</MadCap:xref>.</p>
    <p>The no version of this command (<code>no max-spool-usage</code>) resets the permitted message spool usage quota available for use by the Message VPN back to its default value.</p>
    <p class="Note">No policing is done to ensure that the sum of all of the message spool quota allocated to Message VPNs does not exceed the event broker-wide message spool quota</p>
    <h2 class="with-rule"><a name="configure-sequenced-topics"/>Configuring Sequenced Topics</h2>
    <p class="Note">This feature is deprecated and should not be used.</p>
    <p>A sequenced topic is a topic subscription for which any matching messages received on the Message VPN are assigned a sequence number that is monotonically increased by a value of one per message. To create a sequenced topic, enter the following CONFIG command:</p>
    <p class="Code">solace(configure/message-spool)# sequenced-topic &lt;topic&gt;</p>
    <p style="text-decoration: underline;">Where:</p>
    <p><code>&lt;topic&gt;</code> is the name of the topic subscription to be sequenced in the form a/b/c. Default starting sequence number is 1.</p>
    <p>The no version of this command, <code>no sequenced-topic &lt;topic&gt;</code>, deletes the sequenced topic, which disables the generation of sequence numbers.</p>
    <div class="Note">
      <ul>
        <li>To change the default starting sequence number from 1, refer to <MadCap:xref href="VPN-Level-Msg-Spool-Admin-Tasks.htm#managing_guaranteed_messaging_1810020758_684110">Changing the Starting Numbers for Sequenced Topics</MadCap:xref>.</li>
        <li>Sequenced topics are not supported by transacted sessions. Thus, any message to be sequenced that is also part of a transacted session does not have a sequence number applied; rather, the statistic “Transacted Message Not Sequenced” is incremented.</li>
        <li>In the active/standby event broker redundancy model supported for Guaranteed Messaging, sequence numbers continue to increment seamlessly through event broker switch-overs.</li>
        <li>In a multi-node network, where multiple event brokers are connected by Message VPN bridges, all publishers to a given sequenced topic must connect to the same event broker, otherwise duplicate sequence numbers result.</li>
      </ul>
    </div>
  </body>
</html>
