<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Performing Heuristic Actions on Transactions</h1>
    <p>A number of administrative actions can be performed on XA transactions, XA sessions, and local transacted sessions.</p>
    <p>These administrative actions are heuristic in that they are unilateral decisions that affect the outcome of transactions. Heuristic administrative actions may break the atomicity of transactions if the administrative action differs from what was chosen by the initial application requests. </p>
    <p>You can perform the following administrative actions on XA transactions:</p>
    <ul>
      <li>
        <MadCap:xref href="#heuristic-commmit-xa">Heuristically Committing XA Transactions</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#heuristic-rollback-xa">Heuristically Rolling Back XA Transactions</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#heuristic-delete-xa">Heuristically Deleting XA Transactions</MadCap:xref>
      </li>
    </ul>
    <p>You can perform the following administrative action on XA sessions or transacted (local)Â sessions:</p>
    <ul>
      <li>
        <MadCap:xref href="#heuristic-delete-sessions">Heuristically Deleting XA Sessions or Transacted Sessions</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="heuristic-commmit-xa"/>Heuristically Committing XA Transactions</h2>
    <p>You can heuristically commit an XA transaction that has an Idle or Prepared state.</p>
    <p>After an XA transaction is successfully committed, it is not automatically freed but will have a heuristically-committed state. A heuristically-committed XA transaction can then be administratively deleted.</p>
    <p>To heuristically commit an XA transaction, enter the following commands:</p>
    <pre>solace&gt; enable
solace# admin
solace(admin)# message-spool message-vpn &lt;vpn-name&gt;
solace(admin/message-spool)# commit-transaction xid &lt;xid&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;xid&gt;</code> is the Xid that uniquely identifies the XA transaction. The wildcards "<code>*</code>" or "<code>?</code>" may be used.</p>
    <h2 class="with-rule"><a name="heuristic-rollback-xa"/>Heuristically Rolling Back XA Transactions</h2>
    <p>You can heuristically roll back an XA transaction that has an Idle or Prepared state. After the XA transaction is successfully rolled back, it is not automatically deleted. However, you can administratively delete the XA transaction.</p>
    <p>To heuristically roll back an XA transaction, enter the following commands:</p>
    <pre>solace&gt; enable
solace# admin
solace(admin)# message-spool message-vpn &lt;vpn-name&gt;
solace(admin/message-spool)# rollback-transaction xid &lt;xid&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;xid&gt;</code> is the Xid that uniquely identifies the XA transaction. The wildcards "<code>*</code>" or "<code>?</code>" may be used.</p>
    <h2 class="with-rule"><a name="heuristic-delete-xa"/>Heuristically Deleting XA Transactions</h2>
    <p>You can heuristically delete an XA transaction that has a Heuristically Completed state (that is, it has been successfully heuristically committed or rolled back).</p>
    <p>To heuristically delete an XA transaction, enter the following  commands:</p>
    <pre>solace&gt; enable
solace# admin
solace(admin)# message-spool message-vpn &lt;vpn-name&gt;
solace(admin/message-spool)# delete-transaction xid &lt;xid&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;xid&gt;</code> is the Xid that uniquely identifies the XA transaction. The wildcards "<code>*</code>" or "<code>?</code>" may be used.</p>
    <h2 class="with-rule"><a name="heuristic-delete-sessions"/>Heuristically Deleting XA Sessions or Transacted Sessions</h2>
    <p>You can heuristically delete an XA Session that is identified by its name. When an XA Session is deleted, all transactions associated with the XA Session are rolled back and deleted, and the client that is connected to the XA Session is disconnected.</p>
    <p>You can also heuristically delete a transacted session (that is, a non-XA, local transaction) that is identified by its name. When a transacted session is deleted, all transactions associated with the transacted session are rolled back and deleted, and the client that is connected to the transacted session is disconnected.</p>
    <p>To delete an XA Session or a transacted session, enter the following commands:</p>
    <pre>solace&gt; enable
solace# admin
solace(admin)# message-spool message-vpn &lt;vpn-name&gt;
solace(admin/message-spool)# delete-transacted-session &lt;name&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;name&gt;</code> is the name of the XA session or transacted session. The wildcards "<code>*</code>" or "<code>?</code>" may be used.</p>
  </body>
</html>
