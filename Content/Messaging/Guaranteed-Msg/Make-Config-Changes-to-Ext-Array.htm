<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Configuration Changes to External Disk Arrays</h1>
    <p>This section contains the following procedures on making configuration changes to the external disk array:</p>
    <ul>
      <li>
        <MadCap:xref href="#managing_guaranteed_messaging_1810020758_461274">Changing Physical Configuration</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#managing_guaranteed_messaging_1810020758_461285">Changing Software Configuration</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#managing_guaranteed_messaging_1810020758_461295">Changing from External to Internal Disk</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="managing_guaranteed_messaging_1810020758_461274">
            </a>Changing Physical Configuration</h2>
    <p>To make changes to the physical configuration of the external disk storage array (for example, disconnecting it from the appliance, switching to different disk storage array), power down the Solace PubSub+ appliance as follows:</p>
    <h3>Standalone Appliance</h3>
    <ol>
      <li>Enter the <code>shutdown</code> Message Spool CONFIG command to stop message spooling on the appliance.</li>
      <li>Enter the <code>power-down</code> Privileged EXEC command to turn off power to the appliance.</li>
      <li>Make the required cabling changes.</li>
      <li>Turn power to the appliance back on.</li>
      <li>Enter the <code>no shutdown</code> Message Spool CONFIG command for the primary appliance to start message spooling on the appliance.</li>
    </ol>
    <h3>Redundant Appliances</h3>
    <ol>
      <li>Enter the <code>shutdown</code> Message Spool CONFIG command on the active appliance to stop message spooling on the appliance.</li>
      <li>Enter the <code>release-activity</code> Redundancy CONFIG command to surrender activity to the mate appliance.</li>
      <li>Enter the <code>power-down</code> Privileged EXEC command to turn off power to the active appliance.</li>
      <li>Make the required cabling changes.</li>
      <li>Turn power to the active appliance back on.</li>
      <li>Enter the <code>no release-activity</code> Redundancy CONFIG command to return activity back to the appliance that was shut down.</li>
      <li>Enter the <code>no shutdown</code> Message Spool CONFIG command for the primary appliance to start message spooling on the appliance.</li>
    </ol>
    <h2 class="with-rule"><a name="managing_guaranteed_messaging_1810020758_461285">
            </a>Changing Software Configuration</h2>
    <p>To make changes to the software configuration of the external disk storage array (for example, granting access to a new LUN), restart the Solace PubSub+ appliance as follows:</p>
    <h3>Standalone Appliance</h3>
    <ol>
      <li>Enter the <code>shutdown</code> Message Spool CONFIG command to stop message spooling on the appliance.</li>
      <li>Make the desired changes to the configuration of the external disk storage array.</li>
      <li>Enter the <code>reload</code> Privileged EXEC command to restart the appliance.</li>
      <li>Enter the <code>no shutdown</code> Message Spool CONFIG command to start message spooling on the appliance.</li>
    </ol>
    <h3>Redundant Appliances</h3>
    <ol>
      <li>On the active appliance, enter the <code>shutdown</code> Message Spool CONFIG command to stop message spooling on the appliance.</li>
      <li>Enter the <code>release-activity</code>Redundancy CONFIG command to surrender activity to the mate appliance.</li>
      <li>Make the desired changes to the configuration of the external disk storage array.</li>
      <li>Enter the <code>reload</code> Privileged EXEC command to restart the appliance.</li>
      <li>Enter the <code>no release-activity</code> Redundancy CONFIG command to return activity back to the appliance that was shut down.</li>
      <li>Enter the <code>no shutdown</code> Message Spool CONFIG command for the primary appliance to start message spooling on the appliance.</li>
    </ol>
    <h2 class="with-rule"><a name="managing_guaranteed_messaging_1810020758_461295">
            </a>Changing from External to Internal Disk</h2>
    <p>To change from external to internal disk for Guaranteed Messaging, power down the Solace PubSub+ appliance and disconnect the external disk array as follows:</p>
    <div class="Note" MadCap:autonum="&lt;b&gt;Notice  &lt;/b&gt;">
      <p>This procedure requires a message spool reset, which results in the loss of all currently spooled messages.</p>
    </div>
    <h3>Standalone Appliance</h3>
    <ol>
      <li>Enter the <code>shutdown</code> Message Spool CONFIG command to stop message spooling on the appliance.</li>
      <li>Enter the <code>reset</code> Message Spool ADMIN command to reset the message spool.</li>
      <li>Enter the <code>no disk-array</code> Message Spool CONFIG command to remove the disk array. </li>
      <li>Enter the <code>internal-disk</code> Message Spool CONFIG command to enable the internal disk for message spooling on the appliance.</li>
      <li>Enter the <code>no shutdown</code> Message Spool CONFIG command  to start message spooling on the appliance.</li>
    </ol>
    <h3>Redundant Appliances</h3>
    <div class="Note" MadCap:autonum="&lt;b&gt;Notice  &lt;/b&gt;">
      <p>Because it results in the loss of redundancy, Solace does not recommend changing from an external to internal disk for redundant appliances. If replication is configured, consider releasing activity to the replication site before changing from an external to internal disk.</p>
    </div>
    <ol>
      <li>Enter the <code>shutdown</code> Message Spool CONFIG command to stop message spooling on the appliance.</li>
      <li>Enter the <code>shutdown</code> Redundancy CONFIG command to stop the redundancy facility on the appliance.</li>
      <li>Enter the <code>reset</code> Message Spool ADMIN command to reset the message spool.</li>
      <li>Enter the <code>no disk-array</code> Message Spool CONFIG command to remove the disk array. </li>
      <li>Enter the <code>internal-disk</code> Message Spool CONFIG command to enable the internal disk for message spooling on the appliance.</li>
      <li>Enter the <code>no shutdown</code> Redundancy CONFIG command to start the redundancy facility on the appliance.</li>
      <li>Enter the <code>no shutdown</code> Message Spool CONFIG command for either the primary or backup appliance (as applicable) to start message spooling on the appliance.</li>
    </ol>
  </body>
</html>
