<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1>Preventing Subscription Export</h1>
    <p>In an MNR or DMR network, subscriptions are advertised  by the local node  to other nodes in the network. This allows clients on the local node to receive messages that match their topic subscriptions that originate on other nodes. </p>
    <p>The <code>#noexport</code> syntax allows you to specify that an individual subscription should not be exported, even if the subscriptions of the message VPN as a whole are being exported. This prevents messages published on remote nodes from being attracted to the subscriber on the local node.</p>
    <p>The <code>#noexport</code> syntax applies only to subscriptions and is not supported for cache requests.</p>
    <p>If the subscription is qualified with <code>#noexport</code>:</p>
    <ul>
      <li>it only attracts messages published locally on the same broker where the subscriber is. It will not be advertised to adjacent nodes by MNR or DMR.</li>
      <li>it is not exported to other nodes, even if the subscriptions of the message VPN as a whole are being exported (that is, if <code>export-policy</code> for the message VPN is set to <code>export-subscriptions</code>)</li>
    </ul>
    <p>You can use <code>#noexport</code> with shared and non-shared subscriptions:</p>
    <ul>
      <li><code>#noexport/#share/ShareName/topicFilter</code> specifies a non-exported shared subscription, where <code>ShareName</code> is the shared subscription identifier, and <code>topicFilter</code> is the topic filter.</li>
      <li><code>#noexport/topicFilter</code> specifies a non-exported topic subscription</li>
    </ul>
    <p>Even with <code>#noexport</code> specified on a subscription, it is still possible for the local node to receive messages  whose topic matches that subscription and that originate on other brokers, if those messages are attracted to the local broker by some other exported subscription. </p>
    <p>For example, suppose client C1 subscribes to <code>#noexport/a/b</code>, and another  client C2 on the same broker subscribes to <code>a/b</code>. In this case, messages published with topic <code>a/b</code> on another broker are still received by C1. This is illustrated in the following diagram:</p>
    <div class="thumbnail-container">
      <img src="../Resources/Images/Messaging/subscription-no-export.png" class="solacethumbnail" alt=""/>
    </div>
    <p>For more information, see:</p>
    <ul>
      <li>
        <MadCap:xref href="../Features/VPN/Configuring-VPNs.htm#Enable-Sub-Export">Enabling Subscription Export</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Reserved-Topics.htm">Reserved Topics</MadCap:xref>
      </li>
    </ul>
  </body>
</html>
