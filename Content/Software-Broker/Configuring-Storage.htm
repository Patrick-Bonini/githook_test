<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1><MadCap:concept term="Software"/>Managing Software Event Broker Storage</h1>
    <p>The software event broker uses a special construct called a <code>storage-group</code> to store state information. The <code>storage-group</code> is further subdivided into <code>storage-elements</code> that allow you to customize the event broker storage resources to meet the needs of your application.</p>
    <MadCap:snippetBlock src="../Resources/Snippets/simplified-container-storage.flsnp"/>
    <p>For assistance with planning and optimizing the storage configuration of your deployment, <a href="../get-support.htm" class="link-internal">contact Solace</a>.</p>
    <h2 class="with-rule"><a name="understanding-storage-group"/>Understanding the Storage-Group</h2>
    <p>The event broker maintains a significant amount of state on disk, including spooled messages, runtime configuration, and diagnostic information.  This state is represented by a storage unit called a <code>storage-group</code>, which is further organized into  directories called <code>storage-elements</code>.</p>
    <p>The <code>storage-group</code> is portableâ€”that is, you can map a <code>storage-group</code> to any storage device that meets the capacity, persistence, and performance requirements of the application. In the container filesystem, the <code>storage-group</code> is mounted to <code>/var/lib/solace</code>. </p>
    <p>The amount of disk space needed for the <code>storage-group</code>  depends on the event broker configuration. See <MadCap:xref href="System-Resource-Requirements.htm">System Resource Requirements</MadCap:xref> for more information.</p>
    <p>We recommend that you map the <code>storage-group</code> to external storage and that you use full disk encryption. For more information, see <MadCap:xref href="Container-Tasks/Config-Container-Storage.htm">Managing Storage for Container Images</MadCap:xref><MadCap:conditionalText MadCap:conditions="Default.HideFromAllOutput"> and <MadCap:xref href="Cloud-And-Machine-Tasks/Configuring-Storage-Machine-Cloud.htm">Managing Storage for Virtual Machine Images</MadCap:xref></MadCap:conditionalText>.</p>
    <p>The <code>storage-group</code> consists of six <code>storage-elements</code>, each of which is independently monitored and managed by the event broker. The <code>storage-elements</code> are described in the table below.</p>
    <p style="font-weight: bold;"><a name="Storage-2"/>Storage-Group Properties</p>
    <table style="width: 95%;caption-side: top;margin-left: 0;margin-right: auto;mc-table-style: url('../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
      <col class="TableStyle-Table_Num-Column-Column1" style="width: 25%;"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Storage-Element</th>
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Purpose</th>
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Device Considerations</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Mounted On</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">jail</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Stores logs and configuration database backups.</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Depending on the level of broker activity, the write load of this <code>storage-element</code>  can be moderate to high.  The contents of this <code>storage-element</code>  are not necessary during upgrade but are helpful in the event support is required.</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">/var/lib/solace/jail</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">var</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Stores the configuration database.</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Typically, the write load of this <code>storage-element</code>  is low, however, poor device throughput can lead to system instability.  The contents of this <code>storage-element</code>  must be preserved during upgrades.</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">/var/lib/solace/var</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">diagnostics</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Storage for diagnostic information for support.</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">The contents of this <code>storage-element</code>  are not necessary during upgrade but are helpful in the event support is required.</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">/var/lib/solace/diagnostics</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">spool</td>
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">Stores spooled messages.</td>
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">Broker stability and performance is directly related to device performance.  The contents of this <code>storage-element</code>  must be preserved during upgrades to prevent message loss.</td>
          <td class="TableStyle-Table_Num-BodyD-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">/var/lib/solace/spool</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">spool-cache</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Stores undelivered messages. </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">Broker stability and performance is directly related to device performance. The contents of this <code>storage-element</code> must be preserved during upgrades to prevent losing undelivered messages.</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">/var/lib/solace/spool-cache</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">spool-cache-backup</td>
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">Stores runtime information used for recovery after system shutdown.</td>
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">The contents of this <code>storage-element</code>  are not necessary during upgrade but are helpful in the event support is required.</td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1" style="font-family: 'Courier New', monospace, Menlo, Monaco, Consolas, 'Lucida Console';">/var/lib/solace/spool-cache-backup</td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
