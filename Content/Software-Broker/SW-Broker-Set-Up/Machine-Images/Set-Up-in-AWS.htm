<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
  <head>
    <meta name="robots" content="noindex, nofollow"/>
  </head>
  <body>
    <h1><MadCap:concept term="Software"/>AWS</h1>
    <p>This tutorial walks you through the steps to set up a single Pubsub+ <MadCap:variable name="Product-Names.broker_sw_short"/> machine image instance  in an EC2 instance in Amazon Web Services (AWS).</p>
    <ul>
      <li>
        <MadCap:xref href="#before-you-begin">Before You Begin</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#get-ami">Step 1: Get an AMI</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#configure-instance">Step 2: Configure the Instance</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#access-cli">Step 3: Access the Solace CLI</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#review-configuration">Step 4: Review  Configuration Defaults</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#next_steps">Next Steps</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="before-you-begin"/>Before You Begin</h2>
    <p>It's assumed that you have: </p>
    <ul>
      <li>an AWS account</li>
      <li>an EC2 key pair</li>
    </ul>
    <p>Before creating and configuring your PubSub+ event broker instance, make sure you meet the system requirements and review the HA considerations.</p>
    <h3>System Requirements</h3>
    <MadCap:snippetBlock src="../../../Resources/Snippets/vm-setup-system-requirements-machine-images.flsnp">
        </MadCap:snippetBlock>
    <p>For more information on how to manage your system resources such as vCPUs, memory, and storage, refer to <MadCap:xref href="../../System-Resource-Calculator.htm">System Resource Calculator</MadCap:xref>.</p>
    <h3><a name="ha"/>High Availability Considerations</h3>
    <MadCap:snippetBlock src="../../../Resources/Snippets/vm-setup-HA-considerations.flsnp">
        </MadCap:snippetBlock>
    <p>A Solace Quick Start template is available that makes use of AWS Cloud Formation to create PubSub+ <MadCap:variable name="Product-Names.broker_sw_short"/>s in an HA group that is suitable for proof-of-concept testing. You can find the template <a href="https://github.com/SolaceLabs/solace-aws-ha-quickstart" class="link-internal">on GitHub</a> and at <a href="https://aws.amazon.com/quickstart/architecture/solace-vmr/" class="link-internal">AWS Quick Starts</a>.</p>
    <h2 class="with-rule"><a name="get-ami"/>Step 1: Get an AMI</h2>
    <p>You can get the AWS machine image (AMI) from one of the following places: </p>
    <ul>
      <li>
        <MadCap:xref href="#aws-marketplace">AWS Marketplace</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#solace-downloads">Solace Downloads Page</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#your-aws-account">Your AWS Account</MadCap:xref>
      </li>
    </ul>
    <h4><a name="aws-marketplace"/>AWS Marketplace</h4>
    <p class="Note">The AWS Marketplace page lists four PubSub+ event broker products in AWS. These steps apply only to the Standard or Enterprise options (not PubSub+ Cloud Platform or Professional Services).</p>
    <ol MadCap:continue="true">
      <li>Navigate to the <a class="link-offsite" href="https://aws.amazon.com/marketplace/seller-profile?id=9572c0d6-3f30-4189-aa2e-2db363830711" target="_blank">Solace page</a> of the AWS Marketplace, and if you haven't already, log into your account.</li>
      <li>Click either <b>Solace PubSub+ Software Event Broker Standard Edition</b> or <b>Solace PubSub+ Software Message Broker Enterprise Edition</b> to select the event broker edition to launch.<p>You can read about each edition's features and other information on the <span style="font-weight: bold;">Product Overview</span> page. Return to the main <a class="link-offsite" href="https://aws.amazon.com/marketplace/seller-profile?id=9572c0d6-3f30-4189-aa2e-2db363830711" target="_blank">AWS Marketplace</a> page and click another edition to read its product overview.  Once you've decided on the correct edition, click <b>Continue to Subscribe</b>.<br/></p></li>
      <li>On the <b>Subscribe to this software</b> page, review the Terms and Conditions and the product details. When you've finished, click <b>Continue to Configuration</b>.</li>
      <li>On the <span style="font-weight: bold;">Configure this software</span> page, review the following settings and make modifications if necessary:<ul><li>Fulfillment option</li><li>Software version</li><li>Region</li></ul><p>You can also view the release notes and other information.</p></li>
      <li>When you've finished, click <b>Continue to Launch</b>.</li>
      <li>On the <b>Launch this software</b> page, review the <b>Usage instructions</b>. Then, from the <b>Choose Action</b> dropdown menu, select <b>Launch through EC2</b>.</li>
      <li>Click <b>Launch</b>. The <b>Launch an instance</b> page opens.</li>
    </ol>
    <p>Now, proceed to <MadCap:xref href="#configure-instance">Step 2: Configure the Instance</MadCap:xref>.</p>
    <h4><a name="solace-downloads"/>Solace Downloads Page</h4>
    <ol>
      <li>If you haven't already, log in to your AWS account. </li>
      <li>Go to the <a href="https://solace.com/downloads/" class="link-internal">Solace PubSub+ Event Broker downloads page.</a></li>
      <li> Select the Amazon Web Services section, and then select the required edition of the software event broker.</li>
      <li>Fill in your details, and then click <b>Get The Downloads</b>.</li>
      <li> If you want to start a 90-day evaluation of PubSub+ Enterprise Edition, click <b>PubSub+ Enterprise Evaluation Procedure</b> to download the instructions to load the free product key after your software broker is running.</li>
      <li>For PubSub+ Standard instead, click one of the links under <b>PubSub+ Standard</b> to select your preferred event broker  region. The <b>Launch an instance</b> page opens.</li>
    </ol>
    <p>Now, proceed to <MadCap:xref href="#configure-instance">Step 2: Configure the Instance</MadCap:xref>.</p>
    <h4><a name="your-aws-account"/>Your AWS Account</h4>
    <p>If you've separately purchased the Enterprise PubSub+ event broker for AWS, Solace will make the AMI directly available to your AWS account.</p>
    <ol>
      <li>Log in to your AWS account.</li>
      <li>From the main AWS dashboard, click <b>EC2</b>. </li>
      <li>Click <b>Launch Instance</b>. The <b>Launch an instance</b> page opens.</li>
    </ol>
    <p>Now, proceed to <MadCap:xref href="#configure-instance">Step 2: Configure the Instance</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="configure-instance"/>Step 2: Configure the Instance</h2>
    <p>At this point, you should be at the <b>Launch an instance</b> configuration page. </p>
    <p class="Note">Performance in AWS will vary depending on instance type and storage configuration. Solace has characterized that deterministic performance is achieved using an instance type of m4.10xlarge with a storage volume type IO1 with 10,000 IOPS. AWS provides different instance types between m4.large and m4.10xlarge which may be suitable for your requirements.</p>
    <p class="Note">For production use, the minimum supported instance type for a PubSub+ <MadCap:variable name="Product-Names.broker_sw_short"/> message routing node is m4.large with a storage value type IO1 with 3000 IOPS. For a monitoring node, the minimum supported instance type is t2.micro/t4g.small (ARM) with a storage volume type gp2.  At least 3GiB of swap is required. </p>
    <p>To configure your EC2 instance, do the following:</p>
    <ol>
      <li>Under <b>Name and tags</b>, choose a name for your PubSub+ event broker instance.<p><img src="../../../Resources/Images/SW-Broker-Setup/Machine/AWS/aws-image1.png" class="img-border" alt=""/></p></li>
      <li>Under <b>Application and OS Images (Amazon Machine Image)</b>: <br/><p>If you used your AWS account to get your AMI, select <b>My AMIs</b>.Then, select <b>Shared with Me</b> and choose your preferred AMI. </p><p><img src="../../../Resources/Images/SW-Broker-Setup/Machine/AWS/aws-image2.png" class="img-border" alt=""/></p><p>If you used AWS Marketplace or the Solace Downloads page to get your AMI, your AMI is automatically selected for you under the <b>AMI from catalog</b> tab.</p><p><img src="../../../Resources/Images/SW-Broker-Setup/Machine/AWS/aws-image3.png" class="img-border" alt=""/></p></li>
      <li>Under <b>Instance type</b>, choose an  instance that meets your resource needs (for example, for an Enterprise Edition software broker, you might choose m4.large). For information about the resources provided by the various instance types, see <a href="https://aws.amazon.com/ec2/instance-types/" target="_blank" class="link-offsite">Amazon EC2 Instance Types.</a><p><img src="../../../Resources/Images/SW-Broker-Setup/Machine/AWS/aws-image4.png" class="img-border" alt=""/></p></li>
      <li>Under <b>Key pair (login)</b>, choose your authentication key pair for your PubSub+ event broker instance. This key pair is used to log in to the EC2 instance. If you don't have an existing key pair, create a new pair and download the new .pem file. <p><img src="../../../Resources/Images/SW-Broker-Setup/Machine/AWS/aws-image5.png" class="img-border" alt=""/></p></li>
      <li>Under <b>Network settings</b>, select an existing security group or create a new one that suits your use case.<p><img src="../../../Resources/Images/SW-Broker-Setup/Machine/AWS/aws-image6.png" class="img-border" alt=""/></p></li>
      <li>Under <b>Configure storage</b>, select the size of your storage volume. <p><img src="../../../Resources/Images/SW-Broker-Setup/Machine/AWS/aws-image7.png" class="img-border" alt=""/></p><p>You'll need a root partition of the instance (with a minimum of 8 GiB) and a storage volume for the storage group. For details related to the size of this volume, see <MadCap:xref href="../../System-Resource-Calculator.htm">System Resource Calculator</MadCap:xref>.</p></li>
      <li>View <b>Advanced details</b> for any settings that you would like to modify.</li>
      <li>Click <b>Launch Instance</b>. When your instance has launched, the EC2 dashboard shows your event broker instance under <b>Instances</b>. Here you can find the external and internal IP addresses of the instance. (For more information, refer to <MadCap:xref href="../../../Admin/IP-Interfaces/IP-Addressing-in-Cloud-Instances.htm">IP Addressing in Cloud Instances</MadCap:xref>.)</li>
      <li>Connect to your EC2 instance. From the instance details page, right-click the instance and select <b>Connect</b> to see more information about how to connect to your instance. For example, you can SSH into your EC2 instance with your private key using the public IP address and port 22.<br/><p>Use the <b>SSH client</b> tab to connect to your instance using its public DNS. </p><p><img src="../../../Resources/Images/SW-Broker-Setup/Machine/AWS/aws-image8.png" class="img-border" alt=""/></p><p class="Note">The default AMI user name for the PubSub+ software event broker is <code>sysadmin</code>.</p></li>
    </ol>
    <h2 class="with-rule"><a name="access-cli"/>Step 3: Access the Solace CLI</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/vm-setup-CLI-initial-access.flsnp"/>
    <h2 class="with-rule"><a name="review-configuration"/>Step 4: Review  Configuration Defaults</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/vm-setup-review-configuration-defaults.flsnp"/>
    <p class="Note">If you created an instance of the PubSub+ Standard edition starting from the Solace downloads page and you want to start a 90-day evaluation of PubSub+ Enterprise, you can now install the product key you downloaded.</p>
    <h2 class="with-rule"><a name="next_steps"/>Next Steps</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/SW-Broker-Setup-Next-Steps.flsnp"/>
  </body>
</html>
