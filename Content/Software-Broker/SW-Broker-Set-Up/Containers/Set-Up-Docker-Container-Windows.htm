<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1><MadCap:concept term="Software"/>Docker Desktop for Windows</h1>
    <p>This section walks you through the steps to set up a single PubSub+ <MadCap:variable name="Product-Names.broker_sw_short"/> container with Docker   in Windows using Docker Compose.  If you're interested in setting up  event brokers in an HA redundancy group on a Windows platform, take a look at <MadCap:xref href="../../../Features/HA-Redundancy/HA-Docker-Windows.htm">Configuring HA Groups in Windows</MadCap:xref>.</p>
    <ul>
      <li>
        <MadCap:xref href="#before-you-begin">Before You Begin</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#download-the-docker-compose-template">Step 1: Download the Docker Compose Template</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#create-a-pubsub-software-event-broker">Step 2: Create a PubSub+ Software Event Broker</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#manage-the-pubsub-software-event-broker">Step 3: Manage the PubSub+ Software Event Broker</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#next-steps">Next Steps</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="before-you-begin"/>Before You Begin</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/container-docker-compose-before-you-begin.flsnp"/>
    <MadCap:snippetBlock src="../../../Resources/Snippets/container-externalize-storage-group.flsnp"/>
    <p>It's assumed that you have:</p>
    <ul>
      <li>Docker Desktop for Windows (or an equivalent desktop container environment such as Rancher Desktop) installed, with at least 2 GiB of memory dedicated to Docker Desktop for Windows. For more information about allocating memory and swap space, refer to the <a href="https://docs.docker.com/docker-for-windows/#advanced" class="link-internal">Docker Settings</a> page.</li>
      <li>
        <MadCap:snippetBlock src="../../../Resources/Snippets/container-docker-compose-git.flsnp"/>
      </li>
    </ul>
    <h2 class="with-rule"><a name="download-the-docker-compose-template"/>Step 1: Download the Docker Compose Template</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/container-docker-compose-github-clone.flsnp"/>
    <h2 class="with-rule"><a name="create-a-pubsub-software-event-broker"/>Step 2: Create a PubSub+ Software Event Broker</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/container-docker-compose-command.flsnp"/>
    <p>Using the <code>latest</code> PubSub+ Standard image from Docker Hub, the compose template runs an event broker container called <code>pubSubStandardSingleNode</code>, creates an <code>admin</code> user with global access permissions, and publishes the following event broker container ports to the same ports on the Windows host:</p>
    <ul>
      <li>port 8080—enables SEMP management traffic to the container. Use this port when connecting to the container from <MadCap:variable name="Product-Names.pubsubmanager_short"/> (refer to <MadCap:xref href="../../../Admin/Broker-Manager/PubSub-Manager-Overview.htm"><MadCap:variable name="Product-Names.pubsubmanager_long"/></MadCap:xref> for more information).</li>
      <li>port 55554 - enables SMF data to pass through the container (port 55554 in the host is mapped to 55555 in the compose template due to a port collision on another platform).</li>
    </ul>
    <p>To use additional services, you can edit the compose template to publish each corresponding port. For example, to  enable AMQP over TLS, uncomment the appropriate line in the compose template (<code>- '5671:5671'</code>). For more information about the default ports used for each service, refer to <MadCap:xref href="../../SW-Broker-Configuration-Defaults.htm">Configuration Defaults</MadCap:xref>.</p>
    <p>Once the container is created, it will take about 60 seconds for the event broker to finish activating. </p>
    <h2 class="with-rule"><a name="manage-the-pubsub-software-event-broker"/>Step 3: Manage the PubSub+ Software Event Broker</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/container-manage-broker-docker.flsnp"/>
    <h2 class="with-rule"><a name="next-steps"/>Next Steps</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/sw-broker-setup-next-steps.flsnp"/>
  </body>
</html>
