<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1><MadCap:concept term="Software"/>Docker with CentOS on Azure</h1>
    <p>This section walks you through the steps to set up a single PubSub+ <MadCap:variable name="Product-Names.broker_sw_short"/> container with Docker on a CentOS instance in Microsoft Azure.</p>
    <ul>
      <li>
        <MadCap:xref href="#before-you-begin">Before You Begin</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#launch-a-host-and-install-docker">Step 1: Launch a Host &amp; Install Docker</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#get-a-pubsub-software-event-broker">Step 2: Get a PubSub+ Software Event Broker</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#set-the-docker-create-options">Step 3: Set the Docker Create Options</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#create-the-container">Step 4: Create the Container</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#manage-the-pubsub-software-event-broker">Step 5: Manage the PubSub+ Software Event Broker</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#next-steps">Next Steps</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="before-you-begin"/>Before You Begin</h2>
    <p>It's assumed that you have:</p>
    <ul>
      <li>An Azure account with permission to create and run a virtual machine.</li>
      <li>A stable version of Docker Engine installed.</li>
    </ul>
    <h3><a name="quick-start-template"/>Quick Start Template</h3>
    <p>As an alternative to the manual setup procedure shown on this page, there is a quick start guide in <a href="https://azure.microsoft.com/en-us/resources/templates/solace-message-router/" target="_blank" class="link-internal">Azure</a> that can be used to deploy either a single PubSub+ software event broker or a three-node high availability (HA) cluster.</p>
    <h3><a name="system-requirements"/>System Requirements</h3>
    <MadCap:snippetBlock src="../../../Resources/Snippets/System-Requirements-Container-Images.flsnp"/>
    <h2 class="with-rule"><a name="launch-a-host-and-install-docker"/>Step 1: Launch a Host &amp; Install Docker</h2>
    <p>Use the Azure Dashboard’s Launch setup wizard to create an Azure virtual machine that you can use to run an event broker.</p>
    <ol>
      <li>On the Azure dashboard, click the <b>Virtual Machines</b> icon, and then click <b>+Add</b>.
                <p><div class="thumbnail-container"><img src="../../../Resources/Images/SW-Broker-Setup/Container/Azure-Dashboard.png" class="solacethumbnail" alt=""/></div></p><p>Follow the setup wizard and accept the recommended default settings, except as noted in the following steps.</p></li>
      <li>
        <p>In the <b>Compute</b> window, search for the host OS that you want to use.
                </p>
        <p>For a CentOS 7 host, <b>CentOS 7.9</b> is recommended.</p>
      </li>
      <li>In the <b>Choose Virtual Machine Size </b>step, select a size based on the  maximum number of client connections listed in the <MadCap:xref href="#system-requirements">System Requirements</MadCap:xref> section.               
				<p class="Note">Use of the B1S virtual machine is not recommended.</p></li>
      <li>
        <MadCap:snippetBlock src="../../../Resources/Snippets/container-inbound-rules.flsnp"/>
      </li>
      <li>
			Manually install and configure Docker on your CentOS host. Instructions can be found on the Docker <a href="https://docs.docker.com/engine/installation/linux/centos/" target="_blank" class="link-internal">Get Docker for CentOS</a> Web page.
			</li>
    </ol>
    <h2 class="with-rule"><a name="get-a-pubsub-software-event-broker"/>Step 2: Get a PubSub+ Software Event Broker</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/container-get-SW-broker-docker-con-package4.flsnp"/>
    <p>For example:</p>
    <pre>&gt;sudo docker load -i /tmp/solace-pubsub-enterprise-&lt;version&gt;-docker.tar.gz</pre>
    <h2 class="with-rule"><a name="set-the-docker-create-options"/>Step 3: Set the Docker Create Options</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/Set-Docker-Engine-Options.flsnp"/>
    <h2 class="with-rule"><a name="create-the-container"/>Step 4: Create the Container</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/create-and-run-docker-container.flsnp"/>
    <h2 class="with-rule"><a name="manage-the-pubsub-software-event-broker"/>Step 5: Manage the PubSub+ Software Event Broker</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/container-manage-broker-docker.flsnp"/>
    <h2 class="with-rule"><a name="next-steps"/>Next Steps</h2>
    <MadCap:snippetBlock src="../../../Resources/Snippets/SW-broker-setup-next-steps.flsnp"/>
  </body>
</html>
