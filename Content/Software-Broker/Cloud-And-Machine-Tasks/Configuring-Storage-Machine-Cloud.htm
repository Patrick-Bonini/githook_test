<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
  <head>
    <meta name="robots" content="noindex, nofollow"/>
  </head>
  <body>
    <h1><MadCap:concept term="Software"/>Managing Storage for Virtual Machine Images</h1>
    <div class="Caution" MadCap:conditions="Default.NotForPDF">
      <p>Distribution of PubSub+ packaged as a virtual machine broker image will cease as of release 10.8.1 (June 2024). For more details, see the <a href="https://solace.com/support/deprecated-features/">Deprecated Features</a> list.</p>
      <p>Solace recommends that you transition to an alternate method of deploying PubSub+ prior to June 2024.  Containers offer a flexible way to deploy PubSub+ in a number of environments, virtual machines,  and other container platforms. For information about:</p>
      <ul>
        <li>
          <p>Setting up containers, see <MadCap:xref href="../SW-Broker-Set-Up/Containers/Set-Up-Container-Image.htm">Setting Up Container Images</MadCap:xref>.</p>
        </li>
        <li>
          <p>Deploying PubSub+ container images in production environments, see <MadCap:xref href="../SW-Broker-Set-Up/Containers/Deploying-Container-in-Production.htm">Deploying PubSub+ Software Event Brokers in a Production Environment</MadCap:xref>.</p>
        </li>
      </ul>
    </div>
    <p MadCap:conditions="Default.NotForPDF">The software event broker machine image provides a 10 GB partition for storage, which is only enough space for modestly sized storage-elements suitable for use in proof-of-concept deployments. </p>
    <p> For production deployments, you must provide additional storage by assigning the event broker's storage-elements to external block devices. </p>
    <p>The software event broker requires storage with medium to high bandwidth/IOPS and low latency. The virtual machine image uses settings for the widest compatibility; these settings are not tuned for performance. For information about getting the best storage performance, consult the best practices documentation for your platform.</p>
    <h2 class="with-rule" MadCap:conditions="Default.NotForPDF"><a name="remapping-storage-elements"/>Remapping the Storage-Group to External Storage</h2>
    <p MadCap:conditions="Default.NotForPDF">In virtual machine images, the <code>storage-group</code> is mapped to a volume. To provide sufficient space for the <code>storage-group</code> in a production environment, you must remap the volumes to external block devices. You can do this using:</p>
    <ul MadCap:conditions="Default.NotForPDF">
      <li><code>cloud-init</code> at boot time</li>
      <li><code>solacectl</code> at runtime</li>
    </ul>
    <h3 MadCap:conditions="Default.NotForPDF">Mapping Volumes with <code>cloud-init</code></h3>
    <MadCap:snippetBlock src="../../Resources/Snippets/cloud-init-Map-Volume-to-Block-Device.flsnp" MadCap:conditions="Default.NotForPDF"/>
    <p MadCap:conditions="Default.NotForPDF">For more information, see <MadCap:xref href="Initializing-Machine-Image-With-Cloud-Init.htm#Storage">Storage provisioning</MadCap:xref>.</p>
    <h3 MadCap:conditions="Default.NotForPDF">Mapping Volumes with <code>solacectl</code></h3>
    <MadCap:snippetBlock src="../../Resources/Snippets/solacectl-Map-Volume-to-Block-Device.flsnp" MadCap:conditions="Default.NotForPDF"/>
    <p class="Note" MadCap:conditions="Default.NotForPDF">Once volumes have been externalized once, you cannot move them or increase their size using <code>solacectl</code> again.</p>
    <p MadCap:conditions="Default.NotForPDF">For more information, see <MadCap:xref href="Managing-Storage.htm">Managing Storage Volumes</MadCap:xref>.</p>
  </body>
</html>
