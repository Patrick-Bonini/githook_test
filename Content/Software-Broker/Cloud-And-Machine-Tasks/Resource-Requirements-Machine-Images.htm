<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
    <meta name="robots" content="noindex, nofollow"/>
  </head>
  <body>
    <h1>Resource Requirements for Virtual Machine Images</h1>
    <div class="Caution" MadCap:conditions="Default.NotForPDF">
      <p>Distribution of PubSub+ packaged as a virtual machine broker image will cease as of release 10.8.1 (June 2024). For more details, see the <a href="https://solace.com/support/deprecated-features/">Deprecated Features</a> list.</p>
      <p>Solace recommends that you transition to an alternate method of deploying PubSub+ prior to June 2024.  Containers offer a flexible way to deploy PubSub+ in a number of environments, virtual machines,  and other container platforms. For information about:</p>
      <ul>
        <li>
          <p>Setting up containers, see <MadCap:xref href="../SW-Broker-Set-Up/Containers/Set-Up-Container-Image.htm">Setting Up Container Images</MadCap:xref>.</p>
        </li>
        <li>
          <p>Deploying PubSub+ container images in production environments, see <MadCap:xref href="../SW-Broker-Set-Up/Containers/Deploying-Container-in-Production.htm">Deploying PubSub+ Software Event Brokers in a Production Environment</MadCap:xref>.</p>
        </li>
      </ul>
    </div>
    <p>To achieve desired stability and performance, the infrastructure hosting the PubSub+ Software Event Broker must provide a minimum set of system resources. System resources can be broadly categorized into requirements related to processors, memory, and storage.</p>
    <p>You can increase certain system limits using System Scaling Parameters. Increasing these system limits also increases the system resources that are required. For more information, see <MadCap:xref href="../System-Scaling-Parameters.htm" MadCap:conditions="Default.NotForPDF">Using System Scaling Parameters</MadCap:xref><a href="https://docs.solace.com/Software-Broker/System-Scaling-Parameters.htm" class="link-offsite" MadCap:conditions="Default.OnlyForPDF" target="_blank">Using System Scaling Parameters</a> and <MadCap:xref href="../System-Resource-Calculator.htm" MadCap:conditions="Default.NotForPDF">System Resource Calculator</MadCap:xref><a href="https://docs.solace.com/Software-Broker/System-Resource-Calculator.htm" class="link-offsite" MadCap:conditions="Default.OnlyForPDF" target="_blank">System Resource Calculator</a>.</p>
    <p>The following sections describe the minimum resources needed for the default installation of the software event broker virtual machine image.</p>
    <h2 class="with-rule"><a name="res-req-virtual-machine"/>Resource Requirements for Virtual Machine Images</h2>
    <p>The machine host provides the system resources for the virtual machine  via a hypervisor. The hypervisor synthesizes some resources, like processors and memory, from a subset of the host's resources. These  resources may be preconfigured by the virtual machine image, if it includes a machine definition, as is the case with OVA package.</p>
    <p>All virtual machine images are configured to use the included disk image as the virtual machine instance's primary disk. You can create additional storage capacity by adding a secondary or external disk to the virtual machine instance.</p>
    <h3><a name="min-req-vms"/>Minimum Resource Requirements for Virtual Machine Images</h3>
    <ul>
      <li><code>messaging-routing-node</code>—the software event broker is participating in message routing. In messaging mode, the broker takes either the primary or backup role.</li>
      <li><code>monitor-node</code>—the software event broker is in monitoring mode and is not participating in message routing. It therefore does not require storage for the <code>spool</code>, <code>spool-cache</code>, and <code>spool-cache-backup</code> storage-elements.</li>
    </ul>
    <p>The software event broker requires the following resources at a minimum:</p>
    <table style="mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" class="TableStyle-Table_Num" cellspacing="0">
      <col style="width: 25%;" class="TableStyle-Table_Num-Column-Column1">
            </col>
      <col style="width: 25%;" class="TableStyle-Table_Num-Column-Column1">
            </col>
      <col style="width: 25%;" class="TableStyle-Table_Num-Column-Column1">
            </col>
      <col style="width: 25%;" class="TableStyle-Table_Num-Column-Column1">
            </col>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th colspan="2" class="TableStyle-Table_Num-HeadE-Column1-Header1">System Resource</th>
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Minimum Requirement (Messaging)</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Minimum Requirement<br/>(Monitoring)</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td colspan="2" class="TableStyle-Table_Num-BodyH-Column1-Body1">CPUs</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">2</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">1</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td colspan="2" class="TableStyle-Table_Num-BodyH-Column1-Body1">Physical Memory (RAM)</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">1 GiB</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">1 GiB</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td colspan="2" class="TableStyle-Table_Num-BodyH-Column1-Body1">Primary Disk</td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">30 GB</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">30 GB</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1" colspan="2">Disk Space for the <code>storage-group</code> as a whole</td>
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">6.1 GB</td>
          <td class="TableStyle-Table_Num-BodyD-Column1-Body1">3.3 GB</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td rowspan="6" style="vertical-align: middle;text-align: left;padding-left: 4pt;padding-right: 6pt;padding-top: 6pt;padding-bottom: 6pt;border-right-style: solid;border-right-width: 2px;border-right-color: #e1e1e1;border-bottom-style: solid;border-bottom-width: 2px;border-bottom-color: #e1e1e1;" class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p rowspan="6">Disk Space for <code>storage-elements</code></p>
            <p rowspan="6" class="Note">The space required for the <code>storage-group</code> is more than required for the included <code>storage-elements</code>.</p>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <code>jail</code>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">1 GB</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">1 GB</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <code>var</code>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">0.2 GB</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">0.2 GB</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <code>diagnostics</code>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">2 GB</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">2 GB</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
            <code>spool</code>
          </td>
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">1 GB</td>
          <td class="TableStyle-Table_Num-BodyD-Column1-Body1">N/A</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <code>spool-cache</code>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">	1.2 GB</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">N/A</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <code>spool-cache-backup</code>
          </td>
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">0.6 GB</td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">N/A</td>
        </tr>
      </tbody>
    </table>
    <h3>Processor Considerations</h3>
    <p>To meet expected performance, host CPUs should be Intel i5 (or equivalent), with an operating frequency of 2 GHz, or better. Only x86_64 architectures are supported.</p>
    <p>Hardware virtualization, such as Intel VT-x and AMD-V must be enabled. CPUs, or the equivalent processing power, must be dedicated for exclusive use by the broker.</p>
    <h3>Memory Considerations</h3>
    <p>The physical memory requirement for virtual machine images represents the amount of host memory (RAM) needed to back the virtual memory space of the machine image. Host memory should not be oversubscribed and should not be backed by swap.</p>
    <p>Virtual machine images come preconfigured with a fixed amount of swap space (approximately <MadCap:conditionalText MadCap:conditions="Default.NotForPDF">2</MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="Default.OnlyForPDF">4</MadCap:conditionalText> GiB), i.e. the total virtual memory available to the broker application is the sum of the host memory and the preconfigured broker swap.<MadCap:conditionalText MadCap:conditions="Default.NotForPDF"> Under stress, the broker may make extensive use of swap. For high performance applications, Solace recommends supplying 2 GiB of additional host memory to reduce broker swap usage.</MadCap:conditionalText></p>
    <p>Hypervisor dynamic memory allocation and reclamation features (TPS, ballooning, hypervisor swap) are not supported.</p>
    <h3>Storage Considerations</h3>
    <p><MadCap:conditionalText MadCap:conditions="Default.NotForPDF">With exception of the AMI Package, v</MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="Default.OnlyForPDF">V</MadCap:conditionalText>irtual machine images are delivered as a fixed 30 GB virtual disk<MadCap:conditionalText MadCap:conditions="Default.NotForPDF"> with a 10 GB partition for  the <code>storage-group</code>. This is suitable for non-production use cases of less than 1000 client connections and with 1.5 GB of spooled messages</MadCap:conditionalText>. For more information regarding storage organization in the PubSub+ Software Event Broker and how to increase performance or capacity by adding storage, see <MadCap:xref href="../Configuring-Storage.htm#understanding-storage-group" MadCap:conditions="Default.NotForPDF">Understanding the Storage-Group</MadCap:xref><a href="https://docs.solace.com/Software-Broker/Configuring-Storage.htm#understanding-storage-group" class="link-offsite" MadCap:conditions="Default.OnlyForPDF" target="_blank">Understanding the Storage-Group</a> and <MadCap:xref href="Configuring-Storage-Machine-Cloud.htm">Managing Storage for Virtual Machine Images</MadCap:xref>.</p>
    <p>Your storage system must have a write performance greater than 20 MBps. Using a storage system with a write performance of less than 20 MBps will result in a POST failure. In addition to having adequate write performance, the storage system must also exhibit well behaved latency (as reported by the <code>show system health</code> command). For best performance and maximum data integrity, we recommend that you use an enterprise-grade SSD with a power-loss data protection feature for the machine host.</p>
  </body>
</html>
