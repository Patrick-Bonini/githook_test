<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
  <head>
    <link href="../../Resources/Stylesheets/Tabbed_Content.css" rel="stylesheet"/>
  </head>
  <body><h1><MadCap:concept term="Software"/>Machine Upgrade</h1><p>Here you'll find procedures to upgrade your Solace PubSub+ event broker Machine images to version 9.11.0 or later (the current version is <MadCap:variable name="Manifest-Products-Routers.SolOS VMR"/>).</p><ul class="nav tabs" MadCap:conditions="Default.NotForPDF"><li><a class="tab" href="#standlone">Standalone from 9.10.0+</a></li><li><a class="tab" href="#redundant">HA Group from 9.10.0+</a></li></ul><div id="standlone"><h2 class="with-rule"><a name="Upgradin"/>Upgrade a Standalone Machine Image<MadCap:conditionalText MadCap:conditions="Default.NotForPDF"> from Version <MadCap:variable name="Minimum-Supported-Component-Versions.SW Broker Upgrade"/>+</MadCap:conditionalText></h2><div class="Caution" MadCap:conditions="Default.NotForPDF"><p>Distribution of PubSub+ packaged as a virtual machine broker image will cease as of release 10.8.1 (June 2024). For more details, see the <a href="https://solace.com/support/deprecated-features/">Deprecated Features</a> list.</p><p>Solace recommends that you transition to an alternate method of deploying PubSub+ prior to June 2024.  Containers offer a flexible way to deploy PubSub+ in a number of environments, virtual machines,  and other container platforms. For information about:</p><ul><li><p>Setting up containers, see <MadCap:xref href="../SW-Broker-Set-Up/Containers/Set-Up-Container-Image.htm">Setting Up Container Images</MadCap:xref>.</p></li><li><p>Deploying PubSub+ container images in production environments, see <MadCap:xref href="../SW-Broker-Set-Up/Containers/Deploying-Container-in-Production.htm">Deploying PubSub+ Software Event Brokers in a Production Environment</MadCap:xref>.</p></li></ul></div><p>An event broker upgrade to a new version preserves the configuration and the spooled messages. The event broker upgrade procedure is performed in place. When upgrading, the upgrade procedure is performed in the existing virtual machine instead of creating a new virtual machine for the upgraded event broker. The same upgrade procedure is followed with or without external block devices.</p><p MadCap:conditions="Default.NotForPDF">The following procedure describes an Enterprise to Enterprise upgrade.</p><p MadCap:conditions="Default.NotForPDF">On non-Enterprise event brokers, the following upgrades are also supported:</p><ul MadCap:conditions="Default.NotForPDF"><li>from Evaluation to Enterprise</li><li>from Standard to Standard</li><li>from Standard to Enterprise</li></ul><p>For the upgrades between other editions, some prompts will have a different edition included and one must take care to change the file name and the solacectl upgrade (search for the word ‘enterprise’ and change as needed). </p><h3>Procedure</h3><p>To upgrade a standalone machine image<MadCap:conditionalText MadCap:conditions="Default.NotForPDF"> from version <MadCap:variable name="Minimum-Supported-Component-Versions.SW Broker Upgrade"/>+ to version 9.11.0 or later</MadCap:conditionalText>:</p><ol><li>Log into the event broker as sysadmin.</li><li>
                Copy the tar file to the event broker:
                <pre class="Code" MadCap:conditions="Default.NotForPDF">[sysadmin@solace ~]$ <b>scp [&lt;username&gt;@]&lt;ip-addr&gt;:solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz /tmp</b></pre><pre class="Code" xml:space="preserve" MadCap:conditions="Default.OnlyForPDF">[sysadmin@solace ~]$ <b>scp [&lt;username&gt;@]&lt;ip-addr&gt;:solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz /var/tmp</b></pre><p>Where:</p><p><code>&lt;username&gt;</code>, <code>&lt;ip-addr&gt;</code>, and <code>solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</code> correspond to the access information of where the new SolOS software is located.</p></li><li>
                Switch to root user:
                <pre class="Code">[sysadmin@solace ~]$ <b>sudo su -</b></pre><MadCap:snippetBlock src="../../Resources/Snippets/MQTT_Retain_Standalone.flsnp"/></li><li>
                Stop the solace service:
                <pre class="Code" xml:space="preserve">[root@solace ~]# <b>solacectl service stop</b></pre></li><li>Set the <code>timezone</code>:
                <pre class="Code" xml:space="preserve">[root@solace ~]# <b>timedatectl set-timezone &lt;TIMEZONE&gt;</b></pre><p><![CDATA[
                    ]]>To see the list of available timezones, use the <code>timedatectl list-timezones</code> command.</p></li><li>
                Run the upgrade script:
                <pre class="Code" MadCap:conditions="Default.NotForPDF">[root@solace ~]# <b>solacectl upgrade /tmp/solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</b></pre><pre class="Code" MadCap:conditions="Default.OnlyForPDF" xml:space="preserve">[root@solace ~]# <b>solacectl upgrade /var/tmp/solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</b></pre></li><li><p>The output of the upgrade command will indicate whether further steps are required. Follow any additional steps as described in the output of the upgrade command.</p></li><li><p>If you have Solace Geneos Agent installed, set the <code>umask</code> to 0022. The default <code>umask</code> is 0077, which prevents Solace Geneos Agent from reading the system log files. To set the <code>umask</code> to 0022, refer to <MadCap:xref href="../../Additional-Products/SolGeneos-Agent/Installing-SolGeneos-Age.htm#Preparin" MadCap:conditions="Default.NotForPDF">Preparing Software Event Broker for Solace Geneos Agent Installation </MadCap:xref><a href="https://docs.solace.com/Additional-Products/SolGeneos-Agent/Installing-SolGeneos-Age.htm#Preparin" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Preparing Software Event Broker for Solace Geneos Agent Installation</a> and follow steps 3 to 5.</p></li><li>Restart the event broker:
                <pre class="Code">[root@solace ~]# <b>reboot</b></pre><p>When the event broker restarts, it will be running the configuration and message-spool from the previous version.</p></li><li>
                Log into solace and confirm that it is running the new version:
                <pre class="Code">solace&gt; <b>show version</b></pre></li></ol><p>You have completed this procedure.</p></div><div id="redundant"><h2 class="with-rule"><a name="Upgradin"/>Upgrade a Redundant Machine Image Group<MadCap:conditionalText MadCap:conditions="Default.NotForPDF"> from Version <MadCap:variable name="Minimum-Supported-Component-Versions.SW Broker Upgrade"/>+</MadCap:conditionalText></h2><div class="Caution" MadCap:conditions="Default.NotForPDF"><p>Distribution of PubSub+ packaged as a virtual machine broker image will cease as of release 10.8.1 (June 2024). For more details, see the <a href="https://solace.com/support/deprecated-features/">Deprecated Features</a> list.</p><p>Solace recommends that you transition to an alternate method of deploying PubSub+ prior to June 2024.  Containers offer a flexible way to deploy PubSub+ in a number of environments, virtual machines,  and other container platforms. For information about:</p><ul><li><p>Setting up containers, see <MadCap:xref href="../SW-Broker-Set-Up/Containers/Set-Up-Container-Image.htm">Setting Up Container Images</MadCap:xref>.</p></li><li><p>Deploying PubSub+ container images in production environments, see <MadCap:xref href="../SW-Broker-Set-Up/Containers/Deploying-Container-in-Production.htm">Deploying PubSub+ Software Event Brokers in a Production Environment</MadCap:xref>.</p></li></ul></div><p>A Redundant event broker Group can be upgraded in-service. This upgrade preserves the configuration, including Redundancy, the spooled messages while providing service. The event broker upgrade procedure is performed in place. When upgrading, the upgrade procedure is performed in the existing virtual machine instead of creating a new virtual machine for the upgraded event broker. The same upgrade procedure is followed with or without external block devices.</p><p>User accounts (username/passwords) for support/root container users are not transferred during the upgrade procedure and must be manually applied to the new event broker instance.</p><p MadCap:conditions="Default.NotForPDF">The following procedure describes an Enterprise to Enterprise upgrade.</p><p MadCap:conditions="Default.NotForPDF">On non-Enterprise event brokers, the following upgrades are also supported:</p><ul MadCap:conditions="Default.NotForPDF"><li>from Evaluation to Enterprise</li><li>from Standard to Standard</li><li>from Standard to Enterprise</li></ul><p>For the upgrades between other editions, some prompts will have a different edition included and one must take care to change the file name and the docker create command (search for the word ‘enterprise’ and change as needed).</p><p>For the following procedure, we will refer ‘solace-primary’ as Primary Node, ‘solace-backup’ as Backup Node, and ‘solace-monitor’ as Monitoring Node.</p><p class="Note">It is important to reboot the three software event brokers one at time. If the Monitoring and Backup Nodes are offline at the same time, the Primary Node will automatically reboot.</p><p> </p><p>To upgrade a redundant machine image group<MadCap:conditionalText MadCap:conditions="Default.NotForPDF"> from version <MadCap:variable name="Minimum-Supported-Component-Versions.SW Broker Upgrade"/>+ to version
            9.11.0 or later</MadCap:conditionalText>, perform the following steps:</p><ul><li><a href="#Step" class="link-internal">Step 1: Check the redundancy configuration on each node</a></li><li><a href="#Step2" class="link-internal">Step 2: Upgrade the monitoring node</a></li><li><a href="#Step3" class="link-internal">Step 3: Upgrade the backup node</a></li><li><a href="#Step4" class="link-internal">Step 4: Upgrade the primary node</a></li></ul><h3><a name="Step"/>Step 1</h3><p>Check the redundancy configuration on each node.</p><ol><li><p>Log into each node as an admin user.</p></li><li><p>Ensure Redundancy Configuration Status is Enabled and Redundancy Status is Up on each node. On solace-primary the Message Spool Status should be AD-Active, and on solace-backup the Message Spool Status should be AD-Standby:</p><pre class="Code">solace-primary&gt; <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Up
Operating Mode           : Message Routing Node
Switchover Mechanism     : Hostlist
Auto Revert              : No
Redundancy Mode          : Active/Standby
Active-Standby Role      : Primary
Mate Router Name         : solace-backup
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual    Backup Virtual
                               Router             Router
                               ---------------    ---------------
Activity Status                Local Active       Shutdown
Routing Interface              intf0:1            intf0:1
Routing Interface Status       Up                 
VRRP Status                    Initialize         
VRRP Priority                  250                
Message Spool Status           AD-Active          
Priority Reported By Mate      Standby   

solace-backup&gt; show redundancy 
Configuration Status     : Enabled
Redundancy Status        : Up
Operating Mode           : Message Routing Node
Switchover Mechanism     : Hostlist
Auto Revert              : No
Redundancy Mode          : Active/Standby
Active-Standby Role      : Backup
Mate Router Name         : solace-primary
ADB Link To Mate         : Up
ADB Hello To Mate        : Up

                               Primary Virtual    Backup Virtual
                               Router             Router
                               ---------------    ---------------
Activity Status                Shutdown           Mate Active
Routing Interface              intf0:1            intf0:1
Routing Interface Status                          Up
VRRP Status                                       Initialize
VRRP Priority                                     100
Message Spool Status                              AD-Standby
Priority Reported By Mate                         Active

solace-monitor&gt; show redundancy
Configuration Status     : Enabled
Redundancy Status        : Up
Operating Mode           : Monitoring Node
Switchover Mechanism     : Hostlist
Auto Revert              : No
</pre></li></ol><h3><a name="Step2"/>Step 2</h3><p>Perform the following steps on the monitoring node.</p><ol><li><p>Log out and log back into the monitoring node as sysadmin.</p></li><li><p>Copy the tar file to solace-monitor:</p><pre class="Code" MadCap:conditions="Default.NotForPDF">[sysadmin@solace-monitor ~]$ <b>scp [&lt;username&gt;@]&lt;ip-addr&gt;:solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz /tmp</b></pre><pre class="Code" xml:space="preserve" MadCap:conditions="Default.OnlyForPDF">[sysadmin@solace-monitor ~]$ <b>scp [&lt;username&gt;@]&lt;ip-addr&gt;:solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz /var/tmp</b></pre><p>Where:</p><p><code>&lt;username&gt;</code>, <code>&lt;ip-addr&gt;</code>, and <code>solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</code> correspond to the access information of where the new SolOS software is located.</p></li><li><p>Switch to root user:</p><pre class="Code" xml:space="preserve">[sysadmin@solace-monitor ~]$ <b>sudo su -</b></pre></li><li><p>Stop the solace service:</p><pre class="Code" xml:space="preserve">[root@solace-monitor ~]# <b>solacectl service stop</b></pre></li><li>Set the <code>timezone</code>:
                <pre class="Code" xml:space="preserve">[root@solace ~]# <b>timedatectl set-timezone &lt;TIMEZONE&gt;</b></pre><p><![CDATA[
                    ]]>To see the list of available timezones, use the <code>timedatectl list-timezones</code> command.</p></li><li><p>Run the upgrade script.</p><pre class="Code" xml:space="preserve" MadCap:conditions="Default.NotForPDF">[root@solace-monitor ~]# <b>solacectl upgrade /tmp/solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</b></pre><pre class="Code" xml:space="preserve" MadCap:conditions="Default.OnlyForPDF">[root@solace-monitor ~]# <b>solacectl upgrade /var/tmp/solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</b></pre></li><li><p>The output of the upgrade command will indicate whether further steps are required. Follow any additional steps as described in the output of the upgrade command.</p></li><li><p>If you have Solace Geneos Agent installed, set the <code>umask</code> to 0022. The default <code>umask</code> is 0077, which prevents Solace Geneos Agent from reading the system log files. To set the <code>umask</code> to 0022, refer to <MadCap:xref href="../../Additional-Products/SolGeneos-Agent/Installing-SolGeneos-Age.htm#Preparin" MadCap:conditions="Default.NotForPDF">Preparing Software Event Broker for Solace Geneos Agent Installation</MadCap:xref><a href="https://docs.solace.com/Additional-Products/SolGeneos-Agent/Installing-SolGeneos-Age.htm#Preparin" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Preparing Software Event Broker for Solace Geneos Agent Installation</a> and follow steps 3 to 5.</p></li><li><p>Restart solace-monitor:</p><pre class="Code" xml:space="preserve">[root@solace-monitor ~]# <b>reboot</b></pre><p>When solace-monitor restarts, it will be running the configuration  from the previous version.</p></li><li><p>Log into solace-monitor and confirm that it is running the new version:</p><pre class="Code">solace-monitor&gt; <b>show version</b></pre></li><li><p>Ensure Redundancy Status is Up on the monitoring node:</p><pre class="Code">solace-monitor&gt; <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Up
</pre></li></ol><h3><a name="Step3"/>Step 3</h3><p>Perform the following steps on the backup node.</p><ol><li><p>Log into the backup node as an admin user.</p></li><li><p>Ensure Redundancy Configuration Status is Enabled and Redundancy Status is Up on the backup node:</p><pre class="Code">solace-backup&gt; <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Up
</pre></li><li><p>If using Config-sync, ensure that it is in sync.</p><pre class="Code" xml:space="preserve">solace-backup&gt; <b>show config-sync</b>
Admin Status            : Enabled
Oper Status             : Up
</pre></li><li><p>Log out and log back into the backup node as sysadmin.</p></li><li><p>Copy the tar file to solace-backup:</p><pre class="Code" MadCap:conditions="Default.NotForPDF">[sysadmin@solace-backup ~]$ <b>scp [&lt;username&gt;@]&lt;ip-addr&gt;:solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz /tmp</b></pre><pre class="Code" xml:space="preserve" MadCap:conditions="Default.OnlyForPDF">[sysadmin@solace-backup ~]$ <b>scp [&lt;username&gt;@]&lt;ip-addr&gt;:solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz /var/tmp</b></pre><p>Where:</p><p><code>&lt;username&gt;</code>, <code>&lt;ip-addr&gt;</code>, and <code>solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</code> correspond to the access information of where the new SolOS software is located.</p></li><li><p>Switch to root user:</p><pre class="Code" xml:space="preserve">[sysadmin@solace-backup ~]$ <b>sudo su -</b></pre></li><li><MadCap:snippetBlock src="../../Resources/Snippets/MQTT_Retain_Redundant.flsnp"/></li><li><p>Stop the solace service:</p><pre class="Code" xml:space="preserve">[root@solace-backup ~]# <b>solacectl service stop</b></pre></li><li>Set the <code>timezone</code>:
                <pre class="Code" xml:space="preserve">[root@solace ~]# <b>timedatectl set-timezone &lt;TIMEZONE&gt;</b></pre><p>
                    To see the list of available timezones, use the <code>timedatectl list-timezones</code> command. </p></li><li><p>Run the upgrade script:</p><pre class="Code" xml:space="preserve" MadCap:conditions="Default.NotForPDF">[root@solace-backup ~]# <b>solacectl upgrade /tmp/solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</b></pre><pre class="Code" xml:space="preserve" MadCap:conditions="Default.OnlyForPDF">[root@solace-backup ~]# <b>solacectl upgrade /var/tmp/solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</b></pre></li><li><p>The output of the upgrade command will indicate whether further steps are required. Follow any additional steps as described in the output of the upgrade command.</p></li><li><p>If you have Solace Geneos Agent installed, set the <code>umask</code> to 0022. The default <code>umask</code> is 0077, which prevents Solace Geneos Agent from reading the system log files. To set the <code>umask</code> to 0022, refer to <MadCap:xref href="../../Additional-Products/SolGeneos-Agent/Installing-SolGeneos-Age.htm#Preparin" MadCap:conditions="Default.NotForPDF">Preparing Software Event Broker for Solace Geneos Agent Installation </MadCap:xref><a href="https://docs.solace.com/Additional-Products/SolGeneos-Agent/Installing-SolGeneos-Age.htm#Preparin" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Preparing Software Event Broker for Solace Geneos Agent Installation</a> and follow steps 3 to 5.</p></li><li><p>Restart solace-backup.</p><pre class="Code" xml:space="preserve">root@solace-backup ~]# <b>reboot</b></pre><p>When solace-backup restarts, it will be running the configuration and message-spool from the previous version.</p></li><li><p>Log into solace-backup and confirm that it is running the new version:</p><pre class="Code">solace-backup&gt; <b>show version</b></pre></li><li><p>Ensure Redundancy Status is Up on solace backup node:</p><pre class="Code" xml:space="preserve">solace-backup&gt; <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Up</pre></li><li><p>If using Config-sync, ensure backup node is in sync:</p><pre class="Code" xml:space="preserve">
solace-backup&gt; <b>show config-sync</b>
Admin Status            : Enabled
Oper Status             : Up
</pre></li><li><p>If the backup node provides AD service, ensure the Message Spool Status is AD-Standby:</p><pre class="Code" xml:space="preserve">solace-backup&gt; <b>show redundancy</b> 
Message Spool Status             AD-Standby
</pre></li><li><p>Log into the primary node as an admin user.</p></li><li><p>Release activity from the primary node to the backup.</p><pre class="Code" xml:space="preserve">solace-primary&gt; <b>enable</b>
solace-primary# <b>configure</b>
solace-primary(configure)# <b>redundancy release-activity</b>
</pre></li><li><p>On the primary, ensure Redundancy Configuration Status is Enabled-Released and Redundancy Status is Down.</p><pre class="Code" xml:space="preserve">solace-primary&gt; <b>show redundancy</b> 
Configuration Status     : Enabled-Released
Redundancy Status        : Down
</pre></li><li><p>On the backup, ensure Redundancy Configuration Status is Enabled, Redundancy Status is Down and the Activity Status on the Backup Virtual Router is Local Active.</p><pre class="Code" xml:space="preserve">solace-backup&gt; <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Down
                                  Primary Virtual    Backup Virtual
                                  Router             Router
                                  ---------------    ---------------
Activity Status                   Shutdown           Local Active
</pre></li></ol><h3><a name="Step4"/>Step 4</h3><p>Perform the following steps on the primary node.</p><ol><li><p>Log out and log back into the primary node as sysadmin.</p></li><li><p>Copy the tar file to solace-primary:</p><pre class="Code" MadCap:conditions="Default.NotForPDF">[sysadmin@solace-primary ~]$ <b>scp [&lt;username&gt;@]&lt;ip-addr&gt;:solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz /tmp</b></pre><pre class="Code" xml:space="preserve" MadCap:conditions="Default.OnlyForPDF">[sysadmin@solace-primary ~]$ <b>scp [&lt;username&gt;@]&lt;ip-addr&gt;:solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz /var/tmp</b></pre><p>Where:</p><p><code>&lt;username&gt;</code>, <code>&lt;ip-addr&gt;</code>, and <code>solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</code> correspond to the access information of where the new SolOS software is located.</p></li><li><p>Switch to root user:</p><pre class="Code" xml:space="preserve">[sysadmin@solace-primary ~]$ <b>sudo su -</b></pre></li><li><MadCap:snippetBlock src="../../Resources/Snippets/MQTT_Retain_Redundant.flsnp"/></li><li><p>Stop the solace service:</p><pre class="Code" xml:space="preserve">[root@solace-primary ~]# <b>solacectl service stop</b></pre></li><li>Set the <code>timezone</code>:
                <pre class="Code" xml:space="preserve">[root@solace ~]# <b>timedatectl set-timezone &lt;TIMEZONE&gt;</b></pre><p>To see the list of available timezones, use the <code>timedatectl list-timezones</code> command. </p></li><li><p>Run the upgrade script.</p><pre class="Code" xml:space="preserve" MadCap:conditions="Default.NotForPDF">[root@solace-primary ~]# <b>solacectl upgrade /tmp/solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</b></pre><pre class="Code" xml:space="preserve" MadCap:conditions="Default.OnlyForPDF">[root@solace-primary ~]# <b>solacectl upgrade /var/tmp/solace-pubsub-enterprise-&lt;version&gt;-upgrade.tar.gz</b></pre></li><li><p>The output of the <code>upgrade</code> command will indicate whether further steps are required. Follow any additional steps as described in the output of the <code>upgrade</code> command.</p></li><li><p>If you have Solace Geneos Agent installed, set the <code>umask</code> to 0022. The default <code>umask</code> is 0077, which prevents Solace Geneos Agent from reading the system log files. To set the <code>umask</code> to 0022, refer to <MadCap:xref href="../../Additional-Products/SolGeneos-Agent/Installing-SolGeneos-Age.htm#Preparin" MadCap:conditions="Default.NotForPDF">Preparing Software Event Broker for Solace Geneos Agent Installation</MadCap:xref><a href="https://docs.solace.com/Additional-Products/SolGeneos-Agent/Installing-SolGeneos-Age.htm#Preparin" target="_blank" class="link-offsite" MadCap:conditions="Default.OnlyForPDF">Preparing Software Event Broker for Solace Geneos Agent Installation</a> and follow steps 3 to 5.</p></li><li><p>Restart solace-primary.</p><pre class="Code" xml:space="preserve">[root@solace-primary ~]# <b>reboot</b></pre><p>When solace-primary restarts, it will be running the configuration and message-spool from the previous version.</p></li><li><p>Log into solace-primary and confirm that it is running the new version:</p><pre class="Code">solace-primary &gt; <b>show version</b></pre></li><li><p>No release activity from the primary node:</p><pre class="Code" xml:space="preserve">solace-primary&gt; <b>enable</b>
solace-primary# <b>configure</b>
solace-primary(configure)# <b>no redundancy release-activity</b></pre></li><li><p>Ensure Redundancy Status is Up on solace-primary:</p><pre class="Code">solace-primary&gt; <b>show redundancy</b> 
Configuration Status     : Enabled
Redundancy Status        : Up
</pre></li><li><p>If using Config-sync, ensure that it is in sync:</p><pre class="Code">solace-primary&gt; <b>show config-sync</b>
Admin Status            : Enabled
Oper Status             : Up
</pre></li><li><p>If the node provides AD service, ensure the Message Spool Status is AD-Standby:</p><pre class="Code">solace-primary&gt; <b>show redundancy</b> 
Message Spool Status             AD-Standby
</pre></li></ol><p>You have completed this procedure.</p><p class="Note">The backup is now active and the primary is standby.</p></div>   <script type="text/javascript" src="../../Resources/Scripts/Tabbed_Content.js"/></body>
</html>
