<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1>Event Broker File Management</h1>
    <p>All event broker files that may need to be added or removed from the Solace PubSub+ event broker exist under the root “/” directory. You can use the Solace CLI to perform administrative tasks in the root directory.</p>
    <p>The relevant root directory structure is shown below, along with the names of applicable subdirectories  and a brief description of what files they contain. All other subdirectories in the root directory are not currently in use.</p>
    <p class="GraphicCaption">Root Directory Structure</p>
    <p class="GraphicCaption">
      <img src="../Resources/Images/Admin/Jail Directory Structure2.png" alt="Illustration depicting the concepts described in the surrounding text."/>
    </p>
    <p class="Note">The debug log record files contained in the directory <code>/logs</code> are for use by Solace support staff only. </p>
    <h2 class="with-rule"><a name="Manage_Router_Files_Chg_Dirs"/>Changing Directories</h2>
    <p>To change the present working directory, enter the following User EXEC command:</p>
    <p class="Code">solace&gt; cd [&lt;directory&gt;]</p>
    <p><u>Where</u>:</p>
    <p><code>directory</code> is the directory to change to. If no directory is specified, the root directory is assumed.</p>
    <h2 class="with-rule"><a name="Manage_Router_Files_Copy"/>Copying Files</h2>
    <p>You can use the <b>copy</b> Privileged EXEC command to:</p>
    <ul>
      <li>copy the current configuration locally within the event broker</li>
      <li>backup a configuration database file to a SFTP or SCP server from the<br/><code>/configs</code> subdirectory on an event broker</li>
      <li>restore a configuration database file from a SFTP or SCP server to the<br/><code>/configs</code> subdirectory on an event broker</li>
      <li>download new Solace PubSub+ software from a SFTP or SCP server to the <code>/loads</code> subdirectory on an event broker for software upgrade</li>
    </ul>
    <p>Refer to <MadCap:xref MadCap:unresolvedLink="import-link:system_and_software_maintenance_tasks_3138406956_80966" href="Managing-Event-Broker-Configurations.htm">Managing Event Broker Configurations</MadCap:xref>  for more information on the <code>copy</code> Privileged EXEC command and its use.</p>
    <p>To copy configuration files to and from the event broker, enter the following Privileged EXEC command: </p>
    <p class="Code">solace# copy &lt;source&gt; &lt;destination&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;source&gt;</code> is a string indicating the source file to copy. Valid formats and syntax are described below.</p>
    <p><code>&lt;destination&gt;</code> is the location in the event broker root directory to put the configuration copy. Valid formats and syntax are listed below.</p>
    <table class="TableStyle-Table_Num" style="caption-side: top;mc-table-style: url('../Resources/TableStyles/Table_Num.css');width: 95%;" cellspacing="0">
      <caption valign="top" style="padding-bottom: 3pt;">
        <p class="TblCaption">Valid File Name Formats for copy Privileged EXEC Command</p>
      </caption>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Format</th>
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Syntax</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">current-config</p>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">current-config</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The current persistent-state of the event broker. </p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">SFTP</p>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">sftp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt;</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">A remotely available file accessible through the SFTP protocol. In a copy operation only one of either &lt;source&gt; or &lt;destination&gt; may be specified as an SFTP file, but not both.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">SCP</p>
          </td>
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">scp://[&lt;username&gt;@]&lt;ip-addr&gt;/&lt;remote-pathname&gt;</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">A remotely available file accessible through the SCP protocol. In a copy operation only one of either &lt;source&gt; or &lt;destination&gt; may be specified as an SCP file, but not both.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p class="Tbl_Body">pathname</p>
          </td>
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p class="Tbl_Body">[/][directory/]/ filename</p>
          </td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p class="Tbl_Body">Absolute or relative name of a regular file stored in the root directory. Internally, an absolute name is always relative to the root directory, while relative names are always evaluated relative to the present working directory (displayable through the <b>pwd</b> User EXEC command). </p>
          </td>
        </tr>
      </tbody>
    </table>
    <h2 class="with-rule"><a name="Manage_Router_Files_Delete"/>Deleting Files</h2>
    <p>To delete a file from the event broker, enter the following Privileged EXEC command:</p>
    <p class="Code">solace# delete &lt;file&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;file&gt;</code> is the name of the local file to delete which may include a pathname. Only &lt;local-pathname&gt; formats may be used. ‘*’ and ‘?’ characters can be used to match multiple files. </p>
    <h2 class="with-rule"><a name="Manage_Router_Files_Display"/>Displaying Text File Contents</h2>
    <p>To display the contents of a text file in a directory, enter the following User EXEC command:</p>
    <p class="Code">solace&gt; more &lt;pattern&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;pattern&gt;</code> is the name of the text file to display. ‘*’ and ‘?’ characters can be used to match multiple text files. If not specified, all the text files in the present working directory are displayed.</p>
    <p class="Note">Binary files cannot be displayed. </p>
    <h2 class="with-rule"><a name="Manage_Router_Files_Dis_Present"/>Displaying the Present Working Directory</h2>
    <p>To display the present working directory (pwd), enter the following User EXEC command:</p>
    <p class="Code">solace&gt; pwd</p>
    <h2 class="with-rule"><a name="Manage_Router_Files_Listing"/>Listing Directory Contents</h2>
    <p>To list the contents of a directory, enter the following User EXEC command:</p>
    <p class="Code">solace&gt; dir [&lt;pattern&gt;] </p>
    <p><u>Where</u>:</p>
    <p><code>&lt;pattern&gt;</code> is the name of the file or directory to display. ‘*’ and ‘?’ characters can be used to match multiple files. If not specified, all the files in the present working directory are displayed.</p>
    <h2 class="with-rule"><a name="Manage_Router_Files_Rename"/>Renaming Files</h2>
    <p>To rename an event broker file within one of the event broker's root subdirectories, enter the following Privileged EXEC command:</p>
    <p class="Code">solace# rename &lt;old&gt; &lt;new&gt;</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;old&gt;</code> is the current name of the pathname file to be renamed. Only &lt;local-pathname&gt; formats may be used.</p>
    <p><code>&lt;new&gt;</code> is the new name for the pathname file specified by <code>&lt;old&gt;</code>. Only &lt;local-pathname&gt; formats may be used.</p>
  </body>
</html>
