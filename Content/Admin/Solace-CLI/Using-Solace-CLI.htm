<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1>Solace CLI</h1>
    <p>The Solace Command Line Interface (CLI) is a text-based interface for configuring and monitoring Solace event brokers. It allows a user to perform event broker administration, configuration and provisioning, and network troubleshooting tasks. The CLI automatically starts after the event broker powers up.</p>
    <p>The CLI supports command completion, so you do not need to enter the entire name of a command or option. If you enter part of a command then press the <b>Tab</b> key, the CLI lists the options you can enter at that point in the command string. As long as you enter enough characters of the command or option name to avoid ambiguity with other commands or options, the CLI can understand what you are typing and complete it.</p>
    <p>Reference guides to the Solace CLI can be found in these locations: <MadCap:xref href="../../Admin-Ref/CLI-Reference/APPL_CLI_Commands.html">Appliance CLI Commands</MadCap:xref> and <MadCap:xref href="../../Admin-Ref/CLI-Reference/VMR_CLI_Commands.html">Software Event Broker CLI Commands</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="using_the_solace_router_cli_2293357723_208127"/>Logging In to the CLI</h2>
    <p>The method for accessing the CLI is different for appliances and software brokers.</p>
    <h4>Accessing the  CLI on an Appliance</h4>
    <p>On the appliance, you can log in to the CLI through either management console or Secure Shell (SSH) connections.</p>
    <p>At initial login to the appliance without an IP address, you must set up a management console (see <MadCap:xref href="../../Appliance/Appliance-Set-Up/Connecting-M-Consoles.htm">Connecting Management Consoles</MadCap:xref>), and connect it directly to the event broker applianceâ€™s RS-232 serial console port located on the rear panel of the appliance using the provided cable.</p>
    <p>Once an IP address is assigned, you can log in to the CLI through SSH. To log in through SSH, SSH version 2.0 client software must be installed on your host computer. Solace PubSub+ event brokers use Keyboard/Interactive authentication for SSHv2. Ensure that you enable Keyboard/Interactive authentication on the SSH client you are using with the Solace PubSub+ appliance.</p>
    <h4>Accessing the  CLI on a Software Event Broker</h4>
    <p>To log in to the CLI on a machine image, you can connect via ssh on port 2222 (assuming you are using the <a href="../../Software-Broker/SW-Broker-Configuration-Defaults.htm" class="link-internal">default ports</a>). For example:</p>
    <pre class="Code">ssh admin@localhost -p 2222</pre>
    <p>To access the CLI on a container, either connect via ssh as above or run the  <code>cli</code> command in the container. For example, run the following Docker command:</p>
    <pre class="Code">&gt;docker exec -it &lt;container_name&gt; /usr/sw/loads/currentload/bin/cli -A</pre>
    <h4>Authenticating to the CLI</h4>
    <p>When a user successfully logs in or logs out, or fails to authenticate for a CLI, SEMP, shell, scp, or sftp session to the event broker, an authentication event is written to the event log.</p>
    <p>There is a limit of eight active and concurrent CLI user sessions per PubSub+ event broker, not including the always-available serial console port that is accessible at the rear of a PubSub+ appliance. This limit does not apply to File Transfer user accounts.</p>
    <div class="Note">
      <p>If there are no free CLI sessions when you attempt to log in, you will be blocked because no other SSH clients can log in to the SSH server in this situation. The login attempt fails and the error message <code>Max CLI sessions are already active</code> is returned. If this happens, use the SSH command parameter <code>force</code> to override and disconnect the most idle CLI user session (for example, <code>ssh soladmin@solace1 force</code>). However, using the <code>force</code> option only disconnects the most idle user. You then have to log in a second time without the <code>force</code> option to occupy the free CLI user session. Also, using this option does not force any user session out if there are free CLI sessions already available. </p>
      <p>For PubSub+ software event broker Machine and Cloud Images starting from release 8.5.0, the applicable example SSH commands are first, <code>ssh -p 2222 soladmin@solace1 force</code>, and then <code>ssh -p 2222 soladmin@solace1</code>.</p>
    </div>
    <p>At initial login, general access to the Solace PubSub+ event broker is established when the following prompt appears on your computer screen:</p>
    <pre>login&gt;</pre>
    <p>Enter a valid CLI user account name:</p>
    <pre>login as: &lt;assigned_user_name&gt;</pre>
    <p>When you are prompted for a password, enter the assigned password for the user account:</p>
    <pre>Password: &lt;assigned_password&gt;</pre>
    <p>Once CLI connectivity to the event broker is established, a CLI banner and prompt appears:</p>
    <pre>System Software. SolOS-TR Version &lt;version number&gt;
Copyright 2004-20&lt;xx&gt; Solace Corporation. All rights reserved.
solace&gt;</pre>
    <p>At this prompt (&gt;), you are at the User EXEC level of the CLI command structure.</p>
    <p class="Note">If you are logging in to a newly deployed event broker, and CLI user accounts have not yet been provisioned, you can log in to the event broker using the default admin CLI user account name (<code>admin</code>) and password (<code>admin</code>). For security reasons, Solace recommends that a system administrator change the default password for the admin user account once the initial Solace PubSub+ software configuration is completed. For information on managing CLI user accounts, see <MadCap:xref href="../Configuring-Mgmt-and-Shell-Users.htm">Managing Management User Authentication/Authorization</MadCap:xref>.</p>
    <h3><a name="using_the_solace_router_cli_2293357723_209625"/>Setting CLI Paging Output</h3>
    <p>By default, the CLI limits the number of lines that are displayed for show commands according to your current screen size.</p>
    <p>To set a specific number of lines to use for paging output, enter the following User EXEC command:</p>
    <pre>solace&gt; paging [size &lt;size&gt;]</pre>
    <p><u>Where</u>:</p>
    <p><code>size &lt;size&gt;</code> specifies the number of lines to limit the output page size to. Valid values are 1 through 2147483647.</p>
    <p>The no version of this command, <code>no paging</code>, disables paging.</p>
    <h3><a name="using_the_solace_router_cli_2293357723_219773"/>Setting a CLI Inactivity Timeout</h3>
    <p>The CLI has an inactivity timer which, by default, automatically logs out inactive CLI users if no commands are entered for five minutes. </p>
    <p>To change the inactivity timeout value for CLI user sessions on an event broker, enter the following commands:</p>
    <pre>solace&gt; enable
solace# configure
solace(configure)# console timeout &lt;idle-timeout&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;idle-timeout&gt;</code> is an integer value representing the inactivity timeout in minutes. The valid range is 0 to 43200. To disable the inactivity timer, enter 0.</p>
    <MadCap:snippetBlock src="../../Resources/Snippets/Not-Config-Synced.flsnp"/>
    <h4>Changing CLI Inactivity Timeout for Single Sessions</h4>
    <p>You can change the CLI inactivity timer just for the current CLI user session instead of globally. The per-session CLI inactivity timeout setting overrides the global timeout setting, but it is not persistent across all CLI user sessions on the event broker.</p>
    <p>To change the CLI inactivity timeout setting for your current CLI user session on the Solace PubSub+ event broker, enter the following commands:</p>
    <pre>solace&gt; enable
solace# session timeout &lt;idle-timeout&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;idle-timeout&gt;</code> is the integer value representing the inactivity timeout value in minutes. The valid range is 0 to 43200. To disable the inactivity timer, enter 0. </p>
    <h4>Displaying CLI Inactivity Timeout Settings</h4>
    <p>To show the global inactivity timeout configuration for all CLI user sessions on the Solace PubSub+ event broker, enter the following User EXEC command:</p>
    <pre>solace&gt; show console</pre>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <pre>solace&gt; show console
Inactivity timeout : &lt;disabled&gt;
Baud Rate          : 115200</pre>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <p>To show the inactivity timeout configuration for all current CLI user sessions on the Solace PubSub+ event broker, enter the following User EXEC command:</p>
    <pre>solace&gt; show session</pre>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <pre class="Code">solace&gt; show session
 Session User    From             Login               Idle            Timeout
-------- ------- ---------------- ------------------- --------------- --------
     * 1 solace1 192.168.1.35     2008-11-28 16:18:27 00:00:00        90
       2 solace2 192.168.1.246    2008-11-28 16:21:25 00:00:16        0
* indicates current session</pre>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <h3><a name="using_the_solace_router_cli_2293357723_246995"/>Adding CLI Login Banner Text</h3>
    <p>An administrator can configure a custom text banner to be displayed when CLI users and File Transfer users log in to a Solace PubSub+ event broker through either serial management console or SSH connections. The login banner text will be displayed before the user is prompted for a password. By default, no login banner is used.</p>
    <p>The configured login banner text is saved so that it will continue to be used if the Solace PubSub+ event broker's version is upgraded. If the Solace PubSub+ event broker is upgraded and the banner text is modified, then the Solace PubSub+ event broker is subsequently downgraded to the previous software version, and the banner text used for the older version is used.</p>
    <p>When Solace PubSub+ event brokers are deployed as high-availability (HA) redundant pairs, the login banner text is automatically synchronized between mates when the Configâ€‘Sync facility is enabled (see <MadCap:xref href="../../Features/Config-Sync/Configuring-Config-Sync.htm">Managing Config-Sync</MadCap:xref>).</p>
    <p>To configure a login banner text, enter the following commands:</p>
    <pre>solace&gt; enable
solace# configure
solace(configure)# console
solace(configure/console)# login-banner [{text &lt;banner-text&gt;} | {file &lt;file-name&gt;}]</pre>
    <p><u>Where</u>:</p>
    <p><code>text &lt;banner-text&gt;</code> directly specifies the banner text to display when a CLI or File Transfer user logs in. <code>&lt;banner-text</code>&gt; is the banner text (up to 2,048 characters in length) to display. Standard CLI escape characters are accepted (see <MadCap:xref href="#using_the_solace_router_cli_2293357723_224642">Inputting Non-Printable Characters as CLI Parameters</MadCap:xref>). Use "<code>\n</code>" to insert new lines on the CLI (for example, the following banner text would display on three separate lines in the CLI: "<code>Warning!\nProperty of Company X.\nAny unauthorized access is strictly prohibited.</code>").</p>
    <p><code>file &lt;file-name&gt;</code> specifies to use a file that provides the banner text to display. &lt;<code>file-name</code>&gt; is a string text (up to 255 characters in length) that provides the name of the file to load from the <code>jail</code> file system directory (for example, <code>jail/corporateLoginBannerFile</code>).</p>
    <p>The no version of this command, <code>no login-banner</code>, clears the login banner.</p>
    <MadCap:snippetBlock src="../../Resources/Snippets/Not-Config-Synced.flsnp"/>
    <h4>Displaying the CLI Login Banner Text</h4>
    <p>To show any custom text banner that is displayed when CLI users and File Transfer users log in to a Solace PubSub+ event broker, enter the following User EXEC command:</p>
    <pre class="Code">solace&gt; show console login-banner</pre>
    <h2 class="with-rule"><a name="using_the_solace_router_cli_2293357723_208114"/>Command Levels</h2>
    <p>The CLI uses the following types of commands:</p>
    <ul>
      <li>EXEC commands</li>
      <li>CONFIG commands</li>
    </ul>
    <h3><a name="using_the_solace_router_cli_2293357723_204267"/>EXEC Commands</h3>
    <p>There are three levels of executive (EXEC) commands:</p>
    <ul>
      <li>User EXECâ€”Lets you view basic system information and perform simple tasks such as pings, Show commands, and verify connectivity. You cannot make any changes to the event broker configuration.       <p>User EXEC level commands are at the top of the CLI hierarchy. These are the first commands that you have access to when you connect to the device through the CLI.</p><p>To make event broker configuration change, you must move to other levels of the CLI hierarchy. You can enter the User EXEC level command <b>enable</b> to go to the Privileged EXEC level, from which you can reach other more powerful configuration command levels. For more information, see <MadCap:xref href="#using_the_solace_router_cli_2293357723_208383">Reaching Other CLI Command Levels</MadCap:xref>.</p></li>
      <li>Privileged EXECâ€”Lets you use the same commands as those at the User EXEC level plus configuration commands that do not require saving the changes to the system-config file. The Privileged EXEC level commands primarily enable you to transfer and store software images and configuration files between the network and the event broker and to review the configuration.        <p>From the Privileged EXEC level, you can enter the <b>admin</b> command to reach the Admin EXEC level, or you can enter the <b>configure</b> command to reach the Global CONFIG level.</p></li>
      <li>Admin EXECâ€”Lets you use the same commands as those at the User EXEC and Privileged EXEC level plus commands that are serviceâ€‘effecting for configured entities (for example, disconnecting clients or deleting spooled messages). Again, these commands do not require saving the changes to the system-config file.</li>
    </ul>
    <p class="Tip">For show commands, which are common User EXEC-level commands, you can also use wildcards in name of objects that you want to view information for instead of entering the objectÊ¼s full name. For example:</p>
    <ul>
      <li>You can enter part of an objectÊ¼s name with the wildcard character * to represent zero or more arbitrary characters of the name ( "<code>show queue cx* message-vpn default</code>" returns  "<code>queue cx134</code>" and "<code>cx142</code>"). Entering only the wildcard character * for the name displays all Message VPNs.</li>
      <li>You can also enter the wildcard character ? to represent one arbitrary character of the name ( "<code>show smrp subscriptions message-vpn default topic #M?AST/&gt;</code>" returns "<code>#MCAST/&gt;</code>").</li>
    </ul>
    <h3><a name="using_the_solace_router_cli_2293357723_108905"/>CONFIG Commands</h3>
    <p>Configuration (CONFIG) commands let you make configuration changes to the Solace PubSub+ event broker. Each configuration command takes effect immediately after it is entered and is saved to the system-config file maintained in the internal event broker database. This allows configuration changes to remain in effect after an event broker restart.</p>
    <p>The Global CONFIG command level is the first level you enter into from the Privileged EXEC level. The Global CONFIG level allows you to globally apply or modify parameters on the event broker.</p>
    <p>For example, within the Global CONFIG level you can:</p>
    <ul>
      <li>apply features globally to an event broker</li>
      <li>configure, enable, or disable a feature or function</li>
      <li>access all CONFIG modes</li>
    </ul>
    <p>To reach the Global CONFIG level, enter <b>configure </b>at the privileged EXEC level. </p>
    <p><u>Example</u>:</p>
    <pre class="Code">solace# configure
solace(configure)#</pre>
    <p>The CLI is now at the Global CONFIG level. From this level, you can enter into one of many other CONFIG subâ€‘levels, depending on what it is you want to configure on a Solace PubSub+ event broker (for example, Interface CONFIG or Client Username CONFIG).</p>
    <h2 class="with-rule"><a name="using_the_solace_router_cli_2293357723_208398"/>Identifying Command Context</h2>
    <p>Command levels set a context for the CLI, which can help you to:</p>
    <ul>
      <li>determine where you are in CONFIG command levels</li>
      <li>determine what you are configuring</li>
      <li>go to other CLI command levels</li>
    </ul>
    <p>Each command level has its own distinct CLI command prompt to let you know which level you are in at any given point and prevent you from making configuration mistakes that could adversely affect the operation of Solace PubSub+ event brokers. </p>
    <p>As shown in the following table, the CLI command prompt that follows the event broker hostname (<code>solace</code> for this example and most examples throughout the Solace customer documentation) changes at each level of the command structure to easily identify the current level.</p>
    <table class="TableStyle-Table_Num" style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');width: 100%;" cellspacing="0">
      <caption valign="top" style="padding-bottom: 3pt;">
        <p class="TblCaption">Command Context</p>
      </caption>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Command Level</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">CLI Prompt</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">User EXEC</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_BodyCode">solace&gt;</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Privileged EXEC </p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_BodyCode">solace#</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Admin EXEC Level</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_BodyCode">solace(admin)#</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p class="Tbl_Body">Global CONFIG</p>
          </td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p class="Tbl_BodyCode">solace(configure)#</p>
          </td>
        </tr>
      </tbody>
    </table>
    <h3><a name="using_the_solace_router_cli_2293357723_208383"/>Reaching Other CLI Command Levels</h3>
    <p>To make changes to the event broker configuration, you must move from the User EXEC level of the CLI command structure (the level that you are at after establishing CLI connectivity) and go to other levels of the CLI hierarchy. The relationship of the primary CLI command levels is shown below.</p>
    <h4>CLI Command Level Relationship</h4>
    <p class="GraphicCaption">
      <img src="../../Resources/Images/Admin/Command_Structure.png" alt=""/>
    </p>
    <p>To reach Privileged EXEC level commands from the User EXEC level, enter the following commands:</p>
    <pre>solace&gt; <b>enable</b>
solace#</pre>
    <p>From the Privileged EXEC level, you can reach the Admin EXEC or Global CONFIG levels.</p>
    <ul>
      <li>To reach Admin EXEC level commands from the Privileged EXEC level, enter the following commands:
        <pre>solace# <b>admin</b>
solace(admin)#</pre></li>
    </ul>
    <ul>
      <li>To reach Global CONFIG level commands from the Privileged EXEC level, enter the following commands:
        <pre>solace# <b>configure</b>
solace(configure)#</pre><p>From the Global CONFIG level, you can reach feature-specific levels of the CONFIG command structure.</p><p><u>Example</u>:</p><pre>solace(configure)# service
solace(configure/service)#</pre><p>The CLI moves to the Service CONFIG level.</p></li>
    </ul>
    <h4>Moving Back Command Levels</h4>
    <p>To move back command levels, you can use the following commands:</p>
    <ul>
      <li>Endâ€”Lets you exit the current CONFIG command level of the CLI and return to the Privileged EXEC level.        <p><u>Example</u>: </p><pre>solace(configure/message-spool)# end
solace#</pre></li>
      <li>Exitâ€”Lets you exit the current command level of the CLI and return to the previous level. At the User EXEC level, the exit command will result in an exit from the CLI.       <p><u>Example</u>:</p><pre>solace(configure/client-profile)# exit
solace(configure)#</pre></li>
      <li>Homeâ€”Lets you exit the current command level of the CLI and return to the User EXEC level.
        <p><u>Example</u>:</p><pre>solace(configure/routing)# home
solace&gt;</pre></li>
    </ul>
    <h2 class="with-rule"><a name="using_the_solace_router_cli_2293357723_114603"/>CLI Command Structure</h2>
    <p>Many CLI commands require textual or numeral input as part of the command. These fields may be required or optional, depending on how the information is bracketed. For clarity, a few CLI command examples are provided below.</p>
    <p style="font-weight: bold;">
      <span style="font-weight: normal; text-decoration: underline;">Example 1</span>
    </p>
    <pre>logging debug {&lt;subsystemId&gt; | all} [level &lt;level&gt;] [mask &lt;mask&gt;]</pre>
    <p>When an item is bracketed with &lt; &gt; symbols, the information requested is a variable and is required.</p>
    <p>When an item is enclosed with [ ] symbols, the information requested is optional.</p>
    <p>When an item is enclosed by { } symbols, the information requested is a variable of which only one is required.</p>
    <p>When an item is not enclosed by &lt; &gt;, [ ], or { } symbols, the item is a required keyword.</p>
    <p>When two or more options are separated by a | symbol, you must enter one of the options as part of the command.</p>
    <p>To get a quick display of available options at a CLI level or for the next option in a command string, enter a single question mark (<b>?</b>) at the prompt, or press the <b>Tab</b> key.</p>
    <p style="font-weight: bold;">
      <span style="font-weight: normal; text-decoration: underline;">Example 2</span>
    </p>
    <p>To view all available commands at the user EXEC level, enter a double question mark (??) at that level:</p>
    <pre>solace&gt; <b>??</b></pre>
    <pre>
 Commands available in the current mode:
            enable - Use this command to enter the Privileged EXEC level of
                     the CLI to perform appliance configuration.
 
   Global commands available in any mode:
       [no] alarm-display          - Use this command to enable the display
                                     of 3200 Series appliance system alarms in
                                     the current CLI session on a
                                     session-by-session basis. The no version
                                     disables the displaying of appliance system
                                     alarms in the current CLI session.
            cd                     - Use this command to change the current
                                     working directory on the appliance.
   .  .  .
                                    
            tree                   - Use this command to show the CLI command
                                     tree, starting from the current mode.
 
   Complete help for a command can be displayed by entering:
         "&lt;command&gt; ?"
 
   Output of any command can be redirected to overwrite a file using '&gt;':
         "show version &gt; version.txt"
 
   Output of any command can be redirected to append to a file using '&gt;&gt;':
         "show version &gt;&gt; version.txt"</pre>
    <p class="Note">You also can enter a question mark (?) with an individual command, to see all available options or to check context.</p>
    <p style="font-weight: bold;">
      <span style="font-weight: normal; text-decoration: underline;">Example 3</span>
    </p>
    <p>To view possible <b>show</b> command options, enter the following User EXEC command:</p>
    <pre>solace&gt; <b>show ?</b></pre>
    <pre class="Code" xml:space="preserve">
   COMMAND:
       show [acl-profile ... | authentication ... | backup | bridge ... |
             cache-cluster ... | cache-instance ... | client ... |
             client-certificate-authority ... | client-profile ... |
             client-username ... | clock ... | cluster ... |
             compression | config-sync ... | console ... | cspf |
             current-config | debug ... | deferred-config |
             distributed-cache ... | domain-certificate-authority ... |
             environment | home-cache-cluster ... | hostname |
             interface ... | ip | jndi | kerberos ... | ldap-profile ... |
             log | logging | memory | message-spool ... | message-vpn ... |
             mqtt | oauth-profile ... | paging | process ... |
             product-key | queue ... | queue-template ... |
             radius-profile ... | redundancy ... | replay-log ... |
             replicated-topic ... | replication ... | router-name |
             routing | semp-session ... | sequenced-topic ... | service ... |
             session | smrp | ssl |
             standard-domain-certificate-authority ... | stats |
             storage-element ... | syslog ... | system ... |
             topic-endpoint ... | topic-endpoint-template ... |
             transaction ... | username ... | version | web-manager]

   DESCRIPTION:
       Use this command to display a variety of configuration and statistical
       information about the router.

   MINIMUM REQUIRED SCOPE/ACCESS LEVEL:
       global/none
---Press any key to continue, or `q' to quit---
</pre>
    <h3><a name="CLI-Command-Line-Prompts"/>CLI Command Line Prompts</h3>
    <p>Within the CLI, the command line prompt identifies both the hostname and the command mode. The hostname is the name of your event broker set through the setup (or using the <b>hostname</b> Global CONFIG command); the command mode indicates your location within the CLI command structure.</p>
    <p>
      <img src="../../Resources/Images/Admin/2_28.jpg" alt=""/>
    </p>
    <p>In most cases, Solace customer documentation uses <code>solace</code> as the name of the host. This is the default system hostname.</p>
    <p><u>Example</u>:</p>
    <pre>solace(configure)# create message-vpn &lt;vpn-name&gt;</pre>
    <p>When redundancy scenarios are discussed, <code>solace1</code> is often used for one event broker and <code>solace2</code> for its mate.</p>
    <p><u>Example</u>:</p>
    <pre>solace1(configure)# ip vrf msg-backbone
solace2(configure)# ip vrf msg-backbone</pre>
    <p>For some actions, the CLI prompts you for a response. The acceptable default responses are the following:</p>
    <ul>
      <li>You can press &lt;<code>y</code>&gt; to agree with the prompt and continue.</li>
      <li>You can press &lt;<code>n</code>&gt; to disagree with the prompt and cancel the action.</li>
    </ul>
    <h3><a name="using_the_solace_router_cli_2293357723_114617"/>CLI Keywords and Parameters</h3>
    <p>CLI commands are made up of two primary elements: keywords and parameters.</p>
    <ul>
      <li>Keywords               <p>Every command requires at least one keyword; however, a command can contain other optional keywords. Keywords must be typed into the CLI accurately for it to be recognized. These are examples of keywords:</p><ul><li>reload</li><li>clear</li><li>configure</li><li>end</li><li>set</li></ul><p>Keywords identify the operation to be performed. You can abbreviate keywords; however, you must enter enough initial characters to unambiguously identify the command. For example, if the keyword you want to specify is <b>source </b>and you enter only <b>s</b>, an error appears. The error indicates that one or more possible keywords begin with <b>s</b>, thus making your entry ambiguous.</p></li>
      <li>Parameters               <p>Parameters are often required elements of a command; however, for some commands, parameters are not required. A parameter is most often a value that you specify after the keyword. There are different types of parameters, such as strings, integers, or IP addresses. The CLI indicates the type of parameter that you must enter. When you see a range of numbers or uppercase letters, it indicates that you must specify a value.</p></li>
    </ul>
    <h4>Keywords and Parameters Together</h4>
    <p>By combining keywords and parameters in the correct sequence, you can begin to use the CLI to configure and monitor your event broker. For example, you could specify the <b>hostname </b>Global Config command to change the name that your event broker was originally assigned on its initial setup (through the <b>setup</b> Privileged EXEC command).</p>
    <p>The <b>hostname </b>Global Config command requires a <code>hostname</code> keyword and an associated parameter. In this case, the variable <code>&lt;name&gt;</code> parameter uses a string value of up to 64 characters for the name of the host.</p>
    <pre>router(configure)# hostname &lt;name&gt;</pre>
    <p>
      <img src="../../Resources/Images/Admin/2_1.jpg" style="max-width: 280px;" MadCap:mediastyle="@media print { max-width: 280px; }" alt=""/>
    </p>
    <p>When you enter the <b>hostname </b>Global Config command, the new hostname appears in the command line prompt.</p>
    <p><u>Example</u>:</p>
    <pre>router(configure)# hostname solace
solace(configure)#</pre>
    <h3><a name="using_the_solace_router_cli_2293357723_175718"/>CLI Command Output Redirection</h3>
    <p>Rather than require the operator to copy and paste the CLI output from a command from the screen for editing or transferring to another event broker, you can use the CLI output redirection feature to redirect such output to a file in a specified subdirectory of the event broker root directory. This subdirectory  must already exist on the event broker before you can specify it. In addition, the output can be redirected to either write a file using "&gt;", or append to a file using "&gt;&gt;". </p>
    <p>For example, the command below does the following:</p>
    <ul>
      <li>show the configuration of the message VPN named <code>blue</code> </li>
      <li>redirect the output to the to the <code>blue.cli</code> file in the <code>cliscripts</code> directory</li>
      <li>write the <code>blue.cli</code> file (that is, creates a new version and overwrites any previously existing version of the file)</li>
    </ul>
    <pre>solace&gt; show current-config message-vpn blue &gt; cliscripts/blue.cli</pre>
    <p class="Note">CLI paging is automatically disabled for the duration of a redirected CLI command, but confirmation prompts and error and warning messages are not; they remain displayed on the CLI console.</p>
    <h3><a name="using_the_solace_router_cli_2293357723_210698"/>Partial Keyword &lt;Tab&gt;</h3>
    <p>At any point in the command line, you can press <b>&lt;Tab&gt;</b> to display the valid inputs onward.</p>
    <p>When you cannot recall a complete command name or keyword, type in the first few letters, press <b>&lt;Tab&gt;</b>, and the system will complete your partial entry. However, you must type enough characters to provide a unique abbreviation. If your partially entered command is not unique, the CLI presents you with a list of valid options.</p>
    <p style="text-decoration: underline;">Examples:</p>
    <pre>solace&gt; <b>show message-v &lt;Tab&gt;</b>
message-spool  message-vpn</pre>
    <pre>solace&gt; <b>show message-s &lt;Tab&gt;</b>
solace&gt; show message-spool</pre>
    <p>A subsequent <b>&lt;Tab&gt; </b>will then display the valid parameters for the command / argument pair:</p>
    <pre xml:space="preserve">solace&gt;<b> show message-spool &lt;Tab&gt;</b>
detail       message-vpn  rates        stats</pre>
    <h3><a name="using_the_solace_router_cli_2293357723_241309"/>* and ? as Input Wildcards</h3>
    <p>For some commands, the "*" and "<code>?</code>" characters are permitted as wildcards for information requested for command input.</p>
    <ul>
      <li>The "*" character may match 0 or more unknown characters.
            <p><u>Examples</u>:</p><p><code>solace&gt; show message-vpn r*d</code> may display output for Message VPN <code>red</code>.</p><p><code>solace&gt; show message-vpn red*</code> may display output for Message VPN <code>red</code> or <code>redder</code>.</p><p><code>solace&gt; show message-vpn *</code> may display output for Message VPN <code>red</code> or <code>redder</code>.</p><p class="Tip">The "*" character can also be used as a wildcard for Solace Message Format (SMF) topic subscriptions. For information on its usage for SMF topic subscriptions, see <MadCap:xref MadCap:unresolvedLink="import-link:a_topic_support_and_syntax_819845554_56063" href="../../Messaging/Topic-Support-and-Syntax.htm">Topic Support and Syntax</MadCap:xref>.</p></li>
    </ul>
    <ul>
      <li>The "<code>?</code>" character may match only one unknown character.
             <p><u>Example</u>:</p><p><code>solace&gt; show message-vpn 1?3</code> may display output for Message VPN <code>123</code> or <code>13</code>.</p><p class="Tip">The "<code>?</code>" character can also be used at the end of a command to display help for that command. For information on its usage for displaying help for commands, see <MadCap:xref href="#using_the_solace_router_cli_2293357723_207003">Using Help</MadCap:xref>.</p></li>
    </ul>
    <h3><a name="Special"/>Special Characters in Double Quotations</h3>
    <p>As described in previous sections, <code>?</code> and <code>&gt;</code> are characters with special meaning (<code>?</code> being a help request, and <code>&gt;</code> and <code>&gt;&gt;</code> being redirect requests). If these characters are used in double quotations, they lose their special meaning and are treated as literals.</p>
    <p><u>Examples</u>:</p>
    <p>Without double quotes, <code>?</code> indicates a help request for the <code>message-vpn</code> command. </p>
    <pre class="Code">vmr-134-44(configure)# message-vpn ?</pre>
    <pre class="Code">

   COMMAND:
       message-vpn &lt;vpn-name&gt;
       create message-vpn &lt;vpn-name&gt;
       no message-vpn &lt;vpn-name&gt;

   DESCRIPTION:
       Create, modify, or delete a Message VPN.

       Message VPNs (Virtual Private Networks) allow for the segregation of
       topic space and clients. They also group clients connecting to a
       network of message brokers, such that messages published within a
       particular group are only visible to that group's clients.

   MINIMUM REQUIRED SCOPE/ACCESS LEVEL:
       vpn/read-write
       Notes/Exceptions:
        global/read-write is required to create or delete instances of this
        object.

   CONFIG-SYNC:
       HA: yes
       Replicated VPNs: no

   PARAMETERS:
       &lt;vpn-name&gt;               - [1..32 chars] The name of the Message VPN.</pre>
    <p>With double quotes, <code>"?"</code> is treated as a literal and the system tries to find a Message VPN called <code>?</code>.</p>
    <pre class="Code" xml:space="preserve">solace(configure)# message-vpn "?"</pre>
    <pre class="Code">

 Invalid command input
        message-vpn "?"
                    ^
         -&gt; parameter parse error: Cannot contain the following characters: *?
 Expected one of the following:
      &lt;vpn-name&gt;               - [1..32 chars] The name of the Message VPN.</pre>
    <h2 class="with-rule"><a name="using_the_solace_router_cli_2293357723_207003"/>Using Help</h2>
    <p>The Solace CLI provides a variety of useful context-sensitive help features. An important thing to remember about using the help features is that the use of a space or the lack of a space before the "?" character gives different results. The following table summarizes the help system.</p>
    <table class="TableStyle-Table_Num" style="caption-side: top;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');width: 95%;" cellspacing="0">
      <caption valign="top" style="padding-bottom: 3pt;">
        <p class="TblCaption">Help Commands</p>
      </caption>
      <col style="width: 25%;" class="TableStyle-Table_Num-Column-Column1"/>
      <col style="width: 75%;" class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Command</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">?, &lt;Tab&gt;, or tree</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Lists commands or command options available in the current CLI level.</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">??, help, or tree all</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Lists commands or command options available in both the current and global CLI levels.</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">tree global</td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">Lists commands or command options available in the global CLI levels.</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">partial-command&lt;Tab&gt;</td>
          <td class="TableStyle-Table_Num-BodyD-Column1-Body1">Completes the partial command you entered, if you have provided an unambiguous abbreviation. If ambiguous, the CLI lists the available command options.</td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">command&lt;space&gt;?</td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">Gives detailed help on the specific command and its available parameters in the current CLI level.</td>
        </tr>
      </tbody>
    </table>
    <h3><a name="Question-Mark-Command-555"/>? Command</h3>
    <p>You can enter the question mark (<b>?</b>) key whenever you need additional information. When you enter <b>?</b>, all available choices are displayed. When you enter <b>? </b>on a line by itself, or when it is preceded by one or more spaces, a list of all next available choices is displayed. See <MadCap:xref href="#using_the_solace_router_cli_2293357723_98942">? Command Example 1</MadCap:xref>.</p>
    <p>Alternatively, the user can terminate a command with a <b>?</b> to display the complete help on that command. This feature is useful when the command keyword is known but the list and format of parameters is not. Refer to <MadCap:xref href="#using_the_solace_router_cli_2293357723_124523">? Command Example 2</MadCap:xref>.</p>
    <h4><a name="using_the_solace_router_cli_2293357723_98942"/>? Command Example 1</h4>
    <p>From the prompt, you can enter <b>?</b> to display the online help:</p>
    <pre>solace#<b> ?</b></pre>
    <pre>
 Commands available in the current mode:
            admin       - Use this command to reach the Admin EXEC level.
            backup      - Use this command to immediately create a manual
                          local backup of your configuration database file on
                          the appliance.
            boot        - Use this command to upgrade or downgrade the appliance
                          software to a new or old SolOS software load and
                          activate it, or to revert to and run the previous
                          SolOS software version that was running before the
                          last upgrade.
            clear       - Use this command to clear various appliance
                          statistics.
 
. . .
 
            setup       - Use this command to quickly set the hostname,
                          interfaces, clock and time zone on the appliance.
            shell       - Use this command to acess the SolOS shell.
 
   Global commands (available in all modes) can be displayed by entering:
         "??"
 
   Complete help for a command can be displayed by entering:
         "&lt;command&gt; ?"
 
   Output of any command can be redirected to overwrite a file using '&gt;':
         "show version &gt; version.txt"
 
   Output of any command can be redirected to append to a file using '&gt;&gt;':
         "show version &gt;&gt; version.txt"
 
solace#</pre>
    <h4><a name="using_the_solace_router_cli_2293357723_124523"/>? Command Example 2</h4>
    <p>You can terminate a CLI command with a <b>?</b> to display the complete help on the command:</p>
    <pre>solace(configure)# hardware ?</pre>
    <pre>COMMAND:
    hardware [disk ... | message-spool | power-redundancy ... |
              topic-routing]
 
    DESCRIPTION:
        Use this commmand to configure routing modules and disks on the
        appliance.
 
    MINIMUM REQUIRED SCOPE/ACCESS LEVEL:
        global/read-write
 
    PARAMETERS:
        disk                  - Enable/disable hard disk
        [no] message-spool    - Configure message spool hardware options
        power-redundancy      - Configure power-redundancy
        [no] topic-routing    - Configure topic routing hardware options</pre>
    <h3><a name="Help-555"/>Help Command</h3>
    <p>You can enter the <b>help </b>command to display a brief description of the contextâ€‘sensitive help system.</p>
    <pre>solace# <b>help</b></pre>
    <p><u>Example</u>:</p>
    <pre>solace# help</pre>
    <pre> Commands available in the current mode:
            admin       - Use this command to reach the Admin EXEC level.
            backup      - Use this command to immediately create a manual
                          local backup of your configuration database file on
                          the appliance.
            boot        - Use this command to upgrade or downgrade the appliance.
. . .
   Global commands available in any mode:
       [no] alarm-display          - Use this command to enable the display
                                     of 3200 Series appliance system alarms in
                                     the curren CLI session on a
                                     session-by-session basis. The no version
                                     disables the displaying of appliance
                                     alarms in the current CLI session.
            cd                     - Use this command to change the current
                                     working directory on the appliance.
            dir                    - Use this command to list the contents of
                                     a directory on the appliance.
            end                    - Use this command to exit the current
                                     CONFIG command level of the CLI and
                                     return to the Privileged EXEC level
 
. . .
 
   Complete help for a command can be displayed by entering:
         "&lt;command&gt; ?"
 
   Output of any command can be redirected to overwrite a file using '&gt;':
         "show version &gt; version.txt"
 
   Output of any command can be redirected to append to a file using '&gt;&gt;':
         "show version &gt;&gt; version.txt"</pre>
    <h3><a name="Tree-555"/>Tree Command</h3>
    <p>You can enter:</p>
    <ul>
      <li><b>tree</b> to display a list of commands or command options available in just the current CLI level</li>
      <li><b>tree all </b>to display a list of commands or command options available in both the current and global CLI levels</li>
      <li><b>tree global </b>to display a list of commands or command options available in just the global CLI level</li>
    </ul>
    <p><u>Example</u>:</p>
    <pre xml:space="preserve">solace# tree global</pre>
    <pre xml:space="preserve">
GLOBAL COMMANDS - available in all modes:
     [no] alarm-display
     cd [&lt;directory&gt;]
     dir [&lt;pattern&gt;]
     end
     exit
     help
     home
     logout
     more &lt;pattern&gt;
     [no] paging [size &lt;size&gt;]
     ping &lt;vrf-ip-addr-or-host&gt; [ip-interface &lt;ip-interface&gt;]
     pwd
     session timeout &lt;idle-timeout&gt;
     show*
         acl-profile &lt;name&gt; [message-vpn &lt;vpn-name&gt;]
                     [detail[client-connect] [publish-topic]
                     [subscribe-topic] |users]
         alarm
         authentication [user-class cli-semp] [current-user
                        | access-level [{default |
                        ldap [group &lt;group-name-pattern&gt;]}]
                        [detail]]
         backup
 
. . .
 
     source script &lt;script-name&gt; [stop-on-error]
            [no-prompt]
     [no] strict-column-wrapping
     tree [all | global]
 
        * indicates a mode that can be "typed through"</pre>
    <h2 class="with-rule"><a name="using_the_solace_router_cli_2293357723_233911"/>Writing and Running Basic CLI Scripts</h2>
    <p>To simplify the loading of common or repetitive configuration setups, the CLI has a basic scripting facility that enables you to define and run scripts that run multiple CLI commands. Basic script files can be used to store more than one CLI command. Depending on your needs, you might want to store all of your CLI commands in one script file or group scripts by function.</p>
    <p>To run a basic CLI script file, save the script as text, then transfer the script to the event broker using the <b>copy</b> Privileged EXEC command.</p>
    <p>You can then run the basic CLI script file from within the CLI using the following User EXEC command:</p>
    <pre>solace&gt; source script &lt;script-name&gt; [stop-on-error] [no-prompt]</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;script-name&gt;</code> is the name of the CLI script file. The script file must be in a directory on the event broker.</p>
    <p><code>stop-on-error</code> specifies to stop running the script when encountering an error.</p>
    <p>Ordinarily, when a CLI script is run, it is run to completion, even if errors are encountered. However, this can prove problematic if a command fails part way through a script and subsequent commands rely on it having run properly. To avoid this scenario, you can use the <code>stop-on-error</code> parameter.</p>
    <p><code>no-prompt</code> specifies to skip yes/no confirmation prompting. It is the equivalent to entering yes to all command prompts.</p>
    <p>Certain CLI commands require a confirmation of the form "Do you want to continue (y/n)" when run. Use of the <code>no-prompt</code> parameter allows CLI scripts to run to completion without interruption.</p>
    <p>Always observe these key points when writing or running CLI scripts:</p>
    <ul>
      <li>The commands in the script must be valid in the current operating mode.</li>
      <li>Nesting of scripts is allowed, up to a maximum nest level of five.</li>
      <li>If a command inside a script contains a syntax error, or fails for some other reason, the remainder of the commands in the file are still run (that is, script execution does not abort on failure), provided <code>stop-on-error</code> is not used.</li>
      <li>A script does not require an <code>exit</code> or <code>logout</code> command at the end. If present, these commands are run normally, such that if run in user mode the CLI session is exited.</li>
      <li>Comments can be included directly in the CLI script file itself and are identified with an exclamation mark (!) at the start of a line. This tells Solace PubSub+ event brokers that the information is a comment and should not be displayed or parsed. Comments do not require an end tag. If you decide to include comments, anyone who reads or edits your CLI script may read them. Any event broker or application that parses or validates your CLI script ignores commented information.</li>
    </ul>
    <p class="Note">The current scripting facility does not include structures for control flow, environment variables, or other more sophisticated scripting features.</p>
    <h3><a name="using_the_solace_router_cli_2293357723_224642"/>Inputting Non-Printable Characters as CLI Parameters</h3>
    <p>Non-printable characters can be inputted in a CLI argument as a 3-digit octal value preceded by a backslash escape character (for example, "<code>\027</code>"), a two digit hexadecimal value preceded by an escaped x: "<code>\x</code>", or a collection of standard escape sequences: "<code>\a</code>", "<code>\b</code>", "<code>\f</code>", "<code>\n</code>", "<code>\r</code>", "<code>\t</code>", "<code>\\</code>", and "<code>\"</code>". The CLI interprets these sequences as a single character whose value is representative of the escaped sequence.</p>
    <p>To enter values with spaces, surround them with double quotes ("").</p>
    <p class="Note">If you use pre-existing CLI command scripts that were written for a version of Solace PubSub+ software earlier than Version 6.1 (including the output of legacy <code>show current-config</code> User EXEC command commands) those scripts must be modified before they are executed if they contain octal escape sequences in them. To modify preâ€‘existing CLI command scripts, escape the escape character in scripts containing any of the documented escape sequences (for example, change the value "\027" to "\\027"). It is also suggested, but not required, that you escape all backslashes to allow for future expansion of the escape sequences.</p>
    <h2 class="with-rule"><a name="using_the_solace_router_cli_2293357723_224527"/>Retrieving Entered CLI Commands for Reuse</h2>
    <p>All entered CLI commands are stored on the event broker in a history buffer. To retrieve these entered commands you can use the keyboard arrow keys to navigate the history buffer. You can then copy these retrieved commands and either reuse them as is, or edit them for reuse.</p>
    <h2 class="with-rule"><a name="Display_Alarms"/>Displaying System Alarms</h2>
    <p>To enable the display of Solace PubSub+ event broker system alarms in the current CLI session, on a session-by-session basis, enter the following User EXEC command:</p>
    <pre>solace&gt; alarm-display</pre>
    <p>The no version of this command, <code>no alarm-display</code>, disables the display of event broker system alarms in the current CLI session.</p>
    <p>To show the current alarm status for the current CLI session, enter the following User EXEC command:</p>
    <pre>solace&gt; show alarm</pre>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Examples:</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <pre>solace&gt; alarm-display

## ATTENTION: Critical System Alarms. Enter "show alarm" to view. ##</pre>
        <pre>solace&gt; show alarm

Alarm display is enabled.
 
Source        | Slot | Alarm
--------------+------+----------------------------------------------
Chassis Fan 2 |      | Failed</pre>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
  </body>
</html>
