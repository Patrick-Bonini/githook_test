<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput">
  <head>
    <script type="text/javascript" async="async" src="https://play.vidyard.com/embed/v4.js">
        </script>
  </head>
  <body>
    <h1>Configuring Your Event Mesh with <MadCap:variable name="Product-Names.pubsubmanager_short"/></h1>
    <p>To set up an event mesh using DMR, you need to establish:</p>
    <ul>
      <li>one or more DMR clusters</li>
      <li>one or more DMR links between brokers</li>
    </ul>
    <p>For details about the settings you need to configure for DMR, see <MadCap:xref href="../../Features/DMR/DMR-Subscription-Mgmt.htm">Considerations for Building an Event Mesh</MadCap:xref> and <MadCap:xref href="../../Features/DMR/DMR-Setup-Overview.htm">Setting up an Event Mesh Using DMR</MadCap:xref>.</p>
    <p class="Note">If you are using <MadCap:variable name="Product-Names.broker_sw_short"/>s, they  must be configured with at least <a href="../../Software-Broker/System-Scaling-Parameters.htm#max-client-connections" class="link-internal">1000 client connections</a> to support creating a DMR Cluster.</p>
    <h2>Create a Cluster</h2>
    <ol>
      <li>If you haven't already, <a href="PubSub-Manager-Overview.htm#how-to-access" class="link-internal">Log in</a> to the <b>Broker Manager</b> on one of the nodes you plan to add to the cluster.</li>
      <li>In the <b>System</b> menu, click <b>Clustering</b>. The <b>Clustering Configuration</b> page is displayed.</li>
      <li>Click <b>Create a New Cluster</b>.</li>
      <li>Edit the settings as required for the cluster. See <MadCap:xref href="../../Features/DMR/DMR-Mgmt-Cluster-Config.htm">Configuring a DMR Cluster</MadCap:xref> for details about the options that are available.</li>
      <li>Click <b>Apply</b>. The current node is now a member of the cluster you just created.</li>
    </ol>
    <h2>Add Node(s) to the Cluster</h2>
    <p>For each node you want to add to the cluster:</p>
    <p>
      <span style="background-color: #ffff00;">&lt;I couldn't get this working with 2 docker containers on my laptop and didn't have time to mess about with it&gt;</span>
    </p>
    <ol>
      <li><a href="PubSub-Manager-Overview.htm#how-to-access" class="link-internal">Log in</a> to the <b>Broker Manager</b> on one of the brokers you plan to add to the cluster (if the broker is a member of an HA group, choose the primary broker).</li>
      <li>In the <b>System</b> menu, click <b>Clustering</b>. The <b>Clustering Configuration</b> page is displayed.</li>
      <li>Click <b>Join an Existing Cluster</b>.</li>
      <li>Follow the steps in the Joining a Cluster wizard to specify the connection to the remote broker, </li>
      <li>
        <span style="background-color: #ffff00;">etc</span>
      </li>
    </ol>
    <h2>Add Links Between Nodes</h2>
    <p>The <b>Click-to-Connect Wizard</b> in <MadCap:variable name="Product-Names.pubsubmanager_long"/> makes it easy to set up a  DMR link.</p>
    <p>To set up a DMR link:</p>
    <p>
      <span style="background-color: #ffff00;">&lt;the steps below are copied from the VPN bridge instructions and are not correct for DMR links&gt;</span>
    </p>
    <ol>
      <li>If you haven't already, <a href="PubSub-Manager-Overview.htm#how-to-access" class="link-internal">Log in</a> to the <b>Broker Manager</b>. </li>
      <li>On the <b>Message VPNs</b> page, click the Message VPN on which you want to configure the DMR link.</li>
      <li>In the <b>Messaging</b> menu, click <b>Bridges</b>. The <b>Bridges</b> page opens.</li>
      <li>Select the <b>Static Bridges</b> tab.</li>
      <li>Click the <b>Click-to-Connect</b> button to launch the wizard.</li>
      <li>Choose the type of event broker to connect to:<ul><li>for a <MadCap:variable name="Product-Names.broker_sw_short"/> or <MadCap:variable name="Product-Names.broker_appliance_short"/>, select <b>Solace Broker Message VPN</b></li><li>for a PubSub+ Cloud <MadCap:variable name="Product-Names.broker_cloud_short"/>, select <b>Solace Cloud Service</b></li></ul></li>
      <li>Follow the steps in the wizard to specify the connection details, configure the remote VPN, and test the connection.
            <p>The message <b>Bridge Configured</b> is displayed when the connection is successful.</p></li>
      <li>Follow the steps in the wizard to add subscriptions as required.</li>
      <li>Click <b>Apply</b>.</li>
    </ol>
    <p>The new bridge appears in the <b>Static Bridges</b> list for the Message VPN.</p>
  </body>
</html>
