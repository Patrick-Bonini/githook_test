<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Configuring VPN Bridges</h1>
    <p>To create a Message VPN bridge, enter the following Global CONFIG command on the local event broker: </p>
    <pre>solace(configure)# create bridge &lt;bridge-name&gt; message-vpn &lt;vpn-name&gt; [auto | primary | backup]</pre>
    <p>To edit properties for an existing Message VPN bridge, enter the following Global CONFIG command:
                </p>
    <pre>solace(configure)# bridge &lt;bridge-name&gt; message-vpn &lt;vpn-name&gt; [auto | primary | backup]</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;bridge-name&gt;</code> is the name of the Message VPN bridge. A name can contain up to 150 characters, composed of alphanumeric characters and the following punctuation character set: ~`!@$%|^()_+={}:,.#-;[]. The bridge's name must be unique within its Message VPN if the <code>auto</code> option is selected. However, if either <code>primary</code> or <code>backup</code> is selected, the same bridge name can be used for both a primary and backup bridge within the same Message VPN.</p>
    <p><code>&lt;vpn-name&gt;</code>is the full name of an existing local Message VPN. Partial names, or wildcard characters used to represent one or more characters of the name, are not supported.</p>
    <p><code>auto</code> associates the bridge automatically at time of creation with either the primary or backup virtual router, depending on the current setting of the redundancy <code>active-standby-role</code>. This is the default and recommended value.</p>
    <p><code>primary</code> associates the bridge at time of creation to the primary virtual router. This value should only be used if an active/active redundancy model is being used.</p>
    <p><code>backup</code>associates the bridge at time of creation to the backup virtual router. This value should only be used if an active/active redundancy model is being used.</p>
    <p>The no version of this command, <code>no bridge &lt;bridge-name&gt; message-vpn &lt;vpn-name&gt;</code>, deletes the specified bridge from the Message VPN. To delete a Message VPN, the bridge must be disabled through the <code>shutdown</code> Bridge CONFIG command, and no other configured objects can refer to it.</p>
    <MadCap:snippetBlock src="../../Resources/Snippets/Features/DR-Replication/msg-vpn-bridge-message-duplication-warn.flsnp"/>
    <p class="Note">Prior to Solace PubSub+ software event broker version 8.9 and appliance version 8.5, the <code>auto</code> value was not available, and <code>primary</code> was the default virtual router for the bridge upon creation. </p>
    <h2 class="with-rule">Message VPN Bridges Configuration Tasks</h2>
    <p>Entering the <code>bridge message-vpn</code>  command moves the CLI to a level that allows you to configure the given bridge. At this level, you can perform the following configuration tasks for the given Message VPN bridge:</p>
    <ul>
      <li>
        <MadCap:xref href="#Max-TTLs">Configuring Max Bridge TTLs</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Max-Retries">Configuring Max Remote Retry Attempts</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Config-Remote-Auth">Configuring Remote Authentication</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Config-Remote-DTO">Configuring Remote Deliver-To-One Priorities</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Config-Remote-VPNs">Configuring Remote Message VPNs</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Retry-Delays">Configuring Remote Retry Delays</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#remote-topic-sub">Configuring Remote Subscription Topics</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Config-SSL">Configuring TLS/SSL</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#start-connections">Starting/Stopping Bridge Connections</MadCap:xref>
      </li>
    </ul>
    <h2 class="with-rule"><a name="Max-TTLs"/>Configuring Max Bridge TTLs</h2>
    <p>Message VPN bridges use a bridge time-to-live (TTL) value for messages that are delivered from one Message VPN to another remote Message VPN. The bridge TTL value specifies the maximum number of hops that can occur before the message is discarded. This TTL value prevents bridges from creating a network message loop between different Message VPNs and multiple event brokers, whereby copies of the same message get delivered multiple times to the same clients.</p>
    <p>When a Message VPN bridge delivers a message to the another Message VPN, the bridge TTL value messages is set to whichever is lower—the current bridge TTL value for the message, or the maximum TTL value that is set for the Message VPN bridge.</p>
    <p>To configure the number of hops for the given Message VPN bridge, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge)# max-ttl &lt;value&gt;</pre>
    <p>Where:</p>
    <p><code>&lt;value&gt;</code> is the integer value specifying the maximum number of hops that can occur before the message is discarded. The valid range is 1 to 255. The default value is 8.</p>
    <p>The no version of this command (<code>no max-ttl</code>) resets the maximum TTL value for the bridge back to the default.</p>
    <p class="Note">
            The maximum TTL value for a bridge only applies to the number of "hops" a message may take over Message VPN bridges. It is not related to the time-based publisher or endpoint set message TTLs, which determine how long a message may persist after it is published or spooled to a queue without being consumed or acknowledged.
        </p>
    <h2 class="with-rule"><a name="Max-Retries"/>Configuring Max Remote Retry Attempts</h2>
    <p>To configure the maximum number of retries to attempt a remote Message VPN bridge connection to an event broker before the next alternate source for the bridge is attempted (for example, if the retry count is set to 1, a total of two connection attempts is made for each alternate source—the initial attempt plus one retry), enter the following CONFIG command:</p>
    <pre>solace(configure/bridge)# remote retry count &lt;count&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;count&gt;</code> is an integer from 0 to 255 for the number of times to retry a connection to an individual router name. The default value is 0.</p>
    <p>The no version of this command (<code>no remote retry count</code>) resets the number of retries attempted for an event broker connection back to the default value.</p>
    <h2 class="with-rule"><a name="Config-Remote-Auth"/>Configuring Remote Authentication</h2>
    <p>Authentication can be set up on a Message VPN bridge to provide secure connections between Message VPNs. Basic and client certificate authentication modes are available. Note that a client username must be configured before a remote Message VPN bridge can be connected through the <code>no shutdown</code> command, see <MadCap:xref href="#Config-Client-Cert">Configuring Client Certificate Authentication</MadCap:xref>.</p>
    <p>In an authentication scenario, a remote Message VPN acts as the server which authenticates a local Message VPN bridge.</p>
    <p>To configure the authentication scheme to be used for Message VPN bridges, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge)# remote authentication
solace(configure/bridge/remote/authentication)# auth-scheme {basic | client‑certificate}</pre>
    <p><u>Where</u>:</p>
    <p><code>basic</code> specifies that basic username and password authentication should be used for bridge connections</p>
    <p><code>client-certificate</code> specifies that client certificate authentication should be used for bridge connections</p>
    <p>After selecting an authentication scheme, you can then configure specific parameters for the chosen basic or client certificate authentication scheme.</p>
    <h3><a name="Config-Basic"/>Configuring Basic Authentication</h3>
    <p>To enter the basic authentication configuration mode, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge/remote/authentication)# basic
solace(...re/bridge/remote/authentication/basic)#</pre>
    <p>The CLI is now at the configuration mode for configuring basic authentication for the given Message VPN bridge. From here, you can set the client username that the bridge will use to log in to the remote Message VPN.</p>
    <h4><a name="Config-Client-Username-Auth"/>Configuring Client Usernames for Authentication</h4>
    <p>To establish a bridge connection to a remote Message VPN, a local bridge client is automatically created, and this client requires a client username to login and authenticate itself.  Before configuring a new client username for a remote Message VPN bridge, the bridge connection must be shutdown.</p>
    <p>Also note that, by default, clients cannot create remote Message VPN bridge connections—you must configure permission settings in the client profile that is assigned to the client username. Permission to create bridge connections can be enabled with the <code>allow-bridge-connections</code> command. Refer to <MadCap:xref href="../../Security/Configuring-Client-Profiles.htm">Configuring Client Profiles</MadCap:xref> for details.</p>
    <p>To configure the client username that the bridge will use to log in to the remote Message VPN, enter the following CONFIG command:</p>
    <pre>solace(...re/bridge/remote/authentication/basic)# client-username &lt;name&gt; [password &lt;password&gt;]</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;name&gt;</code> is the full username of the client username account (partial names or wildcard characters used to represent one or more characters of the name are not supported). The client username may contain up to 189 characters.</p>
    <p><code>&lt;password&gt;</code> is the password assigned to the client username account, which will be required for authentication if set. The password may contain up to 128 characters.</p>
    <p>The no version of this command (<code>no client-username</code>) deletes the client username and its associated password, if any, from the bridge.</p>
    <div class="Tip">
      <p>If the TCP parameters used by the local bridge client are not suitable for your network, do the following:</p>
      <ul>
        <li>if you are establishing a uni-directional bridge, which uses a non‑editable, default client profile, <code>#client-profile</code>, you must substitute another client profile (see <MadCap:xref href="#client-profiles">Configuring Client Profiles for Uni-Directional Bridges</MadCap:xref>).</li>
        <li>if you are establishing a bi-directional bridge, the client profile associated with the client username is fully configurable. Refer to <MadCap:xref href="../../Security/Configuring-Client-Profiles.htm">Configuring Client Profiles</MadCap:xref>.</li>
      </ul>
    </div>
    <h3><a name="Config-Client-Cert"/>Configuring Client Certificate Authentication</h3>
    <p>To configure client certificate authentication for the given Message VPN bridge, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge/remote/authentication)# client-certificate
solace(...ote/authentication/client-certificate)#</pre>
    <p>The CLI is now in a configuration mode that allows you to set the certificate that the bridge will use for authentication on the remote Message VPN bridge.</p>
    <h4><a name="Client-Certs-to-Use"/>Configuring Certificate Files to Use</h4>
    <p>To configure the certificate that the bridge will present to the remote event broker, enter the following CONFIG command:</p>
    <pre>solace(...ote/authentication/client-certificate)# certificate-file &lt;filename&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;filename&gt;</code> is the file name of the certificate to be used for authentication. The certificate must be located in the event broker's <code>/usr/sw/jail/certs</code> directory.</p>
    <p>The certificate file can only be configured while the bridge is shutdown.</p>
    <p>After the certificate has been associated with the bridge, the certificate file can be removed from the <code>/usr/sw/jail/certs</code> directory.</p>
    <p>For authentication to succeed, the common name provided in the certificate file must exist as a client username on the remote Message VPN. The client username must be enabled, and the client profile that is used by that client username must have <code>allow-bridge-connections</code> enabled. The provided client certificate must also be enabled on the remote Message VPN and adhere to the specified client certificate authentication settings on the remote Message VPN.</p>
    <p>The no version of this command, <code>no certificate file</code>, disassociates the certificate file from the current Message VPN bridge.</p>
    <p class="Note">
            If client certificate authentication is in use but no certificate file is specified, then the server certificate of the event broker will be used as the client certificate for bridge authentication sessions.
        </p>
    <h2 class="with-rule"><a name="Config-Remote-DTO"/>Configuring Remote Deliver-To-One Priorities</h2>
    <p>Through the use of Solace Messaging APIs, client applications can use the Deliver-To-One (DTO) feature to send a Direct message to a single client, rather than all, even though there may be a number of clients with appropriate subscriptions that are capable of receiving the message. For information, see <MadCap:xref href="../../Messaging/Direct-Msg/DTO.htm" data-mc-unresolved-link="import-link:working_with_direct_messages_3587258744_74224">Deliver-To-One</MadCap:xref>.</p>
    <p>A bridge to a remote Message VPN is assigned a DTO subscriber priority, which determines the priority that its topic subscriptions have for receiving published Deliver-To-One messages from that remote Message VPN. Note that the bridge must be first shut down before configuring the DTO priority for the topic subscriptions.</p>
    <p>To configure the DTO priority for the bridge’s topic subscriptions, enter the following Bridge VPN CONFIG commands:</p>
    <pre>solace(configure/bridge)# remote
solace(configure/bridge/remote)# deliver-to-one priority &lt;dto-priority&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;dto-priority&gt;</code> is the DTO priority for the bridge’s topic subscriptions. Valid values are <code>P1</code>, <code>P2</code>, <code>P3</code>, <code>P4</code> (where <code>P1</code> is the highest priority, and <code>P4</code> is the lowest priority), or <code>DA</code> for Delivery Always. The default value is <code>P1</code>.</p>
    <p>The no version of this command, <code>no  priority</code>, resets the DTO priority for the topic subscriptions back to default:</p>
    <pre>solace(configure/bridge/remote/deliver-to-one)# no priority</pre>
    <h2 class="with-rule"><a name="Config-Remote-VPNs"/>Configuring Remote Message VPNs</h2>
    <p> The Message VPN the bridge connects to is the Remote Message VPN. You can specify the Remote Message VPN's location using either of the following methods:</p>
    <ul>
      <li><u>By using the virtual router name</u>: This is the virtual router to which the bridge belongs. The virtual router name can only be used with a bi-directional bridge and only at one end of the bridge.
            <p>When a bi-directional bridge is configured, one end can be configured using the virtual router name. If a bi-directional bridge is configured at one end using a router-name, and at the other end using the connect-via IP address, the bridge using the IP address connects first, then the bridge using the virtual router name discovers the existing connection to the remote event broker.</p></li>
      <li><u>By using connect-via IP address</u>: This specifies the event broker's primary IP address and an optional physical interface. In the case of a bi-directional bridge, the end that is using the connect-via method establishes the connection first. <p>This method can also be used with a loopback Message VPN bridge, that is, a bridge that connects a local Message VPN and a Remote Message VPN that are on the same event broker. When you create a loopback bridge, use an IP address of <code>127.0.0.1</code> and do not specify a physical interface.</p></li>
    </ul>
    <p>A Message VPN bridge must first be disabled through the <code>shutdown</code> before configuring which Remote Message VPN it should connect to. To configure the Message VPN that the bridge is to connect to, enter the following commands:</p>
    <pre>solace(configure/bridge)# remote
solace(configure/bridge/remote)# create message-vpn &lt;vpn-name&gt; {router &lt;virtual-router-name&gt; | connect-via &lt;addr&gt; [interface &lt;phys-intf&gt;]}</pre>
    <p class="Tip">To edit the properties for an existing Remote Message VPN that the bridge connects to, do not include <code>create</code> in the command.</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;vpn-name&gt;</code> is the Message VPN name to connect the bridge to (partial names or wildcard characters used to represent one or more characters of the name are not supported).</p>
    <p><code>&lt;virtual-router-name&gt;</code> is the name of the remote virtual router where the given Message VPN is located. This name must begin with <code>v:</code>, as that indicates a virtual router. Router names can contain up to 66 characters, composed of alphanumeric characters 0 to 9, a to z, A to Z, underscore '_', dot '.', and hyphen '-'. Note that '_', '.' and '-' cannot be used at the beginning or end of a router name. Virtual router names must be unique among all configured event brokers.</p>
    <p><code>&lt;addr&gt;</code> is the IP address or FQDN of the remote broker where the given Message VPN is located in the form <code>IP_address[:port]</code> or <code>FQDN[:port]</code>. <MadCap:xref href="../../Admin/Configuring-DNS.htm#DNS_name_lookup">DNS Name Lookup</MadCap:xref> is supported. For connecting to an appliance, the &lt;addr&gt; parameter must resolve to the remote appliance's <a href="../../Admin/IP-Interfaces/Configuring-Mgmt-and-MBackbone-Interfaces.htm#Configur2" target="_self" class="link-internal">msg-backbone VRF</a>. <MadCap:snippetText src="../../Resources/Snippets/ip-address-format.flsnp"/></p>
    <p> If no port is specified, port 55555 will be used. For plain-text, non-compressed data traffic, the default port is 55555; for plain-text, compressed data traffic, the default port is 55003; for TLS/SSL encrypted data traffic, regardless of whether the data traffic is compressed or non-compressed, the default port is 55443. You should note that once a Remote Message VPN is created, you can't change the port unless you delete the Remote Message VPN, or create another Remote Message VPN that uses an alternative port.</p>
    <p> If you want to establish a bridge link to a Remote Message VPN that is also on the local event broker (that is, a loopback Message VPN bridge), use an IP address of 127.0.0.1 and don't specify a physical interface. </p>
    <p><code>&lt;phys-intf&gt;</code> is an optional ASCII string specifying the physical Ethernet interface port or LAG of the local event broker that the bridge connection will originate from. Valid values are <code>eth&lt;port&gt;</code> (for example, <code>eth1</code>); <code>&lt;cartridge&gt;/&lt;slot&gt;/&lt;port&gt;</code> (for example, <code>1/1/8</code>); &lt;<code>cartridge&gt;/&lt;slot&gt;/lag&lt;N&gt; </code>(for example, <code>1/1/lag1</code>).  If you are using multiple interfaces, and only one of them applies, you must assign the applicable interface. If no physical interface is specified, an appropriate physical interface is automatically assigned.</p>
    <p>The <code>no</code> version of this command, <code>no message-vpn &lt;vpn-name&gt;</code>, removes the given Remote Message VPN bridge connection.</p>
    <div class="Note">
      <ul>
        <li>Bridges are configured against a specific virtual router. Therefore, if a local physical interface is specified, it must contain an IP interface configured against the same virtual router as the bridge.</li>
        <li>This command can be repeated up to four times on the bridge so that up to four distinct Remote Message VPNs can be configured. This creates an internal host list, which provides potential redundant hosts for the bridge. Each combination of &lt;<code>vpn-name</code>&gt; and either &lt;<code>virtual‑router-name</code>&gt; or &lt;<code>addr</code>&gt;<code> &lt;phys-intf&gt;</code> must be unique, and a mixture of the two possible combinations is not allowed. When adding a new host source entry, it is appended to the end of the existing host list. Its position can be modified through the <code>connect-order</code> Remote Message VPN Bridge CONFIG command (see <MadCap:xref href="#Config-Connect-Orders">Configuring Connect Orders</MadCap:xref>).
                <p>However, when using Guaranteed Messaging over a Message VPN bridge:</p><ul><li>Solace recommends that redundant host sources for the bridge not be used to provide redundancy. While redundant host sources allow a Message VPN bridge to successfully reroute in the event of a failure, Guaranteed messages and acknowledgments could be lost and stale messages delivered during the failover and failback operations.</li><li>Solace recommends instead that the Message VPN bridge connection be made to the virtual address of the event broker, so that the bridge can automatically be rerouted to the standby event broker if the primary event broker fails.</li></ul></li>
        <li>When more than one Remote Message VPN is provided, the connection is attempted in order for each enabled Remote Message VPN, from the start of the Host List to the end. Each address may be retried several times depending on the configured retry count.</li>
      </ul>
    </div>
    <h3 class="with-rule">Remote Message VPN Bridges Configuration Tasks</h3>
    <p>The CLI is now at the configuration mode for the remote Message VPN bridge connection to the event broker, which allows you to perform the following configuration tasks:</p>
    <ul>
      <li>
        <MadCap:xref href="#Config-Connect-Orders">Configuring Connect Orders</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Config-Msg-Spool-Queues">Configuring Message Spool Queues</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Config-Msg-Window">Configuring Message Spool Window Sizes</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Acess-to-Remote">Enabling Access to Remote VPN Bridge Connections</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Compress">Enabling Data Compression</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#Encrypt">Enabling TLS/SSL Encryption for Bridge Connections</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="#client-profiles">Configuring Client Profiles for Uni-Directional Bridges</MadCap:xref>
      </li>
    </ul>
    <h3><a name="Config-Connect-Orders"/>Configuring Connect Orders</h3>
    <p>The bridge connection to the remote Message VPN must first be disabled through the <code>shutdown</code>Remote Message VPN Bridge CONFIG command before configuring the order in which the bridge attempts to connect to redundant remote Message VPN hosts.</p>
    <p>To configure the order in which the bridge attempts to connect to redundant remote Message VPN hosts, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge/remote/message-vpn)# connect-order &lt;number&gt;</pre>
    <p class="Tip">You can assign different remote Message VPNs to the same connect order, since their relative priority is not defined by this number.</p>
    <p><u>Where</u>:</p>
    <p><code>&lt;number&gt;</code> is an integer from 1 to 4, where 1 provides the highest connection attempt priority, and 4 provides the lowest. Different remote Message VPNs may be assigned the same connect-order, in which case their relative priority is not defined. The default value is 4.</p>
    <p>The no version of this command, <code>no connect-order</code>, resets the connect order priority for the remote Message VPN to the default value.</p>
    <h3><a name="Config-Msg-Spool-Queues"/>Configuring Message Spool Queues</h3>
    <p>If you want to transfer Guaranteed messages over the Message VPN bridge, you must specify an existing durable queue (with an exclusive access type) on the remote event broker to which a Guaranteed Messaging flow connection will be established to. When a flow is established to a durable queue, Guaranteed messages (that is, messages with persistent and non-persistent delivery modes) can be sent over the bridge link without any changes to their delivery modes. Topic subscriptions must be added to the queue to attract messages published to specific topics of interest.</p>
    <p>The bridge connection to the remote Message VPN must first be disabled through the <code>shutdown</code> Remote Message VPN Bridge CONFIG command before you can specify the durable message queue to use for the bridge connection. To specify an existing durable queue (with an exclusive access type) on the remote Message VPN to establish a Guaranteed Messaging Flow connection to, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge/remote/message-vpn)# message-spool queue &lt;name&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;name&gt;</code> is the name of an existing, durable queue. This queue must have an exclusive access type.</p>
    <p>The no version of this command (<code>no message-spool queue</code>) removes the durable message queue from the remote Message VPN bridge. If the bridge is currently established then the binding is removed from the event broker.</p>
    <p class="Note">
            The remote Message VPN bridge attempts to bind to the durable queue once the link has been established to the event broker (it binds to the queue immediately if the link is already established). If the bind fails, an event log is generated that includes the reason for the failure.
        </p>
    <h3><a name="Config-Msg-Window"/>Configuring Message Spool Window Sizes</h3>
    <p class="Caution">Configuring an excessively large message spool window size on low-latency VPN bridge links can negatively impact network performance. Contact Solace for technical support before changing this parameter, as they can assist you in choosing the appropriate value for your network conditions.</p>
    <p>The message spool window size dictates how many outstanding Guaranteed messages may be sent over the remote Message VPN bridge connection before an acknowledgment to the remote queue must be returned. </p>
    <p>You must first disable the remote Message VPN bridge connection to the event broker before configuring the message spool window size for use by Guaranteed Messaging. The client username to be used for the remote Message VPN bridge connection must first be configured before enabling access through the <code>no shutdown</code> Remote Message VPN Bridge CONFIG command. Refer to <MadCap:xref href="#Compress">Enabling Data Compression</MadCap:xref>.</p>
    <p>By default, clients cannot create remote Message VPN bridge connections—permission must first be configured in the client profile that is assigned to the client username. Permission to create bridge connections can be enabled the <code>allow-bridge-connections</code> Client Profile CONFIG command. Refer to <MadCap:xref href="../../Security/Configuring-Client-Profiles.htm">Configuring Client Profiles</MadCap:xref> for details.</p>
    <p>To configure the message spool window size for use by Guaranteed Messaging when the bridge connects to the event broker using the specified remote Message VPN, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge/remote/message-vpn)# message-spool window-size &lt;number&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;number&gt;</code> is the integer value representing the new message spool window size to the event broker. The valid range is 1 to 65535, and the default value is 255 if this parameter is not provided. To maintain performance, if you increase the window size above 255 you'll need to set the <code>min-msg-burst</code> for the G-1 queue in the client profile used by the bridge to the same value. For information on configuring <code>min-msg-burst</code> refer to <MadCap:xref href="../../Messaging/Managing-Event-Delivery-Resources.htm#managing_msg_delivery_resources_2491525118_201457">Configuring Egress Queue Minimum Message Bursts</MadCap:xref>.</p>
    <p>The <code>no</code> version of this command, <code>no message-spool window-size</code>, resets the message spool window size value back to default.</p>
    <pre>
      <code>solace(configure/bridge/remote/message-spool)# no window-size</code>
    </pre>
    <h3><a name="Acess-to-Remote"/>Enabling Access to Remote VPN Bridge Connections</h3>
    <ul>
      <li>To enable access to remote Message VPN bridge connections on a per bridge basis, enter the following Remote Message VPN Bridge CONFIG command: <pre>solace(configure/bridge/remote/message-vpn)# no shutdown</pre></li>
      <li>To disable access to remote Message VPN bridge connections on a per bridge basis, enter the following CONFIG command:<pre>solace(configure/bridge/remote/message-vpn)# shutdown</pre></li>
    </ul>
    <h3><a name="Compress"/>Enabling Data Compression</h3>
    <p>By default, bridge data traffic is uncompressed, but you can choose to compress it by following these steps:</p>
    <ol>
      <li>Disable the bridge connection to the remote Message VPN.</li>
      <li>You need to ensure you've configured the correct port on the remote Message VPN's event broker for your application. If you only want to compress data traffic, you should use the compression port (port 55003 is the default). If you plan to compress  and TLS/SSL encrypt the data traffic, use the SSL port (port 55443 is the default). For instructions on how to configure data encryption refer to <MadCap:xref href="#Encrypt">Enabling TLS/SSL Encryption for Bridge Connections</MadCap:xref>.</li>
      <li>Use this command to enable data compression:<pre>solace(configure/bridge/remote/message-vpn)# compressed-data</pre><p>The <code>no</code> version, <code>no compressed-data</code>,specifies that no data compression be used.</p></li>
    </ol>
    <h3><a name="Encrypt"/>Enabling TLS/SSL Encryption for Bridge Connections</h3>
    <p>Plain text over TCP is the default encoding for bridge connections; however, you can choose to use TLS/ SSL encryption over TCP. </p>
    <p>To configure TLS/SSL encryption you'll need to follow these steps:</p>
    <ol>
      <li>An SSL server certificate, and the matching trusted CA, must be configured on the remote Message VPN's event broker.</li>
      <li>You need to ensure that the port you've configured on the remote Message VPN's event broker is the SSL port; otherwise, the connection won't be established. The default SSL port is 55443, and  <MadCap:xref href="#Config-Remote-VPNs">Configuring Remote Message VPNs</MadCap:xref> has more configuration information.</li>
      <li>Use this command to enable SSL:<pre>solace(configure/bridge/remote/message-vpn)# ssl</pre><p>The <code>no</code> version, <code>no ssl</code>, specifies that TLS/SSL encryption should not be used.</p></li>
    </ol>
    <h3><a name="client-profiles"/>Configuring Client Profiles for Uni-Directional Bridges</h3>
    <p>By default, when a uni-directional bridge establishes a connection to the given remote Message VPN, the TCP parameters from a non-editable, default client profile, <code>#client-profile</code>, are used (this default client profile has a TCP max window size of 2 MB). However, if the TCP parameters used by the <code>#client‑profile</code> client profile are not suitable for your network, can use those from another client profile on the local Message VPN.</p>
    <p class="Note">When establishing a bi-directional bridge, the client profile associated with the client username is fully configurable (that is, no default client profile like that used for a uni-directional bridge is used).</p>
    <p>To specify a client profile that will provide the TCP parameters to use for the uni‑directional bridge, enter the following CONFIG commands:</p>
    <pre>solace(configure/bridge/remote/message-vpn)# unidirectional
solace(...dge/remote/message-vpn/unidirectional)# client‑profile &lt;name&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;name&gt;</code> is the name of a client profile that exists on the local Message VPN. A client profile name can contain up to 32 alphanumeric characters (case‑sensitive).</p>
    <p>The no version of this command, <code>no client-profile</code>, removes the current client profile assignment, and reassigns the default client profile, <code>#client-profile</code></p>
    <p class="Note">
            If you make the bridge bi-directional (that is, if you later configure another bridge of the same name that uses the same Message VPNs but in the reverse order), the TCP parameters from another client profile associated with a client username specified by the opposite end of the bridge are used to transport messages in the opposite direction.
        </p>
    <h2 class="with-rule"><a name="Retry-Delays"/>Configuring Remote Retry Delays</h2>
    <p>To configure the number of seconds that must pass before retrying a connection to a remote event broker, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge)# remote retry delay &lt;seconds&gt;</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;seconds&gt;</code> is an integer from 0 to 255 for the number of seconds to wait before retrying a connection to a remote event broker. The default value is 3.</p>
    <p>The no version of this command, <code>no remote retry delay</code>, resets the number of seconds to wait back to the default value.</p>
    <h2 class="with-rule"><a name="remote-topic-sub"/>Configuring Remote Subscription Topics</h2>
    <p>To add a topic subscription to the Message VPN bridge used on the remote event broker, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge)# remote subscription-topic &lt;topic&gt; [deliver-always]</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;topic&gt;</code> is the name of the topic subscription to be added in the form <code>a/b/c</code>.</p>
    <p><code>deliver-always</code> configures the topic subscription as DA rather than with a configured remote DTO priority. A given topic may be DTO or DA, but not both.</p>
    <p>The no version of this command, <code>no remote subscription-topic &lt;topic&gt;</code>, removes the specified topic subscription from the Message VPN bridge used on the remote event broker.</p>
    <p class="Note">For Request-Reply messaging, it's necessary to add the return address as a topic subscription on the Message VPN Bridge for the reply message to be sent back to the Publisher publishing the request messages.</p>
    <h2 class="with-rule"><a name="Config-SSL"/>Configuring TLS/SSL</h2>
    <p>To enter the SSL configuration mode for the current Message VPN Bridge, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge)# ssl</pre>
    <p>The CLI is now at the level to configure SSL connections on the current Message VPN Bridge. From here, you can configure the cipher suites that the bridge will use for negotiation with the event broker of the remote Message VPN as well as the common names that are trusted by the bridge that will be verified against the remote server certificate during the SSL handshake.</p>
    <h3><a name="Config-Cipher"/>Configuring Cipher Suites</h3>
    <p>A list of cipher suites, in order of preference, can be specified to negotiate with the event broker of the remote Message VPN. By default, all supported cipher suites are used, ordered from the most secure to the least secure. An empty cipher suite list will prevent the bridge from initiating a connection.</p>
    <p>For a full list of cipher suites supported by the Solace PubSub+ event brokers, see <MadCap:xref MadCap:unresolvedLink="import-link:transport_security_and_compression_445161506_28596" href="../../Security/TLS-SSL-Message-Encryption-Overview.htm#transport_security_and_compression_440573439_213360">Supported Cipher Suites</MadCap:xref>.</p>
    <p>To configure which cipher suites should be use on the bridge connection, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge/ssl)# cipher-suite {default | empty | name &lt;suite-name&gt; [{before | after} &lt;suite-name&gt;]}</pre>
    <p><u>Where</u>:</p>
    <p><code>default</code> specifies that the default list of supported cipher suites, ordered from most secure to least secure, may be used.</p>
    <p><code>empty</code> removes all cipher suites from the list.</p>
    <p><code>name &lt;suite-name&gt;</code> adds the specified cipher suite to the list of suites to be used.</p>
    <p><code>before &lt;suite-name&gt;</code> specifies that the suite specified by the <code>name</code> parameter should be inserted into the list immediately before (that is, with a higher priority than) the suite specified by the <code>before</code> parameter.</p>
    <p><code>after &lt;suite-name&gt;</code> specifies that the suite specified by the <code>name</code> parameter should be inserted into the list immediately after (that is, with a lower priority than) the suite specified by the <code>after</code> parameter.</p>
    <p>The no version of this command, <code>no cipher suite name &lt;suite-name&gt;</code>, removes the specified cipher suite from the list of eligible cipher suites.</p>
    <h3><a name="Trusted-Common"/>Configuring Lists of Trusted Common Names</h3>
    <p>The Message VPN Bridge uses a list of trusted common names to determine which security certificates it will accept based on their common names. By default, the list of trusted common names is empty, meaning that the bridge will not trust any common names.</p>
    <p>To configure a list of trusted common names for the Message VPN Bridge, enter the following CONFIG command:</p>
    <pre>solace(configure/bridge/ssl)# trusted-common-name {empty | name &lt;common-name&gt;}</pre>
    <p><u>Where</u>:</p>
    <p><code>empty</code> removes all previously specified common names from the list.</p>
    <p><code>name &lt;common-name&gt;</code> specifies the name of a certificate to add to the list of trusted common names.</p>
    <p>The no version of this command, <code>no trusted-common-name name &lt;common-name&gt;</code>, removes the specified common name from the list of trusted common names.</p>
    <h2 class="with-rule"><a name="start-connections"/>Starting/Stopping Bridge Connections</h2>
    <p class="Caution">The <code>shutdown</code> Bridge CONFIG command disconnects the bridge client from the remote Message VPN. No new connection is attempted to the remote Message VPN until the bridge is enabled again through the <code>no shutdown</code> Bridge CONFIG command.</p>
    <ul>
      <li>To start a bridge connection, enter the following CONFIG command:
             <pre>solace(configure/bridge)# no shutdown</pre></li>
      <li>To stop a bridge connection, enter the following CONFIG command:
             <pre>solace(configure/bridge)# shutdown</pre></li>
    </ul>
    <p class="Note">By default, Message VPN bridges are not enabled.</p>
  </body>
</html>
