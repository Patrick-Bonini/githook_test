<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/Stylesheets/MainStylesForReview.css" rel="stylesheet" type="text/css"/>
  </head>
  <body>
    <h1>Monitoring Kafka Bridges</h1>
    <p>There are a number of CLI show commands that you can use to validate and monitor the Kafka bridge configuration and connections on Solace PubSub+ event brokers.</p>
    <div class="Warning">Any Kafka bridging configuration made in BETA versions (earlier than 10.6.1) used in standalone deployments will be discarded upon upgrade to version 10.6.1 and later. In addition, you must remove any BETA Kafka bridging configuration used in a redundant (HA) deployment before attempting to upgrade to 10.6.1 or later.</div>
    <h2>Displaying System Level Kafka Bridging Information</h2>
    <p>To monitor the system level status for your Kafka bridging deployment, enter the following command:</p>
    <pre xml:space="preserve">solace&gt; show kafka</pre>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example Output</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <pre xml:space="preserve">
Number of Kafka Broker Connections : 100 (of max 300)
Number of Configured Kafka Bridges : 6 (of max 10)
 
Kafka Receivers
  Configured     : 4
  Operational    : 4
 
Kafka Senders
  Configured     : 2
  Operational    : 1</pre>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <h2>Displaying Message VPN Level Kafka Bridging Information</h2>
    <p>To monitor the Message VPN level status for your Kafka bridging deployment, enter the following command:</p>
    <pre xml:space="preserve">solace&gt; show message-vpn &lt;vpn-name&gt; kafka</pre>
    <MadCap:dropDown>
      <MadCap:dropDownHead>
        <MadCap:dropDownHotspot>Example Output</MadCap:dropDownHotspot>
      </MadCap:dropDownHead>
      <MadCap:dropDownBody>
        <pre xml:space="preserve">
Message VPN : blue
 
Number of Kafka Broker Connections : 34 (of max 123)
 
Kafka Receivers
  Configured     : 2
  Operational    : 2
 
Kafka Senders
  Configured     : 1
  Operational    : 0</pre>
      </MadCap:dropDownBody>
    </MadCap:dropDown>
    <h2>Displaying Kafka Receiver Information</h2>
    <p>To monitor Kafka receiver configuration and status, enter the following User EXEC command:</p>
    <pre xml:space="preserve">show message-vpn &lt;vpn-name&gt; kafka kafka-receiver &lt;receiver-name&gt; [detail | stats | client-certificate | keytab | remote-broker &lt;broker-name&gt; | topic-binding &lt;kafka-topic-name&gt; [detail]]</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;vpn-name&gt;</code> is the name of the Message VPN where the Kafka receiver is configured.</p>
    <p><code>&lt;receiver-name&gt;</code> is the name of the Kafka receiver you want to display information for. </p>
    <p><code>stats</code> displays statistics information, including the total number of requests and messages passed through  the Kafka receiver.</p>
    <p><code>client-certificate</code> displays client certificate information for the specified Kafka receiver.</p>
    <p><code>keytab</code> displays keytab information for the specified Kafka receiver. </p>
    <p><code>remote-broker &lt;broker-name&gt;</code> displays information about the specified remote Kafka broker connected to the specified Kafka receiver.</p>
    <p><code>topic-binding &lt;kafka-topic-name&gt;</code> displays information about the specified topic binding associated with the Kafka receiver.</p>
    <p>
      <u>For example:</u>
    </p>
    <p>To display summary information for all Kafka receivers, enter the following command:</p>
    <pre xml:space="preserve">solace&gt; show message-vpn kafka-bridging-vpn kafka kafka-receiver *</pre>
    <p>To display statistics for a Kafka receiver, enter the following command:</p>
    <pre xml:space="preserve">solace&gt; show message-vpn kafka-bridging-vpn kafka kafka-receiver abc stats</pre>
    <p>To display information about topic bindings associated with a Kafka receiver, enter the following command:</p>
    <pre xml:space="preserve">solace&gt; show message-vpn kafka-bridging-vpn kafka kafka-receiver abc topic-binding *</pre>
    <h2>Displaying Kafka Sender Information</h2>
    <p>To monitor Kafka sender configuration and status, enter the following User EXEC command:</p>
    <pre xml:space="preserve">show message-vpn &lt;vpn-name&gt; kafka kafka-sender &lt;sender-name&gt; [detail | stats | client-certificate | keytab | remote-broker &lt;broker-name&gt; | queue-binding &lt;queue-name&gt; [detail]]</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;vpn-name&gt;</code> is the name of the Message VPN where the Kafka sender is configured.</p>
    <p><code>&lt;sender-name&gt;</code> is the name of the Kafka sender you want to display information for. </p>
    <p><code>stats</code> displays statistics information, including the total number of requests and messages passed through  the Kafka sender. </p>
    <p><code>client-certificate</code> displays client certificate information for the specified Kafka sender.</p>
    <p><code>keytab</code> displays keytab information for the specified Kafka sender. </p>
    <p><code>remote-broker &lt;broker-name&gt;</code> displays information about the specified remote Kafka broker connected to the specified Kafka sender.</p>
    <p><code>queue-binding &lt;queue-name&gt;</code> displays information about the specified queue binding associated with the Kafka sender.</p>
    <p>
      <u>For example:</u>
    </p>
    <p>To display detailed information for a Kafka sender, enter the following command:</p>
    <pre xml:space="preserve">solace&gt; show message-vpn kafka-bridging-vpn kafka kafka-sender abc detail</pre>
    <p>To display information about the remote Kafka brokers a Kafka sender is connected to, enter the following command:</p>
    <pre xml:space="preserve">solace&gt; show message-vpn kafka-bridging-vpn kafka kafka-sender abc remote-broker *</pre>
    <p>To display detailed information about a specific queue binding associated with a Kafka sender, enter the following command:</p>
    <pre xml:space="preserve">solace&gt; show message-vpn kafka-bridging-vpn kafka kafka-sender abc queue-binding q1 detail</pre>
    <h2>Clearing Kafka Bridging Statistics</h2>
    <p>To clear the statistics for Kafka receivers and senders, enter the following command:</p>
    <pre xml:space="preserve">solace# clear message-vpn &lt;vpn-name&gt; {kafka {kafka-receiver &lt;receiver-name&gt; | kafka-sender &lt;sender-name&gt;} stats}</pre>
    <p><u>Where</u>:</p>
    <p><code>&lt;vpn-name&gt;</code> is the name of the Message VPN where the Kafka sender or receiver is configured.</p>
    <p><code>&lt;sender-name&gt;</code> is the name of the Kafka sender you want to clear statistics for. </p>
    <p><code>&lt;receiver-name&gt;</code> is the name of the Kafka receiver you want to clear statistics for. </p>
  </body>
</html>
