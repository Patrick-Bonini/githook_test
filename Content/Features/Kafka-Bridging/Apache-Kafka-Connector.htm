<?xml version="1.0" encoding="utf-8"?>
<html>
  <head>
    </head>
  <body>
    <h1>Connecting to Apache Kafka with Click-to-Connect</h1>
    <p>In <MadCap:variable xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" name="Product-Names.pubsub_brand_only"/> <MadCap:variable xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" name="Product-Names.pubsubmanager_short"/>, you can use the click-to-connect wizard to create an integrated Kafka bridge   in a holistic way that provisions all common portions of the service and connection. </p>
    <p>Refer to <MadCap:xref xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" href="Kafka-Bridging-Overview.htm">Kafka Bridging Overview</MadCap:xref> for details about how <MadCap:variable xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" name="Product-Names.pubsub_brand_only"/> event brokers connect to Apache Kafka. </p>
    <h3 xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="with-rule" MadCap:conditions="Default.HideFromAllOutput">Goals</h3>
    <p xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput">The goal of this tutorial is to demonstrate how to set up a connector in a <MadCap:variable name="Product-Names.pubsub_brand_only"/> event broker to send messages to and receive messages from  Apache Kafka. This tutorial will show you how to:</p>
    <ul xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput">
      <li>
        <p>Configure the event broker to set up the necessary <MadCap:variable name="Product-Names.pubsub_brand_only"/> event broker components with the click-to-connect wizard</p>
      </li>
      <li>
        <p>Review messages received from Apache Kafka in <MadCap:variable name="Product-Names.pubsub_brand_only"/> <MadCap:variable name="Product-Names.pubsubmanager_short"/></p>
      </li>
      <li>
        <p>Send messages to Apache Kafka using the <b>Try Me!</b> functionality built into the <MadCap:variable name="Product-Names.pubsub_brand_only"/> <MadCap:variable name="Product-Names.pubsubmanager_short"/></p>
      </li>
    </ul>
    <p xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput">Once complete, you can make any special configuration changes to your deployment using <MadCap:variable name="Product-Names.pubsub_brand_only"/> <MadCap:variable name="Product-Names.pubsubmanager_short"/> (see <MadCap:xref href="../../Admin/Broker-Manager/config-kafka-bridge.htm">Configuring Kafka Bridging</MadCap:xref>). </p>
    <h3 class="with-rule">Prerequisites</h3>
    <ul>
      <li>
        <p><MadCap:variable xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" name="Product-Names.pubsub_brand_only"/> event broker version 10.8.1  or later, with the appropriate system and Message VPN scaling parameters configured to enable Kafka bridging.</p>
      </li>
      <li>
        <p>Access to <MadCap:variable xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" name="Product-Names.pubsub_brand_only"/> <MadCap:variable xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" name="Product-Names.pubsubmanager_short"/> (refer to <MadCap:xref xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" href="../../Admin/Broker-Manager/PubSub-Manager-Overview.htm#how-to-access">Accessing  [%=Product-Names.pubsubmanager_short%]</MadCap:xref>).</p>
      </li>
      <li>
        <p><MadCap:conditionalText xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="SAP.SapHideFromOutput">If you are setting up a REST connector for a <MadCap:variable name="Product-Names.cloud_product_short"/><MadCap:variable name="Product-Names.broker_cloud_short"/>s, you</MadCap:conditionalText><MadCap:conditionalText xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="SAP.SapOnlyOutput">You</MadCap:conditionalText> need to generate an API token to allow the Click-to-Connect wizard to authenticate with the <MadCap:variable xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" name="Product-Names.broker_cloud_short"/>. For more information, see <MadCap:xref xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" href="../../Cloud/ght_api_tokens.htm#create-token-clicktoconnect">Creating an API Token for Click-to-Connect</MadCap:xref>.</p>
      </li>
    </ul>
    <h2 class="with-rule">Receiving from Apache Kafka</h2>
    <p>To configure an event broker to receive messages from Apache Kafka using the click-to-connect wizard.</p>
    <ol>
      <li>
        <p>Log in to <MadCap:variable xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" name="Product-Names.pubsubmanager_long"/>.</p>
      </li>
      <li>
        <p>Select a Message VPN.</p>
      </li>
      <li>
        <p>In the navigation bar, click <b>Connector Wizards</b>.</p>
      </li>
      <li>
        <p>Click <b>Apache</b>.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Connector-Wizard-Vendor-Selection-Page.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Click <b>Receive From Apache Kafka</b> then click <b>Authenticate</b>.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Receive-From-Apache-Kafka-Service-Selection.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Provide a name for the connector and select the <b>Authentication Scheme</b>. This is the scheme the event broker uses to establish a connection to the remote Kafka cluster. Based on the scheme you selected, provide the following:</p>
        <ul>
          <li>
            <p>None—no authentication required. This option may be useful for anonymous connections or when a Kafka receiver does not require authentication.</p>
          </li>
          <li>
            <p>Basic—username and password.</p>
          </li>
          <li>
            <p>SCRAM—username, password, and the SCRAM hash.</p>
          </li>
          <li>
            <p>Client Certificate—the PEM formatted content for the client certificate and the password for the certificate.</p>
          </li>
          <li>
            <p>Kerberos—the service name of the remote Kafka broker, the user principal name of the Kafka receiver, and the keytab file for the Kafka receiver. </p>
          </li>
          <li>
            <p>OAuth—the OAuth client ID, client secret, and token endpoint URL. You can also specify the OAuth scope.</p>
          </li>
        </ul>
        <p>For more information about these authentication schemes, see <MadCap:xref xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" href="Kafka-Bridging-Setup-Overview.htm#Configur">Configuring  Authentication Schemes for Kafka Receivers</MadCap:xref>.<MadCap:conditionalText xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput"> This example uses <code>Basic</code> authentication.</MadCap:conditionalText></p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Authenticate-Page-Receiver.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Click <b>Connector Setup</b> then provide the <b>Bootstrap IP Address list</b>. A bootstrap address is the fully qualified domain name (FQDN) or IP address and optional port of one Kafka broker in a Kafka cluster where the Kafka receiver can fetch the state of the entire cluster. You can configure a list of these addresses for the Kafka receiver to try in the event that an attempt to connect to one address fails.</p>
        <p xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput">This example uses <code>example.kafka.com</code>.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Connector-Setup-Page-Receiver.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Optional. Configure TLS/SSL encryption. For more information, see <MadCap:xref xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" href="Kafka-Bridging-Setup-Overview.htm#Enabling">Enabling TLS/SSL Encryption for Kafka Receiver Connections</MadCap:xref>.</p>
      </li>
      <li>
        <p>Click <b>Topic Setup</b> and then provide the name of the <b>Kafka Topic</b> you want to receive messages from, and specify the <b>Initial Offset</b> to consume from that topic.</p>
      </li>
      <li>
        <p> Specify <b>Solace Topic Mapping</b>. You do this by providing a substitution expression that generates the SMF topic for each message received from Kafka. For more information about substitution expressions, see <MadCap:xref xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" href="../../Messaging/Substitution-Expressions-Overview.htm">Substitution Expressions Overview</MadCap:xref>. For example, you could specify the substitution expression <code>rectopic1</code>, so all messages the Kafka receiver consumes from the remote Kafka cluster are published to this topic on the event broker. </p>
      </li>
      <li>
        <p>Optional. Specify <b>Solace Key Mapping</b>. You do this by providing a substitution expression that generates a partition key for each message received from Kafka. This key determines which queue partition a message is sent to.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Topic-Setup-Page-Receiver.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Click <b>Create and Enable Connector</b> to finalize the connector creation.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Summary-Page-Receiver.png" alt=""/>
        </div>
      </li>
      <li xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput">
        <p>Send a message from your Kafka cluster. </p>
      </li>
      <li xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput">
        <p>Navigate to a queue with an appropriate topic subscription to verify the message was received.</p>
      </li>
    </ol>
    <h2 class="with-rule">Sending to Apache Kafka</h2>
    <p>To configure an event broker to send messages to Apache Kafka using the click-to-connect wizard.</p>
    <ol>
      <li>
        <p>Log in to <MadCap:variable xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" name="Product-Names.pubsubmanager_long"/>.</p>
      </li>
      <li>
        <p>Select a Message VPN.</p>
      </li>
      <li>
        <p>In the navigation bar, click <b>Connector Wizards</b>.</p>
      </li>
      <li>
        <p>Click <b>Apache</b>.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Connector-Wizard-Vendor-Selection-Page.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Click <b>Send To Apache Kafka</b> then click <b>Authenticate</b>.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Send-To-Apache-Kafka-Service-Selection.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Provide a name for the connector and select the <b>Authentication Scheme</b>. Based on the scheme you selected, provide the following:</p>
        <ul>
          <li>
            <p>None—no authentication required. This option may be useful for anonymous connections or when a Kafka receiver does not require authentication.</p>
          </li>
          <li>
            <p>Basic—username and password.</p>
          </li>
          <li>
            <p>SCRAM—username, password, and the SCRAM hash.</p>
          </li>
          <li>
            <p>Client Certificate—the PEM formatted content for the client certificate and the password for the certificate.</p>
          </li>
          <li>
            <p>Kerberos—the service name of the remote Kafka broker, the user principal name of the Kafka sender, and the keytab file for the Kafka sender.  </p>
          </li>
          <li>
            <p>OAuth—the OAuth client ID, client secret, and token endpoint URL. You can also specify the OAuth scope.</p>
          </li>
        </ul>
        <p>For more information about these authentication schemes, see <MadCap:xref xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" href="Kafka-Bridging-Setup-Overview.htm#Configur7">Configuring Authentication Schemes for Kafka Senders</MadCap:xref>.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Authenticate-Page-Sender.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Provide the <b>Bootstrap IP Address list</b>.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Connector-Setup-Page-Sender.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Optional. Configure TLS/SSL encryption. For more information, see <MadCap:xref xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" href="Kafka-Bridging-Setup-Overview.htm#Enabling3">Enabling TLS/SSL Encryption for Kafka Sender Connections</MadCap:xref>.</p>
      </li>
      <li>
        <p>Click <b>Subscription Setup</b> and provide the name of the <b>Kafka Topic</b> on the remote Kafka cluster that you want to send messages to.<MadCap:conditionalText xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput"> This example uses <code>topic1</code>.</MadCap:conditionalText></p>
      </li>
      <li>
        <p>Optional. Specify <b>Kafka Key Mapping</b> . You do this by providing a substitution expression that generates the Kafka partition key for each message sent to Kafka. For more information about substitution expressions, see <MadCap:xref xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" href="../../Messaging/Substitution-Expressions-Overview.htm">Substitution Expressions Overview</MadCap:xref>.</p>
      </li>
      <li>
        <p>Add a list of topic subscriptions  from which messages are drawn and sent to the remote Kafka cluster.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Topic-Setup-Page-Sender.png" alt=""/>
        </div>
      </li>
      <li>
        <p>Click <b>Create and Enable Connector</b> to finalize the connector creation.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Summary-Page-Sender.png" alt=""/>
        </div>
      </li>
      <li>
        <p xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput">In the <MadCap:variable name="Product-Names.pubsub_brand_only"/> <MadCap:variable name="Product-Names.pubsubmanager_short"/> <b>Try Me!</b> application, send a message to the topic you configured for the connector.</p>
        <div xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" class="thumbnail-container" MadCap:conditions="Default.HideFromAllOutput">
          <img class="solacethumbnail" src="../../Resources/Images/Kafka-Bridging/Connector-Wizards/Try-Me-Page-Sender.png" alt=""/>
        </div>
      </li>
      <li>
        <p xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.HideFromAllOutput">Verify that the message was received by your Kafka cluster. </p>
      </li>
    </ol>
  </body>
</html>
