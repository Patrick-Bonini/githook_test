<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Selecting Which Messages to Replicate</h1>
    <p>To indicate which messages should be replicated between the active and standby site, you must configure a replicated topic subscription for a Message VPN. This topic pattern can be a topic subscription or a queue name subscription (a subscription for a queue is <code class="File_Name">#P2P/QUE/&lt;queueName&gt;</code>). If a published message matches both a replicated topic subscription and an endpoint on the active site, then the message is replicated to the standby site.</p>
    <p>You can also specify a topic subscription exception by adding a leading "!" character to the topic subscription. In this case, messages whose topics match the configured topic subscription exception are not copied to the corresponding Message VPN on the replication site. For more information, see <MadCap:xref href="Replication-VPN-Level-Settings.htm#Config-Rep-Topics">Configuring Replicated Topic Subscriptions</MadCap:xref>.</p>
    <h2 class="with-rule"><a name="data_center_replication_rep_topics_transactions"/>Transactions</h2>
    <p>As with non-transacted messages, it is the replicated topic subscriptions that determine which messages  within a transaction (local and XA) are replicated. Only those messages that match a replicated topic subscription are part of the extended transaction to the mate replication site. Because of this, messages published within a transaction must all match a replicated topic subscription, otherwise parts of the transaction will not be sent to the mate replication site. In the event of a failover, the transaction contents will not match.</p>
    <p>For example, if an XA transaction contains 10 messages, six of which match a replicated topic subscription and four of which do not, only the six matching messages become part of the transaction interactions with the standby site. The active site will have 10 messages and the standby site will have only six when the transaction is committed.</p>
  </body>
</html>
