<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Replication Queue Full</h1>
    <p>If the standby site is down or unreachable for an extended amount of time, the replication queue (<code>#MSGVPN_REPLICATION_DATA_QUEUE</code>) can eventually become full. It is assumed that replication is a high-priority service, so the replication queue size should be set to a large value. A system administrator can adjust the quota of a replication queue. Like all queues, the replication queue has threshold event logs as it fills up, which warns you that the queue may become full and action should be taken.</p>
    <p>By default, if the replication queue becomes full, publishing to replicated topics or using replicated transactions is rejected. No new replicated messages or transactions can be processed. To restore non-replicated service, the administrator has the option of disabling this behavior (by disabling the <code>reject-msg-to-sender-on-discard</code> feature on the replication queue). With this configuration, messages and transactions are not replicated, but local service can be provided. If connectivity is restored and the replication queue is drained, replication will start again. At this point, the administrator should re-enable <code>reject-msg-to-sender-on-discard</code> on the replication queue.</p>
    <h2 class="with-rule"><a name="data_center_replication_rep_queue_pruning"/>Pruning the Replication Queue</h2>
    <p>When the standby site is down and the active site is storing messages and transactions in the replication queue, there is an optimization to help prevent the replication queue from becoming full. Replicated messages that are waiting to be sent to the standby site do not need to be sent if the message has subsequently been consumed on the active site. Since the message is no longer present on the active site, there is no need to send it to the standby site for replication purposes. In this case, those messages are removed, or pruned, from the replication queue, helping to prevent it from becoming full.</p>
  </body>
</html>
