<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Data Center Replication for Disaster Recovery</h1>
    <p>You can put in place a disaster recovery (DR) solution for Solace PubSub+ event brokers using data center replication. Replication provides business continuity and allows mission-critical applications to continue to function during a major service outage to a data center.</p>
    <p class="Note">To implement replication, Config-Sync must be enabled for each event broker in a replicated site. Config‑Sync provides automatic synchronization of Message VPN configuration parameters that must match between replicated event brokers. For more information, see <MadCap:xref href="../Config-Sync/Config-Sync-Overview.htm">Config-Sync</MadCap:xref>. For redundant appliances that are handling Guaranteed Messaging, durable endpoint information such as queue and topic endpoints, topic-to-queue mappings, and queue options are automatically propagated whether Config-Sync is enabled or not.</p>
    <p>When replication is enabled, guaranteed messages that are published to a Message VPN with an <code>active</code> replication state at one data center are automatically propagated to matching Message VPNs with a <code>standby</code> replication state at another data center. The replication data center is typically located in a separate geographic location. In addition, if the messages are part of a local or XA transaction, the transaction is propagated to the standby site and the transaction semantics are respected. For example, rolling back a transaction would roll it back on both sites. Preparing an XA transaction would prepare the transaction on both sites. In a scenario where a major service outage occurs for one replicated data center (that is, one replication site), a service failover to the operational mate replication site can be performed.</p>
    <p>A typical customer deployment model for replicated data center infrastructure is to have a pair of replication sites located some distance apart (perhaps 50 or 100 miles). These sites are considered replication mates, and known collectively as a replication group. The main or primary site will use a high-availability (HA) pair of event brokers  to protect against a local failure of an event broker or equipment in that site. The secondary or standby site may have a single event broker or an HA pair of event brokers. The primary site provides service unless there is a failure of the primary site. If the primary site fails, service is failed over to the backup site. Once the primary site is restored, service can be failed back to the primary site. This model is illustrated in the following diagram:</p>
    <p>
      <img class="border" src="../../Resources/Images/DR-Replication/DR-Overview.png" alt=""/>
    </p>
    <p>The failover of a replication site is often an action that cannot be performed at the messaging layer only—typically there are servers, critical applications, and other infrastructure that must be switched as part of the failover. Therefore the failover is a co-ordinated operation that must be performed by network administrators. It does not happen automatically.</p>
    <p class="Note">Replication is not a replacement for <a href="../HA-Redundancy/Redundancy-and-Fault-Tolerance-Overview.htm" class="link-internal">HA event broker redundancy</a> within a data center. Event broker redundancy provides automatic protection against a single event broker failure. Replication protects against more catastrophic events in the data center and requires manual intervention to effect a failover.</p>
    <MadCap:snippetBlock src="../../Resources/Snippets/replay_replication_unsupported.flsnp"/>
    <MadCap:snippetBlock src="../../Resources/Snippets/Features/DR-Replication/msg-vpn-bridge-message-duplication-warn.flsnp"/>
    <p>For more details about using replication, see:</p>
    <ul>
      <li>
        <MadCap:xref href="How-Replication-Works.htm">How Replication Works</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Replication-Best-Practices.htm">Replication Best Practices</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Select-Replication-Messages.htm">Selecting Which Messages to Replicate</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Sync-Asynch-Replication.htm">Synchronous and Asynchronous Message Replication</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Replication-Queue-Full.htm">Replication Queue Full</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Switching-Service-Overview.htm">Switching Service Between Sites</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Replication-Deployment-Options.htm">Deployment Options for Replication</MadCap:xref>
      </li>
      <li>
        <MadCap:xref href="Replication-DMR-Overview.htm">Using Replication with DMR</MadCap:xref>
      </li>
    </ul>
    <MadCap:snippetBlock src="../../Resources/Snippets/cloud-replication-link.flsnp"/>
    <p>For instructions for setting up replication, see <MadCap:xref href="Configuring-Data-Center-Replication.htm">Configuring Replication</MadCap:xref>.</p>
    <p>To learn how to check the status of replication, see <MadCap:xref href="Monitoring-Replication.htm">Monitoring Replication</MadCap:xref>.</p>
    <p>For details about performing failovers and recovering from failovers, see <MadCap:xref href="Switching-Replication-Service.htm">Procedures for Switching Replication Service Between Sites</MadCap:xref>.</p>
  </body>
</html>
