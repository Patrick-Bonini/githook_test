<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    <link href="../../Resources/TableStyles/Table_Num.css" rel="stylesheet" MadCap:stylesheetType="table"/>
  </head>
  <body>
    <h1>Monitoring Redundancy</h1>
    <p>This section discusses the <code>show</code> commands that you can use to view the configuration and state of Solace PubSub+ appliances used in HA deployments.</p>
    <p>To view the redundancy configuration and status of an appliance, enter the following <code>show</code> command:</p>
    <p class="Code">solace1&gt; show redundancy [detail]</p>
    <p><u>Where</u>:</p>
    <p><code>detail</code> specifies that detailed information on the redundancy configuration should be shown.</p>
    <p class="Tip">To read descriptions of many of the <code>show</code> commands' output values, enter a <code>?</code>  at the end of the command (for example, <code>solace1&gt; show redundancy ?</code>).</p>
    <p>When no parameters are entered, the following summary information is displayed:</p>
    <ul>
      <li><code>Configuration Status</code> indicates whether system redundancy is:<ul><li>“Enabled”—redundancy is started on the event broker.</li><li>“Shutdown”—redundancy is stopped on the event broker.</li><li>“Released”—the event broker is surrendering activity to its mate event broker.</li></ul></li>
      <li><code>Redundancy Status</code> indicates whether the system redundancy operational state:<ul><li>“Up”—the event broker is operational and available to provide service.
            <p class="Note">When only VRRP is available (that is, no ADB mate link is established), check that the redundancy status is "Up" on both event brokers. It is also possible to configure a neighbor link between the event brokers so that you only monitor one event broker—the neighbor link will provide the mate status necessary to properly determine the state.</p></li><li>“Down”—the event broker is not operational and is unavailable to provide service.</li></ul></li>
      <li><code>Auto-Revert</code> indicates whether auto-revert is enabled or disabled (refer to <MadCap:xref href="Configuring-Appliance-Redundancy-Parameters.htm#managing_router_redundancy_2753819523_346478">Enabling Auto-Revert</MadCap:xref>).</li>
      <li><code>Redundancy Mode</code> indicates the redundancy mode being provided (Active/Active, Active/Standby, or None). This state is derived from the redundancy and IP interface configuration. </li>
      <li><code>Active-Standby Role</code> indicates the configured active-standby-role (refer to <MadCap:xref href="Configuring-Appliance-Redundancy-Parameters.htm#Assignin">Assigning the Active/Standby Role</MadCap:xref>).</li>
      <li><code>Failover Criteria</code> indicates the conditions that trigger an activity switch (refer to <MadCap:xref href="Configuring-Appliance-Redundancy-Parameters.htm#Specifyi">Specifying the Redundancy Failover Criteria </MadCap:xref>).</li>
      <li>A list of configured redundancy interfaces (refer to <MadCap:xref href="Configuring-Appliance-Redundancy-Parameters.htm#Assignin2">Assigning a Redundancy Interface</MadCap:xref>). </li>
      <li>a table with redundancy information for each virtual router:<ul><li>the activity status as described in the <MadCap:xref href="#General-Status">General Status Items</MadCap:xref> table (Local Active or Mate Active).</li><li>the VRRP VRID.</li><li>the overall state of the redundancy  interfaces.</li><li>the VRRP status for the VRID as described in <MadCap:xref href="#General-Status">General Status Items</MadCap:xref> table (Master, meaning the local event broker is active for the VRID from a VRRP viewpoint, or Backup, meaning the remote event broker is active for the VRID from a VRRP viewpoint).</li><li>the VRRP priority with which the local event broker is advertising (0-255).</li></ul></li>
    </ul>
    <p>If the <code>detail</code> parameter is provided, the following additional information is displayed:</p>
    <ul>
      <li>The primary event broker for the virtual router (that is, the physical address of the event broker that owns the VRID).</li>
      <li>The “Up” or “Down” state of the link  between the local and backup event broker.</li>
      <li>The current priority reported by the mate event broker for the VRID, which is the highest of the priorities that the remote event broker is advertising over CSPF, VRRP and the ADB Hello Protocol as described in the <MadCap:xref href="#Local-Priority">Local Priority Level Descriptions</MadCap:xref> (Assert-Activity, Active, Standby, Primary-Reconcile, Backup Reconcile, or Release).</li>
      <li>Refer to the following tables for further explanation of the additional information displayed: <ul><li><MadCap:xref href="#General-Status">General Status Items</MadCap:xref>—describes the general status items for the virtual routers.</li><li><MadCap:xref href="#Redundancy-Status">Redundancy Status Items</MadCap:xref>—indicates whether the redundancy facility believes the event broker is in a state where it could provide service for VRID.</li><li><MadCap:xref href="#SMRP">SMRP Status Items</MadCap:xref>—indicates whether Subscription Management Routing Protocol (SMRP) is ready to provide service for the VRID.</li><li><MadCap:xref href="#Msg-Spool">Message Spool Status Items</MadCap:xref>—indicates the readiness of the message spool facility to provide Guaranteed messaging for the VRID.</li></ul></li>
    </ul>
    <table class="TableStyle-Table_Num" style="caption-side: top;width: 95%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" cellspacing="0">
      <caption valign="top" style="padding-bottom: 3pt;">
        <p class="TblCaption"><a name="General-Status"/>General Status Items</p>
      </caption>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Item</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Values</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Activity Status—Whether the local event broker is active for the VRID.</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <ul>
              <li>Local Active—The local event broker is active for the specified VRID.</li>
              <li>Mate Active—The mate event broker is active for the specified VRID.</li>
              <li>Subscriptions Pending—The local event broker has not yet taken activity for the virtual router because it is in the process of adding internal management subscriptions (for example, <code>#P2P/v:&lt;router-name&gt;/#client/&gt;</code>).</li>
              <li>Shutdown—Redundancy is shutdown.</li>
              <li>Local Inactive—The local event broker should be "Local Active", but some preconditions are not being met, preventing it from transitioning. Use the <code>show redundancy detail</code> User EXEC command to investigate further.</li>
            </ul>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">VRRP Status—Whether the local event broker owns the VRID from the viewpoint of the VRRP.</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <ul>
              <li>Master</li>
              <li>Backup</li>
            </ul>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Priority Reported By Mate—The priority the local event broker is announcing for the VRID.</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <ul>
              <li>Assert Activity</li>
              <li>Active</li>
              <li>Standby</li>
              <li>Primary Reconcile</li>
              <li>Backup Reconcile</li>
              <li>Release</li>
            </ul>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
            <p class="Tbl_Body">Subscriptions Pending—The local event broker has not yet taken activity for the virtual router because it is in the process of adding internal management subscriptions for the virtual router.</p>
          </td>
          <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p class="Tbl_Body">Example:</p>
            <p class="Tbl_Bullet" style="font-family: Courier;font-weight: normal;font-style: normal;letter-spacing: 0em;text-decoration: none;">
              <code>#SEMP/v:&lt;router-name&gt;/&gt; </code>
            </p>
            <p class="Tbl_Bullet" style="font-family: Courier;font-weight: normal;font-style: normal;letter-spacing: 0em;text-decoration: none;">
              <code>#P2P/v:&lt;router-name&gt;/#client/&gt;</code>
            </p>
          </td>
        </tr>
      </tbody>
    </table>
    <table class="TableStyle-Table_Num" style="caption-side: top;width: 95%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" cellspacing="0">
      <caption valign="top" style="padding-bottom: 3pt;">
        <p class="TblCaption"><a name="Local-Priority"/>Local Priority Level Descriptions</p>
      </caption>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <col class="TableStyle-Table_Num-Column-Column1"/>
      <thead>
        <tr class="TableStyle-Table_Num-Head-Header1">
          <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Level</th>
          <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Description</th>
        </tr>
      </thead>
      <tbody>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Assert-Activity</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The priority level the virtual router uses when it wants to assert itself as the “master” of the VRID. After a timeout period, when the virtual router is sure that the mate event broker does not claim to be the “master”, the local priority value for the virtual router is reduced to Active.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Active</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The normal priority level to indicate that the virtual router is currently active.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Standby</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The priority level that a backup virtual router uses to advertise that it is not currently active, but it is capable of taking activity if the primary virtual router unavailable.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
            <p class="Tbl_Body">Primary-Reconcile</p>
          </td>
          <td class="TableStyle-Table_Num-BodyD-Column1-Body1">
            <p class="Tbl_Body">The priority level that a virtual router uses on start up, to ensure that it does not take activity before it is ready.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Backup-Reconcile</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The priority level that a backup virtual router uses to indicate that it is initializing, and it will not be able to take activity even if the primary virtual router is unavailable.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
            <p class="Tbl_Body">Release</p>
          </td>
          <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
            <p class="Tbl_Body">The priority level that a virtual router uses to indicate that it is no longer willing to act on behalf of the IP address. This priority level is advertised when the <code>release-activity</code> Redundancy CONFIG command is used. It is also the priority advertised for the backup virtual router whenever the redundancy feature is shutdown on the virtual router.</p>
          </td>
        </tr>
        <tr class="TableStyle-Table_Num-Body-Body1">
          <td colspan="2" class="TableStyle-Table_Num-BodyA-Column1-Body1">
            <p class="VFootnoteFirst">1. There are a number of event broker priority levels defined for redundancy, which are advertised by the virtual routers. When activity switches occur between mates, the advertised priority levels for each appliance change to indicate their current state and role. These advertisements are broadcast between redundant pairs through VRRP. For example, the virtual router that advertises the highest priority level for a given VRID is the active virtual router for that VRID. All messages and system requests for that VRID are then forwarded to that virtual router.</p>
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <table class="TableStyle-Table_Num" style="caption-side: top;width: 95%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" cellspacing="0">
        <caption valign="top" style="padding-bottom: 3pt;">
          <p class="TblCaption"><a name="Redundancy-Status"/>Redundancy Status Items</p>
        </caption>
        <col class="TableStyle-Table_Num-Column-Column1" style="width: 50%;"/>
        <col class="TableStyle-Table_Num-Column-Column1" style="width: 50%;"/>
        <thead>
          <tr class="TableStyle-Table_Num-Head-Header1">
            <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Item</th>
            <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Values</th>
          </tr>
        </thead>
        <tbody>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
              <p class="Tbl_Body">Configuration Status—The event broker's redundancy configuration status.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <ul>
                <li>Enabled</li>
                <li>Release</li>
                <li>Shutdown</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
              <p class="Tbl_Body">Message Spool Status—Whether the message spool is ready to provide Guaranteed Messaging.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
              <ul>
                <li>Ready</li>
                <li>Not Ready</li>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </p>
    <p>
      <table class="TableStyle-Table_Num" style="caption-side: top;width: 95%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" cellspacing="0">
        <caption valign="top" style="padding-bottom: 3pt;">
          <p class="TblCaption"><a name="SMRP"/>SMRP Status Items</p>
        </caption>
        <col class="TableStyle-Table_Num-Column-Column1" style="width: 50%;"/>
        <col class="TableStyle-Table_Num-Column-Column1" style="width: 50%;"/>
        <thead>
          <tr class="TableStyle-Table_Num-Head-Header1">
            <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Item</th>
            <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Values</th>
          </tr>
        </thead>
        <tbody>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
              <p class="Tbl_Body">DB Build Status—Whenever redundancy is enabled on an event broker, it can take up to a minute to ready the database for taking activity from its mate event broker on demand.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <ul>
                <li>Ready</li>
                <li>Not Ready (% complete)</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
              <p class="Tbl_Body">DB Sync Status—When an event broker is restarted while running Multi-Node Routing, it must  synchronize its database with its neighbor event brokers to learn of the subscriptions it will become active for. This value indicates the SMRP synchronization status.</p>
              <p class="Note">If synchronization to any neighbor event broker is not completed within three minutes, then SMRP stops trying to synchronize its database to that event broker.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
              <ul>
                <li>Ready</li>
                <li>Not Ready</li>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </p>
    <p class="Spacer_-_smallest">
      <table class="TableStyle-Table_Num" style="caption-side: top;width: 95%;mc-table-style: url('../../Resources/TableStyles/Table_Num.css');" cellspacing="0">
        <caption valign="top" style="padding-bottom: 3pt;">
          <p class="TblCaption"><a name="Msg-Spool"/>Message Spool Status Items</p>
        </caption>
        <col class="TableStyle-Table_Num-Column-Column1" style="width: 50%;"/>
        <col class="TableStyle-Table_Num-Column-Column1" style="width: 50%;"/>
        <thead>
          <tr class="TableStyle-Table_Num-Head-Header1">
            <th class="TableStyle-Table_Num-HeadE-Column1-Header1">Item</th>
            <th class="TableStyle-Table_Num-HeadD-Column1-Header1">Values</th>
          </tr>
        </thead>
        <tbody>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
              <p class="Tbl_Body">Message Spool Config Status—The config status of message spooling on the Guaranteed Messaging VRID.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <ul>
                <li>Enabled</li>
                <li>Shutdown</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
              <p class="Tbl_Body">VRID Config Status—The local Guaranteed Messaging VRID configuration matches what has been reported by the ADB.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <ul>
                <li>Ready</li>
                <li>Config Mismatch</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
              <p class="Tbl_Body">ADB Status—The high-level status of the ADB.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <ul>
                <li>Not Ready</li>
                <li>Ready</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
              <p class="Tbl_Body">Flash Module Status—The high-level status of the Flash Memory Module on the ADB.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyD-Column1-Body1">
              <ul>
                <li>Not Ready</li>
                <li>Ready</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
              <p class="Tbl_Body">Power Module Status—The high-level status of the power module on the ADB.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <ul>
                <li>Not Ready</li>
                <li>Ready</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
              <p class="Tbl_Body">ADB Contents—Is the ADB contents valid.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <ul>
                <li>Invalid</li>
                <li>Stale</li>
                <li>Ready</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
              <p class="Tbl_Body">Disk Status—The status of the external disk storage array.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <ul>
                <li>Not Ready</li>
                <li>Ready</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyE-Column1-Body1">
              <p class="Tbl_Body">Disk Contents—Whether the spool file directory on the external disk storage array appears to be valid. This value will generally be “Unknown” on an event broker that is not active.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyD-Column1-Body1">
              <ul>
                <li>Unknown</li>
                <li>Mount Error</li>
                <li>Invalid</li>
                <li>Stale</li>
                <li>Ready</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyH-Column1-Body1">
              <p class="Tbl_Body">ADB Datapath Status—Whether the ADB datapath is able to spool messages.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyG-Column1-Body1">
              <ul>
                <li>Ready</li>
                <li>Not Ready</li>
              </ul>
            </td>
          </tr>
          <tr class="TableStyle-Table_Num-Body-Body1">
            <td class="TableStyle-Table_Num-BodyB-Column1-Body1">
              <p class="Tbl_Body">Internal Redundancy State—The internal state of the Guaranteed Messaging Redundancy facility.</p>
            </td>
            <td class="TableStyle-Table_Num-BodyA-Column1-Body1">
              <ul>
                <li>AD-Activating</li>
                <li>AD-Active</li>
                <li>AD-Disabled</li>
                <li>AD-NotReady</li>
                <li>AD-Standby</li>
                <li>AD-Unknown</li>
              </ul>
            </td>
          </tr>
        </tbody>
      </table>
    </p>
  </body>
</html>
