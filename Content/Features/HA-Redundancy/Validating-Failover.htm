<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head/>
  <body>
    <h1>Validating Failover Before Going into Production</h1>
    <p>After configuring a redundant pair of Solace PubSub+ event brokers, and prior to deploying them into production, it's recommended that the administrator validate their failover operation.</p>
    <p class="Note" MadCap:autonum="&lt;b&gt;Note:  &lt;/b&gt;">SolAdmin includes the Router Audit tool to verify the correct configuration of redundant event broker pairs. Solace recommends using SolAdmin to manage the event brokers in a redundant pair, thereby automatically ensuring consistency of configuration for both primary and backup event brokers when making configuration changes.</p>
    <h2 class="with-rule"><a name="managing_router_redundancy_2753819523_330776">
            </a>Validating Active/Standby Failover Operation</h2>
    <p>The following steps are recommended to validate active/standby failover. Validate message flows for all Message VPNs configured on the event brokers.</p>
    <ol>
      <li>Connect Direct and Guaranteed clients to the primary event broker, as applicable, and verify message flow.</li>
      <li>Run the <code>release-activity</code> Redundancy CONFIG command on the primary event broker. Verify that clients reconnect to the backup event broker, and verify message flow.</li>
      <li>Run the <code>no release-activity</code> Redundancy CONFIG command on the primary event broker.</li>
      <li>Run the <code>redundancy revert-activity</code> Admin EXEC command on the backup event broker. Verify that clients reconnect to the primary event broker, and verify message flow.</li>
    </ol>
    <h2 class="with-rule"><a name="managing_router_redundancy_2753819523_329670">
            </a>Validating Active/Active Failover Operation</h2>
    <p>Given physical event brokers <code>R1</code> and <code>R2</code>, the following steps are recommended to validate active/active failover. Validate message flows for all Message VPNs configured on the event brokers.</p>
    <ol>
      <li>Connect Direct clients to the two virtual routers (one on each physical event broker), and verify message flow on both virtual routers.</li>
      <li>Run the <code>release-activity</code> Redundancy CONFIG command on <code>R1</code>. Verify that <code>R1</code>’s clients reconnect to <code>R2</code>, and verify message flow for both virtual routers.</li>
      <li>Run the <code>no release-activity</code> Redundancy CONFIG command on <code>R1</code>.</li>
      <li>Run the <code>redundancy revert-activity</code> Admin EXEC command on <code>R2</code>. Verify that <code>R1</code> takes over activity for it’s primary virtual router, and that <code>R1</code>’s clients reconnect to <code>R1</code>. Verify message flow on both virtual routers.</li>
      <li>Run the <code>release-activity</code> Redundancy CONFIG command on <code>R2</code>. Verify that <code>R2</code>’s clients reconnect to R1, and verify message flow for both virtual routers.</li>
      <li>Run the <code>no release-activity</code> Redundancy CONFIG command on <code>R2</code>.</li>
      <li>Run the <code>redundancy revert-activity</code> Admin EXEC command on <code>R1</code>. Verify that <code>R2</code> takes over activity for it’s primary virtual router, and that <code>R2</code>’s clients reconnect to <code>R2</code>. Verify message flow on both virtual routers.</li>
    </ol>
  </body>
</html>
