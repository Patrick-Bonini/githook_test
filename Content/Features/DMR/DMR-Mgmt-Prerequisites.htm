<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
  <head>
    </head>
  <body>
    <h1>Prerequisites</h1>
    <p>Before configuring the Dynamic Message Routing (DMR) settings for each event broker used throughout the message routing network, ensure that you read and observe ALL of the following information:</p>
    <ul>
      <li>
        <p>A DMR node consists of a standalone event broker, an HA group for <MadCap:variable name="Product-Names.broker_sw_short"/>s, or an HA pair of appliances using the active/standby redundancy model. DMR does not support the active/active redundancy model. </p>
        <p> Appliances that are configured in high-availability (HA) redundant pairs must have their redundancy role configured as <code>primary</code> or <code>backup</code>. For more information, see <MadCap:xref href="../HA-Redundancy/Configuring-Appliance-Redundancy-Parameters.htm#assign-active-standby-role">Assigning the Active/Standby Role</MadCap:xref>.</p>
      </li>
      <li>
        <p>Before you can configure DMR, you must know the address (IP or FQDN) of the message backbone for all event brokers or HA groups/redundant pairs.</p>
      </li>
      <li>
        <p>The message backbone must be enabled on each event broker. For more information, see<MadCap:xref href="../../Services/Managing-Services.htm#Enable-All-Services"> Enabling All Messaging Services</MadCap:xref>.</p>
      </li>
      <li>
        <p>The SMF service must be enabled on each event broker. For more information, see <MadCap:xref href="../../Services/Managing-Services.htm#SMF-Service">SMF Service Management</MadCap:xref>.</p>
      </li>
      <li>
        <p>The event brokers must have unique physical router names. For more information, see <![CDATA[  ]]><MadCap:xref href="../../Admin/Configuring-Event-Broker-Names.htm">Router Name Configuration</MadCap:xref>.</p>
      </li>
      <li>
        <p>On <MadCap:variable name="Product-Names.broker_sw_short"/>s, the  <code>max-connections</code> system scaling parameter must be set to 1000 or greater on each node. For more information, see <![CDATA[  ]]><MadCap:xref href="../../Software-Broker/System-Scaling-Parameters.htm">Modifying System Limits using System Scaling Parameters</MadCap:xref>.</p>
      </li>
    </ul>
    <h2><a name="network-rules"/>Network Construction Rules</h2>
    <p>For the nodes in an event mesh to automatically discover the correct message routing:</p>
    <ul>
      <li>each node must belong to a cluster (that is, a cluster must be created on each node; see <MadCap:xref href="DMR-Mgmt-Cluster-Config.htm">Configuring a DMR Cluster</MadCap:xref>)</li>
      <li>DMR must be enabled on every participating Message VPN on every node in the cluster. For more information, see <MadCap:xref href="DMR-Mgmt-Mode-Config.htm">Enabling and Disabling DMR Mode</MadCap:xref>.</li>
      <li>the set of participating Message VPNs must be the same on each node in the cluster.</li>
    </ul>
    <p>In addition, DMR networks must comply with the following <a href="DMR-Mgmt-Cluster-Link-Config.htm" class="link-internal">cluster linking</a> rules, otherwise the system may raise topology errors:</p>
    <ul>
      <li>There can be only one cluster link between each pair of nodes.</li>
      <li>For <b>horizontal scaling</b> configurations, each node within a cluster must be connected to every other node with an internal link. In other words, there must be a full mesh of internal links between nodes.</li>
      <li>For <b>multi-site connectivity</b> configurations, clusters are connected together with external links between gateway nodes to permit messages published in one cluster to be delivered to consumers connected to another cluster. It is not necessary to have a full mesh of external links between clusters. In other words, each cluster in the network doesn't need to be connected to every other cluster; however, only clusters that are directly connected via an external link can exchange messages.</li>
    </ul>
  </body>
</html>
